var We=Object.defineProperty;var et=(n,a,t)=>a in n?We(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t;var q=(n,a,t)=>et(n,typeof a!="symbol"?a+"":a,t);import{j as e,m as Z,A as be}from"./vendor-motion-_XdJ9pBm.js";import{r as m,u as tt,h as st}from"./vendor-react-B4msnGgW.js";import{c as at,b as rt,X as K,O as Ie,n as Pe,r as ye,T as he,C as oe,F as Oe,e as it,g as nt,h as ot,E as Ae,R as ae,a as je,L as xe,s as A,u as Te,B as pe,S as Ee,k as lt,U as ct,i as dt}from"./index-BbSeE-q4.js";import{F as mt}from"./FloatingParticles-DT4T20-4.js";import{C as ut}from"./ChristmasSnow-BRNxvkei.js";import{j as ge}from"./jobsService--I8tbRfO.js";import{J as pt}from"./JobCard-CwFOHr-9.js";import{S as ht}from"./search-DiwtcWwp.js";import{S as xt,P as gt}from"./Pagination-CnHyRBza.js";import{B as ft,j as V}from"./jobUpdatesService-uAKDJqBS.js";import{I as bt}from"./indian-rupee-CtMJjFIv.js";import{E as X}from"./external-link-CSmvpDBS.js";import{T as yt}from"./tag-DQBqne1U.js";import{R as jt,G as wt}from"./ResumePreview-Br_JyetK.js";import{D as De}from"./download-DWlYtjQA.js";import{B as vt}from"./building-2-B7dH_DvY.js";import{Z as ze}from"./zap-BGmE2sY4.js";import{r as Me,a as Nt}from"./resumeAnalysisService-CK8PLPdm.js";import{u as fe}from"./userPreferencesService-DZIYREKg.js";import{e as kt}from"./edenAITextService-y6w1oEiu.js";import{C as Ue}from"./check-circle-2-CTQiiFfd.js";import{C as $e}from"./code-GxPtUTRK.js";import{U as St}from"./upload-CurydzNZ.js";import{P as _t}from"./plus-C66eGFjH.js";import{g as At}from"./geminiServiceWrapper-tvm4MzT7.js";import{E as Ct}from"./vendor-pdf-B1igRwBP.js";import{u as It,i as Pt}from"./useSEO-DCRvpjAE.js";import"./vendor-supabase-B_87WqdG.js";import"./vendor-forms-BxTF4-4_.js";import"./chevron-left-Dbkualgq.js";import"./chevron-right-CPxmRku4.js";import"./supabase-DdGTG0kf.js";import"./rotate-ccw-BQdMKeUh.js";import"./maximize-2-jpotZCLP.js";import"./index-4HxsnF8w.js";import"./aiProxyService-HwcJnoDm.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=at("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),Je=({children:n,className:a="",glow:t=!0,hoverLift:s=4,delay:r=0,onClick:o})=>e.jsx(Z.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.5,delay:r},whileHover:{y:-s,transition:{duration:.3}},className:`
        card-surface p-5 sm:p-6
        ${t?"hover:shadow-emerald-glow hover:border-emerald-500/30":""}
        transition-all duration-300
        ${o?"cursor-pointer":""}
        ${a}
      `,onClick:o,children:n}),ne=({children:n,variant:a="primary",size:t="md",icon:s,onClick:r,disabled:o=!1,className:i="",type:l="button"})=>{const d={sm:"h-10 px-4 text-sm",md:"h-12 px-6 text-base",lg:"h-14 px-8 text-lg"},u={primary:"bg-gradient-to-r from-emerald-500 to-cyan-500 text-white hover:from-emerald-400 hover:to-cyan-400 shadow-emerald-glow hover:shadow-emerald-glow-lg",secondary:"bg-slate-800/50 text-slate-200 border border-slate-700 hover:bg-slate-700/50 hover:border-emerald-500/30",outline:"bg-transparent text-emerald-400 border border-emerald-500/50 hover:bg-emerald-500/10 hover:border-emerald-400"};return e.jsxs(Z.button,{type:l,onClick:r,disabled:o,whileHover:{scale:o?1:1.02},whileTap:{scale:o?1:.98},transition:{type:"spring",stiffness:400},className:`
        ${u[a]}
        ${d[t]}
        rounded-xl font-semibold
        relative overflow-hidden
        flex items-center justify-center gap-2
        transition-all duration-300
        disabled:opacity-50 disabled:cursor-not-allowed
        group
        ${i}
      `,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),s&&e.jsx(s,{className:"w-5 h-5 relative z-10"}),e.jsx("span",{className:"relative z-10",children:n})]})},Ft=({filters:n,onFiltersChange:a,isLoading:t})=>{const[s,r]=m.useState(!1),[o,i]=m.useState({domains:[],locationTypes:[],experienceLevels:[],eligibleYears:[],packageRanges:{min:0,max:1e6}});m.useEffect(()=>{l()},[]);const l=async()=>{try{const c=await ge.getFilterOptions();i(c)}catch(c){console.error("Error loading filter options:",c)}},d=(c,w)=>{a({...n,[c]:w})},u=c=>{const w={...n};delete w[c],a(w)},g=()=>{a({})},h=()=>Object.values(n).filter(c=>c!==void 0&&c!=="").length;return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl shadow-lg border border-slate-700/50 p-6",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(ht,{className:"h-5 w-5 text-slate-400"})}),e.jsx("input",{type:"text",placeholder:"Search jobs, companies, or keywords...",value:n.search||"",onChange:c=>d("search",c.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 text-slate-100 placeholder-slate-400"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("button",{onClick:()=>r(!s),className:"flex items-center space-x-2 bg-emerald-500/20 text-emerald-400 px-4 py-2 rounded-lg hover:bg-emerald-500/30 transition-colors border border-emerald-500/30",children:[e.jsx(xt,{className:"w-4 h-4"}),e.jsx("span",{children:"Filters"}),h()>0&&e.jsx("span",{className:"bg-emerald-500 text-white text-xs px-2 py-1 rounded-full",children:h()}),e.jsx(rt,{className:`w-4 h-4 transition-transform ${s?"rotate-180":""}`})]}),h()>0&&e.jsxs("button",{onClick:g,className:"text-sm text-slate-400 hover:text-slate-200 flex items-center space-x-1",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:"Clear all"})]})]}),h()>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Object.entries(n).map(([c,w])=>w?e.jsxs(Z.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex items-center bg-cyan-500/20 text-cyan-300 px-3 py-1 rounded-full text-sm border border-cyan-500/30",children:[e.jsxs("span",{className:"capitalize",children:[c.replace("_"," "),": ",w]}),e.jsx("button",{onClick:()=>u(c),className:"ml-2 hover:text-cyan-100",children:e.jsx(K,{className:"w-3 h-3"})})]},c):null)}),e.jsx(be,{children:s&&e.jsx(Z.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pt-4 border-t border-slate-700/50",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[e.jsx(ft,{className:"w-4 h-4 inline mr-1"}),"Domain"]}),e.jsxs("select",{value:n.domain||"",onChange:c=>d("domain",c.target.value||void 0),className:"w-full px-3 py-2 bg-slate-800/50 border border-slate-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-slate-100",children:[e.jsx("option",{value:"",children:"All Domains"}),o.domains.map(c=>e.jsx("option",{value:c,children:c},c))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[e.jsx(Ie,{className:"w-4 h-4 inline mr-1"}),"Location Type"]}),e.jsxs("select",{value:n.location_type||"",onChange:c=>d("location_type",c.target.value||void 0),className:"w-full px-3 py-2 bg-slate-800/50 border border-slate-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-slate-100",children:[e.jsx("option",{value:"",children:"All Locations"}),o.locationTypes.map(c=>e.jsx("option",{value:c,children:c},c))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[e.jsx(Pe,{className:"w-4 h-4 inline mr-1"}),"Experience"]}),e.jsxs("select",{value:n.experience_required||"",onChange:c=>d("experience_required",c.target.value||void 0),className:"w-full px-3 py-2 bg-slate-800/50 border border-slate-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-slate-100",children:[e.jsx("option",{value:"",children:"All Experience Levels"}),o.experienceLevels.map(c=>e.jsx("option",{value:c,children:c},c))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[e.jsx(ye,{className:"w-4 h-4 inline mr-1"}),"Eligible Year"]}),e.jsxs("select",{value:n.eligible_year||"",onChange:c=>d("eligible_year",c.target.value||void 0),className:"w-full px-3 py-2 bg-slate-800/50 border border-slate-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-slate-100",children:[e.jsx("option",{value:"",children:"All Eligible Years"}),o.eligibleYears.map(c=>e.jsx("option",{value:c,children:c},c))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[e.jsx(bt,{className:"w-4 h-4 inline mr-1"}),"Package Range (₹)"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",placeholder:"Min",value:n.package_min||"",onChange:c=>d("package_min",c.target.value?parseInt(c.target.value):void 0),className:"flex-1 px-3 py-2 bg-slate-800/50 border border-slate-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-slate-100 placeholder-slate-400"}),e.jsx("input",{type:"number",placeholder:"Max",value:n.package_max||"",onChange:c=>d("package_max",c.target.value?parseInt(c.target.value):void 0),className:"flex-1 px-3 py-2 bg-slate-800/50 border border-slate-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-slate-100 placeholder-slate-400"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[e.jsx(Tt,{className:"w-4 h-4 inline mr-1"}),"Sort By"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{value:n.sort_by||"posted_date",onChange:c=>d("sort_by",c.target.value),className:"flex-1 px-3 py-2 bg-slate-800/50 border border-slate-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-slate-100",children:[e.jsx("option",{value:"posted_date",children:"Date Posted"}),e.jsx("option",{value:"package_amount",children:"Package"}),e.jsx("option",{value:"company_name",children:"Company"})]}),e.jsxs("select",{value:n.sort_order||"desc",onChange:c=>d("sort_order",c.target.value),className:"px-3 py-2 bg-slate-800/50 border border-slate-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-slate-100",children:[e.jsx("option",{value:"desc",children:"Desc"}),e.jsx("option",{value:"asc",children:"Asc"})]})]})]})]})})})]})},Rt=()=>{const[n,a]=m.useState([]),[t,s]=m.useState([]),[r,o]=m.useState(!0),[i,l]=m.useState(null);m.useEffect(()=>{d()},[]);const d=async()=>{try{o(!0);const[u,g]=await Promise.all([V.getLatestUpdates(6),V.getFeaturedUpdates()]);a(u),s(g)}catch(u){console.error("Error loading updates:",u)}finally{o(!1)}};return r?e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})]})}):n.length===0?null:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg border border-blue-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(he,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Latest Job Market Updates"})]}),t.length>0&&e.jsx("div",{className:"mb-6 pb-6 border-b border-blue-200",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(u=>e.jsx(Mt,{update:u,onClick:()=>l(u)},u.id))})}),e.jsx("div",{className:"space-y-3",children:n.map(u=>e.jsx(Ut,{update:u,onClick:()=>l(u)},u.id))})]}),i&&e.jsx(Jt,{update:i,onClose:()=>l(null)})]})},Mt=({update:n,onClick:a})=>e.jsxs("div",{onClick:a,className:"bg-white rounded-lg border-2 border-yellow-300 p-4 cursor-pointer hover:shadow-lg transition-all hover:scale-105",children:[n.image_url&&e.jsx("img",{src:n.image_url,alt:n.title,className:"w-full h-32 object-cover rounded-lg mb-3"}),e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full border flex-shrink-0 ${V.getCategoryColor(n.category)}`,children:V.getCategoryLabel(n.category)}),e.jsx("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full border border-yellow-300",children:"Featured"})]}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:n.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-xs text-gray-500",children:[e.jsx(ye,{className:"w-3 h-3"}),new Date(n.published_at).toLocaleDateString()]})]}),Ut=({update:n,onClick:a})=>{var t;return e.jsx("div",{onClick:a,className:"bg-white rounded-lg border border-gray-200 p-4 cursor-pointer hover:shadow-md hover:border-blue-300 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${V.getCategoryColor(n.category)}`,children:V.getCategoryLabel(n.category)}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(n.published_at).toLocaleDateString()})]}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:n.description}),((t=n.metadata)==null?void 0:t.tags)&&n.metadata.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:n.metadata.tags.slice(0,3).map((s,r)=>e.jsxs("span",{className:"text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded",children:["#",s]},r))})]}),n.image_url&&e.jsx("img",{src:n.image_url,alt:n.title,className:"w-20 h-20 object-cover rounded-lg flex-shrink-0"})]})})},Jt=({update:n,onClose:a})=>{var t,s,r,o;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${V.getCategoryColor(n.category)}`,children:V.getCategoryLabel(n.category)}),n.is_featured&&e.jsx("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full border border-yellow-300",children:"Featured"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(K,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[n.image_url&&e.jsx("img",{src:n.image_url,alt:n.title,className:"w-full h-64 object-cover rounded-lg mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:n.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:"w-4 h-4"}),new Date(n.published_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),n.source_platform&&e.jsxs("span",{children:["Source: ",n.source_platform]})]}),e.jsx("p",{className:"text-lg text-gray-700 mb-4",children:n.description}),e.jsx("div",{className:"prose max-w-none mb-6",children:e.jsx("div",{className:"whitespace-pre-wrap text-gray-800",children:n.content})}),((t=n.metadata)==null?void 0:t.stats)&&Object.keys(n.metadata.stats).length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Key Statistics"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(n.metadata.stats).map(([i,l])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[i,":"]}),e.jsx("span",{className:"font-semibold text-gray-900",children:l})]},i))})]}),((s=n.metadata)==null?void 0:s.companies)&&n.metadata.companies.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Related Companies"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.metadata.companies.map((i,l)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:i},l))})]}),((r=n.metadata)==null?void 0:r.links)&&n.metadata.links.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Related Links"}),e.jsx("div",{className:"space-y-2",children:n.metadata.links.map((i,l)=>e.jsxs("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:underline",children:[e.jsx(X,{className:"w-4 h-4"}),i.title]},l))})]}),((o=n.metadata)==null?void 0:o.tags)&&n.metadata.tags.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(yt,{className:"w-4 h-4"}),"Tags"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.metadata.tags.map((i,l)=>e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-sm",children:["#",i]},l))})]}),n.external_link&&e.jsxs("a",{href:n.external_link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(X,{className:"w-4 h-4"}),"View Original Source"]})]})]})})},Ot=({isOpen:n,onClose:a,job:t,optimizedResume:s,onConfirm:r})=>{if(!n||!t||!s)return null;const o=l=>{l.target===l.currentTarget&&a()},i=()=>{s.pdf_url&&window.open(s.pdf_url,"_blank")};return e.jsx(be,{children:e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 backdrop-blur-sm",onClick:o,children:e.jsxs(Z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[95vh] overflow-hidden dark:bg-dark-100",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-50 to-purple-50 p-6 border-b border-gray-200 dark:from-dark-200 dark:to-dark-300 dark:border-dark-400",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 w-10 h-10 flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors rounded-full hover:bg-white/50",children:e.jsx(K,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-center pr-16",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(oe,{className:"w-8 h-8 text-white"})}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:["Resume Optimized for ",t.role_title]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Your resume has been tailored for ",e.jsx("strong",{children:t.company_name})]}),e.jsx("div",{className:"flex items-center justify-center space-x-4 mt-4",children:e.jsx("div",{className:"bg-white rounded-lg px-4 py-2 shadow-sm dark:bg-dark-100",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Optimization Score:",e.jsxs("span",{className:"text-green-600 font-bold ml-1",children:[s.optimization_score,"/100"]})]})]})})})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row h-full max-h-[70vh]",children:[e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[e.jsx(Oe,{className:"w-5 h-5 mr-2 text-blue-600"}),"Optimized Resume Preview"]}),e.jsx("div",{className:"border border-gray-200 rounded-xl overflow-hidden dark:border-dark-300",children:e.jsx(jt,{resumeData:s.resume_content,userType:"experienced"})})]}),e.jsxs("div",{className:"w-full lg:w-80 bg-gray-50 p-6 border-l border-gray-200 dark:bg-dark-200 dark:border-dark-300",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[e.jsx(it,{className:"w-5 h-5 mr-2 text-purple-600"}),"Job Details"]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.role_title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t.company_name})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Domain:"})," ",t.domain]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Location:"})," ",t.location_type]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Experience:"})," ",t.experience_required]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Qualification:"})," ",t.qualification]})]}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-3 dark:bg-blue-900/20",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-300 leading-relaxed",children:t.short_description})})]}),e.jsxs("div",{className:"space-y-3",children:[s.pdf_url&&e.jsxs("button",{onClick:i,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl font-semibold transition-colors flex items-center justify-center space-x-2",children:[e.jsx(De,{className:"w-5 h-5"}),e.jsx("span",{children:"Download Resume"})]}),e.jsxs("button",{onClick:r,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white py-3 px-4 rounded-xl font-semibold transition-all duration-300 flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl",children:[e.jsx(X,{className:"w-5 h-5"}),e.jsx("span",{children:"Proceed to Apply"})]}),e.jsx("button",{onClick:a,className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-700 py-3 px-4 rounded-xl font-semibold transition-colors dark:bg-dark-300 dark:hover:bg-dark-400 dark:text-gray-300",children:"Cancel"})]})]})]})]})})})},Et=({isOpen:n,onClose:a,job:t,result:s})=>{if(!n||!t||!s)return null;const r=i=>{i.target===i.currentTarget&&a()},o=s.success&&s.status==="submitted";return e.jsx(be,{children:e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 backdrop-blur-sm",onClick:r,children:e.jsxs(Z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[95vh] overflow-y-auto dark:bg-dark-100",children:[e.jsxs("div",{className:`relative p-6 border-b border-gray-200 dark:border-dark-300 ${o?"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20":"bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20"}`,children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 w-10 h-10 flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors rounded-full hover:bg-white/50",children:e.jsx(K,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-center pr-16",children:[e.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg ${o?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-red-500 to-orange-500"}`,children:o?e.jsx(oe,{className:"w-8 h-8 text-white"}):e.jsx(nt,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:o?"Application Submitted!":"Application Failed"}),e.jsx("p",{className:`text-lg ${o?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:s.message})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 dark:bg-dark-200",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3 flex items-center",children:[e.jsx(vt,{className:"w-5 h-5 mr-2 text-blue-600"}),"Application Details"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Position:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.role_title})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Company:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.company_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Method:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100 flex items-center",children:s.status==="submitted"&&s.screenshotUrl?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-4 h-4 mr-1 text-purple-600"}),"Auto Apply"]}):e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"w-4 h-4 mr-1 text-blue-600"}),"Manual Apply"]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Applied on:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:new Date().toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 mb-6 dark:bg-blue-900/20",children:[e.jsxs("h3",{className:"font-semibold text-blue-900 dark:text-blue-300 mb-3 flex items-center",children:[e.jsx(Ae,{className:"w-5 h-5 mr-2"}),"Application Proof"]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.resumeUrl&&e.jsxs("a",{href:s.resumeUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{children:"Download Resume"})]}),s.screenshotUrl&&e.jsxs("a",{href:s.screenshotUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{children:"View Screenshot"})]})]})]}),!o&&s.error&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6 dark:bg-red-900/20 dark:border-red-500/50",children:[e.jsx("h3",{className:"font-semibold text-red-900 dark:text-red-300 mb-2",children:"Error Details"}),e.jsx("p",{className:"text-red-700 dark:text-red-400 text-sm",children:s.error}),s.fallbackUrl&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-red-700 dark:text-red-400 text-sm mb-2",children:"You can try applying manually using the link below:"}),e.jsxs("a",{href:s.fallbackUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"Apply Manually"})]})]})]}),o&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6 dark:bg-green-900/20 dark:border-green-500/50",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(oe,{className:"w-5 h-5 text-green-600 mr-2"}),e.jsx("h3",{className:"font-semibold text-green-900 dark:text-green-300",children:"Next Steps"})]}),e.jsxs("ul",{className:"text-green-700 dark:text-green-400 text-sm space-y-1",children:[e.jsx("li",{children:"• Your application has been submitted successfully"}),e.jsx("li",{children:"• Keep an eye on your email for responses"}),e.jsx("li",{children:"• Follow up in 1-2 weeks if no response"}),e.jsx("li",{children:"• Continue applying to similar positions"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:a,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl",children:o?"Continue Job Search":"Close"})})]})]})})})};class Dt{constructor(){q(this,"config");q(this,"isAvailable",!1);const a="",t=parseInt("60000"),s=!0;this.config={wsEndpoint:a,timeout:t,headless:s},this.isAvailable=!1}isBrowserlessAvailable(){return this.isAvailable}getConfig(){return{...this.config}}async analyzeForm(a){if(!this.isAvailable)throw new Error("Browserless service not configured");const r=await fetch("https://rixmudvtbfkjpwjoefon.supabase.co/functions/v1/browserless-automation",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpeG11ZHZ0YmZranB3am9lZm9uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1ODk4NzIsImV4cCI6MjA2NjE2NTg3Mn0.PQss75_gbLaiJDFxKvCuHNirUVkKUGrINYGO1oewQGA"},body:JSON.stringify({action:"analyze",url:a,browserConfig:this.config})});if(!r.ok){const o=await r.text();throw new Error(`Form analysis failed: ${o}`)}return await r.json()}async navigateToApplication(a){if(!this.isAvailable)return{success:!1,url:a,title:"",error:"Browserless service not configured"};const r=await fetch("https://rixmudvtbfkjpwjoefon.supabase.co/functions/v1/browserless-automation",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpeG11ZHZ0YmZranB3am9lZm9uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1ODk4NzIsImV4cCI6MjA2NjE2NTg3Mn0.PQss75_gbLaiJDFxKvCuHNirUVkKUGrINYGO1oewQGA"},body:JSON.stringify({action:"navigate",url:a,browserConfig:this.config})});if(!r.ok){const o=await r.text();return{success:!1,url:a,title:"",error:`Navigation failed: ${o}`}}return await r.json()}async fillApplicationForm(a,t,s){if(!this.isAvailable)return{success:!1,fieldsFilled:{},fieldsSkipped:Object.keys(t),error:"Browserless service not configured"};const i=await fetch("https://rixmudvtbfkjpwjoefon.supabase.co/functions/v1/browserless-automation",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpeG11ZHZ0YmZranB3am9lZm9uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1ODk4NzIsImV4cCI6MjA2NjE2NTg3Mn0.PQss75_gbLaiJDFxKvCuHNirUVkKUGrINYGO1oewQGA"},body:JSON.stringify({action:"fill",url:a,formData:t,fieldMappings:s,browserConfig:this.config})});if(!i.ok){const l=await i.text();return{success:!1,fieldsFilled:{},fieldsSkipped:Object.keys(t),error:`Form filling failed: ${l}`}}return await i.json()}async uploadResume(a,t,s){if(!this.isAvailable)return{success:!1,error:"Browserless service not configured"};const i=await fetch("https://rixmudvtbfkjpwjoefon.supabase.co/functions/v1/browserless-automation",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpeG11ZHZ0YmZranB3am9lZm9uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1ODk4NzIsImV4cCI6MjA2NjE2NTg3Mn0.PQss75_gbLaiJDFxKvCuHNirUVkKUGrINYGO1oewQGA"},body:JSON.stringify({action:"upload",sessionId:a,resumeUrl:t,fileInputSelector:s,browserConfig:this.config})});return i.ok?await i.json():{success:!1,error:`Resume upload failed: ${await i.text()}`}}async submitApplication(a){if(!this.isAvailable)return{success:!1,error:"Browserless service not configured"};const r=await fetch("https://rixmudvtbfkjpwjoefon.supabase.co/functions/v1/browserless-automation",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpeG11ZHZ0YmZranB3am9lZm9uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1ODk4NzIsImV4cCI6MjA2NjE2NTg3Mn0.PQss75_gbLaiJDFxKvCuHNirUVkKUGrINYGO1oewQGA"},body:JSON.stringify({action:"submit",sessionId:a,browserConfig:this.config})});return r.ok?await r.json():{success:!1,error:`Application submission failed: ${await r.text()}`}}async captureScreenshot(a){if(!this.isAvailable)return null;try{const r=await fetch("https://rixmudvtbfkjpwjoefon.supabase.co/functions/v1/browserless-automation",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpeG11ZHZ0YmZranB3am9lZm9uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1ODk4NzIsImV4cCI6MjA2NjE2NTg3Mn0.PQss75_gbLaiJDFxKvCuHNirUVkKUGrINYGO1oewQGA"},body:JSON.stringify({action:"screenshot",sessionId:a,browserConfig:this.config})});return r.ok&&(await r.json()).screenshot||null}catch(t){return console.error("Screenshot capture failed:",t),null}}async closeBrowserSession(a){if(this.isAvailable)try{await fetch("https://rixmudvtbfkjpwjoefon.supabase.co/functions/v1/browserless-automation",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpeG11ZHZ0YmZranB3am9lZm9uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1ODk4NzIsImV4cCI6MjA2NjE2NTg3Mn0.PQss75_gbLaiJDFxKvCuHNirUVkKUGrINYGO1oewQGA"},body:JSON.stringify({action:"close",sessionId:a})})}catch(t){console.error("Failed to close browser session:",t)}}async testConnection(){if(!this.isAvailable)return!1;try{return(await fetch("https://rixmudvtbfkjpwjoefon.supabase.co/functions/v1/browserless-automation",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpeG11ZHZ0YmZranB3am9lZm9uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1ODk4NzIsImV4cCI6MjA2NjE2NTg3Mn0.PQss75_gbLaiJDFxKvCuHNirUVkKUGrINYGO1oewQGA"},body:JSON.stringify({action:"health"}),signal:AbortSignal.timeout(1e4)})).ok}catch(a){return console.error("Browserless connection test failed:",a),!1}}}const H=new Dt,zt={platform:"linkedin",detectUrl:n=>n.toLowerCase().includes("linkedin.com"),requiresLogin:!0,estimatedComplexity:"moderate",getFieldMappings:()=>[{fieldName:"firstName",fieldType:"text",value:"",selector:'input[name="firstName"]'},{fieldName:"lastName",fieldType:"text",value:"",selector:'input[name="lastName"]'},{fieldName:"email",fieldType:"email",value:"",selector:'input[name="email"]'},{fieldName:"phone",fieldType:"tel",value:"",selector:'input[name="phone"]'}],getSubmitButtonSelector:()=>'button[type="submit"], button[aria-label*="Submit"], button:has-text("Submit application")',getFileUploadSelector:()=>'input[type="file"][name*="resume"], input[type="file"][accept*="pdf"]',getNavigationSteps:()=>['Click "Easy Apply" button',"Wait for application modal to open","Fill in required fields","Upload resume if requested","Click through multi-step form if needed","Submit application"]},$t={platform:"workday",detectUrl:n=>n.toLowerCase().includes("workday")||n.toLowerCase().includes("myworkdayjobs"),requiresLogin:!1,estimatedComplexity:"complex",getFieldMappings:()=>[{fieldName:"name",fieldType:"text",value:"",selector:'input[data-automation-id*="legalName"], input[name*="name"]'},{fieldName:"email",fieldType:"email",value:"",selector:'input[data-automation-id*="email"], input[type="email"]'},{fieldName:"phone",fieldType:"tel",value:"",selector:'input[data-automation-id*="phone"], input[type="tel"]'},{fieldName:"address",fieldType:"text",value:"",selector:'input[data-automation-id*="address"]'},{fieldName:"city",fieldType:"text",value:"",selector:'input[data-automation-id*="city"]'},{fieldName:"country",fieldType:"select",value:"",selector:'select[data-automation-id*="country"]'}],getSubmitButtonSelector:()=>'button[data-automation-id*="submit"], button[aria-label*="Submit"]',getFileUploadSelector:()=>'input[type="file"][data-automation-id*="resume"], input[type="file"][data-automation-id*="file"]',getNavigationSteps:()=>['Click "Apply" button on job posting',"Fill in personal information section","Complete work experience section","Upload resume and cover letter","Answer pre-screening questions","Review and submit application"]},Lt={platform:"greenhouse",detectUrl:n=>n.toLowerCase().includes("greenhouse.io")||n.toLowerCase().includes("boards.greenhouse"),requiresLogin:!1,estimatedComplexity:"moderate",getFieldMappings:()=>[{fieldName:"first_name",fieldType:"text",value:"",selector:'input[name="first_name"], input[id*="first_name"]'},{fieldName:"last_name",fieldType:"text",value:"",selector:'input[name="last_name"], input[id*="last_name"]'},{fieldName:"email",fieldType:"email",value:"",selector:'input[name="email"], input[type="email"]'},{fieldName:"phone",fieldType:"tel",value:"",selector:'input[name="phone"], input[type="tel"]'},{fieldName:"location",fieldType:"text",value:"",selector:'input[name="location"]'}],getSubmitButtonSelector:()=>'input[type="submit"][value*="Submit"], button[type="submit"]',getFileUploadSelector:()=>'input[type="file"][name*="resume"], input#resume',getNavigationSteps:()=>["Navigate to application form","Fill in contact information","Upload resume file","Answer application questions","Submit application"]},Bt={platform:"lever",detectUrl:n=>n.toLowerCase().includes("lever.co")||n.toLowerCase().includes("jobs.lever"),requiresLogin:!1,estimatedComplexity:"simple",getFieldMappings:()=>[{fieldName:"name",fieldType:"text",value:"",selector:'input[name="name"]'},{fieldName:"email",fieldType:"email",value:"",selector:'input[name="email"]'},{fieldName:"phone",fieldType:"tel",value:"",selector:'input[name="phone"]'},{fieldName:"org",fieldType:"text",value:"",selector:'input[name="org"]'},{fieldName:"urls[LinkedIn]",fieldType:"text",value:"",selector:'input[name="urls[LinkedIn]"]'},{fieldName:"urls[GitHub]",fieldType:"text",value:"",selector:'input[name="urls[GitHub]"]'}],getSubmitButtonSelector:()=>'button[type="submit"].template-btn-submit',getFileUploadSelector:()=>'input[type="file"][name="resume"]',getNavigationSteps:()=>["Fill in basic contact information","Upload resume","Add portfolio links if applicable","Submit application"]},Le={platform:"generic",detectUrl:()=>!0,requiresLogin:!1,estimatedComplexity:"moderate",getFieldMappings:()=>[{fieldName:"name",fieldType:"text",value:"",selector:'input[name*="name" i], input[id*="name" i], input[placeholder*="name" i]',alternatives:['input[name="fullname"]','input[name="full_name"]','input[name="applicant_name"]']},{fieldName:"email",fieldType:"email",value:"",selector:'input[type="email"], input[name*="email" i], input[id*="email" i]'},{fieldName:"phone",fieldType:"tel",value:"",selector:'input[type="tel"], input[name*="phone" i], input[id*="phone" i]'},{fieldName:"linkedin",fieldType:"text",value:"",selector:'input[name*="linkedin" i], input[id*="linkedin" i], input[placeholder*="linkedin" i]'},{fieldName:"github",fieldType:"text",value:"",selector:'input[name*="github" i], input[id*="github" i], input[placeholder*="github" i]'}],getSubmitButtonSelector:()=>'button[type="submit"], input[type="submit"], button:has-text("Submit"), button:has-text("Apply")',getFileUploadSelector:()=>'input[type="file"][accept*="pdf"], input[type="file"][name*="resume" i], input[type="file"][name*="cv" i]',getNavigationSteps:()=>["Analyze form structure","Fill detected fields","Upload resume if file input found","Submit form"]},Gt=[zt,$t,Lt,Bt,Le];function Yt(n){for(const a of Gt)if(a.platform!=="generic"&&a.detectUrl(n))return a;return Le}class Zt{constructor(){q(this,"baseUrl");q(this,"apiKey");q(this,"automationMode");const a="https://rixmudvtbfkjpwjoefon.supabase.co";this.automationMode="simulation",this.baseUrl=`${a}/functions/v1`,this.apiKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpeG11ZHZ0YmZranB3am9lZm9uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1ODk4NzIsImV4cCI6MjA2NjE2NTg3Mn0.PQss75_gbLaiJDFxKvCuHNirUVkKUGrINYGO1oewQGA"}getAutomationMode(){return this.automationMode}async analyzeApplicationForm(a){try{const t=await fetch(`${this.baseUrl}/analyze-form`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`,"X-Origin":"primoboost-ai"},body:JSON.stringify({url:a})});if(!t.ok)throw new Error(`Form analysis failed: ${t.status}`);return await t.json()}catch(t){throw console.error("Error analyzing application form:",t),new Error("Failed to analyze application form structure")}}async submitAutoApply(a){try{if(console.log(`ExternalBrowserService: Submitting auto-apply request in ${this.automationMode} mode...`),this.automationMode==="browserless")return await this.submitViaBrowserless(a);const t=this.automationMode==="external"?`${this.baseUrl}/auto-apply`:`${this.baseUrl}/auto-apply`,s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`,"X-Origin":"primoboost-ai","X-Automation-Mode":this.automationMode},body:JSON.stringify(a),signal:AbortSignal.timeout(18e4)});if(!s.ok){const o=await s.text();throw new Error(`Auto-apply request failed: ${s.status} - ${o}`)}const r=await s.json();return console.log("ExternalBrowserService: Auto-apply completed:",r.success),r}catch(t){throw console.error("Error in submitAutoApply:",t),t}}async submitViaBrowserless(a){const t=Date.now(),s=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;try{const r=Yt(a.applicationUrl).platform;console.log(`Detected platform: ${r}`);const o=await H.navigateToApplication(a.applicationUrl);if(!o.success)return{success:!1,message:"Failed to navigate to application page",status:"failed",error:o.error,processingTimeMs:Date.now()-t};const i=await H.fillApplicationForm(a.applicationUrl,a.userData);if(!i.success)return{success:!1,message:"Failed to fill application form",status:"partial",error:i.error,formFieldsFilled:i.fieldsFilled,screenshot:i.screenshot,processingTimeMs:Date.now()-t};if(a.resumeFileUrl){const d=await H.uploadResume(s,a.resumeFileUrl);d.success||console.warn("Resume upload failed:",d.error)}const l=await H.submitApplication(s);return await H.closeBrowserSession(s),{success:l.success,message:l.success?"Application submitted successfully via Browserless automation":"Application submission failed",status:l.success?"submitted":"failed",screenshotUrl:l.screenshot,error:l.error,formFieldsFilled:i.fieldsFilled,applicationConfirmationText:l.confirmationText,redirectUrl:l.redirectUrl,processingTimeMs:Date.now()-t}}catch(r){return await H.closeBrowserSession(s),{success:!1,message:"Browserless automation encountered an error",status:"failed",error:r.message,processingTimeMs:Date.now()-t}}}async getAutoApplyStatus(a){try{const t=this.automationMode==="simulation"?`${this.baseUrl}/auto-apply-status/${a}`:`${this.baseUrl}/auto-apply/status/${a}`,s=await fetch(t,{method:"GET",headers:{Authorization:`Bearer ${this.apiKey}`,"X-Origin":"primoboost-ai",apikey:this.apiKey}});if(!s.ok)return console.warn(`Status check returned ${s.status}, returning not_found status`),{status:"not_found",progress:0,currentStep:"Application record not found",estimatedTimeRemaining:0};const r=await s.json();return r.status==="not_found"&&console.warn(`Application ${a} not found in database`),r}catch(t){return console.error("Error checking auto-apply status:",t),{status:"not_found",progress:0,currentStep:"Unable to check status",estimatedTimeRemaining:0}}}async cancelAutoApply(a){try{return(await fetch(`${this.baseUrl}/auto-apply/cancel/${a}`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"X-Origin":"primoboost-ai"}})).ok}catch(t){return console.error("Error canceling auto-apply:",t),!1}}async testConnection(){try{return this.automationMode==="simulation"?!0:(await fetch(`${this.baseUrl}/health`,{method:"GET",headers:{Authorization:`Bearer ${this.apiKey}`,"X-Origin":"primoboost-ai"},signal:AbortSignal.timeout(1e4)})).ok}catch(a){return console.error("External browser service connection test failed:",a),!1}}isUsingMockMode(){return this.automationMode==="simulation"}getAutomationStatus(){return{mode:this.automationMode,isBrowserlessAvailable:H.isBrowserlessAvailable(),isExternalServiceConfigured:!1,isSimulationMode:this.automationMode==="simulation"}}}const Se=new Zt,Kt=({isOpen:n,onClose:a,applicationId:t,jobTitle:s,companyName:r,onComplete:o})=>{const[i,l]=m.useState("pending"),[d,u]=m.useState(0),[g,h]=m.useState("Initializing..."),[c,w]=m.useState(null),[f,T]=m.useState(null),[k,E]=m.useState("fast"),[v,_]=m.useState(0),[S,R]=m.useState(0),[b,y]=m.useState(!1),[F,M]=m.useState(!1),D=m.useRef(null),B=m.useRef(null),L=m.useRef(0),W=m.useRef(Date.now());m.useEffect(()=>{if(!n||!t){z();return}W.current=Date.now(),_(0),L.current=0,R(0);const j=Se.isUsingMockMode();if(M(j),j){G();return}return p(),z},[n,t,o]);const z=()=>{D.current&&(clearInterval(D.current),D.current=null),B.current&&(B.current.abort(),B.current=null)},G=()=>{l("processing"),u(20),h("Simulating application process..."),setTimeout(()=>{u(100),l("completed"),h("Application simulated successfully"),w({success:!0,message:"Auto-apply simulated successfully! (Demo Mode)",status:"submitted"}),o&&o({success:!0,message:"Auto-apply simulated successfully! (Demo Mode)",status:"submitted"})},2e3)},p=()=>{U(),N()},N=()=>{D.current&&clearInterval(D.current);const j=O();D.current=setInterval(()=>{U()},j)},O=()=>k==="fast"?2e3:k==="slow"?5e3:0,Y=()=>{switch(k){case"fast":return"Quick check mode";case"slow":return"Extended check mode";case"manual":return"Manual refresh available";default:return""}},U=async()=>{if(t)try{L.current++;const j=Math.floor((Date.now()-W.current)/1e3);_(j),re(L.current),B.current=new AbortController;const C=await Se.getAutoApplyStatus(t);if(C.status==="not_found"){J();return}R(0),l(C.status),u(C.progress||0),h(C.currentStep||"Processing..."),C.status==="completed"?$(C):C.status==="failed"&&we(C)}catch(j){if(console.error("Error polling auto-apply status:",j),j.name==="AbortError")return;const C=S+1;R(C),C>=3&&J()}},re=j=>{j<=10&&k!=="fast"?E("fast"):j>10&&j<=20&&k!=="slow"?(E("slow"),N()):j>20&&k!=="manual"&&(E("manual"),z())},J=()=>{z(),l("not_found"),T("Application record not available. Please retry or refresh."),console.warn(`Application ${t} not found after ${S} attempts`)},$=j=>{z();const C={success:!0,message:"Application submitted successfully!",status:"submitted",screenshotUrl:j.screenshotUrl};w(C),o&&o(C)},we=j=>{z(),T(j.errorMessage||"Application submission failed")},ve=async()=>{y(!0),await U(),y(!1)},ee=async()=>{if(t&&(i==="processing"||i==="pending"))try{await Se.cancelAutoApply(t),l("failed"),h("Cancelled by user")}catch(j){console.error("Error canceling auto-apply:",j)}z(),a()},Ne=()=>{switch(i){case"pending":case"processing":return e.jsx(xe,{className:"w-8 h-8 animate-spin text-blue-600"});case"completed":return e.jsx(oe,{className:"w-8 h-8 text-green-600"});case"failed":case"not_found":return e.jsx(je,{className:"w-8 h-8 text-red-600"});default:return e.jsx(Pe,{className:"w-8 h-8 text-gray-600"})}},te=()=>{switch(i){case"pending":case"processing":return"from-blue-50 to-sky-50";case"completed":return"from-green-50 to-emerald-50";case"failed":case"not_found":return"from-red-50 to-pink-50";default:return"from-gray-50 to-slate-50"}};return n?e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[95vh] overflow-y-auto dark:bg-dark-100",children:[e.jsxs("div",{className:`relative bg-gradient-to-r ${te()} p-6 border-b border-gray-200 dark:border-dark-300`,children:[e.jsx("button",{onClick:ee,className:"absolute top-4 right-4 w-10 h-10 flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors rounded-full hover:bg-white/50",children:e.jsx(K,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4",children:Ne()}),e.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:[i==="pending"&&"Preparing Application...",i==="processing"&&"Applying to Job...",i==="completed"&&"Application Submitted!",i==="failed"&&"Application Failed",i==="not_found"&&"Application Not Found"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[s," at ",r]})]})]}),e.jsxs("div",{className:"p-6",children:[(i==="pending"||i==="processing")&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[Math.round(d),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 dark:bg-dark-300",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-sky-600 h-3 rounded-full transition-all duration-300",style:{width:`${d}%`}})}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500 dark:text-gray-400 mt-2",children:[e.jsx("span",{children:g}),!F&&e.jsxs("span",{children:["Processing for ",v,"s"]})]}),!F&&k!=="manual"&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center",children:Y()})]}),e.jsx("div",{className:"space-y-3 mb-6",children:[{step:"Analyzing application form",completed:d>10},{step:"Filling personal details",completed:d>30},{step:"Uploading resume",completed:d>60},{step:"Submitting application",completed:d>80},{step:"Capturing confirmation",completed:d>=100}].map((j,C)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${j.completed?"bg-green-500 text-white":"bg-gray-200 text-gray-500"}`,children:j.completed?e.jsx(oe,{className:"w-4 h-4"}):e.jsx("span",{className:"text-xs",children:C+1})}),e.jsx("span",{className:`text-sm ${j.completed?"text-green-600 font-medium":"text-gray-600"}`,children:j.step})]},C))}),F&&(i==="processing"||i==="completed")&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-4 dark:bg-amber-900/20 dark:border-amber-500/50",children:[e.jsxs("h3",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center space-x-2",children:[e.jsx(ze,{className:"w-4 h-4"}),e.jsx("span",{children:"Simulation Mode Active"})]}),e.jsx("p",{className:"text-amber-700 dark:text-amber-400 text-xs",children:"Browser automation is not configured. This is a simulated application process for demonstration purposes."})]}),k==="manual"&&i==="processing"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-4 dark:bg-blue-900/20 dark:border-blue-500/50",children:[e.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Still Processing"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-400 text-sm mb-3",children:"Your application is still being processed. You can manually refresh to check the latest status."}),e.jsxs("button",{onClick:ve,disabled:b,className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-4 py-2 rounded-lg transition-colors text-sm",children:[e.jsx(ae,{className:`w-4 h-4 ${b?"animate-spin":""}`}),e.jsx("span",{children:b?"Refreshing...":"Refresh Status"})]})]}),i==="completed"&&c&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-4 dark:bg-green-900/20 dark:border-green-500/50",children:[e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Application Successful!"}),e.jsx("p",{className:"text-green-700 dark:text-green-400 text-sm mb-3",children:c.message}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.screenshotUrl&&e.jsxs("a",{href:c.screenshotUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{children:"View Screenshot"})]}),c.redirectUrl&&e.jsxs("a",{href:c.redirectUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"View Application"})]})]})]}),i==="failed"&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-4 dark:bg-red-900/20 dark:border-red-500/50",children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"Application Failed"}),e.jsx("p",{className:"text-red-700 dark:text-red-400 text-sm mb-3",children:f||"The automated application process encountered an error."}),e.jsx("p",{className:"text-red-600 dark:text-red-400 text-xs mb-3",children:"You can still apply manually using the job application link."})]}),i==="not_found"&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-4 dark:bg-red-900/20 dark:border-red-500/50",children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"Application Record Not Available"}),e.jsx("p",{className:"text-red-700 dark:text-red-400 text-sm mb-3",children:f||"This application cannot be tracked. It may have been removed or not properly created."}),e.jsx("p",{className:"text-red-600 dark:text-red-400 text-xs mb-3",children:"Please try applying again or use the manual application option."})]}),e.jsxs("div",{className:"flex space-x-3",children:[(i==="processing"||i==="pending")&&e.jsx("button",{onClick:ee,className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:"Cancel Application"}),(i==="failed"||i==="not_found")&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{const j=encodeURIComponent(`${s} ${r} jobs apply`);window.open(`https://www.google.com/search?q=${j}`,"_blank")},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-xl transition-colors flex items-center justify-center space-x-2",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"Apply Manually"})]}),e.jsx("button",{onClick:a,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:"Close"})]}),i==="completed"&&e.jsx("button",{onClick:a,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:"Close"})]})]})]})}):null};console.log("AIJobMatchingService: Using EdenAI for text generation");const Vt=`You are an intelligent career recommendation assistant for PrimoBoost AI.
Your goal is to analyze a candidate's resume, education year, job type preference, and technology interests,
and match them with the most relevant job listings from the database.

You must:
1. Read and extract candidate details (skills, experience, education, and role preferences) from the given resume.
2. Compare those details with the job listings provided (each job has skills, eligible_years, location_type, and domain).
3. Compute a match_score (0–100) and explain briefly why that job fits the candidate.
4. Filter out jobs below 40% match.
5. Return a sorted list of jobs in descending order of match_score, in JSON format only.

Be precise, structured, and helpful. Return ONLY valid JSON array, no markdown, no explanations.`;class Xt{async analyzeAndMatch(a,t,s){try{const r=this.filterJobsByPreferences(s,t);if(r.length===0)return console.log("No jobs match the basic criteria"),[];const o=r.slice(0,50).map(d=>({id:d.id,role_title:d.role_title,company_name:d.company_name,skills:d.skills||[],eligible_years:d.eligible_years,location_type:d.location_type,location_city:d.location_city,domain:d.domain,experience_required:d.experience_required,description:d.short_description||d.description})),i=`Here is the candidate profile and job listings data:

[Candidate Resume Text]
${t.resumeText}

[Candidate Preferences]
- Graduation Year: ${t.passoutYear}
- Role Type: ${t.roleType}
- Interested Technologies: ${t.techInterests.join(", ")}
- Preferred Mode: ${t.preferredModes.join(", ")}

[Job Listings from Database]
${JSON.stringify(o,null,2)}

Now, analyze and return a JSON array with this format:
[
  {
    "job_id": "<uuid>",
    "match_score": <integer>,
    "reason": "<short explanation of why it matches>",
    "skills_matched": ["React", "Node.js"],
    "location_match": true,
    "year_match": true
  }
]
Return only the JSON array, no text, no markdown.`,l=await this.callAIAPI(i);return await this.saveRecommendations(a,l),l}catch(r){throw console.error("Error in analyzeAndMatch:",r),r}}filterJobsByPreferences(a,t){return a.filter(s=>{if(!s.is_active)return!1;if(s.eligible_years){const r=Array.isArray(s.eligible_years)?s.eligible_years.join(","):s.eligible_years;if(!this.checkYearEligibility(r,t.passoutYear))return!1}if(t.roleType!=="both"){const r=s.experience_required.toLowerCase().includes("intern");if(t.roleType==="internship"&&!r||t.roleType==="fulltime"&&r)return!1}if(t.preferredModes.length>0){const r=s.location_type.toLowerCase();if(!t.preferredModes.some(i=>r.includes(i.toLowerCase())))return!1}return!0})}checkYearEligibility(a,t){const s=t.toString();return a.includes(s)}async callAIAPI(a){try{const t=`${Vt}

${a}`,s=await kt.generateTextWithRetry(t,{temperature:.3,maxTokens:4e3});if(!s)throw new Error("No content in AI response");const r=s.match(/\[[\s\S]*\]/);if(!r)throw new Error("Invalid JSON in AI response");return JSON.parse(r[0]).filter(i=>i.match_score>=40)}catch(t){throw console.error("EdenAI API call failed:",t),t}}async saveRecommendations(a,t){try{const s=t.map(o=>({user_id:a,job_id:o.job_id,match_score:o.match_score,match_reason:o.match_reason,skills_matched:o.skills_matched,location_match:o.location_match,year_match:o.year_match,is_dismissed:!1})),{error:r}=await A.from("ai_job_recommendations").upsert(s,{onConflict:"user_id,job_id",ignoreDuplicates:!1});if(r)throw console.error("Error saving recommendations:",r),r;console.log(`Successfully saved ${s.length} recommendations for user ${a}`)}catch(s){throw console.error("Error in saveRecommendations:",s),s}}async getRecommendations(a,t=40){try{const{data:s,error:r}=await A.rpc("get_user_recommended_jobs",{p_user_id:a,p_min_score:t});if(r)throw r;return s||[]}catch(s){return console.error("Error fetching recommendations:",s),[]}}async dismissRecommendation(a,t){try{const{error:s}=await A.from("ai_job_recommendations").update({is_dismissed:!0}).eq("user_id",a).eq("job_id",t);if(s)throw s}catch(s){throw console.error("Error dismissing recommendation:",s),s}}async shouldRefreshRecommendations(a){try{const{data:t,error:s}=await A.from("ai_job_recommendations").select("created_at").eq("user_id",a).order("created_at",{ascending:!1}).limit(1).single();return s||!t?!0:Math.floor((Date.now()-new Date(t.created_at).getTime())/(1e3*60*60*24))>=7}catch{return!0}}}const Ce=new Xt,Qt=["React","Angular","Vue","JavaScript","TypeScript","Node.js","Python","Java","C++","Go","Rust","PHP","Machine Learning","AI","Data Science","Cloud Computing","DevOps","Mobile Development","UI/UX Design","Cybersecurity"],qt=[{value:"remote",label:"Remote",icon:"🏠"},{value:"hybrid",label:"Hybrid",icon:"🔄"},{value:"onsite",label:"Onsite",icon:"🏢"}],Ht=({isOpen:n,onClose:a,onComplete:t})=>{const{user:s}=Te(),[r,o]=m.useState(1),[i,l]=m.useState(!1),[d,u]=m.useState(!1),[g,h]=m.useState(""),[c,w]=m.useState(null),[f,T]=m.useState(""),[k,E]=m.useState(2024),[v,_]=m.useState("both"),[S,R]=m.useState([]),[b,y]=m.useState(["remote","hybrid"]),F=5,M=async p=>{var Y;const N=(Y=p.target.files)==null?void 0:Y[0];if(!N)return;h(""),l(!0);const O=Me.validateFile(N);if(!O.valid){h(O.error||"Invalid file"),l(!1);return}try{const U=await Me.parseResume(N);if(U.hasError){h(U.errorMessage||"Failed to parse resume"),l(!1);return}w(N),T(U.text),R(U.skills.slice(0,10))}catch(U){h(U.message||"Failed to process resume")}finally{l(!1)}},D=()=>{if(r===1&&!c){h("Please upload your resume to continue");return}h(""),o(p=>Math.min(p+1,F))},B=()=>{h(""),o(p=>Math.max(p-1,1))},L=p=>{R(N=>N.includes(p)?N.filter(O=>O!==p):[...N,p])},W=p=>{y(N=>N.includes(p)?N.filter(O=>O!==p):[...N,p])},z=async()=>{if(s){u(!0),l(!0),h("");try{let p="";if(c){const O=await fe.uploadResume(s.id,c);O&&(p=O)}await fe.savePreferences({user_id:s.id,resume_text:f,resume_url:p,passout_year:k,role_type:v,tech_interests:S,preferred_modes:b,onboarding_completed:!0});const N=await ge.getAllJobs();await Ce.analyzeAndMatch(s.id,{resumeText:f,passoutYear:k,roleType:v,techInterests:S,preferredModes:b},N),t()}catch(p){h(p.message||"Failed to save preferences"),u(!1)}finally{l(!1)}}};if(!n)return null;const G=()=>{if(d)return e.jsx("div",{className:"space-y-6 py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative w-28 h-28 mx-auto mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-400 to-cyan-400 rounded-full animate-pulse"}),e.jsx("div",{className:"absolute inset-2 bg-slate-900 rounded-full flex items-center justify-center",children:e.jsx(xe,{className:"w-14 h-14 text-emerald-400 animate-spin"})})]}),e.jsx("h3",{className:"text-3xl font-bold text-slate-100 mb-4",children:"Finding Jobs..."}),e.jsx("p",{className:"text-lg text-slate-300 mb-2",children:"Analyzing your preferences and matching with opportunities"}),e.jsx("p",{className:"text-sm text-slate-500",children:"This may take a few moments"})]})});switch(r){case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-500/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 border border-blue-500/30",children:e.jsx(St,{className:"w-8 h-8 text-blue-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-100 mb-2",children:"Upload Your Resume"}),e.jsx("p",{className:"text-slate-400",children:"We'll analyze your skills and experience to recommend the best jobs"})]}),e.jsxs("div",{className:"border-2 border-dashed border-slate-700 rounded-xl p-8 text-center hover:border-emerald-500/50 transition-colors bg-slate-800/30",children:[e.jsx("input",{type:"file",id:"resume-upload",className:"hidden",accept:".pdf,.doc,.docx,.txt",onChange:M,disabled:i}),e.jsx("label",{htmlFor:"resume-upload",className:"cursor-pointer flex flex-col items-center",children:c?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"w-12 h-12 text-emerald-400 mb-3"}),e.jsx("p",{className:"text-lg font-semibold text-slate-100",children:c.name}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Click to change file"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-12 h-12 text-slate-500 mb-3"}),e.jsx("p",{className:"text-lg font-semibold text-slate-100",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"PDF, DOCX, or TXT (max 5MB)"})]})})]}),i&&e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-emerald-400",children:[e.jsx(xe,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Analyzing resume..."})]})]});case 2:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-purple-500/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 border border-purple-500/30",children:e.jsx(ye,{className:"w-8 h-8 text-purple-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-100 mb-2",children:"When did you graduate?"}),e.jsx("p",{className:"text-slate-400",children:"We'll match you with jobs for your batch"})]}),e.jsx("div",{className:"max-w-md mx-auto",children:e.jsx("select",{value:k,onChange:p=>E(Number(p.target.value)),className:"w-full px-4 py-3 rounded-xl border border-slate-700 bg-slate-800/50 text-slate-100 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-lg",children:Array.from({length:11},(p,N)=>2020+N).map(p=>e.jsx("option",{value:p,children:p},p))})})]});case 3:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-500/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 border border-green-500/30",children:e.jsx(pe,{className:"w-8 h-8 text-green-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-100 mb-2",children:"What role are you looking for?"}),e.jsx("p",{className:"text-slate-400",children:"Choose the type of opportunity you're interested in"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-3xl mx-auto",children:[{value:"internship",label:"Internship",icon:"🎓"},{value:"fulltime",label:"Full-time",icon:"💼"},{value:"both",label:"Both",icon:"🚀"}].map(p=>e.jsxs("button",{onClick:()=>_(p.value),className:`p-6 rounded-xl border-2 transition-all ${v===p.value?"border-emerald-500 bg-emerald-500/10":"border-slate-700 hover:border-emerald-500/50 bg-slate-800/30"}`,children:[e.jsx("div",{className:"text-4xl mb-2",children:p.icon}),e.jsx("div",{className:"text-lg font-semibold text-slate-100",children:p.label})]},p.value))})]});case 4:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-orange-500/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 border border-orange-500/30",children:e.jsx($e,{className:"w-8 h-8 text-orange-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-100 mb-2",children:"Which technologies interest you?"}),e.jsx("p",{className:"text-slate-400",children:"Select all that apply (we pre-selected from your resume)"})]}),e.jsx("div",{className:"flex flex-wrap gap-3 max-w-4xl mx-auto justify-center",children:Qt.map(p=>e.jsx("button",{onClick:()=>L(p),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${S.includes(p)?"bg-emerald-500 text-white":"bg-slate-800 text-slate-300 hover:bg-slate-700 border border-slate-700"}`,children:p},p))})]});case 5:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-teal-500/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 border border-teal-500/30",children:e.jsx(Ie,{className:"w-8 h-8 text-teal-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-100 mb-2",children:"Preferred work mode?"}),e.jsx("p",{className:"text-slate-400",children:"Choose your ideal work environment"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-3xl mx-auto",children:qt.map(p=>e.jsxs("button",{onClick:()=>W(p.value),className:`p-6 rounded-xl border-2 transition-all ${b.includes(p.value)?"border-emerald-500 bg-emerald-500/10":"border-slate-700 hover:border-emerald-500/50 bg-slate-800/30"}`,children:[e.jsx("div",{className:"text-4xl mb-2",children:p.icon}),e.jsx("div",{className:"text-lg font-semibold text-slate-100",children:p.label})]},p.value))})]});default:return null}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:e.jsxs(Z.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-slate-900 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-slate-700/50",children:[!d&&e.jsxs("div",{className:"p-6 border-b border-slate-700/50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-100",children:"Set Up Your Job Preferences"}),e.jsx("div",{className:"flex items-center space-x-2 mt-2",children:Array.from({length:F},(p,N)=>N+1).map(p=>e.jsx("div",{className:`h-2 flex-1 rounded-full transition-colors ${p<=r?"bg-emerald-500":"bg-slate-700"}`},p))}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Step ",r," of ",F]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx(K,{className:"w-5 h-5 text-slate-400"})})]}),e.jsxs("div",{className:"p-8",children:[e.jsx(be,{mode:"wait",children:e.jsx(Z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:G()},d?"processing":r)}),g&&!d&&e.jsxs("div",{className:"mt-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl flex items-start space-x-3",children:[e.jsx(je,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-300",children:g})]})]}),!d&&e.jsxs("div",{className:"p-6 border-t border-slate-700/50 flex items-center justify-between",children:[r>1&&e.jsx("button",{onClick:B,disabled:i,className:"px-6 py-2 text-slate-300 hover:bg-slate-800 rounded-lg transition-colors disabled:opacity-50",children:"Back"}),e.jsx("div",{className:"flex-1"}),r<F?e.jsx("button",{onClick:D,disabled:i||r===1&&!c,className:"px-8 py-3 bg-gradient-to-r from-emerald-500 to-cyan-500 hover:from-emerald-600 hover:to-cyan-600 text-white rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-emerald-500/25",children:"Next"}):e.jsxs("button",{onClick:z,disabled:i||b.length===0,className:"px-8 py-3 bg-gradient-to-r from-emerald-500 to-cyan-500 hover:from-emerald-600 hover:to-cyan-600 text-white rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-emerald-500/25 flex items-center space-x-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{children:"Complete Setup"})]})]})]})})},Wt=({isOpen:n,onClose:a,projects:t,matchScore:s,potentialImprovement:r,reasoning:o,onProjectSelect:i,loading:l=!1})=>{const[d,u]=m.useState(null),[g,h]=m.useState(null);if(!n)return null;const c=async(f,T)=>{try{h(T),await i(f,T)}catch(k){console.error("Error processing project action:",k)}finally{h(null)}},w=s+r;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-dark-100 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-white dark:bg-dark-100 p-2 rounded-lg",children:e.jsx(Ee,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"AI Project Suggestions"}),e.jsx("p",{className:"text-blue-100",children:"Boost your resume match score with relevant projects"})]})]}),e.jsx("button",{onClick:a,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",disabled:l||g!==null,children:e.jsx(K,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-100 bg-opacity-20 backdrop-blur-sm rounded-xl p-4",children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Current Score"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:[s,"%"]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-100 bg-opacity-20 backdrop-blur-sm rounded-xl p-4",children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Potential Improvement"}),e.jsxs("p",{className:"text-3xl font-bold text-white flex items-center",children:["+",r,"%",e.jsx(he,{className:"w-5 h-5 ml-2"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-100 bg-opacity-20 backdrop-blur-sm rounded-xl p-4",children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Projected Score"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:[w,"%"]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(je,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Why These Projects?"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:o})]})]})}),e.jsx("div",{className:"space-y-6",children:t.map((f,T)=>e.jsxs("div",{className:`border-2 rounded-2xl p-6 transition-all ${d===f.projectTitle?"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-dark-300 bg-white dark:bg-dark-50"}`,children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:f.projectTitle}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:f.projectSummary}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:f.techStack.map((k,E)=>e.jsx("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 text-sm rounded-full font-medium",children:k},E))}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[e.jsxs("a",{href:`https://${f.githubLink}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm font-medium",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsx("span",{children:"GitHub"}),e.jsx(X,{className:"w-3 h-3"})]}),e.jsxs("a",{href:`https://${f.liveDemoLink}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 text-sm font-medium",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"Live Demo"})]})]}),e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(he,{className:"w-4 h-4 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-green-800 dark:text-green-300 font-medium",children:f.impactDescription})]})}),e.jsxs("div",{className:"bg-gray-900 dark:bg-dark-200 rounded-lg p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx($e,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400 font-mono",children:"Code Sample"})]}),e.jsx("pre",{className:"text-sm text-gray-300 font-mono overflow-x-auto",children:f.codeSnippet.trim()})]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-4",children:[e.jsx("button",{onClick:()=>{u(f.projectTitle),c(f,"replace")},disabled:l||g!==null,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:g==="replace"?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Replacing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-5 h-5"}),e.jsx("span",{children:"Replace Existing Project"})]})}),e.jsx("button",{onClick:()=>{u(f.projectTitle),c(f,"add")},disabled:l||g!==null,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:g==="add"?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Adding..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(_t,{className:"w-5 h-5"}),e.jsx("span",{children:"Add as New Project"})]})})]})]},T))}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>{t.length>0&&c(t[0],"skip")},disabled:l||g!==null,className:"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium underline disabled:opacity-50 disabled:cursor-not-allowed",children:g==="skip"?"Skipping...":"Skip and Continue"})})]})]})})};class es{async generateProjectSuggestions(a,t,s){try{const r=this.buildProjectGenerationPrompt(a,t,s),o=await At.generateContent(r);return this.parseProjectSuggestions(o)}catch(r){throw console.error("Error generating project suggestions:",r),new Error("Failed to generate project suggestions")}}buildProjectGenerationPrompt(a,t,s){return`You are an expert career advisor and technical project designer. Analyze the following job description and candidate's resume to suggest 3 highly relevant projects that would significantly improve their chances of getting hired.

**Job Description:**
${a}

**Current Resume:**
${t}

**Current Match Score:** ${s}%

**Your Task:**
Generate 3 project suggestions that:
1. Directly address missing skills or weak areas in the resume
2. Demonstrate expertise relevant to the job requirements
3. Are realistic and implementable
4. Include specific technical details and measurable impact
5. Would increase the match score by at least 10-15%

For each project, provide:
- **Project Title**: Concise, professional title
- **Project Summary**: 3-4 sentences explaining what the project does and its value
- **Tech Stack**: Array of technologies used (matching job requirements)
- **GitHub Link**: Suggested repo structure (e.g., "github.com/user/ai-chatbot-assistant")
- **Live Demo Link**: Suggested deployment URL (e.g., "ai-chatbot.vercel.app")
- **Code Snippet**: A realistic 10-15 line code sample showcasing key functionality
- **Impact Description**: Specific metrics or outcomes (e.g., "Reduced response time by 40%", "Processed 10K+ requests/day")

**Output Format (JSON):**
{
  "projects": [
    {
      "projectTitle": "...",
      "projectSummary": "...",
      "techStack": ["React", "Node.js", "MongoDB"],
      "githubLink": "...",
      "liveDemoLink": "...",
      "codeSnippet": "...",
      "impactDescription": "..."
    }
  ],
  "matchScoreImprovement": 12,
  "reasoning": "These projects address the following gaps: ..."
}

Return ONLY valid JSON, no markdown formatting.`}parseProjectSuggestions(a){try{const t=a.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim(),s=JSON.parse(t);if(!s.projects||!Array.isArray(s.projects))throw new Error("Invalid response format");return{projects:s.projects.map(r=>({projectTitle:r.projectTitle||r.project_title||"",projectSummary:r.projectSummary||r.project_summary||"",techStack:r.techStack||r.tech_stack||[],githubLink:r.githubLink||r.github_link||"",liveDemoLink:r.liveDemoLink||r.live_demo_link||"",codeSnippet:r.codeSnippet||r.code_snippet||"",impactDescription:r.impactDescription||r.impact_description||""})),matchScoreImprovement:s.matchScoreImprovement||s.match_score_improvement||0,reasoning:s.reasoning||""}}catch(t){return console.error("Error parsing project suggestions:",t),this.getFallbackProjects()}}getFallbackProjects(){return{projects:[{projectTitle:"AI-Powered Task Automation System",projectSummary:"Built an intelligent task automation platform that uses machine learning to optimize workflow efficiency. The system analyzes user behavior patterns and automatically suggests task prioritization and automation opportunities.",techStack:["Python","TensorFlow","FastAPI","React","PostgreSQL"],githubLink:"github.com/user/ai-task-automation",liveDemoLink:"task-automation.vercel.app",codeSnippet:`
def analyze_task_patterns(user_id: str) -> Dict:
    tasks = db.get_user_tasks(user_id)
    patterns = ml_model.predict_patterns(tasks)
    recommendations = generate_recommendations(patterns)
    return {
        'efficiency_score': patterns.score,
        'recommendations': recommendations,
        'time_saved': calculate_time_saved(tasks, patterns)
    }`,impactDescription:"Reduced manual task processing time by 45%, processed 50K+ tasks with 92% accuracy"},{projectTitle:"Real-Time Data Analytics Dashboard",projectSummary:"Developed a comprehensive analytics dashboard with real-time data visualization and interactive filtering capabilities. Integrated multiple data sources and provided actionable insights through customizable widgets.",techStack:["React","TypeScript","D3.js","Node.js","Redis","WebSocket"],githubLink:"github.com/user/analytics-dashboard",liveDemoLink:"analytics-dash.netlify.app",codeSnippet:`
const processRealTimeData = (stream: DataStream) => {
  return stream
    .map(data => transformData(data))
    .filter(data => data.isValid)
    .reduce((acc, data) => aggregateMetrics(acc, data))
    .subscribe({
      next: metrics => updateDashboard(metrics),
      error: err => handleError(err)
    });
};`,impactDescription:"Handled 100K+ events/minute with <100ms latency, improved decision-making speed by 60%"},{projectTitle:"Microservices E-Commerce Platform",projectSummary:"Architected and implemented a scalable e-commerce platform using microservices architecture. Includes payment integration, inventory management, order processing, and user authentication with high availability.",techStack:["Node.js","Docker","Kubernetes","MongoDB","RabbitMQ","AWS"],githubLink:"github.com/user/microservices-ecommerce",liveDemoLink:"ecommerce-platform.herokuapp.com",codeSnippet:`
class OrderService {
  async processOrder(order: Order): Promise<OrderResult> {
    const payment = await this.paymentService.charge(order);
    if (payment.success) {
      await this.inventoryService.reserve(order.items);
      await this.messageBroker.publish('order.created', order);
      return { status: 'success', orderId: order.id };
    }
  }
}`,impactDescription:"Achieved 99.9% uptime, processed $500K+ in transactions, scaled to 10K concurrent users"}],matchScoreImprovement:15,reasoning:"These projects demonstrate full-stack expertise, system design skills, and real-world problem-solving abilities relevant to most technical roles."}}async saveProjectSuggestions(a,t,s,r){try{const o=r.map(l=>({user_id:a,job_listing_id:t,resume_id:s,project_title:l.projectTitle,project_summary:l.projectSummary,tech_stack:l.techStack,github_link:l.githubLink,live_demo_link:l.liveDemoLink,code_snippet:l.codeSnippet,impact_description:l.impactDescription,was_selected:l.wasSelected||!1,selection_type:l.selectionType||null})),{error:i}=await A.from("ai_project_suggestions").insert(o);if(i)throw i}catch(o){throw console.error("Error saving project suggestions:",o),o}}async updateProjectSelection(a,t,s){try{const{error:r}=await A.from("ai_project_suggestions").update({was_selected:t,selection_type:s}).eq("id",a);if(r)throw r}catch(r){throw console.error("Error updating project selection:",r),r}}async getProjectSuggestions(a){try{const{data:t,error:s}=await A.from("ai_project_suggestions").select("*").eq("resume_id",a).order("created_at",{ascending:!1});if(s)throw s;return(t||[]).map(r=>({id:r.id,projectTitle:r.project_title,projectSummary:r.project_summary,techStack:r.tech_stack||[],githubLink:r.github_link||"",liveDemoLink:r.live_demo_link||"",codeSnippet:r.code_snippet||"",impactDescription:r.impact_description||"",wasSelected:r.was_selected,selectionType:r.selection_type}))}catch(t){return console.error("Error fetching project suggestions:",t),[]}}injectProjectIntoResume(a,t,s){const r=this.formatProjectForResume(t);return s==="replace"?this.replaceExistingProject(a,r):this.addNewProject(a,r)}formatProjectForResume(a){return`
## ${a.projectTitle}
**Tech Stack:** ${a.techStack.join(", ")}
**Links:** [GitHub](${a.githubLink}) | [Live Demo](${a.liveDemoLink})

${a.projectSummary}

**Key Achievement:** ${a.impactDescription}

\`\`\`
${a.codeSnippet}
\`\`\`
`}replaceExistingProject(a,t){const s=/##\s+Projects?\s*([\s\S]*?)(?=##|$)/i,r=a.match(s);if(r){const i=r[1].split(/(?=##)/);if(i.length>1){i[i.length-1]=t;const l=i.join(`
`);return a.replace(s,`## Projects
${l}`)}}return this.addNewProject(a,t)}addNewProject(a,t){const s=/##\s+Projects?\s*([\s\S]*?)(?=##|$)/i,r=a.match(s);if(r){const d=`## Projects
${r[1].trim()}

${t}`;return a.replace(s,d)}const o=/##\s+Experience\s*([\s\S]*?)(?=##|$)/i,i=a.match(o);if(i){const l=i.index+i[0].length;return a.slice(0,l)+`

## Projects
${t}`+a.slice(l)}return a+`

## Projects
${t}`}}const _e=new es;class ts{constructor(){q(this,"statusCallbacks",new Map)}registerStatusCallback(a,t){this.statusCallbacks.set(a,t)}unregisterStatusCallback(a){this.statusCallbacks.delete(a)}updateStatus(a,t){const s=this.statusCallbacks.get(a);s&&s(t)}async startAutoApply(a,t,s,r,o){try{const{data:{user:i}}=await A.auth.getUser();if(!i)throw new Error("User not authenticated");const l=i.id;this.updateStatus(a,{step:"analyzing",progress:10,message:"Analyzing your resume against job requirements...",currentAction:"Calculating match score"});const d=await this.getUserResume(l);if(!d)throw new Error("Please upload your resume first");const g=(await Nt.analyzeResume(d,t)).overallScore||0;if(g<80){this.updateStatus(a,{step:"suggesting_projects",progress:30,message:`Match score: ${g}%. Generating AI project suggestions...`,currentAction:"Creating personalized projects"});const h=await _e.generateProjectSuggestions(t,d,g);return{success:!1,matchScore:g,error:"PROJECT_SUGGESTIONS_REQUIRED",...h}}return await this.continueAutoApply(l,a,d,g,o,s,r,null)}catch(i){return console.error("Error in auto-apply:",i),this.updateStatus(a,{step:"failed",progress:0,message:"Application failed",currentAction:i.message}),{success:!1,error:i.message}}}async continueAutoApply(a,t,s,r,o,i,l,d){try{let u=s;d&&(this.updateStatus(t,{step:"optimizing",progress:50,message:"Injecting selected project into resume...",currentAction:"Optimizing resume structure"}),u=_e.injectProjectIntoResume(s,d,d.selectionType||"add")),this.updateStatus(t,{step:"generating_pdf",progress:70,message:"Generating optimized resume PDF...",currentAction:"Creating PDF document"});const g=await this.generateResumePDF(u,l),h=await this.uploadResumePDF(a,t,g),c=await this.saveOptimizedResume(a,t,s,u,r,h);d&&await _e.saveProjectSuggestions(a,t,c,[d]),this.updateStatus(t,{step:"submitting",progress:85,message:"Submitting application...",currentAction:"Filling out application form"});const w=this.detectPlatform(o),f=await this.createApplication(a,t,c,w,o);return await this.triggerFormSubmission(f,a,o,h,w),this.updateStatus(t,{step:"completed",progress:100,message:"Application submitted successfully!",currentAction:"Done"}),{success:!0,applicationId:f,resumeId:c,matchScore:r,pdfUrl:h}}catch(u){return console.error("Error continuing auto-apply:",u),this.updateStatus(t,{step:"failed",progress:0,message:"Application failed",currentAction:u.message}),{success:!1,error:u.message}}}async getUserResume(a){const{data:t,error:s}=await A.from("user_profiles").select("resume_text").eq("id",a).maybeSingle();if(s)throw s;return(t==null?void 0:t.resume_text)||""}async generateResumePDF(a,t){const s=new Ct,r=s.internal.pageSize.getWidth(),o=20,i=r-o*2;s.setFont("helvetica","bold"),s.setFontSize(20),s.text("Resume",o,20),s.setFont("helvetica","normal"),s.setFontSize(12),s.text(`Application for: ${t}`,o,30);let l=45;return s.splitTextToSize(a,i).forEach(u=>{l>s.internal.pageSize.getHeight()-o&&(s.addPage(),l=o),s.text(u,o,l),l+=7}),s.output("blob")}async uploadResumePDF(a,t,s){const r=`${a}/${t}_${Date.now()}.pdf`,{data:o,error:i}=await A.storage.from("optimized-resumes").upload(r,s,{contentType:"application/pdf",upsert:!0});if(i)throw i;const{data:{publicUrl:l}}=A.storage.from("optimized-resumes").getPublicUrl(o.path);return l}async saveOptimizedResume(a,t,s,r,o,i){const{data:l,error:d}=await A.from("optimized_resumes").insert({user_id:a,job_listing_id:t,original_resume_text:s,optimized_resume_text:r,match_score:o,pdf_url:i,improvements_made:[]}).select("id").single();if(d)throw d;return l.id}detectPlatform(a){const t=a.toLowerCase();return t.includes("linkedin.com")?"linkedin":t.includes("workday.com")?"workday":t.includes("greenhouse.io")?"greenhouse":t.includes("lever.co")?"lever":t.includes("myworkdayjobs.com")?"workday":"other"}async createApplication(a,t,s,r,o){const{data:i,error:l}=await A.from("auto_apply_applications").insert({user_id:a,job_listing_id:t,resume_version_id:s,platform:r,application_url:o,status:"filling"}).select("id").single();if(l)throw l;return i.id}async triggerFormSubmission(a,t,s,r,o){const i="https://rixmudvtbfkjpwjoefon.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpeG11ZHZ0YmZranB3am9lZm9uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1ODk4NzIsImV4cCI6MjA2NjE2NTg3Mn0.PQss75_gbLaiJDFxKvCuHNirUVkKUGrINYGO1oewQGA",d=`${i}/functions/v1/auto-apply-submit`,u=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({applicationId:a,userId:t,applicationUrl:s,resumePdfUrl:r,platform:o})});if(!u.ok){const h=await u.text();throw new Error(`Form submission failed: ${h}`)}const g=await u.json();if(!g.success)throw new Error(g.error||"Form submission failed")}async getApplicationStatus(a){const{data:t,error:s}=await A.from("auto_apply_applications").select("*").eq("id",a).single();if(s)throw s;return t}async getUserApplications(a){const{data:t,error:s}=await A.from("auto_apply_applications").select(`
        *,
        job_listings (
          id,
          company_name,
          role_title,
          company_logo_url
        ),
        optimized_resumes (
          match_score,
          pdf_url
        )
      `).eq("user_id",a).order("created_at",{ascending:!1});if(s)throw s;return t||[]}}const ue=new ts;function ss(){const{user:n}=Te(),[a,t]=m.useState(!1),[s,r]=m.useState(!1),[o,i]=m.useState(!1),[l,d]=m.useState({step:"analyzing",progress:0,message:"Initializing..."}),[u,g]=m.useState(null),[h,c]=m.useState(null),[w,f]=m.useState(null),T=m.useCallback(async v=>{if(!n)throw new Error("User not authenticated");c(v),t(!0),r(!0),f(null);try{const _=[v.full_description||v.description,v.short_description?`

Key Points: ${v.short_description}`:"",v.qualification?`

Qualifications: ${v.qualification}`:""].filter(Boolean).join(`
`);ue.registerStatusCallback(v.id,R=>{d(R)});const S=await ue.startAutoApply(v.id,_,v.company_name,v.role_title,v.application_link);!S.success&&S.error==="PROJECT_SUGGESTIONS_REQUIRED"?(g(S),i(!0),r(!1)):f(S)}catch(_){console.error("Auto-apply error:",_),d({step:"failed",progress:0,message:"Application failed",currentAction:_.message}),f({success:!1,error:_.message})}finally{t(!1)}},[n]),k=m.useCallback(async(v,_)=>{if(!(!n||!h))try{i(!1),r(!0),t(!0);const S=_!=="skip"?{...v,selectionType:_}:null,R="",b=u!=null&&u.matchScoreImprovement?(l.matchScore||70)+u.matchScoreImprovement:85,y=await ue.continueAutoApply(n.id,h.id,R,b,h.application_link,h.company_name,h.role_title,S);f(y)}catch(S){console.error("Error in project selection:",S),d({step:"failed",progress:0,message:"Application failed",currentAction:S.message}),f({success:!1,error:S.message})}finally{t(!1)}},[n,h,u,l]),E=m.useCallback(()=>{r(!1),i(!1),h&&ue.unregisterStatusCallback(h.id),c(null),g(null),f(null)},[h]);return{isProcessing:a,showStatusModal:s,showProjectModal:o,currentStatus:l,projectSuggestions:u,currentJob:h,result:w,startAutoApply:T,handleProjectSelection:k,closeModals:E}}class as{async buildResumeDataFromProfile(a,t){var S,R;if(!a)throw new Error("User ID is required to build resume data from profile.");console.log("ProfileResumeService: Building ResumeData from profile for user:",a);const{data:s,error:r}=await A.from("user_profiles").select(`
        id,
        full_name,
        email_address,
        phone,
        linkedin_profile_url,
        github_profile_url,
        current_location,
        resume_headline,
        education_details,
        experience_details,
        skills_details,
        certifications_details
      `).eq("id",a).maybeSingle();if(r)throw console.error("Error fetching user profile:",r),new Error("Failed to fetch user profile data.");if(!s)throw new Error("User profile not found.");console.log("ProfileResumeService: User profile fetched successfully");const{data:o,error:i}=await A.from("internship_records").select("*").eq("client_id",a).order("start_date",{ascending:!1});i&&console.warn("Error fetching internship records:",i),console.log("ProfileResumeService: Internship records fetched:",(o==null?void 0:o.length)||0);const l=(o||[]).map(b=>({role:b.position,company:b.company_name,year:`${new Date(b.start_date).getFullYear()} - ${b.end_date?new Date(b.end_date).getFullYear():"Present"}`,bullets:b.description?b.description.split(`
`).map(y=>y.trim()).filter(Boolean):[`Contributed to ${b.company_name} as ${b.position}`,"Gained hands-on experience in professional environment","Developed technical and soft skills relevant to the industry"]})),d=[...s.experience_details||[],...l],{data:u,error:g}=await A.from("client_resumes").select("*").eq("client_id",a).eq("is_active",!0).order("created_at",{ascending:!1});g&&console.warn("Error fetching client resumes:",g);const h=s.skills_details&&s.skills_details.length>0?[{title:"Portfolio Website",bullets:[`Developed responsive portfolio website using ${((R=(S=s.skills_details[0])==null?void 0:S.list)==null?void 0:R[0])||"modern web technologies"}`,"Implemented responsive design and optimized for mobile devices","Integrated contact forms and deployed on cloud platform"]}]:[],{data:c,error:w}=await A.from("course_materials").select("title, description").eq("assigned_to",a).eq("is_completed",!0);w&&console.warn("Error fetching course materials:",w);const T=(b=>(b||[]).map(y=>{if(typeof y=="string"){const F=y.trim();return F.length>0?F:null}if(y&&typeof y=="object"){const F=(y.title||y.name||y.certificate||y.text||y.value||y.issuer||y.provider||"").toString().trim(),M=(y.description||y.issuer||y.provider||"").toString().trim();return!F&&!M?null:{title:F||M,description:M&&M!==F?M:""}}return null}).filter(Boolean))(s.certifications_details||[]),k=(c||[]).map(b=>({title:b.title,description:b.description||""})),E=new Set,v=[];[...T,...k].forEach(b=>{const y=typeof b=="string"?b.toLowerCase():(b.title||b.description||"").toLowerCase();!y||E.has(y)||(E.add(y),v.push(b))});const _={name:s.full_name||"",phone:s.phone||"",email:s.email_address||"",linkedin:s.linkedin_profile_url||"",github:s.github_profile_url||"",location:s.current_location||void 0,education:s.education_details||[],workExperience:d,skills:s.skills_details||[],projects:h,certifications:v,achievements:[],origin:"profile_generated"};return s.resume_headline&&(t==="experienced"?_.summary=s.resume_headline:_.careerObjective=s.resume_headline),console.log("ProfileResumeService: ResumeData constructed successfully"),_}async hasUserResume(a){const{data:t,error:s}=await A.from("user_profiles").select("id, education_details, skills_details").eq("id",a).maybeSingle();return s||!t?!1:!!(t.education_details&&Array.isArray(t.education_details)&&t.education_details.length>0&&t.skills_details&&Array.isArray(t.skills_details)&&t.skills_details.length>0)}async isProfileCompleteForAutoApply(a){var o,i,l;const{data:t,error:s}=await A.from("user_profiles").select(`
        full_name,
        email_address,
        phone,
        linkedin_profile_url,
        github_profile_url,
        education_details,
        experience_details,
        skills_details
      `).eq("id",a).maybeSingle();if(s||!t)return{isComplete:!1,missingFields:["profile"]};const r=[];return(o=t.full_name)!=null&&o.trim()||r.push("full name"),(i=t.email_address)!=null&&i.trim()||r.push("email"),(l=t.phone)!=null&&l.trim()||r.push("phone"),(!t.education_details||t.education_details.length===0)&&r.push("education"),(!t.skills_details||t.skills_details.length===0)&&r.push("skills"),{isComplete:r.length===0,missingFields:r}}}const rs=new as,Ls=({isAuthenticated:n,onShowAuth:a,onShowProfile:t})=>{const s=tt(),{user:r}=Te(),{isChristmasMode:o,colors:i}=lt(),[l,d]=st();It({title:"Latest Jobs - Fresher & Experienced Openings at Top Companies",description:"Browse latest job openings at Google, TCS, Infosys, Wipro, Amazon & more top companies in India. Find fresher jobs, experienced roles, remote positions. Apply directly or use AI-powered auto-apply on PrimoBoost AI.",canonical:"/jobs",ogType:"website",twitterCard:"summary_large_image"});const[u,g]=m.useState([]),[h,c]=m.useState({}),[w,f]=m.useState(!0),[T,k]=m.useState(null),[E,v]=m.useState(!1),[_,S]=m.useState(0),[R,b]=m.useState(1),[y,F]=m.useState(0),[M,D]=m.useState(()=>{const x=l.get("page");return x?Math.max(1,parseInt(x,10)):1}),[B,L]=m.useState(!1),[W,z]=m.useState(!1),[G,p]=m.useState(null),[N,O]=m.useState(null),{showStatusModal:Y,showProjectModal:U,projectSuggestions:re,currentJob:J,result:$,startAutoApply:we,handleProjectSelection:ve,closeModals:ee}=ss(),[Ne,te]=m.useState(!1),[j,C]=m.useState(!1),[le,Be]=m.useState([]),[se,Fe]=m.useState(!1),[Re,ce]=m.useState(!1),ie=12;m.useEffect(()=>{(async()=>{if(r!=null&&r.id){const I=await fe.hasCompletedOnboarding(r.id);C(I),I?ke():setTimeout(()=>te(!0),1e3)}})()},[r==null?void 0:r.id]);const ke=async()=>{if(r!=null&&r.id){ce(!0);try{const x=await Ce.getRecommendations(r.id,40);Be(x),x.length>0&&Fe(!0)}catch(x){console.error("Error loading AI recommendations:",x)}finally{ce(!1)}}},Ge=async()=>{if(r!=null&&r.id){ce(!0);try{const x=await fe.getUserPreferences(r.id);if(!x)return;const I=await ge.getAllJobs();await Ce.analyzeAndMatch(r.id,{resumeText:x.resume_text||"",passoutYear:x.passout_year||2024,roleType:x.role_type||"both",techInterests:x.tech_interests||[],preferredModes:x.preferred_modes||[]},I),await ke()}catch(x){console.error("Error refreshing recommendations:",x)}finally{ce(!1)}}},Ye=()=>{te(!1),C(!0),ke()},de=m.useCallback(async(x=1,I=h)=>{f(!0),k(null),window.scrollTo({top:0,behavior:"smooth"});try{const me=(x-1)*ie,Q=await ge.getJobListings(I,ie,me);if(g(Q.jobs),S(Q.total),v(Q.hasMore),b(Q.totalPages),F(Q.totalCompanies),D(x),d({page:x.toString()}),Q.jobs.length>0){const He=Q.jobs.slice(0,10).map(P=>({"@type":"JobPosting",title:P.role_title||"",description:(P.short_description||P.description||"").substring(0,500),datePosted:P.posted_date||P.created_at||"",hiringOrganization:{"@type":"Organization",name:P.company_name||"",...P.company_logo_url?{logo:P.company_logo_url}:{},...P.company_website?{sameAs:P.company_website}:{}},jobLocation:{"@type":"Place",address:{"@type":"PostalAddress",addressLocality:P.location_city||"",addressCountry:"IN"}},employmentType:"FULL_TIME",...P.package_amount?{baseSalary:{"@type":"MonetarySalary",currency:P.package_currency||"INR",value:{"@type":"QuantitativeValue",value:P.package_amount}}}:{},...P.skills&&P.skills.length>0?{skills:P.skills.join(", ")}:{},url:`https://primoboost.ai/jobs/${P.id}`}));Pt("jobs-structured-data",{"@context":"https://schema.org","@graph":He})}}catch(me){k(me instanceof Error?me.message:"Failed to load jobs")}finally{f(!1)}},[h,ie,d]);m.useEffect(()=>{de(M,h)},[h]),m.useEffect(()=>{const x=l.get("page"),I=x?Math.max(1,parseInt(x,10)):1;I!==M&&(D(I),de(I,h))},[l]);const Ze=x=>{c(x),D(1),d({page:"1"})},Ke=x=>{de(x,h)},Ve=(x,I)=>{p(x),O(I),L(!0)},Xe=async x=>{if(!(r!=null&&r.id)){a();return}try{if(!await rs.hasUserResume(r.id)){t&&t("profile"),alert("Please upload your resume in your profile before using auto-apply.");return}await we(x)}catch(I){console.error("Error starting auto-apply:",I),alert("Failed to start auto-apply. Please try again.")}},Qe=()=>{L(!1),G&&N&&(window.open(G.application_link,"_blank"),p(null),O(null))};m.useEffect(()=>{$&&!Y&&!U&&(p(J),z(!0))},[$,Y,U,J]);const qe=[{label:"Total Jobs",value:_,icon:e.jsx(pe,{className:"w-5 h-5"})},{label:"Remote Jobs",value:u.filter(x=>x.location_type==="Remote").length,icon:e.jsx(Ie,{className:"w-5 h-5"})},{label:"Fresh Openings",value:u.filter(x=>new Date(x.posted_date)>new Date(Date.now()-7*24*60*60*1e3)).length,icon:e.jsx(Pe,{className:"w-5 h-5"})},{label:"Companies",value:y,icon:e.jsx(ct,{className:"w-5 h-5"})}];return e.jsxs("div",{className:`min-h-screen relative overflow-hidden lg:pl-16 ${o?"bg-gradient-to-b from-[#1a0a0f] via-[#0f1a0f] to-[#070b14]":"bg-gradient-to-b from-[#0a1e1e] via-[#0d1a1a] to-[#070b14]"}`,children:[e.jsx("div",{className:`pointer-events-none absolute inset-0 ${o?"bg-[radial-gradient(ellipse_at_top,rgba(220,38,38,0.15),transparent_50%),radial-gradient(ellipse_at_bottom_right,rgba(34,197,94,0.15),transparent_50%)]":"bg-[radial-gradient(ellipse_at_top,rgba(16,185,129,0.15),transparent_50%),radial-gradient(ellipse_at_bottom_right,rgba(6,182,212,0.15),transparent_50%)]"}`}),e.jsx(mt,{count:12}),o&&e.jsx(ut,{count:30}),e.jsx("div",{className:"bg-slate-900/40 backdrop-blur-md border-b border-slate-800/30",children:e.jsx("div",{className:"w-full max-w-7xl mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between h-14 py-2",children:[e.jsx(ne,{onClick:()=>s("/"),variant:"primary",size:"sm",icon:dt,className:"lg:hidden",children:e.jsx("span",{className:"hidden sm:block",children:"Back to Home"})}),e.jsx("div",{className:"w-24"})]})})}),e.jsxs("div",{className:"relative z-10 w-full max-w-7xl mx-auto px-4 sm:px-6 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-lg ${o?"bg-gradient-to-br from-red-500 via-emerald-500 to-green-600 shadow-green-500/50":"bg-gradient-to-br from-emerald-500 to-cyan-500 shadow-emerald-500/50"}`,children:e.jsx(pe,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-5xl font-bold text-white mb-4 tracking-tight",children:se?"Your Recommended Jobs":e.jsxs(e.Fragment,{children:["Find Your"," ",e.jsx("span",{className:`bg-gradient-to-r bg-clip-text text-transparent ${o?"from-red-400 via-green-400 to-emerald-400":"from-emerald-400 via-cyan-400 to-teal-400"}`,children:"Dream Job"})]})}),e.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto",children:se?"AI-powered recommendations based on your profile and preferences":"Discover opportunities, apply with AI-optimized resumes, and track your applications all in one place."}),j&&e.jsxs("div",{className:"flex items-center justify-center flex-wrap gap-4 mt-6",children:[e.jsxs(ne,{onClick:()=>Fe(!se),variant:se?"primary":"secondary",size:"md",icon:Ee,children:[e.jsx("span",{children:se?"Showing AI Matches":"Show AI Matches"}),le.length>0&&e.jsx("span",{className:"ml-2 bg-white/20 px-2 py-0.5 rounded-full text-sm",children:le.length})]}),e.jsx(ne,{onClick:Ge,disabled:Re,variant:"secondary",size:"md",icon:ae,className:Re?"animate-spin":"",children:e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})}),e.jsxs(ne,{onClick:()=>te(!0),variant:"secondary",size:"md",children:["⚙️",e.jsx("span",{className:"hidden sm:inline",children:"Preferences"})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:qe.map((x,I)=>e.jsxs(Je,{glow:!0,hoverLift:8,delay:I*.1,className:"p-6 text-center",children:[e.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mx-auto mb-3 ${o?"bg-gradient-to-br from-red-500/20 to-green-500/20 text-green-400":"bg-gradient-to-br from-emerald-500/20 to-cyan-500/20 text-emerald-400"}`,children:x.icon}),e.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:x.value}),e.jsx("div",{className:"text-sm text-slate-400",children:x.label})]},I))}),e.jsx("div",{className:"mb-8",children:e.jsx(Rt,{})}),e.jsx("div",{className:"mb-8",children:e.jsx(Ft,{filters:h,onFiltersChange:Ze,isLoading:w})}),T&&e.jsx(Je,{className:"p-6 mb-8 border-red-500/50 bg-red-900/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"w-6 h-6 text-red-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-300",children:"Error Loading Jobs"}),e.jsx("p",{className:"text-red-400",children:T})]})]}),e.jsx(ne,{onClick:()=>de(0),variant:"secondary",size:"sm",icon:ae,children:"Retry"})]})}),!T&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full max-w-full mx-auto px-0 sm:px-0 py-8 space-y-4",children:(se&&le.length>0?le.map(x=>({...x.job_data,match_score:x.match_score,match_reason:x.match_reason,skills_matched:x.skills_matched})):u).map((x,I)=>e.jsx(pt,{job:x,onManualApply:Ve,onAutoApply:Xe,isAuthenticated:n,onShowAuth:a,onCompleteProfile:()=>t&&t("profile")},x.id))}),w&&e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(xe,{className:"w-8 h-8 animate-spin text-blue-600 mr-3 dark:text-neon-cyan-400"}),e.jsx("span",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Loading jobs..."})]}),!w&&u.length>0&&R>1&&e.jsxs("div",{className:"mt-8",children:[e.jsx(gt,{currentPage:M,totalPages:R,onPageChange:Ke}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",(M-1)*ie+1," - ",Math.min(M*ie,_)," of ",_," jobs"]})})]}),!w&&u.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"bg-gray-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 dark:bg-dark-200",children:e.jsx(pe,{className:"w-10 h-10 text-gray-600 dark:text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No Jobs Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Try adjusting your filters or search terms to find more opportunities."}),e.jsx("button",{onClick:()=>c({}),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl transition-colors",children:"Clear All Filters"})]})]})]}),e.jsx(Ot,{isOpen:B,onClose:()=>L(!1),job:G,optimizedResume:N,onConfirm:Qe}),e.jsx(Et,{isOpen:W,onClose:()=>{z(!1),p(null),ee()},job:G,result:$?{success:$.success,message:$.error||"Application submitted successfully",applicationId:$.applicationId||"",status:$.success?"submitted":"failed",resumeUrl:$.pdfUrl}:void 0}),e.jsx(Kt,{isOpen:Y,onClose:()=>ee(),applicationId:(J==null?void 0:J.id)||null,jobTitle:(J==null?void 0:J.role_title)||"",companyName:(J==null?void 0:J.company_name)||"",onComplete:x=>{}}),U&&re&&e.jsx(Wt,{isOpen:U,onClose:()=>ee(),job:J,suggestions:re,onSelectProject:ve,matchScore:re.currentMatchScore||0}),e.jsx(Ht,{isOpen:Ne,onClose:()=>te(!1),onComplete:Ye})]})};export{Ls as JobsPage};
