import{j as e,m as de}from"./vendor-motion-_XdJ9pBm.js";import{u as Be,r as n}from"./vendor-react-B4msnGgW.js";import{u as Ps,c as ce,b as se,s as y,d as q,l as Ye}from"./vendor-forms-BxTF4-4_.js";import{c as De,u as me,L as D,r as Re,V as _e,n as Ze,g as Es,C as ee,p as As,x as Se,e as Ke,y as Bs,s as be,l as Qe,a as fe,B as es,q as Ds,o as Rs,i as Ve,h as Ee,W as Ae,t as Fs,S as Ts,R as Is,I as Ls,m as oe,X as Ce,A as Us,z as $s,H as qs,J as Ms,d as Ws}from"./index-BbSeE-q4.js";import{F as Os}from"./FileUpload-BOclREAt.js";import{s as Hs}from"./sessionBookingService-DouAmnnK.js";import{w as Ys}from"./webinarService-DXJAyzaf.js";import{C as Vs}from"./calendar-plus-DnXxx5sQ.js";import{H as zs}from"./hash-Cu1sPzkK.js";import{X as ss}from"./x-circle-ytsTtMRB.js";import{Z as Gs}from"./zap-BGmE2sY4.js";import{B as ts}from"./bar-chart-3-Da2kizNa.js";import{I as Xs}from"./indian-rupee-CtMJjFIv.js";import{u as Q}from"./userPreferencesService-DZIYREKg.js";import{G as as}from"./graduation-cap-C94epHPK.js";import{B as Js,a as Zs}from"./bell-Be08K7G7.js";import{S as ls}from"./save-CEu7G9Ms.js";import{S as Ks}from"./settings-BIk3p6dz.js";import{L as Qs}from"./linkedin-BE-lD9p2.js";import{P as $}from"./plus-C66eGFjH.js";import{C as et}from"./code-GxPtUTRK.js";import{A as st}from"./award-BwmFe92M.js";import{C as ze}from"./copy-Cl8vstA9.js";import{S as tt}from"./share-2-DTGj1YLy.js";import"./vendor-pdf-B1igRwBP.js";import"./vendor-supabase-B_87WqdG.js";import"./aiProxyService-HwcJnoDm.js";import"./quote-DhoHTT2m.js";import"./upload-CurydzNZ.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=De("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=De("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=De("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Ge={confirmed:{label:"Confirmed",color:"bg-emerald-500/10 text-emerald-400 border-emerald-500/30",icon:e.jsx(ee,{className:"w-3.5 h-3.5"})},completed:{label:"Completed",color:"bg-blue-500/10 text-blue-400 border-blue-500/30",icon:e.jsx(ee,{className:"w-3.5 h-3.5"})},cancelled:{label:"Cancelled",color:"bg-red-500/10 text-red-400 border-red-500/30",icon:e.jsx(ss,{className:"w-3.5 h-3.5"})},no_show:{label:"No Show",color:"bg-amber-500/10 text-amber-400 border-amber-500/30",icon:e.jsx(Es,{className:"w-3.5 h-3.5"})}},it=o=>new Date(o+"T00:00:00").toLocaleDateString("en-IN",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),nt=()=>{const o=Be(),{user:p}=me(),[d,B]=n.useState([]),[E,l]=n.useState([]),[S,C]=n.useState(!0),[g,c]=n.useState(!0),[i,f]=n.useState("sessions");n.useEffect(()=>{p&&(R(),M())},[p]);const R=async()=>{if(p)try{const m=await Hs.getUserBookings(p.id);B(m)}catch(m){console.error("Error loading bookings:",m)}finally{C(!1)}},M=async()=>{if(p)try{const m=await Ys.getUserRegistrations(p.id);l(m)}catch(m){console.error("Error loading webinar registrations:",m)}finally{c(!1)}},X=new Date().toISOString().split("T")[0],F=d.filter(m=>m.status==="confirmed"&&m.booking_date>=X),T=d.filter(m=>m.status!=="confirmed"||m.booking_date<X);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>f("sessions"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i==="sessions"?"bg-[rgba(0,230,184,0.15)] text-[#00E6B8]":"text-slate-400 hover:text-slate-200 hover:bg-slate-800"}`,children:["Sessions (",d.length,")"]}),e.jsxs("button",{onClick:()=>f("webinars"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i==="webinars"?"bg-[rgba(0,230,184,0.15)] text-[#00E6B8]":"text-slate-400 hover:text-slate-200 hover:bg-slate-800"}`,children:["Webinars (",E.length,")"]})]}),i==="sessions"&&e.jsx("div",{className:"space-y-4",children:S?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(D,{className:"w-6 h-6 animate-spin text-[#00E6B8] mr-2"}),e.jsx("span",{className:"text-slate-400",children:"Loading sessions..."})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 bg-[#0a1a24] rounded-xl border border-[#0c1d25]",children:[e.jsx(Re,{className:"w-12 h-12 text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"No session bookings yet"}),e.jsxs("button",{onClick:()=>o("/session"),className:"inline-flex items-center gap-2 px-4 py-2 bg-[rgba(0,230,184,0.15)] text-[#00E6B8] rounded-lg hover:bg-[rgba(0,230,184,0.25)] transition-colors text-sm font-medium",children:[e.jsx(Vs,{className:"w-4 h-4"})," Book a Session"]})]}):e.jsxs(e.Fragment,{children:[F.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-[#00E6B8] uppercase tracking-wider mb-3",children:"Upcoming"}),e.jsx("div",{className:"space-y-3",children:F.map(m=>e.jsx(Xe,{booking:m},m.id))})]}),T.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wider mb-3",children:"Past"}),e.jsx("div",{className:"space-y-3",children:T.map(m=>e.jsx(Xe,{booking:m},m.id))})]})]})}),i==="webinars"&&e.jsx("div",{className:"space-y-3",children:g?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(D,{className:"w-6 h-6 animate-spin text-[#00E6B8] mr-2"}),e.jsx("span",{className:"text-slate-400",children:"Loading webinars..."})]}):E.length===0?e.jsxs("div",{className:"text-center py-12 bg-[#0a1a24] rounded-xl border border-[#0c1d25]",children:[e.jsx(_e,{className:"w-12 h-12 text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"No webinar registrations yet"}),e.jsxs("button",{onClick:()=>o("/webinars"),className:"inline-flex items-center gap-2 px-4 py-2 bg-[rgba(0,230,184,0.15)] text-[#00E6B8] rounded-lg hover:bg-[rgba(0,230,184,0.25)] transition-colors text-sm font-medium",children:[e.jsx(_e,{className:"w-4 h-4"})," Browse Webinars"]})]}):E.map(m=>{var W,O;return e.jsxs(de.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"bg-[#0a1a24] border border-[#0c1d25] rounded-xl p-4 flex items-center justify-between hover:border-[rgba(0,230,184,0.2)] transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-cyan-500/10 flex items-center justify-center flex-shrink-0",children:e.jsx(_e,{className:"w-5 h-5 text-cyan-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-200 truncate",children:((W=m.webinar)==null?void 0:W.title)||"Webinar"}),e.jsx("p",{className:"text-xs text-slate-500",children:(O=m.webinar)!=null&&O.scheduled_date?new Date(m.webinar.scheduled_date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"Date TBD"})]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${m.status==="confirmed"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/30":"bg-slate-500/10 text-slate-400 border-slate-500/30"}`,children:m.status||"Registered"})]},m.id)})})]})},Xe=({booking:o})=>{var d;const p=Ge[o.status]||Ge.confirmed;return e.jsxs(de.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"bg-[#0a1a24] border border-[#0c1d25] rounded-xl p-4 hover:border-[rgba(0,230,184,0.2)] transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(zs,{className:"w-3.5 h-3.5 text-slate-500"}),e.jsx("span",{className:"font-mono text-slate-400",children:o.booking_code||"---"})]}),e.jsxs("span",{className:`inline-flex items-center gap-1.5 text-xs px-2.5 py-1 rounded-full border ${p.color}`,children:[p.icon," ",p.label]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-300",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Re,{className:"w-3.5 h-3.5 text-slate-500"}),e.jsx("span",{children:it(o.booking_date)})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Ze,{className:"w-3.5 h-3.5 text-slate-500"}),e.jsx("span",{children:o.time_slot})]})]}),((d=o.session_services)==null?void 0:d.title)&&e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:o.session_services.title})]})},ct=()=>{const{user:o}=me(),p=Be(),[d,B]=n.useState(null),[E,l]=n.useState(!0);n.useEffect(()=>{o&&S()},[o]);const S=async()=>{if(o)try{const i=await As.getUserSubscription(o.id);B(i)}catch(i){console.error("Error loading subscription:",i)}finally{l(!1)}};if(E)return e.jsxs("div",{className:"flex items-center justify-center py-16",children:[e.jsx(D,{className:"w-6 h-6 animate-spin text-[#00E6B8] mr-2"}),e.jsx("span",{className:"text-slate-400",children:"Loading usage data..."})]});if(!d)return e.jsxs("div",{className:"text-center py-16 bg-[#0a1a24] rounded-xl border border-[#0c1d25]",children:[e.jsx(Se,{className:"w-14 h-14 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-2",children:"No Active Plan"}),e.jsx("p",{className:"text-slate-400 mb-6 max-w-sm mx-auto",children:"Subscribe to a plan to start optimizing your resume and tracking your progress."}),e.jsxs("button",{onClick:()=>p("/pricing"),className:"inline-flex items-center gap-2 px-5 py-2.5 bg-[rgba(0,230,184,0.15)] text-[#00E6B8] rounded-lg hover:bg-[rgba(0,230,184,0.25)] transition-colors text-sm font-medium",children:[e.jsx(Se,{className:"w-4 h-4"})," View Plans"]})]});const C=()=>{const i=new Date(d.endDate),f=new Date;return Math.max(0,Math.ceil((i.getTime()-f.getTime())/(1e3*60*60*24)))},g=[{label:"Resume Optimizations",used:d.optimizationsUsed,total:d.optimizationsTotal,icon:e.jsx(Gs,{className:"w-5 h-5"}),color:"#00E6B8"},{label:"Score Checks",used:d.scoreChecksUsed,total:d.scoreChecksTotal,icon:e.jsx(Ke,{className:"w-5 h-5"}),color:"#38bdf8"},{label:"LinkedIn Messages",used:d.linkedinMessagesUsed,total:d.linkedinMessagesTotal,icon:e.jsx(Bs,{className:"w-5 h-5"}),color:"#a78bfa"},{label:"Guided Builds",used:d.guidedBuildsUsed,total:d.guidedBuildsTotal,icon:e.jsx(at,{className:"w-5 h-5"}),color:"#fb923c"}],c=C();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#0a1a24] rounded-xl border border-[#0c1d25] p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-[rgba(0,230,184,0.1)] flex items-center justify-center",children:e.jsx(Se,{className:"w-5 h-5 text-[#00E6B8]"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-slate-200",children:d.planId.replace(/_/g," ").replace(/\b\w/g,i=>i.toUpperCase())}),e.jsxs("p",{className:"text-xs text-slate-500",children:[d.status==="active"?"Active":"Expired"," · ",c," days remaining"]})]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium border ${d.status==="active"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/30":"bg-red-500/10 text-red-400 border-red-500/30"}`,children:d.status==="active"?"Active":"Expired"})]}),e.jsxs("div",{className:"flex items-center gap-6 text-xs text-slate-500",children:[e.jsxs("span",{children:["Started: ",new Date(d.startDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]}),e.jsxs("span",{children:["Expires: ",new Date(d.endDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ts,{className:"w-4 h-4 text-slate-500"}),e.jsx("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wider",children:"Credit Usage"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:g.map(i=>{const f=i.total-i.used,R=i.total>0?i.used/i.total*100:0;return e.jsxs(de.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"bg-[#0a1a24] rounded-xl border border-[#0c1d25] p-4 hover:border-[rgba(0,230,184,0.15)] transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:i.color+"15",color:i.color},children:i.icon}),e.jsx("span",{className:"text-sm font-medium text-slate-300",children:i.label})]}),e.jsxs("span",{className:"text-xs text-slate-500",children:[i.used,"/",i.total]})]}),e.jsx("div",{className:"w-full bg-slate-800 rounded-full h-1.5",children:e.jsx("div",{className:"h-1.5 rounded-full transition-all duration-700",style:{width:R+"%",backgroundColor:i.color}})}),e.jsx("p",{className:"text-xs mt-2",style:{color:f===0?"#f87171":"#64748b"},children:f===0?"All credits used":f+" remaining"})]},i.label)})})]})]})},Je={success:{label:"Success",color:"bg-emerald-500/10 text-emerald-400 border-emerald-500/30",icon:e.jsx(ee,{className:"w-3.5 h-3.5"})},failed:{label:"Failed",color:"bg-red-500/10 text-red-400 border-red-500/30",icon:e.jsx(ss,{className:"w-3.5 h-3.5"})},pending:{label:"Pending",color:"bg-amber-500/10 text-amber-400 border-amber-500/30",icon:e.jsx(Ze,{className:"w-3.5 h-3.5"})}},ot=()=>{const{user:o}=me(),[p,d]=n.useState([]),[B,E]=n.useState(!0);n.useEffect(()=>{o&&l()},[o]);const l=async()=>{if(o)try{const{data:c,error:i}=await be.from("payment_transactions").select("*").eq("user_id",o.id).order("created_at",{ascending:!1}).limit(50);if(i)throw i;d(c||[])}catch(c){console.error("Error loading transactions:",c)}finally{E(!1)}},S=c=>(c/100).toLocaleString("en-IN",{minimumFractionDigits:0}),C=c=>c?c.replace(/_/g," ").replace(/\b\w/g,i=>i.toUpperCase()):"Purchase";if(B)return e.jsxs("div",{className:"flex items-center justify-center py-16",children:[e.jsx(D,{className:"w-6 h-6 animate-spin text-[#00E6B8] mr-2"}),e.jsx("span",{className:"text-slate-400",children:"Loading payment history..."})]});if(p.length===0)return e.jsxs("div",{className:"text-center py-16 bg-[#0a1a24] rounded-xl border border-[#0c1d25]",children:[e.jsx(lt,{className:"w-14 h-14 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-2",children:"No Transactions"}),e.jsx("p",{className:"text-slate-400 max-w-sm mx-auto",children:"Your payment history will appear here once you make a purchase."})]});const g=p.filter(c=>c.status==="success").reduce((c,i)=>c+i.final_amount,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-[#0a1a24] rounded-xl border border-[#0c1d25] p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Xs,{className:"w-4 h-4 text-[#00E6B8]"}),e.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wider",children:"Total Spent"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-100",children:S(g)})]}),e.jsxs("div",{className:"bg-[#0a1a24] rounded-xl border border-[#0c1d25] p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(rt,{className:"w-4 h-4 text-cyan-400"}),e.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wider",children:"Purchases"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-100",children:p.filter(c=>c.status==="success").length})]}),e.jsxs("div",{className:"bg-[#0a1a24] rounded-xl border border-[#0c1d25] p-4 col-span-2 sm:col-span-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-amber-400"}),e.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wider",children:"Saved"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-100",children:S(p.reduce((c,i)=>c+(i.discount_amount||0)+(i.wallet_deduction_amount||0),0))})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Transaction History"}),e.jsx("div",{className:"space-y-3",children:p.map(c=>{const i=Je[c.status]||Je.pending;return e.jsxs(de.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"bg-[#0a1a24] border border-[#0c1d25] rounded-xl p-4 hover:border-[rgba(0,230,184,0.15)] transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-200",children:c.plan_id?c.plan_id.replace(/_/g," ").replace(/\b\w/g,f=>f.toUpperCase()):C(c.purchase_type)}),e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:new Date(c.created_at).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-100",children:S(c.final_amount)}),e.jsxs("span",{className:`inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full border mt-1 ${i.color}`,children:[i.icon," ",i.label]})]})]}),(c.coupon_code||c.wallet_deduction_amount>0)&&e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-2 pt-2 border-t border-[#0c1d25]",children:[c.coupon_code&&e.jsxs("span",{children:["Coupon: ",e.jsx("span",{className:"text-[#00E6B8]",children:c.coupon_code})]}),c.wallet_deduction_amount>0&&e.jsxs("span",{children:["Wallet used: ",S(c.wallet_deduction_amount)]})]})]},c.id)})})]})]})},dt=[{value:"internship",label:"Internship"},{value:"fulltime",label:"Full-time"},{value:"both",label:"Both"}],mt=[{value:"daily",label:"Daily Digest"},{value:"weekly",label:"Weekly Summary"},{value:"immediate",label:"Immediate Alerts"}],xt=()=>{const{user:o}=me(),[p,d]=n.useState(!0),[B,E]=n.useState(!1),[l,S]=n.useState(null),[C,g]=n.useState({role_type:"both",passout_year:new Date().getFullYear(),tech_interests:[],preferred_modes:[]}),[c,i]=n.useState(!1),[f,R]=n.useState([]),[M,X]=n.useState([]),[F,T]=n.useState("daily"),[m,W]=n.useState({totalNotifications:0,lastNotificationDate:null});n.useEffect(()=>{o&&O()},[o]);const O=async()=>{if(o){d(!0);try{const[r,w,k,H]=await Promise.all([Q.getUserPreferences(o.id),Q.getNotificationSubscription(o.id),Q.getAvailableDomains(),Q.getNotificationStats(o.id)]);r&&g({role_type:r.role_type||"both",passout_year:r.passout_year||new Date().getFullYear(),tech_interests:r.tech_interests||[],preferred_modes:r.preferred_modes||[]}),w&&(i(w.is_subscribed),R(w.preferred_domains||[]),T(w.notification_frequency||"daily")),X(k),W(H)}catch(r){console.error("Error loading preferences:",r)}finally{d(!1)}}},te=async()=>{if(o){E(!0),S(null);try{await Q.savePreferences({user_id:o.id,role_type:C.role_type,passout_year:C.passout_year,tech_interests:C.tech_interests,preferred_modes:C.preferred_modes}),await Q.updateNotificationSubscription(o.id,f,c,F),S({type:"success",text:"Preferences saved successfully"})}catch{S({type:"error",text:"Failed to save preferences"})}finally{E(!1),setTimeout(()=>S(null),3e3)}}},xe=r=>{R(w=>w.includes(r)?w.filter(k=>k!==r):[...w,r])},[ae,le]=n.useState(""),re=()=>{var w;const r=ae.trim();r&&!((w=C.tech_interests)!=null&&w.includes(r))&&(g(k=>({...k,tech_interests:[...k.tech_interests||[],r]})),le(""))},ue=r=>{g(w=>({...w,tech_interests:(w.tech_interests||[]).filter(k=>k!==r)}))};return p?e.jsxs("div",{className:"flex items-center justify-center py-16",children:[e.jsx(D,{className:"w-6 h-6 animate-spin text-[#00E6B8] mr-2"}),e.jsx("span",{className:"text-slate-400",children:"Loading preferences..."})]}):e.jsxs("div",{className:"space-y-6",children:[l&&e.jsxs(de.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},className:`flex items-center gap-2 px-4 py-3 rounded-xl border text-sm ${l.type==="success"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/30":"bg-red-500/10 text-red-400 border-red-500/30"}`,children:[l.type==="success"?e.jsx(ee,{className:"w-4 h-4"}):e.jsx(fe,{className:"w-4 h-4"}),l.text]}),e.jsxs("div",{className:"bg-[#0a1a24] rounded-xl border border-[#0c1d25] p-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(es,{className:"w-4 h-4 text-[#00E6B8]"}),e.jsx("h3",{className:"text-sm font-semibold text-slate-200",children:"Job Preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1.5",children:"Role Type"}),e.jsx("select",{value:C.role_type||"both",onChange:r=>g(w=>({...w,role_type:r.target.value})),className:"w-full bg-[#05131A] border border-[#0c1d25] text-slate-200 rounded-lg px-3 py-2.5 text-sm focus:outline-none focus:border-[#00E6B8] transition-colors",children:dt.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-slate-400 mb-1.5",children:[e.jsx(as,{className:"w-3.5 h-3.5 inline mr-1"}),"Passout Year"]}),e.jsx("input",{type:"number",value:C.passout_year||"",onChange:r=>g(w=>({...w,passout_year:parseInt(r.target.value)||void 0})),className:"w-full bg-[#05131A] border border-[#0c1d25] text-slate-200 rounded-lg px-3 py-2.5 text-sm focus:outline-none focus:border-[#00E6B8] transition-colors",min:2e3,max:2035})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1.5",children:"Tech Interests"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:ae,onChange:r=>le(r.target.value),onKeyDown:r=>r.key==="Enter"&&(r.preventDefault(),re()),placeholder:"e.g., React, Python, AWS",className:"flex-1 bg-[#05131A] border border-[#0c1d25] text-slate-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-[#00E6B8] transition-colors"}),e.jsx("button",{onClick:re,className:"px-3 py-2 bg-[rgba(0,230,184,0.15)] text-[#00E6B8] rounded-lg text-sm font-medium hover:bg-[rgba(0,230,184,0.25)] transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(C.tech_interests||[]).map(r=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-[#05131A] border border-[#0c1d25] text-slate-300 rounded-full text-xs",children:[r,e.jsx("button",{onClick:()=>ue(r),className:"text-slate-500 hover:text-red-400 ml-1",children:"×"})]},r))})]})]}),e.jsxs("div",{className:"bg-[#0a1a24] rounded-xl border border-[#0c1d25] p-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-4 h-4 text-cyan-400"}),e.jsx("h3",{className:"text-sm font-semibold text-slate-200",children:"Email Notifications"})]}),e.jsxs("button",{onClick:()=>i(!c),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${c?"bg-[rgba(0,230,184,0.15)] text-[#00E6B8]":"bg-slate-800 text-slate-500"}`,children:[c?e.jsx(Js,{className:"w-3.5 h-3.5"}):e.jsx(Zs,{className:"w-3.5 h-3.5"}),c?"Subscribed":"Unsubscribed"]})]}),c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Frequency"}),e.jsx("div",{className:"flex gap-2",children:mt.map(r=>e.jsx("button",{onClick:()=>T(r.value),className:`px-3 py-2 rounded-lg text-xs font-medium transition-colors ${F===r.value?"bg-[rgba(0,230,184,0.15)] text-[#00E6B8] border border-[rgba(0,230,184,0.3)]":"bg-[#05131A] text-slate-400 border border-[#0c1d25] hover:border-slate-600"}`,children:r.label},r.value))})]}),M.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:[e.jsx(Rs,{className:"w-3.5 h-3.5 inline mr-1"}),"Preferred Domains"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:M.map(r=>e.jsx("button",{onClick:()=>xe(r),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-colors border ${f.includes(r)?"bg-[rgba(0,230,184,0.15)] text-[#00E6B8] border-[rgba(0,230,184,0.3)]":"bg-[#05131A] text-slate-400 border-[#0c1d25] hover:border-slate-600"}`,children:r},r))})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 pt-2 border-t border-[#0c1d25]",children:[e.jsxs("span",{children:["Total notifications: ",m.totalNotifications]}),m.lastNotificationDate&&e.jsxs("span",{children:["Last sent: ",new Date(m.lastNotificationDate).toLocaleDateString("en-IN",{day:"numeric",month:"short"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:te,disabled:B,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-[rgba(0,230,184,0.15)] text-[#00E6B8] rounded-lg hover:bg-[rgba(0,230,184,0.25)] transition-colors text-sm font-medium disabled:opacity-50",children:[B?e.jsx(D,{className:"w-4 h-4 animate-spin"}):e.jsx(ls,{className:"w-4 h-4"}),B?"Saving...":"Save Preferences"]})})]})},Pe=[{id:"profile",label:"My Profile",icon:Ee},{id:"bookings",label:"My Bookings",icon:Re},{id:"usage",label:"Usage & Plan",icon:ts},{id:"payments",label:"Payments",icon:Qe},{id:"preferences",label:"Preferences",icon:Ks},{id:"wallet",label:"Wallet & Referrals",icon:Ae},{id:"security",label:"Security",icon:Fs}],ut={getUserWalletBalance:async o=>(console.log("Fetching wallet balance for user "+o),Promise.resolve(1e3)),redeemWalletBalance:async(o,p,d,B)=>(console.log("Redeeming wallet balance for user "+o+" amount "+p+" method "+d+" details "+JSON.stringify(B)),Promise.resolve({success:!0,transactionId:"mock_tx_123"})),parseResumeWithAI:async o=>{throw new Error("EdenAI API key is not configured. Please contact support.")}},pt=se({degree:y().min(1,"Degree is required"),school:y().min(1,"School is required"),year:y().min(1,"Year is required"),cgpa:y().optional(),location:y().optional()}),ht=se({role:y().min(1,"Role is required"),company:y().min(1,"Company is required"),year:y().min(1,"Year is required"),bullets:q(y().min(1,"Bullet point cannot be empty")).min(1,"At least one bullet point is required")}),bt=se({title:y().min(1,"Project title is required"),bullets:q(y().min(1,"Bullet point cannot be empty")).min(1,"At least one bullet point is required")}),ft=se({category:y().min(1,"Category is required"),list:q(y().min(1,"Skill cannot be empty")).min(1,"At least one skill is required")}),gt=se({title:y().min(1,"Certification title is required"),description:y().optional()}),jt=se({full_name:y().min(1,"Full name is required"),email_address:y().email("Invalid email address"),phone:y().optional(),linkedin_profile:y().optional().or(Ye("")),github_profile:y().optional().or(Ye("")),resume_headline:y().optional(),current_location:y().optional(),education_details:q(pt),experience_details:q(ht),projects_details:q(bt),skills_details:q(ft),certifications_details:q(gt)}),Zt=()=>{var Oe;const p=new URLSearchParams(window.location.search).get("tab")||"profile",[d,B]=n.useState(0),E=Be(),{user:l,revalidateUserSession:S,markProfilePromptSeen:C}=me(),[g,c]=n.useState(p),[i,f]=n.useState(!1),[R,M]=n.useState(null),[X,F]=n.useState(!1),[T,m]=n.useState(0),[W,O]=n.useState(!0),[te,xe]=n.useState(!1),[ae,le]=n.useState(null),[re,ue]=n.useState(""),[r,w]=n.useState("upi"),[k,H]=n.useState({}),[Fe,Y]=n.useState(null),[rs,Te]=n.useState(!1),[is,I]=n.useState(!1),[ge,V]=n.useState({title:"",message:"",type:"info"}),[pe,Ie]=n.useState(!1),[ns,ie]=n.useState(""),[Le,je]=n.useState(null),[Ne,cs]=n.useState(null),{register:j,handleSubmit:os,reset:ye,control:ne,watch:ds,formState:{errors:x,isDirty:Nt},setValue:yt,getValues:ve}=Ps({resolver:Ms(jt),defaultValues:{full_name:"",email_address:"",phone:"",linkedin_profile:"",github_profile:"",resume_headline:"",current_location:"",education_details:[],experience_details:[],projects_details:[],skills_details:[],certifications_details:[]}}),{fields:ms,append:xs,remove:us}=ce({control:ne,name:"education_details"}),{fields:J,append:ps,remove:hs,update:Ue}=ce({control:ne,name:"experience_details"}),{fields:Z,append:bs,remove:fs,update:$e}=ce({control:ne,name:"projects_details"}),{fields:K,append:gs,remove:js,update:qe}=ce({control:ne,name:"skills_details"}),{fields:Ns,append:ys,remove:vs}=ce({control:ne,name:"certifications_details"}),he=n.useCallback(()=>{const t=ve();let s=0,u=0;return["full_name","email_address"].forEach(N=>{u+=2,t[N]&&(s+=2)}),["phone","current_location","resume_headline"].forEach(N=>{u+=1.5,t[N]&&(s+=1.5)}),["linkedin_profile","github_profile"].forEach(N=>{u+=1,t[N]&&(s+=1)}),["education_details","experience_details","skills_details","projects_details","certifications_details"].forEach(N=>{u+=2;const P=t[N];P&&P.length>0&&(s+=2)}),Math.round(s/u*100)},[ve]),[z,Me]=n.useState(0),ws=ds();n.useEffect(()=>{Me(he())},[ws,he]),n.useEffect(()=>{l&&setTimeout(()=>Me(he()),100)},[l,he]),n.useEffect(()=>{c(p)},[p]),n.useEffect(()=>{l&&(ye({full_name:l.name||"",email_address:l.email||"",phone:l.phone||"",linkedin_profile:l.linkedin||"",github_profile:l.github||"",resume_headline:l.resumeHeadline||"",current_location:l.currentLocation||"",education_details:l.educationDetails||[],experience_details:l.experienceDetails||[],projects_details:l.projectsDetails||[],skills_details:l.skillsDetails||[],certifications_details:l.certificationsDetails||[]}),ks())},[l,ye,d]);const ks=n.useCallback(async()=>{if(l){O(!0);try{const{data:t,error:s}=await be.from("wallet_transactions").select("amount, status").eq("user_id",l.id);if(s){console.error("Error fetching wallet data:",s);return}const h=(t||[]).filter(b=>b.status==="completed").reduce((b,v)=>b+parseFloat(v.amount),0);m(Math.max(0,h))}catch(t){console.error("Error fetching wallet data:",t)}finally{O(!1)}}},[l]),_s=async()=>{if(!l)return;Y(null),Te(!1),f(!0);const t=parseFloat(re);if(isNaN(t)||t<=0){Y("Please enter a valid amount."),f(!1);return}if(t>T){Y("Insufficient wallet balance."),f(!1);return}if(t<100){Y("Minimum redemption amount is ₹100."),f(!1);return}if(r==="upi"&&!k.upiId){Y("UPI ID is required."),f(!1);return}if(r==="bank_transfer"&&(!k.bankAccount||!k.ifscCode||!k.accountHolderName)){Y("Bank account, IFSC code, and account holder name are required."),f(!1);return}try{const{data:{session:s},error:u}=await be.auth.getSession();if(u||!(s!=null&&s.access_token))throw new Error("Authentication required for redemption.");const h=await fetch("https://rixmudvtbfkjpwjoefon.supabase.co/functions/v1/send-redemption-email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s.access_token},body:JSON.stringify({userId:l.id,amount:t,redeemMethod:r,redeemDetails:k})}),b=await h.json();if(!h.ok||!b.success)throw new Error(b.error||"Redemption failed.");Te(!0),ue(""),H({}),B(v=>v+1),V({title:"Redemption Request Sent!",message:"Your request has been submitted and will be processed shortly.",type:"success"}),I(!0)}catch(s){Y(s.message||"Failed to submit redemption request."),V({title:"Redemption Failed",message:s.message||"Failed to submit redemption request.",type:"error"}),I(!0)}finally{f(!1)}},Ss=async t=>{if(l){f(!0),M(null),F(!1),console.log("Submitting profile data:",t);try{await Ws.updateUserProfile(l.id,{full_name:t.full_name,email_address:t.email_address,phone:t.phone,linkedin_profile:t.linkedin_profile,github_profile:t.github_profile,resume_headline:t.resume_headline,current_location:t.current_location,education_details:t.education_details,experience_details:t.experience_details,projects_details:t.projects_details,skills_details:t.skills_details,certifications_details:t.certifications_details}),await S(),await C(),F(!0),V({title:"Profile Updated!",message:"Your profile has been saved successfully.",type:"success"}),I(!0),l.hasSeenProfilePrompt===!1&&E("/")}catch(s){M(s.message||"Failed to update profile"),V({title:"Update Failed",message:s.message||"Failed to update profile.",type:"error"}),I(!0)}finally{f(!1)}}},We=async t=>{if(!t.text.trim()){V({title:"Upload Failed",message:t.extraction_mode==="OCR"?"Failed to extract text from image-based PDF. Please upload a searchable PDF or a DOCX/TXT file.":"Could not extract text from the file. Please try another file or enter manually.",type:"error"}),I(!0);return}cs(t),je(null),Ie(!0),ie("Extracting resume content...");try{console.log("Extracted text for parsing:",t.text),ie("Analyzing resume structure..."),await new Promise(a=>setTimeout(a,500)),ie("Parsing with AI (this may take 10-30 seconds)...");const s=await ut.parseResumeWithAI(t.text);console.log("Parsed Resume Data from mockPaymentService:",s),ie("Populating form fields...");const u=a=>{if(!Array.isArray(a))return[];const G=a.map(_=>typeof _=="string"?_.trim():_&&typeof _=="object"?(_.description||_.title||_.text||"").toString().trim():String(_||"").trim()).filter(Boolean),U=new Set;return G.filter(_=>U.has(_)?!1:(U.add(_),!0))},h=Array.isArray(s.education)?s.education.map(a=>({degree:((a==null?void 0:a.degree)||"").toString(),school:((a==null?void 0:a.school)||"").toString(),year:((a==null?void 0:a.year)||"").toString(),cgpa:a!=null&&a.cgpa?a.cgpa.toString():"",location:a!=null&&a.location?a.location.toString():""})):[],b=Array.isArray(s.workExperience)?s.workExperience.map(a=>({role:((a==null?void 0:a.role)||"").toString(),company:((a==null?void 0:a.company)||"").toString(),year:((a==null?void 0:a.year)||"").toString(),bullets:u(a==null?void 0:a.bullets).length?u(a==null?void 0:a.bullets):[""]})):[],v=Array.isArray(s.projects)?s.projects.map(a=>({title:((a==null?void 0:a.title)||"").toString(),bullets:u(a==null?void 0:a.bullets).length?u(a==null?void 0:a.bullets):[""]})):[],A=Array.isArray(s.skills)?s.skills.map(a=>({category:((a==null?void 0:a.category)||"").toString(),list:u(a==null?void 0:a.list)})):[],P=(Array.isArray(s.certifications)?s.certifications:[]).map(a=>typeof a=="string"?{title:a,description:""}:{title:((a==null?void 0:a.title)||"").toString(),description:a!=null&&a.description?a.description.toString():""}),L={full_name:s.name||"",email_address:s.email||"",phone:s.phone||"",linkedin_profile:s.linkedin||"",github_profile:s.github||"",resume_headline:s.summary||s.careerObjective||"",current_location:s.location||"",education_details:h,experience_details:b,projects_details:v,skills_details:A,certifications_details:P};console.log("New form data prepared for reset:",L),ye(L,{keepDefaultValues:!1,keepValues:!1,keepDirty:!1}),console.log("Form data AFTER reset:",ve()),V({title:"Resume Parsed!",message:"Your resume data has been pre-filled into the form.",type:"success"}),I(!0),je(null)}catch(s){console.error("Error parsing resume with AI:",s),je(s.message||"Failed to parse resume with AI. Please try again or fill manually."),V({title:"Parsing Failed",message:s.message||"Failed to parse resume with AI. Please try again or fill manually.",type:"error"}),I(!0)}finally{Ie(!1),ie("")}},Cs=()=>{Ne&&We(Ne)};return e.jsxs("div",{className:"min-h-screen pb-20 md:pl-16 bg-[#05131A]",children:[e.jsxs("div",{className:"flex min-h-screen",children:[e.jsxs("aside",{className:"hidden lg:flex flex-col w-64 flex-shrink-0 border-r border-[#0c1d25] bg-[#071018] sticky top-0 h-screen overflow-y-auto",children:[e.jsxs("button",{onClick:()=>E(-1),className:"flex items-center gap-2 px-5 py-4 text-sm text-slate-400 hover:text-[#00E6B8] transition-colors border-b border-[#0c1d25]",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Back"]}),e.jsxs("div",{className:"px-5 py-6 border-b border-[#0c1d25]",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-[#00E6B8] to-cyan-500 flex items-center justify-center mb-3",children:e.jsx(Ee,{className:"w-7 h-7 text-white"})}),e.jsx("h2",{className:"text-base font-semibold text-slate-100 truncate",children:(l==null?void 0:l.name)||"User"}),e.jsx("p",{className:"text-xs text-slate-500 truncate mt-0.5",children:l==null?void 0:l.email}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-slate-500",children:"Profile"}),e.jsxs("span",{className:z>=80?"text-[#00E6B8]":z>=50?"text-amber-400":"text-red-400",children:[z,"%"]})]}),e.jsx("div",{className:"w-full bg-[#0c1d25] rounded-full h-1.5",children:e.jsx("div",{className:"h-1.5 rounded-full transition-all duration-500 "+(z>=80?"bg-[#00E6B8]":z>=50?"bg-amber-400":"bg-red-400"),style:{width:z+"%"}})})]})]}),e.jsx("nav",{className:"flex-1 py-3 px-3",children:Pe.map(t=>{const s=t.icon;return e.jsxs("button",{onClick:()=>c(t.id),className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors mb-0.5 "+(g===t.id?"bg-[rgba(0,230,184,0.12)] text-[#00E6B8]":"text-slate-400 hover:text-slate-200 hover:bg-[#0c1d25]"),children:[e.jsx(s,{className:"w-4 h-4 flex-shrink-0"}),t.label]},t.id)})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"lg:hidden sticky top-0 z-10 bg-[#05131A]/95 backdrop-blur-sm border-b border-[#0c1d25]",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[e.jsx("button",{onClick:()=>E(-1),className:"p-2 text-slate-400 hover:text-slate-200 transition-colors rounded-lg",children:e.jsx(Ve,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-base font-semibold text-slate-100 truncate",children:(l==null?void 0:l.name)||"My Profile"}),e.jsxs("p",{className:"text-xs text-slate-500",children:[z,"% complete"]})]})]}),e.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:e.jsx("div",{className:"flex px-4 pb-3 gap-2 min-w-max",children:Pe.map(t=>{const s=t.icon;return e.jsxs("button",{onClick:()=>c(t.id),className:"flex items-center gap-1.5 px-3 py-2 rounded-lg text-xs font-medium whitespace-nowrap transition-all duration-200 "+(g===t.id?"bg-[rgba(0,230,184,0.12)] text-[#00E6B8]":"text-[#7A8CAA] hover:text-[#00E6B8] hover:bg-[#0c1d25]"),children:[e.jsx(s,{className:"w-3.5 h-3.5"}),t.label]},t.id)})})})]}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 max-w-4xl",children:[e.jsx("div",{className:"hidden lg:block mb-6",children:e.jsx("h1",{className:"text-2xl font-bold text-slate-100",children:((Oe=Pe.find(t=>t.id===g))==null?void 0:Oe.label)||"My Profile"})}),pe&&e.jsx("div",{className:"fixed inset-0 z-50 bg-[#05131A]/80 backdrop-blur-sm flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-3 px-6 py-4 rounded-xl border border-[#0c1d25] shadow-lg bg-[#0a1a24] max-w-sm",children:[e.jsx(D,{className:"w-8 h-8 animate-spin text-[#00E6B8]"}),e.jsx("span",{className:"text-slate-200 font-medium text-center",children:ns||"Parsing your resume..."}),e.jsx("div",{className:"w-full bg-[#0c1d25] rounded-full h-1.5",children:e.jsx("div",{className:"bg-[#00E6B8] h-1.5 rounded-full animate-pulse",style:{width:"60%"}})}),e.jsx("p",{className:"text-xs text-slate-400 text-center",children:"This may take 10-30 seconds depending on resume complexity"})]})}),g==="profile"&&e.jsxs("form",{onSubmit:os(Ss),className:"space-y-6",children:[R&&e.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-xl",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(fe,{className:"w-5 h-5 text-red-400 mr-3 mt-0.5"}),e.jsx("p",{className:"text-red-300 text-sm font-medium",children:R})]})}),X&&e.jsx("div",{className:"p-4 bg-emerald-500/10 border border-emerald-500/30 rounded-xl",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ee,{className:"w-5 h-5 text-emerald-400 mr-3 mt-0.5"}),e.jsx("p",{className:"text-emerald-300 text-sm font-medium",children:"Profile updated successfully!"})]})}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl shadow-lg p-4 sm:p-6 border border-slate-700/50",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-slate-100 mb-4 flex items-center",children:[e.jsx(Ts,{className:"w-5 h-5 mr-2 text-purple-400"}),"Upload Resume to Pre-fill"]}),e.jsx(Os,{onFileUpload:We}),e.jsx("p",{className:"text-sm text-slate-400 mt-4",children:"Upload your resume (PDF, DOCX, TXT) to automatically populate your profile details."}),Le&&e.jsx("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(fe,{className:"w-5 h-5 text-red-400 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-red-300 text-sm",children:Le})]}),Ne&&e.jsxs("button",{type:"button",onClick:Cs,className:"ml-3 px-3 py-1 text-sm bg-red-500/20 hover:bg-red-500/30 text-red-300 rounded-lg flex items-center gap-1 transition-colors",children:[e.jsx(Is,{className:"w-3 h-3"})," Retry"]})]})})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl shadow-lg p-4 sm:p-6 border border-slate-700/50",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-slate-100 mb-4 flex items-center",children:[e.jsx(Ee,{className:"w-5 h-5 mr-2 text-cyan-400"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",...j("full_name"),className:"input-base",placeholder:"Enter your full name"}),x.full_name&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:x.full_name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"email",...j("email_address"),className:"input-base bg-slate-700/50 cursor-not-allowed",disabled:!0}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1 flex items-center",children:[e.jsx(Ls,{className:"w-3 h-3 mr-1"}),"Email is linked to your account and cannot be changed here"]}),x.email_address&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:x.email_address.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",...j("phone"),className:"input-base",placeholder:"+91 9876543210"}),x.phone&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:x.phone.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Current Location"}),e.jsx("input",{type:"text",...j("current_location"),className:"input-base"}),x.current_location&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:x.current_location.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Resume Headline / Summary"}),e.jsx("textarea",{...j("resume_headline"),className:"input-base h-24 resize-y"}),x.resume_headline&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:x.resume_headline.message})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl shadow-lg p-4 sm:p-6 border border-slate-700/50",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-slate-100 mb-4 flex items-center",children:[e.jsx(Qs,{className:"w-5 h-5 mr-2 text-cyan-400"}),"Social Links"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"LinkedIn Profile URL"}),e.jsx("input",{type:"url",...j("linkedin_profile"),className:"input-base"}),x.linkedin_profile&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:x.linkedin_profile.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"GitHub Profile URL"}),e.jsx("input",{type:"url",...j("github_profile"),className:"input-base"}),x.github_profile&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:x.github_profile.message})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl shadow-lg p-4 sm:p-6 border border-slate-700/50",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-slate-100 mb-4 flex items-center",children:[e.jsx(as,{className:"w-5 h-5 mr-2 text-green-400"}),"Education"]}),ms.map((t,s)=>{var u,h,b,v,A,N,P,L,a,G,U,_;return e.jsxs("div",{className:"space-y-3 border-t border-slate-700/50 pt-4 mt-4 first:border-t-0 first:pt-0 first:mt-0",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"button",onClick:()=>us(s),className:"text-red-400 hover:text-red-300 text-sm flex items-center",children:[e.jsx(oe,{className:"w-4 h-4 mr-1"})," Remove"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Degree"}),e.jsx("input",{type:"text",...j(`education_details.${s}.degree`),className:"input-base"}),((h=(u=x.education_details)==null?void 0:u[s])==null?void 0:h.degree)&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:(v=(b=x.education_details[s])==null?void 0:b.degree)==null?void 0:v.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"School"}),e.jsx("input",{type:"text",...j(`education_details.${s}.school`),className:"input-base"}),((N=(A=x.education_details)==null?void 0:A[s])==null?void 0:N.school)&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:(L=(P=x.education_details[s])==null?void 0:P.school)==null?void 0:L.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Year"}),e.jsx("input",{type:"text",...j(`education_details.${s}.year`),className:"input-base"}),((G=(a=x.education_details)==null?void 0:a[s])==null?void 0:G.year)&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:(_=(U=x.education_details[s])==null?void 0:U.year)==null?void 0:_.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"CGPA (Optional)"}),e.jsx("input",{type:"text",...j(`education_details.${s}.cgpa`),className:"input-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Location (Optional)"}),e.jsx("input",{type:"text",...j(`education_details.${s}.location`),className:"input-base"})]})]})]},t.id)}),e.jsxs("button",{type:"button",onClick:()=>xs({degree:"",school:"",year:"",cgpa:"",location:""}),className:"btn-secondary mt-4 flex items-center space-x-2",children:[e.jsx($,{className:"w-4 h-4"})," ",e.jsx("span",{children:"Add Education"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl shadow-lg p-4 sm:p-6 border border-slate-700/50",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-slate-100 mb-4 flex items-center",children:[e.jsx(es,{className:"w-5 h-5 mr-2 text-purple-400"}),"Work Experience"]}),J.map((t,s)=>{var u,h,b,v,A,N,P,L,a,G,U,_;return e.jsxs("div",{className:"space-y-3 border-t border-slate-700/50 pt-4 mt-4 first:border-t-0 first:pt-0 first:mt-0",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"button",onClick:()=>hs(s),className:"text-red-400 hover:text-red-300 text-sm flex items-center",children:[e.jsx(oe,{className:"w-4 h-4 mr-1"})," Remove"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),e.jsx("input",{type:"text",...j(`experience_details.${s}.role`),className:"input-base"}),((h=(u=x.experience_details)==null?void 0:u[s])==null?void 0:h.role)&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:(v=(b=x.experience_details[s])==null?void 0:b.role)==null?void 0:v.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Company"}),e.jsx("input",{type:"text",...j(`experience_details.${s}.company`),className:"input-base"}),((N=(A=x.experience_details)==null?void 0:A[s])==null?void 0:N.company)&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:(L=(P=x.experience_details[s])==null?void 0:P.company)==null?void 0:L.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year / Duration"}),e.jsx("input",{type:"text",...j(`experience_details.${s}.year`),className:"input-base"}),((G=(a=x.experience_details)==null?void 0:a[s])==null?void 0:G.year)&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:(_=(U=x.experience_details[s])==null?void 0:U.year)==null?void 0:_.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Responsibilities / Achievements (Bullet Points)"}),J[s].bullets.map((we,ke)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"text",...j(`experience_details.${s}.bullets.${ke}`),className:"input-base flex-1"}),e.jsx("button",{type:"button",onClick:()=>{const He=[...J[s].bullets];He.splice(ke,1),Ue(s,{...J[s],bullets:He})},className:"text-red-500 hover:text-red-700",children:e.jsx(Ce,{className:"w-4 h-4"})})]},ke)),e.jsxs("button",{type:"button",onClick:()=>{const we=[...J[s].bullets,""];Ue(s,{...J[s],bullets:we})},className:"btn-secondary btn-sm mt-2 flex items-center space-x-1",children:[e.jsx($,{className:"w-3 h-3"})," ",e.jsx("span",{children:"Add Bullet"})]})]})]})]},t.id)}),e.jsxs("button",{type:"button",onClick:()=>ps({role:"",company:"",year:"",bullets:[""]}),className:"btn-secondary mt-4 flex items-center space-x-2",children:[e.jsx($,{className:"w-4 h-4"})," ",e.jsx("span",{children:"Add Experience"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl shadow-lg p-4 sm:p-6 border border-slate-700/50",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-slate-100 mb-4 flex items-center",children:[e.jsx(et,{className:"w-5 h-5 mr-2 text-orange-400"}),"Projects"]}),Z.map((t,s)=>{var u,h,b,v;return e.jsxs("div",{className:"space-y-3 border-t border-slate-700/50 pt-4 mt-4 first:border-t-0 first:pt-0 first:mt-0",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"button",onClick:()=>fs(s),className:"text-red-400 hover:text-red-300 text-sm flex items-center",children:[e.jsx(oe,{className:"w-4 h-4 mr-1"})," Remove"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Project Title"}),e.jsx("input",{type:"text",...j(`projects_details.${s}.title`),className:"input-base"}),((h=(u=x.projects_details)==null?void 0:u[s])==null?void 0:h.title)&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:(v=(b=x.projects_details[s])==null?void 0:b.title)==null?void 0:v.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Description (Bullet Points)"}),Z[s].bullets.map((A,N)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"text",...j(`projects_details.${s}.bullets.${N}`),className:"input-base flex-1"}),e.jsx("button",{type:"button",onClick:()=>{const P=[...Z[s].bullets];P.splice(N,1),$e(s,{...Z[s],bullets:P})},className:"text-red-400 hover:text-red-300",children:e.jsx(Ce,{className:"w-4 h-4"})})]},N)),e.jsxs("button",{type:"button",onClick:()=>{const A=[...Z[s].bullets,""];$e(s,{...Z[s],bullets:A})},className:"btn-secondary btn-sm mt-2 flex items-center space-x-1",children:[e.jsx($,{className:"w-3 h-3"})," ",e.jsx("span",{children:"Add Bullet"})]})]})]},t.id)}),e.jsxs("button",{type:"button",onClick:()=>bs({title:"",bullets:[""]}),className:"btn-secondary mt-4 flex items-center space-x-2",children:[e.jsx($,{className:"w-4 h-4"})," ",e.jsx("span",{children:"Add Project"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl shadow-lg p-4 sm:p-6 border border-slate-700/50",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-slate-100 mb-4 flex items-center",children:[e.jsx(Ke,{className:"w-5 h-5 mr-2 text-red-400"}),"Skills"]}),K.map((t,s)=>{var u,h,b,v;return e.jsxs("div",{className:"space-y-3 border-t border-slate-700/50 pt-4 mt-4 first:border-t-0 first:pt-0 first:mt-0",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"button",onClick:()=>js(s),className:"text-red-400 hover:text-red-300 text-sm flex items-center",children:[e.jsx(oe,{className:"w-4 h-4 mr-1"})," Remove"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Category"}),e.jsx("input",{type:"text",...j(`skills_details.${s}.category`),className:"input-base"}),((h=(u=x.skills_details)==null?void 0:u[s])==null?void 0:h.category)&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:(v=(b=x.skills_details[s])==null?void 0:b.category)==null?void 0:v.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Skills (comma-separated)"}),K[s].list.map((A,N)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"text",...j(`skills_details.${s}.list.${N}`),className:"input-base flex-1"}),e.jsx("button",{type:"button",onClick:()=>{const P=[...K[s].list];P.splice(N,1),qe(s,{...K[s],list:P})},className:"text-red-400 hover:text-red-300",children:e.jsx(Ce,{className:"w-4 h-4"})})]},N)),e.jsxs("button",{type:"button",onClick:()=>{const A=[...K[s].list,""];qe(s,{...K[s],list:A})},className:"btn-secondary btn-sm mt-2 flex items-center space-x-1",children:[e.jsx($,{className:"w-3 h-3"})," ",e.jsx("span",{children:"Add Skill"})]})]})]},t.id)}),e.jsxs("button",{type:"button",onClick:()=>gs({category:"",list:[]}),className:"btn-secondary mt-4 flex items-center space-x-2",children:[e.jsx($,{className:"w-4 h-4"})," ",e.jsx("span",{children:"Add Skill Category"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl shadow-lg p-4 sm:p-6 border border-slate-700/50",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-slate-100 mb-4 flex items-center",children:[e.jsx(st,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Certifications"]}),Ns.map((t,s)=>{var u,h,b,v;return e.jsxs("div",{className:"space-y-3 border-t border-slate-700/50 pt-4 mt-4 first:border-t-0 first:pt-0 first:mt-0",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"button",onClick:()=>vs(s),className:"text-red-400 hover:text-red-300 text-sm flex items-center",children:[e.jsx(oe,{className:"w-4 h-4 mr-1"})," Remove"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Certification Title"}),e.jsx("input",{type:"text",...j(`certifications_details.${s}.title`),className:"input-base"}),((h=(u=x.certifications_details)==null?void 0:u[s])==null?void 0:h.title)&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:(v=(b=x.certifications_details[s])==null?void 0:b.title)==null?void 0:v.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Description (Optional)"}),e.jsx("input",{type:"text",...j(`certifications_details.${s}.description`),className:"input-base"})]})]},t.id)}),e.jsxs("button",{type:"button",onClick:()=>ys({title:"",description:""}),className:"btn-secondary mt-4 flex items-center space-x-2",children:[e.jsx($,{className:"w-4 h-4"})," ",e.jsx("span",{children:"Add Certification"})]})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t border-slate-700/50",children:e.jsxs("button",{disabled:i||pe,className:"btn-primary flex items-center space-x-2",children:[i?e.jsx(D,{className:"w-5 h-5 animate-spin"}):pe?e.jsx(D,{className:"w-5 h-5 animate-spin"}):e.jsx(ls,{className:"w-5 h-5"}),e.jsx("span",{children:i?"Saving...":pe?"Please wait…":"Save Profile"})]})})]}),g==="wallet"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl shadow-lg p-4 sm:p-6 border border-slate-700/50",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-slate-100 mb-4",children:"Referral Code"}),l!=null&&l.referralCode?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between bg-slate-900/50 rounded-lg p-3 border border-slate-700/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Your Code"}),e.jsx("p",{className:"font-mono text-xl font-bold text-slate-100",children:l.referralCode})]}),e.jsxs("button",{onClick:()=>{var t;return(t=navigator.clipboard)==null?void 0:t.writeText(l.referralCode||"")},className:"px-3 py-2 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-200 flex items-center gap-2 transition-colors",title:"Copy code",children:[e.jsx(ze,{className:"w-4 h-4"})," Copy"]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-slate-900/50 rounded-lg p-3 border border-slate-700/50",children:[e.jsxs("div",{className:"truncate mr-3",children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Share Link"}),e.jsx("p",{className:"text-sm font-medium text-emerald-400 truncate",children:`${window.location.origin}/?ref=${l.referralCode}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{var t;return(t=navigator.clipboard)==null?void 0:t.writeText(`${window.location.origin}/?ref=${l==null?void 0:l.referralCode}`)},className:"px-3 py-2 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-200 transition-colors",title:"Copy link",children:e.jsx(ze,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:async()=>{var s;const t=`${window.location.origin}/?ref=${l==null?void 0:l.referralCode}`;try{navigator.share?await navigator.share({title:"Join PrimoBoost AI",text:"Use my referral link to sign up!",url:t}):(await((s=navigator.clipboard)==null?void 0:s.writeText(t)),alert("Referral link copied to clipboard"))}catch{}},className:"px-3 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 text-white flex items-center gap-2 transition-colors",title:"Share link",children:[e.jsx(tt,{className:"w-4 h-4"})," Share"]})]})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"You don’t have a referral code yet."}),ae&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:ae}),e.jsxs("button",{disabled:te,onClick:async()=>{if(l){le(null),xe(!0);try{const t=(l.username||l.email.split("@")[0]||"PRIMO").toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,6),s=Math.random().toString(36).slice(2,6).toUpperCase(),u=`${t}${s}`,{error:h}=await be.from("user_profiles").update({referral_code:u}).eq("id",l.id);if(h)throw h;await S()}catch{le("Failed to generate referral code. Please try again later.")}finally{xe(!1)}}},className:"btn-primary inline-flex items-center gap-2",children:[te?e.jsx(D,{className:"w-4 h-4 animate-spin"}):null,e.jsx("span",{children:te?"Generating...":"Generate Referral Code"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl shadow-lg p-4 sm:p-6 border border-slate-700/50",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-slate-100 mb-4 flex items-center",children:[e.jsx(Ae,{className:"w-5 h-5 mr-2 text-emerald-400"}),"My Wallet Balance"]}),W?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(D,{className:"w-6 h-6 animate-spin text-emerald-400 mr-2"}),e.jsx("span",{className:"text-slate-300",children:"Loading wallet..."})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-300 text-lg",children:"Current Balance"}),e.jsxs("p",{className:"text-5xl font-bold text-emerald-400",children:["₹",T.toFixed(2)]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Earned through referrals and bonuses"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl shadow-lg p-4 sm:p-6 border border-slate-700/50",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-slate-100 mb-4 flex items-center",children:[e.jsx(Us,{className:"w-5 h-5 mr-2 text-cyan-400"}),"Redeem Balance"]}),Fe&&e.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-xl mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(fe,{className:"w-5 h-5 text-red-400 mr-3 mt-0.5"}),e.jsx("p",{className:"text-red-300 text-sm font-medium",children:Fe})]})}),rs&&e.jsx("div",{className:"p-4 bg-emerald-500/10 border border-emerald-500/30 rounded-xl mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ee,{className:"w-5 h-5 text-emerald-400 mr-3 mt-0.5"}),e.jsx("p",{className:"text-emerald-300 text-sm font-medium",children:"Redemption request submitted successfully!"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Amount to Redeem (₹)"}),e.jsx("input",{type:"number",value:re,onChange:t=>ue(t.target.value),className:"input-base",min:"100",step:"1",placeholder:"Minimum ₹100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Redemption Method"}),e.jsxs("select",{value:r,onChange:t=>w(t.target.value),className:"input-base",children:[e.jsx("option",{value:"upi",children:"UPI"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]}),r==="upi"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"UPI ID"}),e.jsx("input",{type:"text",value:k.upiId||"",onChange:t=>H(s=>({...s,upiId:t.target.value})),className:"input-base",placeholder:"e.g., yourname@bank"})]}),r==="bank_transfer"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Bank Account Number"}),e.jsx("input",{type:"text",value:k.bankAccount||"",onChange:t=>H(s=>({...s,bankAccount:t.target.value})),className:"input-base",placeholder:"e.g., 1234567890"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"IFSC Code"}),e.jsx("input",{type:"text",value:k.ifscCode||"",onChange:t=>H(s=>({...s,ifscCode:t.target.value})),className:"input-base",placeholder:"e.g., HDFC0000123"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Account Holder Name"}),e.jsx("input",{type:"text",value:k.accountHolderName||"",onChange:t=>H(s=>({...s,accountHolderName:t.target.value})),className:"input-base",placeholder:"e.g., John Doe"})]})]}),e.jsxs("button",{onClick:_s,disabled:i||W,className:"btn-primary w-full flex items-center justify-center space-x-2",children:[i?e.jsx(D,{className:"w-5 h-5 animate-spin"}):e.jsx(Ae,{className:"w-5 h-5"}),e.jsx("span",{children:i?"Processing...":"Redeem Now"})]})]})]})]}),g==="bookings"&&e.jsx(nt,{}),g==="usage"&&e.jsx(ct,{}),g==="payments"&&e.jsx(ot,{}),g==="preferences"&&e.jsx(xt,{}),g==="security"&&e.jsx($s,{})]})]})]}),e.jsx(qs,{isOpen:is,onClose:()=>I(!1),title:ge.title,message:ge.message,type:ge.type})]})};export{Zt as UserProfileManagement};
