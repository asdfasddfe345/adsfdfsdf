import{j as e,A as E,m as L}from"./vendor-motion-_XdJ9pBm.js";import{r as a}from"./vendor-react-B4msnGgW.js";import{a as D}from"./adminSessionService-BGVyJgNb.js";import{s as O}from"./sessionBookingService-DouAmnnK.js";import{c as Q,L as P,b as V,a1 as W,U as X,m as R,n as Y,C as Z,a as ee}from"./index-BbSeE-q4.js";import{S as se}from"./settings-BIk3p6dz.js";import{C as te}from"./chevron-up-n5SsRS4Y.js";import{T as I}from"./type-Cez_liJx.js";import{D as ae}from"./dollar-sign-DGh0A-Eb.js";import{P as $}from"./plus-C66eGFjH.js";import{a as le,T as ie}from"./toggle-right-x2PKfQV-.js";import{S as re}from"./save-CEu7G9Ms.js";import"./vendor-pdf-B1igRwBP.js";import"./vendor-supabase-B_87WqdG.js";import"./vendor-forms-BxTF4-4_.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=Q("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),Se=()=>{const[o,h]=a.useState(null),[g,f]=a.useState(!0),[b,j]=a.useState(!1),[p,B]=a.useState(!1),[d,m]=a.useState(null),[v,N]=a.useState(""),[y,S]=a.useState(""),[w,C]=a.useState(0),[n,x]=a.useState([]),[k,T]=a.useState(0),[_,H]=a.useState(5),[c,u]=a.useState([]),[r,A]=a.useState(!0);a.useEffect(()=>{M()},[]);const M=async()=>{f(!0);const t=await O.getActiveService();if(t){const s=await D.getServiceForEditing(t.id);s&&(h(s),N(s.title),S(s.description),C(s.price/100),x([...s.highlights||[]]),T(s.bonus_credits),H(s.max_slots_per_day),u([...s.time_slots||[]]),A(s.is_active))}f(!1)},F=async()=>{if(!o)return;j(!0),m(null);const t=await D.updateService(o.id,{title:v.trim(),description:y.trim(),price:Math.round(w*100),highlights:n.filter(s=>s.trim()!==""),bonus_credits:k,max_slots_per_day:_,time_slots:c.filter(s=>s.trim()!==""),is_active:r});t.success?(m({type:"success",message:"Service updated successfully"}),await M()):m({type:"error",message:t.error||"Failed to save"}),j(!1),setTimeout(()=>m(null),4e3)},U=()=>x([...n,""]),z=t=>x(n.filter((s,l)=>l!==t)),G=(t,s)=>{const l=[...n];l[t]=s,x(l)},q=()=>u([...c,""]),J=t=>u(c.filter((s,l)=>l!==t)),K=(t,s)=>{const l=[...c];l[t]=s,u(l)};return g?e.jsx("div",{className:"bg-slate-800/40 border border-slate-700/40 rounded-xl p-6 flex items-center justify-center",children:e.jsx(P,{className:"w-5 h-5 text-emerald-400 animate-spin"})}):o?e.jsxs("div",{className:"bg-slate-800/40 border border-slate-700/40 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>B(!p),className:"w-full flex items-center justify-between p-5 hover:bg-slate-800/60 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-blue-500/10 flex items-center justify-center",children:e.jsx(se,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-white font-semibold text-sm",children:"Service Settings"}),e.jsx("p",{className:"text-slate-500 text-xs",children:"Edit session page title, price, highlights, and time slots"})]})]}),p?e.jsx(te,{className:"w-5 h-5 text-slate-400"}):e.jsx(V,{className:"w-5 h-5 text-slate-400"})]}),e.jsx(E,{children:p&&e.jsx(L.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25},className:"overflow-hidden",children:e.jsxs("div",{className:"px-5 pb-5 space-y-5 border-t border-slate-700/40 pt-5",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[e.jsx(i,{icon:e.jsx(I,{className:"w-4 h-4"}),label:"Title",children:e.jsx("input",{type:"text",value:v,onChange:t=>N(t.target.value),className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500/50"})}),e.jsx(i,{icon:e.jsx(I,{className:"w-4 h-4"}),label:"Description",children:e.jsx("textarea",{value:y,onChange:t=>S(t.target.value),rows:2,className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500/50 resize-none"})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-5",children:[e.jsx(i,{icon:e.jsx(ae,{className:"w-4 h-4"}),label:"Price (INR)",children:e.jsx("input",{type:"number",min:0,value:w,onChange:t=>C(Number(t.target.value)),className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500/50"})}),e.jsx(i,{icon:e.jsx(W,{className:"w-4 h-4"}),label:"Bonus Credits",children:e.jsx("input",{type:"number",min:0,value:k,onChange:t=>T(Number(t.target.value)),className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500/50"})}),e.jsx(i,{icon:e.jsx(X,{className:"w-4 h-4"}),label:"Max Slots / Day",children:e.jsx("input",{type:"number",min:1,max:20,value:_,onChange:t=>H(Number(t.target.value)),className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500/50"})})]}),e.jsx(i,{icon:e.jsx(oe,{className:"w-4 h-4"}),label:"Highlights",children:e.jsxs("div",{className:"space-y-2",children:[n.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:t,onChange:l=>G(s,l.target.value),placeholder:`Highlight ${s+1}`,className:"flex-1 bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500/50"}),e.jsx("button",{onClick:()=>z(s),className:"p-2 rounded-lg text-red-400 hover:bg-red-500/10 transition-colors",children:e.jsx(R,{className:"w-4 h-4"})})]},s)),e.jsxs("button",{onClick:U,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-emerald-400 hover:bg-emerald-500/10 rounded-lg transition-colors",children:[e.jsx($,{className:"w-3.5 h-3.5"}),"Add Highlight"]})]})}),e.jsx(i,{icon:e.jsx(Y,{className:"w-4 h-4"}),label:"Time Slots (format: HH:MM-HH:MM)",children:e.jsxs("div",{className:"space-y-2",children:[c.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:t,onChange:l=>K(s,l.target.value),placeholder:"e.g. 10:00-11:00",className:"flex-1 bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm font-mono focus:outline-none focus:ring-1 focus:ring-emerald-500/50"}),e.jsx("button",{onClick:()=>J(s),className:"p-2 rounded-lg text-red-400 hover:bg-red-500/10 transition-colors",children:e.jsx(R,{className:"w-4 h-4"})})]},s)),e.jsxs("button",{onClick:q,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-emerald-400 hover:bg-emerald-500/10 rounded-lg transition-colors",children:[e.jsx($,{className:"w-3.5 h-3.5"}),"Add Time Slot"]})]})}),e.jsxs("div",{className:"flex items-center justify-between bg-slate-900/30 rounded-lg px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r?e.jsx(le,{className:"w-5 h-5 text-emerald-400"}):e.jsx(ie,{className:"w-5 h-5 text-slate-500"}),e.jsxs("span",{className:"text-sm text-slate-300",children:["Service is ",r?"Active":"Inactive"]})]}),e.jsx("button",{onClick:()=>A(!r),className:`relative w-11 h-6 rounded-full transition-colors ${r?"bg-emerald-500":"bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 rounded-full bg-white transition-transform ${r?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx(E,{children:d&&e.jsxs(L.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:`flex items-center gap-2 text-sm ${d.type==="success"?"text-emerald-400":"text-red-400"}`,children:[d.type==="success"?e.jsx(Z,{className:"w-4 h-4"}):e.jsx(ee,{className:"w-4 h-4"}),d.message]})}),e.jsxs("button",{onClick:F,disabled:b,className:"ml-auto flex items-center gap-2 px-5 py-2.5 bg-emerald-500 hover:bg-emerald-600 disabled:opacity-50 text-white text-sm font-semibold rounded-xl transition-colors",children:[b?e.jsx(P,{className:"w-4 h-4 animate-spin"}):e.jsx(re,{className:"w-4 h-4"}),"Save Changes"]})]})]})})})]}):e.jsx("div",{className:"bg-slate-800/40 border border-slate-700/40 rounded-xl p-6 text-center text-slate-400",children:"No session service found."})},i=({icon:o,label:h,children:g})=>e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-1.5 text-xs font-medium text-slate-400 mb-1.5",children:[o,h]}),g]});export{Se as AdminSessionServiceEditor};
