import{j as e}from"./vendor-motion-_XdJ9pBm.js";import{u as M,r as t}from"./vendor-react-B4msnGgW.js";import{a as u}from"./adminBlogService-CrbxTU7H.js";import{F as h,a as $,L as Q,E as U,m as q}from"./index-BbSeE-q4.js";import{P as v}from"./plus-C66eGFjH.js";import{S as G}from"./search-DiwtcWwp.js";import{S as I}from"./square-pen-CSgRhjVa.js";import"./vendor-pdf-B1igRwBP.js";import"./vendor-supabase-B_87WqdG.js";import"./vendor-forms-BxTF4-4_.js";const Z=()=>{const s=M(),[b,w]=t.useState([]),[C,S]=t.useState([]),[P,p]=t.useState(!0),[y,x]=t.useState(null),[d,E]=t.useState(""),[l,F]=t.useState("all"),[o,A]=t.useState("all"),[i,n]=t.useState(1),[c,D]=t.useState(1),[g,m]=t.useState(null);t.useEffect(()=>{k(),L()},[i,l,o,d]);const L=async()=>{try{const r=await u.fetchAllCategories();S(r)}catch(r){console.error("Error loading categories:",r)}},k=async()=>{try{p(!0),x(null);const r={};l!=="all"&&(r.status=l),o!=="all"&&(r.category_id=o),d&&(r.search=d);const a=await u.fetchAllPosts(i,20,r);w(a.posts),D(a.totalPages)}catch(r){console.error("Error loading posts:",r),x(r.message||"Failed to load blog posts")}finally{p(!1)}},T=async r=>{if(g!==r){m(r),setTimeout(()=>m(null),3e3);return}try{await u.deleteBlogPost(r),await k(),m(null)}catch(a){console.error("Error deleting post:",a),x(a.message||"Failed to delete post")}},_=r=>{const a={draft:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",published:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",scheduled:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a[r]}`,children:r.charAt(0).toUpperCase()+r.slice(1)})},B=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not set";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-dark-50 dark:to-dark-200 py-12 px-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3",children:[e.jsx(h,{className:"w-8 h-8 text-blue-600"}),"Blog Posts Management"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Create and manage blog posts for your website"})]}),e.jsxs("button",{onClick:()=>s("/admin/blog/new"),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-3 rounded-lg transition-colors flex items-center gap-2 justify-center",children:[e.jsx(v,{className:"w-5 h-5"}),"Create New Post"]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-100 rounded-2xl shadow-lg border border-gray-200 dark:border-dark-300 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-dark-300",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search posts...",value:d,onChange:r=>{E(r.target.value),n(1)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-dark-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-dark-200 dark:text-gray-100"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:l,onChange:r=>{F(r.target.value),n(1)},className:"px-4 py-2 border border-gray-300 dark:border-dark-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-dark-200 dark:text-gray-100",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"scheduled",children:"Scheduled"})]}),e.jsxs("select",{value:o,onChange:r=>{A(r.target.value),n(1)},className:"px-4 py-2 border border-gray-300 dark:border-dark-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-dark-200 dark:text-gray-100",children:[e.jsx("option",{value:"all",children:"All Categories"}),C.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]})]})}),y&&e.jsxs("div",{className:"m-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-start gap-3",children:[e.jsx($,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-red-800 dark:text-red-200",children:"Error"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:y})]})]}),P?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Q,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading posts..."})]}):b.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(h,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No Posts Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:d||l!=="all"||o!=="all"?"Try adjusting your filters":"Get started by creating your first blog post"}),e.jsxs("button",{onClick:()=>s("/admin/blog/new"),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-3 rounded-lg transition-colors inline-flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5"}),"Create New Post"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-dark-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Categories"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Published"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Views"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-dark-100 divide-y divide-gray-200 dark:divide-dark-300",children:b.map(r=>{var a,f,j;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-200 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[r.featured_image_url?e.jsx("img",{src:r.featured_image_url,alt:"",className:"w-12 h-12 rounded-lg object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-200 dark:bg-dark-300 flex items-center justify-center",children:e.jsx(h,{className:"w-6 h-6 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:r.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:r.slug})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_(r.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[(a=r.categories)==null?void 0:a.slice(0,2).map(N=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs rounded",children:N.name},N.id)),(((f=r.categories)==null?void 0:f.length)||0)>2&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-dark-300 text-gray-600 dark:text-gray-400 text-xs rounded",children:["+",(((j=r.categories)==null?void 0:j.length)||0)-2]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:B(r.published_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-4 h-4"}),r.view_count]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>s(`/admin/blog/edit/${r.id}`),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Edit",children:e.jsx(I,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>T(r.id),className:`transition-colors ${g===r.id?"text-red-600 dark:text-red-400":"text-gray-400 hover:text-red-600 dark:hover:text-red-400"}`,title:g===r.id?"Click again to confirm":"Delete",children:e.jsx(q,{className:"w-5 h-5"})})]})})]},r.id)})})]})}),c>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-dark-300 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page ",i," of ",c]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>n(r=>Math.max(1,r-1)),disabled:i===1,className:"px-4 py-2 border border-gray-300 dark:border-dark-400 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-dark-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsx("button",{onClick:()=>n(r=>Math.min(c,r+1)),disabled:i===c,className:"px-4 py-2 border border-gray-300 dark:border-dark-400 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-dark-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-4",children:[e.jsx("button",{onClick:()=>s("/admin/blog/categories"),className:"bg-white dark:bg-dark-100 border border-gray-300 dark:border-dark-300 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-200 transition-colors font-medium",children:"Manage Categories"}),e.jsx("button",{onClick:()=>s("/admin/blog/tags"),className:"bg-white dark:bg-dark-100 border border-gray-300 dark:border-dark-300 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-200 transition-colors font-medium",children:"Manage Tags"})]})]})})};export{Z as AdminBlogPostsList};
