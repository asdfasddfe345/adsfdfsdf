import{j as e,m as f}from"./vendor-motion-_XdJ9pBm.js";import{u as g,r as y}from"./vendor-react-B4msnGgW.js";import{u as w,S as i,O as N,n as b,U as d,r as j}from"./index-BbSeE-q4.js";const E=({job:s,isAuthenticated:v,onShowAuth:_,onManualApply:k,onAutoApply:A,onCompleteProfile:C})=>{const{user:$}=w(),r=g(),o=y.useMemo(()=>{const t=s.eligible_years;return t?(Array.isArray(t)?t:t.includes(",")||t.includes("|")||t.includes("/")?t.split(/[,|/]/):t.split(/\s+/)).map(a=>a.trim()).filter((a,h,u)=>a.length>0&&u.indexOf(a)===h).slice(0,3):[]},[s.eligible_years]),m=()=>{r(`/jobs/${s.id}`)},x=t=>{t.stopPropagation(),r(`/jobs/${s.id}`)},p=async t=>{t.stopPropagation()},n=s.skills||[],c=Math.floor((Date.now()-new Date(s.posted_date).getTime())/(1e3*60*60*24));return e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},onClick:m,className:`bg-slate-900/80 backdrop-blur-xl rounded-xl border ${s.match_score?"border-green-500/50 shadow-lg shadow-green-500/20":"border-slate-700/50"} hover:border-emerald-500/50 hover:shadow-lg hover:shadow-emerald-500/10 transition-all duration-300 cursor-pointer overflow-hidden`,children:[s.match_score&&e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 px-4 py-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-white",children:[e.jsx(i,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-bold text-lg",children:[s.match_score,"% Match"]})]}),s.match_reason&&e.jsx("span",{className:"text-white text-xs bg-white/20 px-2 py-1 rounded-full",children:"AI Recommended"})]}),e.jsx("div",{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-16 h-16 sm:w-16 sm:h-16 bg-slate-800/50 rounded-lg border border-slate-700/50 flex items-center justify-center p-1 sm:p-2 overflow-hidden",children:s.company_logo_url||s.company_logo?e.jsx("img",{src:s.company_logo_url||s.company_logo,alt:`${s.company_name} jobs - ${s.role_title} opening`,className:"w-full h-full object-contain object-center",loading:"lazy",onError:t=>{const l=t.target;l.style.display="none";const a=l.parentElement;a&&(a.innerHTML=`<div class="w-full h-full rounded-lg bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-lg">${s.company_name.charAt(0)}</div>`)}}):e.jsx("div",{className:"w-full h-full rounded-lg bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-lg",children:s.company_name.charAt(0)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-white mb-1 truncate",children:s.role_title}),e.jsx("p",{className:"text-sm text-slate-400 mb-2",children:e.jsx("span",{role:"link",tabIndex:0,onClick:t=>{t.stopPropagation(),r(`/jobs/company/${s.company_name.toLowerCase().replace(/\s+/g,"-")}`)},onKeyDown:t=>{t.key==="Enter"&&(t.stopPropagation(),r(`/jobs/company/${s.company_name.toLowerCase().replace(/\s+/g,"-")}`))},className:"hover:text-emerald-400 transition-colors cursor-pointer",children:s.company_name})})]}),s.user_has_applied&&s.commission_percentage&&s.commission_percentage>0&&e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsxs("svg",{className:"w-10 h-10 transform -rotate-90",children:[e.jsx("circle",{cx:"20",cy:"20",r:"16",stroke:"currentColor",strokeWidth:"2.5",fill:"none",className:"text-slate-700"}),e.jsx("circle",{cx:"20",cy:"20",r:"16",stroke:"currentColor",strokeWidth:"2.5",fill:"none",strokeDasharray:`${2*Math.PI*16}`,strokeDashoffset:`${2*Math.PI*16*(1-s.commission_percentage/100)}`,className:s.user_application_method==="auto"?"text-green-400":"text-cyan-400"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-[10px] font-bold text-slate-300",children:[Math.round(s.commission_percentage),"%"]})})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] sm:text-xs text-slate-400 mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(N,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:s.location_city||s.location_type})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(b,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Full-time"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(d,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:s.experience_required})]}),o.length>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(j,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:o.join(" / ")})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[n.slice(0,6).map((t,l)=>e.jsx("span",{className:"px-2 py-0.5 bg-cyan-500/10 text-cyan-300 rounded text-[11px] font-medium border border-cyan-500/30",children:t},l)),n.length>6&&e.jsxs("span",{className:"px-2 py-0.5 bg-slate-800/50 text-slate-400 rounded text-[11px] font-medium",children:["+",n.length-6]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-1.5",children:[s.has_referral&&e.jsxs("span",{className:"px-2 py-0.5 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded text-[10px] font-semibold flex items-center animate-pulse",children:[e.jsx(d,{className:"w-2.5 h-2.5 mr-0.5"}),"Referral"]}),s.ai_polished&&e.jsxs("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-300 rounded text-[10px] font-medium flex items-center border border-purple-500/30",children:[e.jsx(i,{className:"w-2.5 h-2.5 mr-0.5"}),"AI"]}),e.jsx("span",{className:"text-[11px] text-slate-500",children:c===0?"Today":`${c}d ago`})]}),e.jsx("div",{className:"flex items-center sm:space-x-2 gap-2 sm:gap-0",children:s.is_active?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:p,disabled:!0,"aria-disabled":!0,className:"relative px-3 py-1.5 bg-gradient-to-r from-emerald-500 to-green-500 text-white rounded-lg text-xs font-semibold shadow-md transition-all duration-200 w-auto flex items-center space-x-1 opacity-60 cursor-not-allowed",children:[e.jsx(i,{className:"w-3 h-3"}),e.jsx("span",{children:"Auto Apply"}),e.jsx("span",{className:"absolute inset-0 rounded-lg bg-black/40 flex items-center justify-center text-[10px] font-semibold",children:"Coming soon"})]}),e.jsx("button",{onClick:x,className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-lg text-sm font-semibold hover:from-cyan-400 hover:to-blue-400 shadow-md hover:shadow-cyan-500/30 transition-all duration-200 w-full sm:w-auto",children:"Manual Apply"})]}):e.jsx("button",{disabled:!0,className:"px-4 py-2 bg-slate-700/50 text-slate-400 rounded-lg text-sm font-semibold cursor-not-allowed border border-slate-600/50 w-full sm:w-auto",children:"Expired"})})]})]})]})})]})};export{E as J};
