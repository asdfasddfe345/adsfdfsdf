import{j as e}from"./vendor-motion-_XdJ9pBm.js";import{r as o}from"./vendor-react-B4msnGgW.js";import{L,C as P,X as R,a as $,s as g}from"./index-BbSeE-q4.js";import{I as F}from"./image-kEimRz0x.js";import{U as b}from"./upload-CurydzNZ.js";const O=({currentImageUrl:y,onImageUploaded:j,onImageRemoved:k})=>{const[n,x]=o.useState(!1),[p,i]=o.useState(null),[t,d]=o.useState(y||null),[v,m]=o.useState(!1),c=o.useRef(null),N=r=>["image/png","image/jpeg","image/jpg"].includes(r.type)?r.size>5242880?"Image size must be less than 5MB":null:"Please upload a PNG or JPEG image",w=async r=>{const a=r.name.split(".").pop(),l=`${`${Date.now()}-${Math.random().toString(36).substring(7)}.${a}`}`,{error:h}=await g.storage.from("company-logos").upload(l,r,{cacheControl:"3600",upsert:!1});if(h)throw new Error(`Upload failed: ${h.message}`);const{data:{publicUrl:S}}=g.storage.from("company-logos").getPublicUrl(l);return S},u=async r=>{i(null);const a=N(r);if(a){i(a);return}x(!0);try{const s=URL.createObjectURL(r);d(s);const l=await w(r);j(l),d(l),i(null)}catch(s){console.error("Error uploading image:",s),i(s instanceof Error?s.message:"Failed to upload image"),d(null)}finally{x(!1)}},U=r=>{var s;const a=(s=r.target.files)==null?void 0:s[0];a&&u(a)},D=r=>{r.preventDefault(),m(!0)},C=r=>{r.preventDefault(),m(!1)},E=r=>{r.preventDefault(),m(!1);const a=r.dataTransfer.files[0];a&&u(a)},I=async()=>{if(t&&t.includes("company-logos"))try{const r=t.split("/company-logos/")[1];r&&await g.storage.from("company-logos").remove([r])}catch(r){console.error("Error removing image from storage:",r)}d(null),k(),c.current&&(c.current.value="")},f=()=>{var r;(r=c.current)==null||r.click()};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(F,{className:"w-4 h-4 inline mr-1"}),"Company Logo"]}),t?e.jsx("div",{className:"relative border-2 border-gray-200 dark:border-dark-300 rounded-xl p-4 bg-gray-50 dark:bg-dark-200",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 w-24 h-24 bg-white dark:bg-dark-100 rounded-lg overflow-hidden border border-gray-200 dark:border-dark-300 flex items-center justify-center",children:e.jsx("img",{src:t,alt:"Company logo preview",className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(P,{className:"w-5 h-5 text-green-600 dark:text-neon-cyan-400"}),e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Logo uploaded successfully"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 break-all",children:t})]}),e.jsx("button",{type:"button",onClick:I,className:"flex-shrink-0 p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Remove image",children:e.jsx(R,{className:"w-5 h-5"})})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{onDragOver:D,onDragLeave:C,onDrop:E,onClick:f,className:`border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-all duration-200 ${v?"border-blue-500 bg-blue-50 dark:border-neon-cyan-400 dark:bg-neon-cyan-500/10":"border-gray-300 hover:border-blue-400 dark:border-dark-300 dark:hover:border-neon-cyan-400"} ${n?"pointer-events-none opacity-50":""}`,children:[e.jsx("input",{ref:c,type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:U,className:"hidden",disabled:n}),n?e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx(L,{className:"w-12 h-12 text-blue-500 dark:text-neon-cyan-400 animate-spin"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"Uploading image..."})]}):e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-neon-cyan-500/20 w-16 h-16 rounded-full flex items-center justify-center",children:e.jsx(b,{className:"w-8 h-8 text-blue-600 dark:text-neon-cyan-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-200 font-medium mb-1",children:"Drop company logo here or click to upload"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"PNG or JPEG, max 5MB"})]})]})]}),e.jsxs("button",{type:"button",onClick:f,disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(b,{className:"w-5 h-5"}),"Browse from Device"]})]}),p&&e.jsxs("div",{className:"flex items-start space-x-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-500/50 rounded-lg",children:[e.jsx($,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:p})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This logo will be displayed on the job listing cards and job details page"})]})};export{O as I};
