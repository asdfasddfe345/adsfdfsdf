import{E as h,F as w}from"./fullResumeRewriter16ParameterService-DSVdtcHM.js";class T{static async evaluateResume(t,a,e,i,r=!0){if(console.log("ðŸŽ¯ ATSScoreChecker16Parameter.evaluateResume() called"),console.log("ðŸ“Š This should return 16 parameters, NOT 220+ metrics"),i&&r){console.log("ðŸ” 16-Parameter ATS: Using enhanced processing (OCR enabled)");const s=await h.processAndScore(i,void 0,a);return this.mapToSixteenParameters(s,a)}else{console.log("ðŸ“ 16-Parameter ATS: Using text-only processing (OCR disabled)");const s={resumeText:t,jobDescription:a,extractionMode:"TEXT",filename:e},o=await h.calculateScore(s);return this.mapToSixteenParameters(o,a)}}static async evaluateResumeWithOCR(t,a){return console.log("ðŸ” 16-Parameter ATS: OCR processing explicitly requested"),this.evaluateResume("",a,t.name,t,!0)}static async evaluateResumeTextOnly(t,a,e){return console.log("ðŸ“ 16-Parameter ATS: Text-only processing explicitly requested"),this.evaluateResume(t,a,e,void 0,!1)}static mapToSixteenParameters(t,a){const e=!!(a&&a.length>50),i=this.calculateIntelligentParameterScores(t,a);Object.values(i).reduce((f,p)=>f+p,0);const r={keywordMatch:25,skillsAlignment:20,experienceRelevance:15,technicalCompetencies:12,educationScore:10,quantifiedAchievements:8,employmentHistory:8,industryExperience:7,jobTitleMatch:6,careerProgression:6,certifications:5,formatting:5,contentQuality:4,grammar:3,resumeLength:2,filenameQuality:2};Object.keys(i).forEach(f=>{i[f]=Math.min(i[f],r[f]||5)});const s=Math.min(100,Math.max(0,Object.values(i).reduce((f,p)=>f+p,0))),o=this.getMatchQuality(s),c=this.getInterviewChance(s),m=this.generateSummary(t,e),l=t.keyStrengths.slice(0,3),u=t.improvementAreas.slice(0,3),g=this.mapMissingKeywords(t.missing_keywords_enhanced),n={overallScore:s,confidence:t.confidence,matchQuality:o,interviewChance:c,scores:{keywordMatch:i.keywordMatch,skillsAlignment:i.skillsAlignment,experienceRelevance:i.experienceRelevance,technicalCompetencies:i.technicalCompetencies,educationScore:i.educationScore,quantifiedAchievements:i.quantifiedAchievements,employmentHistory:i.employmentHistory,industryExperience:i.industryExperience,jobTitleMatch:i.jobTitleMatch,careerProgression:i.careerProgression,certifications:i.certifications,formatting:i.formatting,contentQuality:i.contentQuality,grammar:i.grammar,resumeLength:i.resumeLength,filenameQuality:i.filenameQuality},summary:m,strengths:l,areasToImprove:u,missingKeywords:g,unified16Scores:void 0};return console.log("âœ… 16-Parameter ATS Result:",{overallScore:n.overallScore,parameterCount:Object.keys(n.scores).length,sampleParameters:Object.keys(n.scores).slice(0,3)}),n}static async evaluateWithUnified16(t,a,e){var r;console.log("ðŸŽ¯ ATSScoreChecker16Parameter.evaluateWithUnified16() - Using UNIFIED 16 parameters"),console.log("ðŸ“ Resume text length:",t.length),console.log("ðŸ“‹ JD length:",a.length);const i=await this.evaluateResumeTextOnly(t,a);console.log("ðŸ“Š Legacy result obtained, now getting unified scores...");try{console.log("ðŸ”„ Calling FullResumeRewriter16ParameterService.scoreOnly()...");const s=await w.scoreOnly(t,a,e);console.log("âœ… scoreOnly returned:",s);const o=s.overallScore;i.unified16Scores=s.scores,i.overallScore=o,i.matchQuality=this.getMatchQuality(o),i.interviewChance=this.getInterviewChance(o),i.scores=this.mapUnifiedToLegacy(s.scores);const c=s.scores.filter(m=>m.percentage<80).flatMap(m=>m.suggestions).slice(0,5);c.length>0&&(i.areasToImprove=c),i.summary=this.generateSummaryFromScore(o,!0),console.log("âœ… Unified 16-Parameter Result:",{overallScore:o,parameterCount:s.scores.length,parameters:s.scores.map(m=>`${m.parameter}: ${m.percentage}%`),unified16ScoresSet:!!i.unified16Scores})}catch(s){console.error("âŒ Failed to get unified 16 scores:",s),console.error("âŒ Error details:",s instanceof Error?s.message:String(s)),console.error("âŒ Stack:",s instanceof Error?s.stack:"No stack")}return console.log("ðŸ” Final result unified16Scores:",((r=i.unified16Scores)==null?void 0:r.length)||"undefined"),i}static async evaluateWithUnified16AndParsedData(t,a,e,i){var s,o,c,m;console.log("ðŸŽ¯ ATSScoreChecker16Parameter.evaluateWithUnified16AndParsedData() - Using PARSED data"),console.log("ðŸ“ Resume text length:",t.length),console.log("ðŸ“‹ JD length:",a.length),console.log("ðŸ“Š Parsed data:",{name:e==null?void 0:e.name,skills:((s=e==null?void 0:e.skills)==null?void 0:s.length)||0,workExp:((o=e==null?void 0:e.workExperience)==null?void 0:o.length)||0,projects:((c=e==null?void 0:e.projects)==null?void 0:c.length)||0,education:((m=e==null?void 0:e.education)==null?void 0:m.length)||0});const r=await this.evaluateResumeTextOnly(t,a);console.log("ðŸ“Š Legacy result obtained, now getting unified scores with parsed data...");try{console.log("ðŸ”„ Calling FullResumeRewriter16ParameterService.scoreWithParsedData()...");const l=await w.scoreWithParsedData(e,a,i);console.log("âœ… scoreWithParsedData returned:",l);const u=l.overallScore;r.unified16Scores=l.scores,r.overallScore=u,r.matchQuality=this.getMatchQuality(u),r.interviewChance=this.getInterviewChance(u),r.scores=this.mapUnifiedToLegacy(l.scores);const g=l.scores.filter(n=>n.percentage<80).flatMap(n=>n.suggestions).slice(0,5);g.length>0&&(r.areasToImprove=g),r.summary=this.generateSummaryFromScore(u,!0),console.log("âœ… Unified 16-Parameter Result (with parsed data):",{overallScore:u,parameterCount:l.scores.length,parameters:l.scores.map(n=>`${n.parameter}: ${n.percentage}%`)})}catch(l){return console.error("âŒ Failed to get unified 16 scores with parsed data:",l),this.evaluateWithUnified16(t,a,i)}return r}static mapUnifiedToLegacy(t){var i,r,s,o,c,m,l,u,g,n,f,p,M,y,x,P;const a=new Map;t.forEach(v=>a.set(v.parameterNumber,v));const e=v=>a.get(v);return{keywordMatch:Math.round((((i=e(10))==null?void 0:i.percentage)||0)/100*25),skillsAlignment:Math.round((((r=e(4))==null?void 0:r.percentage)||0)/100*20),experienceRelevance:Math.round((((s=e(14))==null?void 0:s.percentage)||0)/100*15),technicalCompetencies:Math.round((((o=e(15))==null?void 0:o.percentage)||0)/100*12),educationScore:Math.round((((c=e(12))==null?void 0:c.percentage)||0)/100*10),quantifiedAchievements:Math.round((((m=e(8))==null?void 0:m.percentage)||0)/100*8),employmentHistory:Math.round((((l=e(13))==null?void 0:l.percentage)||0)/100*8),industryExperience:Math.round((((u=e(16))==null?void 0:u.percentage)||0)/100*7),jobTitleMatch:Math.round((((g=e(3))==null?void 0:g.percentage)||0)/100*6),careerProgression:Math.round((((n=e(9))==null?void 0:n.percentage)||0)/100*6),certifications:Math.round((((f=e(5))==null?void 0:f.percentage)||0)/100*5),formatting:Math.round((((p=e(11))==null?void 0:p.percentage)||0)/100*5),contentQuality:Math.round((((M=e(2))==null?void 0:M.percentage)||0)/100*4),grammar:Math.round((((y=e(7))==null?void 0:y.percentage)||0)/100*3),resumeLength:Math.round((((x=e(6))==null?void 0:x.percentage)||0)/100*2),filenameQuality:Math.round((((P=e(1))==null?void 0:P.percentage)||0)/100*2)}}static getMatchQuality(t){return t>=85?"Excellent":t>=70?"Good":t>=50?"Adequate":t>=30?"Poor":"Inadequate"}static getInterviewChance(t){return t>=95?"90%+":t>=90?"80-90%":t>=80?"70-80%":t>=70?"40-60%":t>=55?"20-30%":t>=35?"5-12%":"1-2%"}static generateSummary(t,a){return this.generateSummaryFromScore(t.overall,a)}static generateSummaryFromScore(t,a){const e=a?"JD-based":"general";return t>=85?`Excellent ${e} resume with strong ATS compatibility and comprehensive skill alignment.`:t>=70?`Good ${e} resume with solid foundation, minor improvements needed for optimal ATS performance.`:t>=55?`Adequate ${e} resume with moderate ATS compatibility, several areas need enhancement.`:t>=35?`Poor ${e} resume with significant ATS compatibility issues requiring major improvements.`:`Inadequate ${e} resume with critical ATS failures, comprehensive revision needed.`}static mapMissingKeywords(t){const a=[],e=[],i=[];return t.forEach(r=>{r.tier==="critical"?a.push(r.keyword):r.tier==="important"?e.push(r.keyword):i.push(r.keyword)}),{critical:a.slice(0,5),important:e.slice(0,5),optional:i.slice(0,5)}}static calculateIntelligentParameterScores(t,a){var s,o,c,m,l,u,g,n,f,p,M,y,x,P,v;const e=_=>(_==null?void 0:_.percentage)??0,i=_=>(_==null?void 0:_.score)??0;return{keywordMatch:this.calculateKeywordMatch(t,a),skillsAlignment:this.calculateSkillsAlignment(t,a),experienceRelevance:this.calculateExperienceRelevance(t,a),employmentHistory:this.calculateEmploymentHistory(t),careerProgression:this.calculateCareerProgression(t),technicalCompetencies:Math.max(Math.round(e((s=t==null?void 0:t.critical_metrics)==null?void 0:s.technical_skills_alignment)/100*12),i((o=t==null?void 0:t.critical_metrics)==null?void 0:o.technical_skills_alignment)>0?2:0),quantifiedAchievements:this.calculateQuantifiedAchievements(t),jobTitleMatch:Math.max(Math.round(e((c=t==null?void 0:t.critical_metrics)==null?void 0:c.job_title_relevance)/100*6),i((m=t==null?void 0:t.critical_metrics)==null?void 0:m.job_title_relevance)>0?1:0),educationScore:Math.max(Math.round(e((l=t==null?void 0:t.tier_scores)==null?void 0:l.education)/100*10),i((u=t==null?void 0:t.tier_scores)==null?void 0:u.education)>0?2:0),certifications:Math.max(Math.round(e((g=t==null?void 0:t.tier_scores)==null?void 0:g.certifications)/100*5),i((n=t==null?void 0:t.tier_scores)==null?void 0:n.certifications)>0?1:0),formatting:Math.max(Math.round(e((f=t==null?void 0:t.tier_scores)==null?void 0:f.basic_structure)/100*5),2),contentQuality:Math.max(Math.round(e((p=t==null?void 0:t.tier_scores)==null?void 0:p.content_structure)/100*4),1),grammar:Math.max(Math.round(e((M=t==null?void 0:t.tier_scores)==null?void 0:M.qualitative)/100*3),1),resumeLength:Math.max(Math.round(e((y=t==null?void 0:t.tier_scores)==null?void 0:y.basic_structure)/100*2),1),industryExperience:Math.max(Math.round(e((x=t==null?void 0:t.tier_scores)==null?void 0:x.competitive)/100*7),i((P=t==null?void 0:t.tier_scores)==null?void 0:P.competitive)>0?1:0),filenameQuality:Math.max(Math.round(e((v=t==null?void 0:t.tier_scores)==null?void 0:v.basic_structure)/100*2),1)}}static calculateExperienceRelevance(t,a){var s,o,c,m,l,u,g,n,f,p;const i=((o=(s=t==null?void 0:t.tier_scores)==null?void 0:s.experience)==null?void 0:o.percentage)??0;let r=Math.round(i/100*15);if(a){const M=((m=(c=t==null?void 0:t.critical_metrics)==null?void 0:c.jd_keywords_match)==null?void 0:m.percentage)??0,y=((u=(l=t==null?void 0:t.critical_metrics)==null?void 0:l.experience_relevance)==null?void 0:u.percentage)??0,x=((n=(g=t==null?void 0:t.critical_metrics)==null?void 0:g.experience_relevance)==null?void 0:n.score)??0;M<25&&y<30?r=Math.min(r,3):M<40&&y<50?r=Math.min(r,6):x>1&&(r=Math.max(r,2))}else(((p=(f=t==null?void 0:t.critical_metrics)==null?void 0:f.experience_relevance)==null?void 0:p.score)??0)>1&&(r=Math.max(r,2));return Math.min(r,15)}static calculateEmploymentHistory(t){var o,c,m,l;const e=((c=(o=t==null?void 0:t.tier_scores)==null?void 0:o.experience)==null?void 0:c.percentage)??0,i=((l=(m=t==null?void 0:t.tier_scores)==null?void 0:m.experience)==null?void 0:l.score)??0;let r=Math.round(e/100*8);return i>0&&(r=Math.max(r,2)),((t==null?void 0:t.red_flags)??[]).length===0&&(r=Math.max(r,Math.round(8*.5))),Math.min(r,8)}static calculateCareerProgression(t){var o,c,m,l,u,g;const e=((c=(o=t==null?void 0:t.tier_scores)==null?void 0:o.experience)==null?void 0:c.percentage)??0,i=((l=(m=t==null?void 0:t.tier_scores)==null?void 0:m.experience)==null?void 0:l.score)??0,r=((g=(u=t==null?void 0:t.tier_scores)==null?void 0:u.competitive)==null?void 0:g.percentage)??0;let s=Math.round(e/100*6);return i>0&&(s=Math.max(s,1)),r>50&&(s=Math.max(s,Math.round(6*.5))),Math.min(s,6)}static calculateQuantifiedAchievements(t){var o,c,m,l,u,g;const e=((c=(o=t==null?void 0:t.critical_metrics)==null?void 0:o.quantified_results_presence)==null?void 0:c.percentage)??0,i=((l=(m=t==null?void 0:t.critical_metrics)==null?void 0:m.quantified_results_presence)==null?void 0:l.score)??0,r=((g=(u=t==null?void 0:t.tier_scores)==null?void 0:u.competitive)==null?void 0:g.percentage)??0;let s=Math.round(e/100*8);return i>1&&(s=Math.max(s,2)),r>70&&(s=Math.max(s,Math.round(8*.3))),Math.min(s,8)}static calculateKeywordMatch(t,a){var s,o,c,m;const i=((o=(s=t==null?void 0:t.tier_scores)==null?void 0:s.skills_keywords)==null?void 0:o.percentage)??0;let r=Math.round(i/100*25);if(a){const l=((m=(c=t==null?void 0:t.critical_metrics)==null?void 0:c.jd_keywords_match)==null?void 0:m.percentage)??0,u=Math.round(l/100*25);l<20?r=Math.min(r,5):l<40?r=Math.min(r,10):r=Math.max(r,u)}return Math.min(r,25)}static calculateSkillsAlignment(t,a){var c,m,l,u;const i=((m=(c=t==null?void 0:t.tier_scores)==null?void 0:c.skills_keywords)==null?void 0:m.percentage)??0;let r=Math.round(i/100*20);const s=((u=(l=t==null?void 0:t.critical_metrics)==null?void 0:l.technical_skills_alignment)==null?void 0:u.percentage)??0,o=Math.round(s/100*20);return a&&(s<20?r=Math.min(r,4):s<40?r=Math.min(r,8):r=Math.max(r,o)),Math.min(r,20)}static async evaluateResumeJSON(t,a,e){const i=await this.evaluateResume(t,a,e);return JSON.stringify(i,null,2)}}export{T as A};
