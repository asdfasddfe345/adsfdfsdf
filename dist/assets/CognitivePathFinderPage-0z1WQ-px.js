import{j as e,A as L,m as N}from"./vendor-motion-_XdJ9pBm.js";import{r as w,u as te}from"./vendor-react-B4msnGgW.js";import{c as ae,a as le,n as re,h as ne}from"./index-BbSeE-q4.js";import{K as W}from"./key-emeMdLGH.js";import{P as V}from"./play-BW95sg1B.js";import{Z as oe}from"./zap-BGmE2sY4.js";import{P as ie}from"./pause-C7_k2ztz.js";import{R as ce}from"./rotate-ccw-BQdMKeUh.js";import{X as O}from"./x-circle-ytsTtMRB.js";import{C as de}from"./check-circle-2-CTQiiFfd.js";import{T as me}from"./trophy-D8agcnr9.js";import{A as xe}from"./award-BwmFe92M.js";import"./vendor-pdf-B1igRwBP.js";import"./vendor-supabase-B_87WqdG.js";import"./vendor-forms-BxTF4-4_.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=ae("DoorClosed",[["path",{d:"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14",key:"36qu9e"}],["path",{d:"M2 20h20",key:"owomy5"}],["path",{d:"M14 12v.01",key:"xfcn54"}]]),ue=({onExit:T})=>{const[b,q]=w.useState("medium"),[g,U]=w.useState(5),[t,x]=w.useState(null),[F,H]=w.useState(!0),[D,E]=w.useState([]),c=w.useRef(null),K=w.useRef(null);w.useEffect(()=>(z(),()=>{c.current&&clearInterval(c.current)}),[]),w.useEffect(()=>{U(b==="easy"?4:b==="medium"?5:6)},[b]);const z=()=>{const s=localStorage.getItem("cognitive_pathfinder_leaderboard");s&&E(JSON.parse(s))},J=(s,a)=>{const o={difficulty:b,time:s,moves:a,date:new Date().toISOString()},r=[...D,o].sort((d,m)=>d.time-m.time).slice(0,10);E(r),localStorage.setItem("cognitive_pathfinder_leaderboard",JSON.stringify(r))},p=(s,a,o="sine")=>{K.current||(K.current=new(window.AudioContext||window.webkitAudioContext));const r=K.current,d=r.createOscillator(),m=r.createGain();d.connect(m),m.connect(r.destination),d.frequency.value=s,d.type=o,m.gain.setValueAtTime(.3,r.currentTime),m.gain.exponentialRampToValueAtTime(.01,r.currentTime+a),d.start(r.currentTime),d.stop(r.currentTime+a)},X=s=>{const a=Math.floor(s/2),o={row:a,col:a},r=b==="easy"?.15:b==="medium"?.2:.25,d=s*s,m=Math.floor(d*r),l=[],C=new Set;C.add(`${o.row},${o.col}`);const f=()=>({row:Math.floor(Math.random()*s),col:Math.floor(Math.random()*s)}),v=n=>{const j=`${n.row},${n.col}`;return!C.has(j)&&n.row>=0&&n.row<s&&n.col>=0&&n.col<s},$=(n,j,M)=>{const R=new Set,k=[n];for(R.add(`${n.row},${n.col}`);k.length>0;){const h=k.shift();if(h.row===j.row&&h.col===j.col)return!0;const se=[{row:h.row-1,col:h.col},{row:h.row+1,col:h.col},{row:h.row,col:h.col-1},{row:h.row,col:h.col+1}];for(const y of se){const I=`${y.row},${y.col}`;y.row>=0&&y.row<s&&y.col>=0&&y.col<s&&!R.has(I)&&!M.has(I)&&(R.add(I),k.push(y))}}return!1};for(let n=0;n<m*10&&l.length<m;n++){const j=f(),M=`${j.row},${j.col}`;if(v(j)){const R=new Set([...l.map(h=>`${h.row},${h.col}`),M]),k=f();v(k)&&$(o,k,R)&&(l.push(j),C.add(M))}}let i,u,S=0;do i=f(),u=f(),S++;while(S<100&&(!v(i)||!v(u)||i.row===u.row&&i.col===u.col||!$(o,i,new Set(l.map(n=>`${n.row},${n.col}`)))||!$(i,u,new Set(l.map(n=>`${n.row},${n.col}`)))));return{playerPos:o,keyPos:i,doorPos:u,walls:l,hasKey:!1}},Y=()=>{const s=X(g),a=new Set;a.add(`${s.playerPos.row},${s.playerPos.col}`),x({...s,status:"ready",timeRemaining:300,moveCount:0,restartCount:0,visitedCells:a,revealedWalls:new Set})},Z=()=>{t&&(x(s=>s?{...s,status:"playing"}:null),p(440,.1),c.current=setInterval(()=>{x(s=>{if(!s)return null;const a=s.timeRemaining-1;return a<=0?(c.current&&clearInterval(c.current),p(200,.5,"sawtooth"),{...s,timeRemaining:0,status:"failed"}):{...s,timeRemaining:a}})},1e3))},B=()=>{c.current&&(clearInterval(c.current),c.current=null),x(s=>s?{...s,status:"paused"}:null)},Q=()=>{Z()},ee=()=>{if(!t)return;const s=Math.floor(g/2),a=new Set;a.add(`${s},${s}`),x(o=>o?{...o,playerPos:{row:s,col:s},hasKey:!1,moveCount:0,restartCount:o.restartCount+1,visitedCells:a}:null),p(300,.3,"sawtooth")},P=w.useCallback(s=>{if(!t||t.status!=="playing")return;const{playerPos:a,walls:o,keyPos:r,doorPos:d,hasKey:m}=t,l={...a};switch(s){case"up":l.row--;break;case"down":l.row++;break;case"left":l.col--;break;case"right":l.col++;break}if(l.row<0||l.row>=g||l.col<0||l.col>=g){p(250,.1,"square");return}if(o.some(i=>i.row===l.row&&i.col===l.col)){const i=`${l.row},${l.col}`,u=new Set(t.revealedWalls);u.add(i),x(S=>S?{...S,revealedWalls:u}:null),p(150,.4,"sawtooth"),setTimeout(()=>{ee()},500);return}p(350,.05);const f=new Set(t.visitedCells);f.add(`${l.row},${l.col}`);const v=!m&&l.row===r.row&&l.col===r.col,$=m&&l.row===d.row&&l.col===d.col;if(v&&(p(600,.2),p(800,.2)),$){c.current&&clearInterval(c.current),p(523,.15),p(659,.15),p(784,.3);const i=300-t.timeRemaining;J(i,t.moveCount+1),x(u=>u?{...u,playerPos:l,moveCount:u.moveCount+1,visitedCells:f,status:"won"}:null);return}x(i=>i?{...i,playerPos:l,hasKey:m||v,moveCount:i.moveCount+1,visitedCells:f}:null)},[t,g]);w.useEffect(()=>{const s=a=>{if(!(!t||t.status!=="playing"))switch(a.key.toLowerCase()){case"w":case"arrowup":a.preventDefault(),P("up");break;case"s":case"arrowdown":a.preventDefault(),P("down");break;case"a":case"arrowleft":a.preventDefault(),P("left");break;case"d":case"arrowright":a.preventDefault(),P("right");break}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[P,t]);const A=s=>{const a=Math.floor(s/60),o=s%60;return`${a}:${o.toString().padStart(2,"0")}`},G=t?Math.round(t.visitedCells.size/(g*g)*100):0;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Cognitive Path Finder"}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition",children:"Exit"})]}),e.jsx(L,{children:F&&e.jsxs(N.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-slate-800 border border-slate-700 rounded-lg p-6 mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5"}),"How to Play"]}),e.jsxs("div",{className:"space-y-2 text-slate-300",children:[e.jsx("p",{children:"• Navigate a hidden grid with invisible walls"}),e.jsxs("p",{children:["• Collect the ",e.jsx(W,{className:"inline w-4 h-4"})," key, then reach the ",e.jsx(_,{className:"inline w-4 h-4"})," door"]}),e.jsx("p",{children:"• Use arrow keys or WASD to move"}),e.jsx("p",{children:"• Hitting a wall resets you to start - remember safe paths!"}),e.jsx("p",{children:"• Complete within 5 minutes to win"})]}),e.jsx("button",{onClick:()=>H(!1),className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition",children:"Got It"})]})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-slate-700 px-4 py-2 rounded-lg",children:[e.jsx(re,{className:"w-5 h-5"}),e.jsx("span",{className:"font-mono text-xl",children:A(t.timeRemaining)})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-700 px-4 py-2 rounded-lg",children:[e.jsx(oe,{className:"w-5 h-5"}),e.jsxs("span",{children:[t.moveCount," moves"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[t.status==="playing"&&e.jsx("button",{onClick:B,className:"p-2 bg-yellow-600 hover:bg-yellow-700 rounded-lg",children:e.jsx(ie,{className:"w-5 h-5"})}),t.status==="paused"&&e.jsx("button",{onClick:Q,className:"p-2 bg-green-600 hover:bg-green-700 rounded-lg",children:e.jsx(V,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{x(null),c.current&&clearInterval(c.current)},className:"p-2 bg-red-600 hover:bg-red-700 rounded-lg",children:e.jsx(ce,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-slate-400",children:"Grid Exploration"}),e.jsxs("span",{className:"text-sm font-medium",children:[G,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${G}%`}})})]}),e.jsx("div",{className:"grid gap-1 mx-auto",style:{gridTemplateColumns:`repeat(${g}, minmax(0, 1fr))`,maxWidth:`${g*80}px`},children:Array.from({length:g}).map((s,a)=>Array.from({length:g}).map((o,r)=>{const d=t.playerPos.row===a&&t.playerPos.col===r,m=!t.hasKey&&t.keyPos.row===a&&t.keyPos.col===r,l=t.doorPos.row===a&&t.doorPos.col===r,C=t.visitedCells.has(`${a},${r}`),f=t.revealedWalls.has(`${a},${r}`);return e.jsxs(N.div,{className:`aspect-square rounded-lg flex items-center justify-center text-2xl transition-all ${d?"bg-blue-600 shadow-lg shadow-blue-500/50":m?"bg-yellow-600":l?"bg-green-600":f?"bg-red-900 border-2 border-red-600":C?"bg-slate-700":"bg-slate-800 border border-slate-700"}`,animate:d?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:[d&&e.jsx(ne,{className:"w-6 h-6"}),m&&e.jsx(W,{className:"w-6 h-6"}),l&&e.jsx(_,{className:"w-6 h-6"}),f&&e.jsx(O,{className:"w-6 h-6"})]},`${a}-${r}`)}))}),e.jsx("div",{className:"text-center text-lg font-medium",children:t.hasKey?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-400",children:[e.jsx(de,{className:"w-5 h-5"}),"Key collected - get to the DOOR"]}):e.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow-400",children:[e.jsx(W,{className:"w-5 h-5"}),"Collect 1 KEY"]})}),t.restartCount>0&&e.jsxs("div",{className:"text-center text-sm text-slate-400",children:["Restarts: ",t.restartCount]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Difficulty"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["easy","medium","hard"].map(s=>e.jsxs("button",{onClick:()=>q(s),className:`py-3 px-4 rounded-lg font-medium transition capitalize ${b===s?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[s,e.jsx("div",{className:"text-xs mt-1 opacity-75",children:s==="easy"?"4×4":s==="medium"?"5×5":"6×6"})]},s))})]}),e.jsxs("button",{onClick:Y,className:"w-full py-4 bg-green-600 hover:bg-green-700 rounded-lg font-bold text-lg transition flex items-center justify-center gap-2",children:[e.jsx(V,{className:"w-5 h-5"}),"Start Game"]})]})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(me,{className:"w-5 h-5 text-yellow-400"}),"Leaderboard"]}),e.jsxs("div",{className:"space-y-2",children:[D.slice(0,5).map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between bg-slate-700 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-lg font-bold text-slate-400",children:["#",a+1]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium capitalize",children:s.difficulty}),e.jsxs("div",{className:"text-xs text-slate-400",children:[s.moves," moves"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"font-mono font-bold",children:A(s.time)})})]},a)),D.length===0&&e.jsx("div",{className:"text-center text-slate-400 py-8",children:"No scores yet. Be the first!"})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Controls"}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"px-2 py-1 bg-slate-700 rounded text-xs",children:"↑ W"}),e.jsx("span",{children:"Move Up"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"px-2 py-1 bg-slate-700 rounded text-xs",children:"↓ S"}),e.jsx("span",{children:"Move Down"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"px-2 py-1 bg-slate-700 rounded text-xs",children:"← A"}),e.jsx("span",{children:"Move Left"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"px-2 py-1 bg-slate-700 rounded text-xs",children:"→ D"}),e.jsx("span",{children:"Move Right"})]})]})]})]})]}),e.jsxs(L,{children:[(t==null?void 0:t.status)==="won"&&e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>x(null),children:e.jsx(N.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-gradient-to-br from-green-900 to-green-800 rounded-2xl p-8 max-w-md w-full border-2 border-green-500",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx(N.div,{initial:{scale:0},animate:{scale:1,rotate:360},transition:{delay:.2,type:"spring"},children:e.jsx(xe,{className:"w-20 h-20 mx-auto text-yellow-400"})}),e.jsx("h2",{className:"text-3xl font-bold",children:"Mission Complete!"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-slate-300 text-sm",children:"Time"}),e.jsx("div",{className:"text-2xl font-bold",children:A(300-t.timeRemaining)})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-slate-300 text-sm",children:"Moves"}),e.jsx("div",{className:"text-2xl font-bold",children:t.moveCount})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-slate-300 text-sm",children:"Restarts"}),e.jsx("div",{className:"text-2xl font-bold",children:t.restartCount})]})]}),e.jsx("button",{onClick:()=>{x(null),c.current&&clearInterval(c.current)},className:"w-full py-3 bg-white text-green-900 font-bold rounded-lg hover:bg-slate-100 transition",children:"Play Again"})]})})}),(t==null?void 0:t.status)==="failed"&&e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>x(null),children:e.jsx(N.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-gradient-to-br from-red-900 to-red-800 rounded-2xl p-8 max-w-md w-full border-2 border-red-500",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx(O,{className:"w-20 h-20 mx-auto text-red-400"}),e.jsx("h2",{className:"text-3xl font-bold",children:"Time's Up!"}),e.jsx("p",{className:"text-slate-300",children:"You ran out of time. Try again with better planning!"}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-slate-300 text-sm",children:"Moves Made"}),e.jsx("div",{className:"text-2xl font-bold",children:t.moveCount})]}),e.jsx("button",{onClick:()=>{x(null),c.current&&clearInterval(c.current)},className:"w-full py-3 bg-white text-red-900 font-bold rounded-lg hover:bg-slate-100 transition",children:"Try Again"})]})})})]})]})})},Re=()=>{const T=te(),b=()=>{T("/gaming")};return e.jsx(ue,{onExit:b})};export{Re as CognitivePathFinderPage};
