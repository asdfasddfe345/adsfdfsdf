import{j as e,A as J,m as f}from"./vendor-motion-_XdJ9pBm.js";import{r as c,u as U}from"./vendor-react-B4msnGgW.js";import{c as Q,L as B,i as G,_ as X,C as q,n as R,u as V,r as $,a1 as W,g as Z,t as ee,s as Y,a2 as te}from"./index-BbSeE-q4.js";import{s as S}from"./sessionBookingService-DouAmnnK.js";import{C as se}from"./chevron-left-Dbkualgq.js";import{C as ae}from"./chevron-right-CPxmRku4.js";import{H as ne}from"./hash-Cu1sPzkK.js";import{D as le}from"./download-DWlYtjQA.js";import"./vendor-pdf-B1igRwBP.js";import"./vendor-supabase-B_87WqdG.js";import"./vendor-forms-BxTF4-4_.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=Q("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),H={service:null,selectedDate:null,selectedSlot:null,paymentStatus:"idle",bookingResult:null};function oe(){const[a,i]=c.useState(H),x=c.useCallback(l=>{i(o=>({...o,service:l}))},[]),t=c.useCallback(l=>{i(o=>({...o,selectedDate:l,selectedSlot:null}))},[]),h=c.useCallback(l=>{i(o=>({...o,selectedSlot:l}))},[]),m=c.useCallback(l=>{i(o=>({...o,paymentStatus:l}))},[]),n=c.useCallback(l=>{i(o=>({...o,bookingResult:l}))},[]),u=c.useCallback(()=>{i(H)},[]),s=c.useCallback(()=>{i(l=>({...l,selectedSlot:null}))},[]);return{...a,setService:x,setSelectedDate:t,setSelectedSlot:h,setPaymentStatus:m,setBookingResult:n,goBackToDatePicker:s,reset:u}}const re=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ce=["January","February","March","April","May","June","July","August","September","October","November","December"],de=({serviceId:a,selectedDate:i,onSelectDate:x,onNext:t,onBack:h})=>{const m=c.useMemo(()=>{const r=new Date;return r.setHours(0,0,0,0),r},[]),[n,u]=c.useState(m.getMonth()),[s,l]=c.useState(m.getFullYear()),[o,k]=c.useState([]),[N,p]=c.useState(!0),[y,j]=c.useState(0);c.useEffect(()=>{(async()=>{p(!0);const v=await S.getAvailableDates(a,s,n);k(v),p(!1)})()},[a,s,n]);const w=c.useMemo(()=>{const r={};return o.forEach(v=>{r[v.date]=v}),r},[o]),d=new Date(s,n+1,0).getDate(),b=new Date(s,n,1).getDay(),T=()=>{j(-1),n===0?(u(11),l(r=>r-1)):u(r=>r-1)},L=()=>{j(1),n===11?(u(0),l(r=>r+1)):u(r=>r+1)},I=s===m.getFullYear()&&n===m.getMonth(),C=new Date(m.getFullYear(),m.getMonth()+3,1),A=s>C.getFullYear()||s===C.getFullYear()&&n>=C.getMonth(),M=r=>{const v=String(n+1).padStart(2,"0"),g=String(r).padStart(2,"0");return`${s}-${v}-${g}`},E=r=>new Date(s,n,r)<m;return e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white text-center mb-2",children:"Select a Date"}),e.jsx("p",{className:"text-slate-400 text-sm text-center mb-6",children:"Choose your preferred session date"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:T,disabled:I,className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800/60 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:e.jsx(se,{className:"w-5 h-5"})}),e.jsxs("span",{className:"text-white font-semibold text-lg",children:[ce[n]," ",s]}),e.jsx("button",{onClick:L,disabled:A,className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800/60 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:e.jsx(ae,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"grid grid-cols-7 mb-2",children:re.map(r=>e.jsx("div",{className:"text-center text-xs font-medium text-slate-500 py-2",children:r},r))}),e.jsx(J,{mode:"wait",children:e.jsxs(f.div,{initial:{opacity:0,x:y*30},animate:{opacity:1,x:0},exit:{opacity:0,x:y*-30},transition:{duration:.2},className:"grid grid-cols-7 gap-1",children:[Array.from({length:b}).map((r,v)=>e.jsx("div",{},`empty-${v}`)),Array.from({length:d}).map((r,v)=>{const g=v+1,_=M(g),P=E(g),D=w[_],z=(D==null?void 0:D.is_fully_booked)===!0,F=P||z,K=i===_,O=D&&D.available_slots>0;return e.jsxs("button",{onClick:()=>!F&&x(_),disabled:F,className:`
                  relative aspect-square rounded-lg flex flex-col items-center justify-center text-sm font-medium transition-all duration-200
                  ${F?"text-slate-600 cursor-not-allowed":K?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/30":O?"text-white hover:bg-emerald-500/20 cursor-pointer":"text-slate-400 hover:bg-slate-800/40 cursor-pointer"}
                `,children:[e.jsx("span",{children:g}),!P&&D&&e.jsx("span",{className:`w-1.5 h-1.5 rounded-full mt-0.5 ${z?"bg-red-500/70":O?"bg-emerald-400":"bg-slate-600"}`})]},g)})]},`${s}-${n}`)}),N&&e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(B,{className:"w-5 h-5 text-emerald-400 animate-spin"})}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mt-5 text-xs text-slate-400",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-400"}),"Available"]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500/70"}),"Fully Booked"]})]}),e.jsxs("div",{className:"flex gap-3 mt-8",children:[e.jsx("button",{onClick:h,className:"flex-1 px-4 py-3 rounded-xl border border-slate-700 text-slate-300 font-medium hover:bg-slate-800/60 transition-colors",children:"Back"}),e.jsx("button",{onClick:t,disabled:!i,className:"flex-1 px-4 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-semibold disabled:opacity-40 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-emerald-500/25 transition-all",children:"Next"})]})]})},me=({serviceId:a,selectedDate:i,selectedSlot:x,price:t,onSelectSlot:h,onProceed:m,onBack:n})=>{const[u,s]=c.useState([]),[l,o]=c.useState(!0);c.useEffect(()=>{(async()=>{o(!0);const y=await S.getSlotsForDate(a,i);s(y),o(!1)})()},[a,i]);const k=p=>new Date(p+"T00:00:00").toLocaleDateString("en-IN",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),N=t/100;return e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("button",{onClick:n,className:"flex items-center gap-1.5 text-slate-400 hover:text-white text-sm mb-4 transition-colors",children:[e.jsx(G,{className:"w-4 h-4"}),"Change date"]}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-1",children:"Select a Time Slot"}),e.jsx("p",{className:"text-emerald-400 text-sm font-medium mb-6",children:k(i)}),l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(B,{className:"w-6 h-6 text-emerald-400 animate-spin"})}):e.jsx("div",{className:"space-y-3",children:u.map((p,y)=>{const j=p.status==="booked",w=p.status==="blocked",d=j||w,b=x===p.time_slot;return e.jsxs(f.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:y*.05},onClick:()=>!d&&h(p.time_slot),disabled:d,className:`
                  w-full flex items-center justify-between px-5 py-4 rounded-xl border transition-all duration-200
                  ${d?"border-slate-800 bg-slate-900/40 cursor-not-allowed opacity-50":b?"border-emerald-500 bg-emerald-500/10 shadow-lg shadow-emerald-500/10":"border-slate-700/50 bg-slate-800/30 hover:border-emerald-500/40 hover:bg-emerald-500/5 cursor-pointer"}
                `,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[d?e.jsx(X,{className:"w-5 h-5 text-slate-600"}):b?e.jsx(q,{className:"w-5 h-5 text-emerald-400"}):e.jsx(R,{className:"w-5 h-5 text-slate-400"}),e.jsx("span",{className:`font-medium ${d?"text-slate-600":b?"text-emerald-300":"text-slate-200"}`,children:p.label})]}),j&&e.jsx("span",{className:"text-xs font-medium text-red-400/80 bg-red-500/10 px-2.5 py-1 rounded-full",children:"Booked"}),w&&e.jsx("span",{className:"text-xs font-medium text-slate-500 bg-slate-700/40 px-2.5 py-1 rounded-full",children:"Unavailable"}),!d&&b&&e.jsx("span",{className:"text-xs font-medium text-emerald-400 bg-emerald-500/10 px-2.5 py-1 rounded-full",children:"Selected"})]},p.time_slot)})}),e.jsxs(f.button,{onClick:m,disabled:!x,whileHover:x?{scale:1.02}:{},whileTap:x?{scale:.98}:{},className:"w-full mt-8 px-6 py-3.5 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-semibold disabled:opacity-40 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-emerald-500/25 transition-all",children:["Proceed to Pay ","₹",N.toLocaleString("en-IN")]})]})},xe=({service:a,selectedDate:i,selectedSlot:x,onSuccess:t,onBack:h,onSlotTaken:m})=>{const{user:n}=V(),[u,s]=c.useState(!1),[l,o]=c.useState(null),k=a.price/100,N=S.getSlotLabel(x),p=j=>new Date(j+"T00:00:00").toLocaleDateString("en-IN",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),y=async()=>{var j;if(n){s(!0),o(null);try{const{data:w}=await Y.auth.getSession(),d=(j=w==null?void 0:w.session)==null?void 0:j.access_token;if(!d){o("Session expired. Please log in again."),s(!1);return}const b=await fetch("https://rixmudvtbfkjpwjoefon.supabase.co/functions/v1/create-order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({amount:a.price,metadata:{type:"session_booking",serviceId:a.id,serviceTitle:a.title}})}),T=await b.json();if(!b.ok){o(T.error||"Failed to create payment order."),s(!1);return}const{orderId:L,keyId:I,transactionId:C,amount:A}=T,M={key:I,amount:A,currency:"INR",name:"PrimoBoost AI",description:a.title,order_id:L,handler:async r=>{var _,P;if(!await S.updatePaymentTransaction(C,r.razorpay_payment_id,r.razorpay_order_id||L,"success")){o("Payment recorded but booking failed. Contact support."),s(!1);return}const g=await S.bookSlot(n.id,a.id,i,x,C,n.name,n.email,"");if(s(!1),g.success){try{await Y.functions.invoke("send-session-booking-email",{body:{bookingId:g.booking_id||"",recipientEmail:n.email,recipientName:n.name,serviceTitle:a.title,bookingDate:p(i),slotLabel:N,bookingCode:g.booking_code||"",bonusCredits:g.bonus_credits||0}})}catch(D){console.error("Failed to send booking confirmation email:",D)}t(g)}else(_=g.error)!=null&&_.includes("no longer available")||(P=g.error)!=null&&P.includes("already taken")?m():o(g.error||"Booking failed. Please try again.")},prefill:{name:n.name,email:n.email},theme:{color:"#2563eb"},modal:{ondismiss:()=>{s(!1),S.updatePaymentTransaction(C,"","","cancelled")}}};new window.Razorpay(M).open()}catch(w){console.error("Payment error:",w),o("Something went wrong. Please try again."),s(!1)}}};return e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("button",{onClick:h,disabled:u,className:"flex items-center gap-1.5 text-slate-400 hover:text-white text-sm mb-4 transition-colors disabled:opacity-40",children:[e.jsx(G,{className:"w-4 h-4"}),"Change slot"]}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Confirm & Pay"}),e.jsxs("div",{className:"bg-slate-800/40 border border-slate-700/50 rounded-xl p-5 mb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-xs uppercase tracking-wider mb-1",children:"Service"}),e.jsx("p",{className:"text-white font-medium",children:a.title})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-xs uppercase tracking-wider mb-1",children:"Date"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-200",children:[e.jsx($,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{className:"text-sm font-medium",children:p(i)})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-xs uppercase tracking-wider mb-1",children:"Time"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-200",children:[e.jsx(R,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{className:"text-sm font-medium",children:N})]})]})]}),e.jsx("div",{className:"pt-3 border-t border-slate-700/50",children:e.jsxs("div",{className:"flex items-center gap-2 text-amber-400",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["Bonus: +",a.bonus_credits," JD Optimization Credits"]})]})})]}),e.jsx("div",{className:"bg-emerald-500/5 border border-emerald-500/20 rounded-xl p-5 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-300 font-medium",children:"Total Amount"}),e.jsxs("span",{className:"text-2xl font-bold text-white",children:["₹",k.toLocaleString("en-IN")]})]})}),l&&e.jsxs("div",{className:"flex items-start gap-2 bg-red-500/10 border border-red-500/30 rounded-xl p-4 mb-6",children:[e.jsx(Z,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-red-300 text-sm",children:l})]}),e.jsx(f.button,{onClick:y,disabled:u,whileHover:u?{}:{scale:1.02},whileTap:u?{}:{scale:.98},className:"w-full px-6 py-4 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-semibold text-lg disabled:opacity-60 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-emerald-500/25 transition-all flex items-center justify-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Pay Now ","₹",k.toLocaleString("en-IN")]})}),e.jsxs("div",{className:"flex items-center justify-center gap-1.5 mt-4 text-slate-500 text-xs",children:[e.jsx(ee,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Secured by Razorpay"})]})]})},ue=({bookingResult:a,selectedDate:i,selectedSlot:x})=>{const t=U(),h=S.getSlotLabel(x),m=s=>new Date(s+"T00:00:00").toLocaleDateString("en-IN",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),n=()=>{const s={booking_date:i,time_slot:x,booking_code:a.booking_code||""},l=S.generateCalendarUrl(s);window.open(l,"_blank")},u=()=>{const s={booking_date:i,time_slot:x,booking_code:a.booking_code||""},l=S.generateICSContent(s),o=new Blob([l],{type:"text/calendar"}),k=URL.createObjectURL(o),N=document.createElement("a");N.href=k,N.download=`primoboost-session-${a.booking_code}.ics`,N.click(),URL.revokeObjectURL(k)};return e.jsxs("div",{className:"w-full max-w-md mx-auto text-center",children:[e.jsx(f.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15,delay:.1},className:"w-20 h-20 rounded-full bg-emerald-500/20 flex items-center justify-center mx-auto mb-6",children:e.jsx(f.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring",stiffness:250},children:e.jsx(q,{className:"w-10 h-10 text-emerald-400"})})}),e.jsx(f.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"Booking Confirmed!"}),e.jsx(f.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-slate-400 mb-8",children:"Your session has been successfully booked"}),e.jsxs(f.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-slate-800/40 border border-slate-700/50 rounded-xl p-5 mb-6 text-left space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-xs",children:"Date"}),e.jsx("p",{className:"text-white font-medium text-sm",children:m(i)})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-xs",children:"Time Slot"}),e.jsx("p",{className:"text-white font-medium text-sm",children:h})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-xs",children:"Booking ID"}),e.jsx("p",{className:"text-white font-mono font-medium text-sm",children:a.booking_code})]})]})]}),a.bonus_credits&&a.bonus_credits>0&&e.jsxs(f.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.7},className:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 mb-8 flex items-center gap-3",children:[e.jsx(W,{className:"w-6 h-6 text-amber-400 flex-shrink-0"}),e.jsxs("p",{className:"text-amber-300 text-sm font-medium text-left",children:[a.bonus_credits," JD Optimization Credits have been added to your account!"]})]}),e.jsxs(f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8},className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:n,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-slate-700 text-slate-200 font-medium text-sm hover:bg-slate-800/60 transition-colors",children:[e.jsx($,{className:"w-4 h-4"}),"Google Cal"]}),e.jsxs("button",{onClick:u,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-slate-700 text-slate-200 font-medium text-sm hover:bg-slate-800/60 transition-colors",children:[e.jsx(le,{className:"w-4 h-4"}),"Download .ics"]})]}),e.jsxs("button",{onClick:()=>t("/"),className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-semibold hover:shadow-lg hover:shadow-emerald-500/25 transition-all",children:[e.jsx(te,{className:"w-4 h-4"}),"Go to Dashboard"]}),e.jsxs("button",{onClick:()=>t("/my-bookings"),className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-slate-700 text-slate-300 font-medium hover:bg-slate-800/60 transition-colors",children:[e.jsx(ie,{className:"w-4 h-4"}),"View My Bookings"]})]})]})},Se=()=>{const a=U(),{isAuthenticated:i,isLoading:x}=V(),t=oe(),[h,m]=c.useState("date"),[n,u]=c.useState(!0),[s,l]=c.useState(!1);if(c.useEffect(()=>{if(!x&&!i){a("/session");return}i&&(async()=>{const b=await S.getActiveService();if(!b){a("/session");return}t.setService(b),u(!1)})()},[i,x]),x||n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(B,{className:"w-8 h-8 text-emerald-400 animate-spin"})});if(!t.service)return null;const o=d=>{t.setSelectedDate(d),l(!1)},k=d=>{t.setSelectedSlot(d),l(!1)},N=d=>{t.setBookingResult(d),t.setPaymentStatus("success"),m("success")},p=()=>{l(!0),t.setSelectedSlot(null),m("slot")},y={initial:{opacity:0,x:40},animate:{opacity:1,x:0},exit:{opacity:0,x:-40}},j=["Date","Slot","Pay","Done"],w={date:0,slot:1,payment:2,success:3}[h];return e.jsx("div",{className:"min-h-screen pb-20 md:pl-16",children:e.jsxs("div",{className:"max-w-lg mx-auto px-4 sm:px-6 pt-8 sm:pt-12",children:[h!=="success"&&e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:j.map((d,b)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold transition-all ${b<=w?"bg-emerald-500 text-white":"bg-slate-800 text-slate-500"}`,children:b+1}),b<j.length-1&&e.jsx("div",{className:`w-12 sm:w-20 h-0.5 mx-1 transition-all ${b<w?"bg-emerald-500":"bg-slate-800"}`})]},d))}),e.jsx("div",{className:"flex justify-between text-xs text-slate-500",children:j.map(d=>e.jsx("span",{className:"w-8 text-center",children:d},d))})]}),s&&h==="slot"&&e.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-xl p-4 mb-6 text-amber-300 text-sm",children:"This slot was just booked by someone else. Please pick another slot."}),e.jsxs(J,{mode:"wait",children:[h==="date"&&e.jsx(f.div,{variants:y,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.25},children:e.jsx(de,{serviceId:t.service.id,selectedDate:t.selectedDate,onSelectDate:o,onNext:()=>m("slot"),onBack:()=>a("/session")})},"date"),h==="slot"&&t.selectedDate&&e.jsx(f.div,{variants:y,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.25},children:e.jsx(me,{serviceId:t.service.id,selectedDate:t.selectedDate,selectedSlot:t.selectedSlot,price:t.service.price,onSelectSlot:k,onProceed:()=>m("payment"),onBack:()=>m("date")})},"slot"),h==="payment"&&t.selectedDate&&t.selectedSlot&&e.jsx(f.div,{variants:y,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.25},children:e.jsx(xe,{service:t.service,selectedDate:t.selectedDate,selectedSlot:t.selectedSlot,onSuccess:N,onBack:()=>m("slot"),onSlotTaken:p})},"payment"),h==="success"&&t.bookingResult&&t.selectedDate&&t.selectedSlot&&e.jsx(f.div,{variants:y,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.25},children:e.jsx(ue,{bookingResult:t.bookingResult,selectedDate:t.selectedDate,selectedSlot:t.selectedSlot})},"success")]})]})})};export{Se as SessionBookingFlow};
