const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-DNRFPLUU.js","assets/vendor-react-B4msnGgW.js"])))=>i.map(i=>d[i]);
var Eu=Object.defineProperty;var ch=Ae=>{throw TypeError(Ae)};var Cu=(Ae,t,St)=>t in Ae?Eu(Ae,t,{enumerable:!0,configurable:!0,writable:!0,value:St}):Ae[t]=St;var cr=(Ae,t,St)=>Cu(Ae,typeof t!="symbol"?t+"":t,St),Ql=(Ae,t,St)=>t.has(Ae)||ch("Cannot "+St);var He=(Ae,t,St)=>(Ql(Ae,t,"read from private field"),St?St.call(Ae):t.get(Ae)),Zn=(Ae,t,St)=>t.has(Ae)?ch("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(Ae):t.set(Ae,St),ei=(Ae,t,St,e)=>(Ql(Ae,t,"write to private field"),e?e.call(Ae,St):t.set(Ae,St),St),Vn=(Ae,t,St)=>(Ql(Ae,t,"access private method"),St);var $a=(Ae,t,St,e)=>({set _(_e){ei(Ae,t,_e,St)},get _(){return He(Ae,t,e)}});import{g as getAugmentedNamespace}from"./vendor-react-B4msnGgW.js";const scriptRel="modulepreload",assetsURL=function(Ae){return"/"+Ae},seen={},__vitePreload=function(t,St,e){let _e=Promise.resolve();if(St&&St.length>0){document.getElementsByTagName("link");const Pe=document.querySelector("meta[property=csp-nonce]"),Te=(Pe==null?void 0:Pe.nonce)||(Pe==null?void 0:Pe.getAttribute("nonce"));_e=Promise.allSettled(St.map(Ee=>{if(Ee=assetsURL(Ee),Ee in seen)return;seen[Ee]=!0;const Re=Ee.endsWith(".css"),Ie=Re?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Ee}"]${Ie}`))return;const qe=document.createElement("link");if(qe.rel=Re?"stylesheet":scriptRel,Re||(qe.as="script"),qe.crossOrigin="",qe.href=Ee,Te&&qe.setAttribute("nonce",Te),document.head.appendChild(qe),Re)return new Promise((Ge,Ce)=>{qe.addEventListener("load",Ge),qe.addEventListener("error",()=>Ce(new Error(`Unable to preload CSS for ${Ee}`)))})}))}function Se(Pe){const Te=new Event("vite:preloadError",{cancelable:!0});if(Te.payload=Pe,window.dispatchEvent(Te),!Te.defaultPrevented)throw Pe}return _e.then(Pe=>{for(const Te of Pe||[])Te.status==="rejected"&&Se(Te.reason);return t().catch(Se)})};function _typeof(Ae){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(Ae)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(Ae,t){for(var St=new u16(31),e=0;e<31;++e)St[e]=t+=1<<Ae[e-1];for(var _e=new i32(St[30]),e=1;e<30;++e)for(var Se=St[e];Se<St[e+1];++Se)_e[Se]=Se-St[e]<<5|e;return{b:St,r:_e}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(Ae,t,St){for(var e=Ae.length,_e=0,Se=new u16(t);_e<e;++_e)Ae[_e]&&++Se[Ae[_e]-1];var Pe=new u16(t);for(_e=1;_e<t;++_e)Pe[_e]=Pe[_e-1]+Se[_e-1]<<1;var Te;if(St){Te=new u16(1<<t);var Ee=15-t;for(_e=0;_e<e;++_e)if(Ae[_e])for(var Re=_e<<4|Ae[_e],Ie=t-Ae[_e],qe=Pe[Ae[_e]-1]++<<Ie,Ge=qe|(1<<Ie)-1;qe<=Ge;++qe)Te[rev[qe]>>Ee]=Re}else for(Te=new u16(e),_e=0;_e<e;++_e)Ae[_e]&&(Te[_e]=rev[Pe[Ae[_e]-1]++]>>15-Ae[_e]);return Te},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(Ae){for(var t=Ae[0],St=1;St<Ae.length;++St)Ae[St]>t&&(t=Ae[St]);return t},bits=function(Ae,t,St){var e=t/8|0;return(Ae[e]|Ae[e+1]<<8)>>(t&7)&St},bits16=function(Ae,t){var St=t/8|0;return(Ae[St]|Ae[St+1]<<8|Ae[St+2]<<16)>>(t&7)},shft=function(Ae){return(Ae+7)/8|0},slc=function(Ae,t,St){return(St==null||St>Ae.length)&&(St=Ae.length),new u8(Ae.subarray(t,St))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(Ae,t,St){var e=new Error(t||ec[Ae]);if(e.code=Ae,Error.captureStackTrace&&Error.captureStackTrace(e,err),!St)throw e;return e},inflt=function(Ae,t,St,e){var _e=Ae.length,Se=0;if(!_e||t.f&&!t.l)return St||new u8(0);var Pe=!St,Te=Pe||t.i!=2,Ee=t.i;Pe&&(St=new u8(_e*3));var Re=function(On){var Un=St.length;if(On>Un){var Wn=new u8(Math.max(Un*2,On));Wn.set(St),St=Wn}},Ie=t.f||0,qe=t.p||0,Ge=t.b||0,Ce=t.l,Xe=t.d,We=t.m,Ke=t.n,Be=_e*8;do{if(!Ce){Ie=bits(Ae,qe,1);var Ye=bits(Ae,qe+1,3);if(qe+=3,Ye)if(Ye==1)Ce=flrm,Xe=fdrm,We=9,Ke=5;else if(Ye==2){var tn=bits(Ae,qe,31)+257,Ve=bits(Ae,qe+10,15)+4,ze=tn+bits(Ae,qe+5,31)+1;qe+=14;for(var Qe=new u8(ze),gn=new u8(19),Me=0;Me<Ve;++Me)gn[clim[Me]]=bits(Ae,qe+Me*3,7);qe+=Ve*3;for(var Ue=max(gn),en=(1<<Ue)-1,pn=hMap(gn,Ue,1),Me=0;Me<ze;){var An=pn[bits(Ae,qe,en)];qe+=An&15;var sn=An>>4;if(sn<16)Qe[Me++]=sn;else{var xn=0,_n=0;for(sn==16?(_n=3+bits(Ae,qe,3),qe+=2,xn=Qe[Me-1]):sn==17?(_n=3+bits(Ae,qe,7),qe+=3):sn==18&&(_n=11+bits(Ae,qe,127),qe+=7);_n--;)Qe[Me++]=xn}}var En=Qe.subarray(0,tn),hn=Qe.subarray(tn);We=max(En),Ke=max(hn),Ce=hMap(En,We,1),Xe=hMap(hn,Ke,1)}else err(1);else{var sn=shft(qe)+4,rn=Ae[sn-4]|Ae[sn-3]<<8,$e=sn+rn;if($e>_e){Ee&&err(0);break}Te&&Re(Ge+rn),St.set(Ae.subarray(sn,$e),Ge),t.b=Ge+=rn,t.p=qe=$e*8,t.f=Ie;continue}if(qe>Be){Ee&&err(0);break}}Te&&Re(Ge+131072);for(var Sn=(1<<We)-1,In=(1<<Ke)-1,je=qe;;je=qe){var xn=Ce[bits16(Ae,qe)&Sn],Fe=xn>>4;if(qe+=xn&15,qe>Be){Ee&&err(0);break}if(xn||err(2),Fe<256)St[Ge++]=Fe;else if(Fe==256){je=qe,Ce=null;break}else{var De=Fe-254;if(Fe>264){var Me=Fe-257,Je=fleb[Me];De=bits(Ae,qe,(1<<Je)-1)+fl[Me],qe+=Je}var nn=Xe[bits16(Ae,qe)&In],an=nn>>4;nn||err(3),qe+=nn&15;var hn=fd[an];if(an>3){var Je=fdeb[an];hn+=bits16(Ae,qe)&(1<<Je)-1,qe+=Je}if(qe>Be){Ee&&err(0);break}Te&&Re(Ge+131072);var on=Ge+De;if(Ge<hn){var yn=Se-hn,Fn=Math.min(hn,on);for(yn+Ge<0&&err(3);Ge<Fn;++Ge)St[Ge]=e[yn+Ge]}for(;Ge<on;++Ge)St[Ge]=St[Ge-hn]}}t.l=Ce,t.p=je,t.b=Ge,t.f=Ie,Ce&&(Ie=1,t.m=We,t.d=Xe,t.n=Ke)}while(!Ie);return Ge!=St.length&&Pe?slc(St,0,Ge):St.subarray(0,Ge)},wbits=function(Ae,t,St){St<<=t&7;var e=t/8|0;Ae[e]|=St,Ae[e+1]|=St>>8},wbits16=function(Ae,t,St){St<<=t&7;var e=t/8|0;Ae[e]|=St,Ae[e+1]|=St>>8,Ae[e+2]|=St>>16},hTree=function(Ae,t){for(var St=[],e=0;e<Ae.length;++e)Ae[e]&&St.push({s:e,f:Ae[e]});var _e=St.length,Se=St.slice();if(!_e)return{t:et$1,l:0};if(_e==1){var Pe=new u8(St[0].s+1);return Pe[St[0].s]=1,{t:Pe,l:1}}St.sort(function($e,tn){return $e.f-tn.f}),St.push({s:-1,f:25001});var Te=St[0],Ee=St[1],Re=0,Ie=1,qe=2;for(St[0]={s:-1,f:Te.f+Ee.f,l:Te,r:Ee};Ie!=_e-1;)Te=St[St[Re].f<St[qe].f?Re++:qe++],Ee=St[Re!=Ie&&St[Re].f<St[qe].f?Re++:qe++],St[Ie++]={s:-1,f:Te.f+Ee.f,l:Te,r:Ee};for(var Ge=Se[0].s,e=1;e<_e;++e)Se[e].s>Ge&&(Ge=Se[e].s);var Ce=new u16(Ge+1),Xe=ln(St[Ie-1],Ce,0);if(Xe>t){var e=0,We=0,Ke=Xe-t,Be=1<<Ke;for(Se.sort(function(tn,Ve){return Ce[Ve.s]-Ce[tn.s]||tn.f-Ve.f});e<_e;++e){var Ye=Se[e].s;if(Ce[Ye]>t)We+=Be-(1<<Xe-Ce[Ye]),Ce[Ye]=t;else break}for(We>>=Ke;We>0;){var sn=Se[e].s;Ce[sn]<t?We-=1<<t-Ce[sn]++-1:++e}for(;e>=0&&We;--e){var rn=Se[e].s;Ce[rn]==t&&(--Ce[rn],++We)}Xe=t}return{t:new u8(Ce),l:Xe}},ln=function(Ae,t,St){return Ae.s==-1?Math.max(ln(Ae.l,t,St+1),ln(Ae.r,t,St+1)):t[Ae.s]=St},lc=function(Ae){for(var t=Ae.length;t&&!Ae[--t];);for(var St=new u16(++t),e=0,_e=Ae[0],Se=1,Pe=function(Ee){St[e++]=Ee},Te=1;Te<=t;++Te)if(Ae[Te]==_e&&Te!=t)++Se;else{if(!_e&&Se>2){for(;Se>138;Se-=138)Pe(32754);Se>2&&(Pe(Se>10?Se-11<<5|28690:Se-3<<5|12305),Se=0)}else if(Se>3){for(Pe(_e),--Se;Se>6;Se-=6)Pe(8304);Se>2&&(Pe(Se-3<<5|8208),Se=0)}for(;Se--;)Pe(_e);Se=1,_e=Ae[Te]}return{c:St.subarray(0,e),n:t}},clen=function(Ae,t){for(var St=0,e=0;e<t.length;++e)St+=Ae[e]*t[e];return St},wfblk=function(Ae,t,St){var e=St.length,_e=shft(t+2);Ae[_e]=e&255,Ae[_e+1]=e>>8,Ae[_e+2]=Ae[_e]^255,Ae[_e+3]=Ae[_e+1]^255;for(var Se=0;Se<e;++Se)Ae[_e+Se+4]=St[Se];return(_e+4+e)*8},wblk=function(Ae,t,St,e,_e,Se,Pe,Te,Ee,Re,Ie){wbits(t,Ie++,St),++_e[256];for(var qe=hTree(_e,15),Ge=qe.t,Ce=qe.l,Xe=hTree(Se,15),We=Xe.t,Ke=Xe.l,Be=lc(Ge),Ye=Be.c,sn=Be.n,rn=lc(We),$e=rn.c,tn=rn.n,Ve=new u16(19),ze=0;ze<Ye.length;++ze)++Ve[Ye[ze]&31];for(var ze=0;ze<$e.length;++ze)++Ve[$e[ze]&31];for(var Qe=hTree(Ve,7),gn=Qe.t,Me=Qe.l,Ue=19;Ue>4&&!gn[clim[Ue-1]];--Ue);var en=Re+5<<3,pn=clen(_e,flt)+clen(Se,fdt)+Pe,An=clen(_e,Ge)+clen(Se,We)+Pe+14+3*Ue+clen(Ve,gn)+2*Ve[16]+3*Ve[17]+7*Ve[18];if(Ee>=0&&en<=pn&&en<=An)return wfblk(t,Ie,Ae.subarray(Ee,Ee+Re));var xn,_n,En,hn;if(wbits(t,Ie,1+(An<pn)),Ie+=2,An<pn){xn=hMap(Ge,Ce,0),_n=Ge,En=hMap(We,Ke,0),hn=We;var Sn=hMap(gn,Me,0);wbits(t,Ie,sn-257),wbits(t,Ie+5,tn-1),wbits(t,Ie+10,Ue-4),Ie+=14;for(var ze=0;ze<Ue;++ze)wbits(t,Ie+3*ze,gn[clim[ze]]);Ie+=3*Ue;for(var In=[Ye,$e],je=0;je<2;++je)for(var Fe=In[je],ze=0;ze<Fe.length;++ze){var De=Fe[ze]&31;wbits(t,Ie,Sn[De]),Ie+=gn[De],De>15&&(wbits(t,Ie,Fe[ze]>>5&127),Ie+=Fe[ze]>>12)}}else xn=flm,_n=flt,En=fdm,hn=fdt;for(var ze=0;ze<Te;++ze){var Je=e[ze];if(Je>255){var De=Je>>18&31;wbits16(t,Ie,xn[De+257]),Ie+=_n[De+257],De>7&&(wbits(t,Ie,Je>>23&31),Ie+=fleb[De]);var nn=Je&31;wbits16(t,Ie,En[nn]),Ie+=hn[nn],nn>3&&(wbits16(t,Ie,Je>>5&8191),Ie+=fdeb[nn])}else wbits16(t,Ie,xn[Je]),Ie+=_n[Je]}return wbits16(t,Ie,xn[256]),Ie+_n[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(Ae,t,St,e,_e,Se){var Pe=Se.z||Ae.length,Te=new u8(e+Pe+5*(1+Math.ceil(Pe/7e3))+_e),Ee=Te.subarray(e,Te.length-_e),Re=Se.l,Ie=(Se.r||0)&7;if(t){Ie&&(Ee[0]=Se.r>>3);for(var qe=deo[t-1],Ge=qe>>13,Ce=qe&8191,Xe=(1<<St)-1,We=Se.p||new u16(32768),Ke=Se.h||new u16(Xe+1),Be=Math.ceil(St/3),Ye=2*Be,sn=function(ni){return(Ae[ni]^Ae[ni+1]<<Be^Ae[ni+2]<<Ye)&Xe},rn=new i32(25e3),$e=new u16(288),tn=new u16(32),Ve=0,ze=0,Qe=Se.i||0,gn=0,Me=Se.w||0,Ue=0;Qe+2<Pe;++Qe){var en=sn(Qe),pn=Qe&32767,An=Ke[en];if(We[pn]=An,Ke[en]=pn,Me<=Qe){var xn=Pe-Qe;if((Ve>7e3||gn>24576)&&(xn>423||!Re)){Ie=wblk(Ae,Ee,0,rn,$e,tn,ze,gn,Ue,Qe-Ue,Ie),gn=Ve=ze=0,Ue=Qe;for(var _n=0;_n<286;++_n)$e[_n]=0;for(var _n=0;_n<30;++_n)tn[_n]=0}var En=2,hn=0,Sn=Ce,In=pn-An&32767;if(xn>2&&en==sn(Qe-In))for(var je=Math.min(Ge,xn)-1,Fe=Math.min(32767,Qe),De=Math.min(258,xn);In<=Fe&&--Sn&&pn!=An;){if(Ae[Qe+En]==Ae[Qe+En-In]){for(var Je=0;Je<De&&Ae[Qe+Je]==Ae[Qe+Je-In];++Je);if(Je>En){if(En=Je,hn=In,Je>je)break;for(var nn=Math.min(In,Je-2),an=0,_n=0;_n<nn;++_n){var on=Qe-In+_n&32767,yn=We[on],Fn=on-yn&32767;Fn>an&&(an=Fn,An=on)}}}pn=An,An=We[pn],In+=pn-An&32767}if(hn){rn[gn++]=268435456|revfl[En]<<18|revfd[hn];var On=revfl[En]&31,Un=revfd[hn]&31;ze+=fleb[On]+fdeb[Un],++$e[257+On],++tn[Un],Me=Qe+En,++Ve}else rn[gn++]=Ae[Qe],++$e[Ae[Qe]]}}for(Qe=Math.max(Qe,Me);Qe<Pe;++Qe)rn[gn++]=Ae[Qe],++$e[Ae[Qe]];Ie=wblk(Ae,Ee,Re,rn,$e,tn,ze,gn,Ue,Qe-Ue,Ie),Re||(Se.r=Ie&7|Ee[Ie/8|0]<<3,Ie-=7,Se.h=Ke,Se.p=We,Se.i=Qe,Se.w=Me)}else{for(var Qe=Se.w||0;Qe<Pe+Re;Qe+=65535){var Wn=Qe+65535;Wn>=Pe&&(Ee[Ie/8|0]=Re,Wn=Pe),Ie=wfblk(Ee,Ie+1,Ae.subarray(Qe,Wn))}Se.i=Pe}return slc(Te,0,e+shft(Ie)+_e)},adler=function(){var Ae=1,t=0;return{p:function(St){for(var e=Ae,_e=t,Se=St.length|0,Pe=0;Pe!=Se;){for(var Te=Math.min(Pe+2655,Se);Pe<Te;++Pe)_e+=e+=St[Pe];e=(e&65535)+15*(e>>16),_e=(_e&65535)+15*(_e>>16)}Ae=e,t=_e},d:function(){return Ae%=65521,t%=65521,(Ae&255)<<24|(Ae&65280)<<8|(t&255)<<8|t>>8}}},dopt=function(Ae,t,St,e,_e){if(!_e&&(_e={l:1},t.dictionary)){var Se=t.dictionary.subarray(-32768),Pe=new u8(Se.length+Ae.length);Pe.set(Se),Pe.set(Ae,Se.length),Ae=Pe,_e.w=Se.length}return dflt(Ae,t.level==null?6:t.level,t.mem==null?_e.l?Math.ceil(Math.max(8,Math.min(13,Math.log(Ae.length)))*1.5):20:12+t.mem,St,e,_e)},wbytes=function(Ae,t,St){for(;St;++t)Ae[t]=St,St>>>=8},zlh=function(Ae,t){var St=t.level,e=St==0?0:St<6?1:St==9?3:2;if(Ae[0]=120,Ae[1]=e<<6|(t.dictionary&&32),Ae[1]|=31-(Ae[0]<<8|Ae[1])%31,t.dictionary){var _e=adler();_e.p(t.dictionary),wbytes(Ae,2,_e.d())}},zls=function(Ae,t){return((Ae[0]&15)!=8||Ae[0]>>4>7||(Ae[0]<<8|Ae[1])%31)&&err(6,"invalid zlib data"),(Ae[1]>>5&1)==1&&err(6,"invalid zlib data: "+(Ae[1]&32?"need":"unexpected")+" dictionary"),(Ae[1]>>3&4)+2};function zlibSync(Ae,t){t||(t={});var St=adler();St.p(Ae);var e=dopt(Ae,t,t.dictionary?6:2,4);return zlh(e,t),wbytes(e,e.length-4,St.d()),e}function unzlibSync(Ae,t){return inflt(Ae.subarray(zls(Ae),-4),{i:2},t,t)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch{}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(Ae){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(Ae){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(Ae))}};function o(Ae,t,St){var e=new XMLHttpRequest;e.open("GET",Ae),e.responseType="blob",e.onload=function(){l(e.response,t,St)},e.onerror=function(){a.error("could not download file")},e.send()}function s(Ae){var t=new XMLHttpRequest;t.open("HEAD",Ae,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function c(Ae){try{Ae.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),Ae.dispatchEvent(t)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(Ae,t,St){var e=n.URL||n.webkitURL,_e=document.createElement("a");t=t||Ae.name||"download",_e.download=t,_e.rel="noopener",typeof Ae=="string"?(_e.href=Ae,_e.origin!==location.origin?s(_e.href)?o(Ae,t,St):c(_e,_e.target="_blank"):c(_e)):(_e.href=e.createObjectURL(Ae),setTimeout(function(){e.revokeObjectURL(_e.href)},4e4),setTimeout(function(){c(_e)},0))}:"msSaveOrOpenBlob"in navigator?function(Ae,t,St){if(t=t||Ae.name||"download",typeof Ae=="string")if(s(Ae))o(Ae,t,St);else{var e=document.createElement("a");e.href=Ae,e.target="_blank",setTimeout(function(){c(e)})}else navigator.msSaveOrOpenBlob(function(_e,Se){return Se===void 0?Se={autoBom:!1}:_typeof(Se)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),Se={autoBom:!Se}),Se.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_e.type)?new Blob(["\uFEFF",_e],{type:_e.type}):_e}(Ae,St),t)}:function(Ae,t,St,e){if((e=e||open("","_blank"))&&(e.document.title=e.document.body.innerText="downloading..."),typeof Ae=="string")return o(Ae,t,St);var _e=Ae.type==="application/octet-stream",Se=/constructor/i.test(n.HTMLElement)||n.safari,Pe=/CriOS\/[\d]+/.test(navigator.userAgent);if((Pe||_e&&Se)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var Te=new FileReader;Te.onloadend=function(){var Ie=Te.result;Ie=Pe?Ie:Ie.replace(/^data:[^;]*;/,"data:attachment/file;"),e?e.location.href=Ie:location=Ie,e=null},Te.readAsDataURL(Ae)}else{var Ee=n.URL||n.webkitURL,Re=Ee.createObjectURL(Ae);e?e.location=Re:location.href=Re,e=null,setTimeout(function(){Ee.revokeObjectURL(Re)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(Ae){var t;Ae=Ae||"",this.ok=!1,Ae.charAt(0)=="#"&&(Ae=Ae.substr(1,6)),Ae={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[Ae=(Ae=Ae.replace(/ /g,"")).toLowerCase()]||Ae;for(var St=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(Te){return[parseInt(Te[1]),parseInt(Te[2]),parseInt(Te[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(Te){return[parseInt(Te[1],16),parseInt(Te[2],16),parseInt(Te[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(Te){return[parseInt(Te[1]+Te[1],16),parseInt(Te[2]+Te[2],16),parseInt(Te[3]+Te[3],16)]}}],e=0;e<St.length;e++){var _e=St[e].re,Se=St[e].process,Pe=_e.exec(Ae);Pe&&(t=Se(Pe),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var Te=this.r.toString(16),Ee=this.g.toString(16),Re=this.b.toString(16);return Te.length==1&&(Te="0"+Te),Ee.length==1&&(Ee="0"+Ee),Re.length==1&&(Re="0"+Re),"#"+Te+Ee+Re}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(Ae,t){var St=Ae[0],e=Ae[1],_e=Ae[2],Se=Ae[3];St=g(St,e,_e,Se,t[0],7,-680876936),Se=g(Se,St,e,_e,t[1],12,-389564586),_e=g(_e,Se,St,e,t[2],17,606105819),e=g(e,_e,Se,St,t[3],22,-1044525330),St=g(St,e,_e,Se,t[4],7,-176418897),Se=g(Se,St,e,_e,t[5],12,1200080426),_e=g(_e,Se,St,e,t[6],17,-1473231341),e=g(e,_e,Se,St,t[7],22,-45705983),St=g(St,e,_e,Se,t[8],7,1770035416),Se=g(Se,St,e,_e,t[9],12,-1958414417),_e=g(_e,Se,St,e,t[10],17,-42063),e=g(e,_e,Se,St,t[11],22,-1990404162),St=g(St,e,_e,Se,t[12],7,1804603682),Se=g(Se,St,e,_e,t[13],12,-40341101),_e=g(_e,Se,St,e,t[14],17,-1502002290),St=m(St,e=g(e,_e,Se,St,t[15],22,1236535329),_e,Se,t[1],5,-165796510),Se=m(Se,St,e,_e,t[6],9,-1069501632),_e=m(_e,Se,St,e,t[11],14,643717713),e=m(e,_e,Se,St,t[0],20,-373897302),St=m(St,e,_e,Se,t[5],5,-701558691),Se=m(Se,St,e,_e,t[10],9,38016083),_e=m(_e,Se,St,e,t[15],14,-660478335),e=m(e,_e,Se,St,t[4],20,-405537848),St=m(St,e,_e,Se,t[9],5,568446438),Se=m(Se,St,e,_e,t[14],9,-1019803690),_e=m(_e,Se,St,e,t[3],14,-187363961),e=m(e,_e,Se,St,t[8],20,1163531501),St=m(St,e,_e,Se,t[13],5,-1444681467),Se=m(Se,St,e,_e,t[2],9,-51403784),_e=m(_e,Se,St,e,t[7],14,1735328473),St=v(St,e=m(e,_e,Se,St,t[12],20,-1926607734),_e,Se,t[5],4,-378558),Se=v(Se,St,e,_e,t[8],11,-2022574463),_e=v(_e,Se,St,e,t[11],16,1839030562),e=v(e,_e,Se,St,t[14],23,-35309556),St=v(St,e,_e,Se,t[1],4,-1530992060),Se=v(Se,St,e,_e,t[4],11,1272893353),_e=v(_e,Se,St,e,t[7],16,-155497632),e=v(e,_e,Se,St,t[10],23,-1094730640),St=v(St,e,_e,Se,t[13],4,681279174),Se=v(Se,St,e,_e,t[0],11,-358537222),_e=v(_e,Se,St,e,t[3],16,-722521979),e=v(e,_e,Se,St,t[6],23,76029189),St=v(St,e,_e,Se,t[9],4,-640364487),Se=v(Se,St,e,_e,t[12],11,-421815835),_e=v(_e,Se,St,e,t[15],16,530742520),St=b(St,e=v(e,_e,Se,St,t[2],23,-995338651),_e,Se,t[0],6,-198630844),Se=b(Se,St,e,_e,t[7],10,1126891415),_e=b(_e,Se,St,e,t[14],15,-1416354905),e=b(e,_e,Se,St,t[5],21,-57434055),St=b(St,e,_e,Se,t[12],6,1700485571),Se=b(Se,St,e,_e,t[3],10,-1894986606),_e=b(_e,Se,St,e,t[10],15,-1051523),e=b(e,_e,Se,St,t[1],21,-2054922799),St=b(St,e,_e,Se,t[8],6,1873313359),Se=b(Se,St,e,_e,t[15],10,-30611744),_e=b(_e,Se,St,e,t[6],15,-1560198380),e=b(e,_e,Se,St,t[13],21,1309151649),St=b(St,e,_e,Se,t[4],6,-145523070),Se=b(Se,St,e,_e,t[11],10,-1120210379),_e=b(_e,Se,St,e,t[2],15,718787259),e=b(e,_e,Se,St,t[9],21,-343485551),Ae[0]=_(St,Ae[0]),Ae[1]=_(e,Ae[1]),Ae[2]=_(_e,Ae[2]),Ae[3]=_(Se,Ae[3])}function p(Ae,t,St,e,_e,Se){return t=_(_(t,Ae),_(e,Se)),_(t<<_e|t>>>32-_e,St)}function g(Ae,t,St,e,_e,Se,Pe){return p(t&St|~t&e,Ae,t,_e,Se,Pe)}function m(Ae,t,St,e,_e,Se,Pe){return p(t&e|St&~e,Ae,t,_e,Se,Pe)}function v(Ae,t,St,e,_e,Se,Pe){return p(t^St^e,Ae,t,_e,Se,Pe)}function b(Ae,t,St,e,_e,Se,Pe){return p(St^(t|~e),Ae,t,_e,Se,Pe)}function y(Ae){var t,St=Ae.length,e=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=Ae.length;t+=64)d(e,w(Ae.substring(t-64,t)));Ae=Ae.substring(t-64);var _e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<Ae.length;t++)_e[t>>2]|=Ae.charCodeAt(t)<<(t%4<<3);if(_e[t>>2]|=128<<(t%4<<3),t>55)for(d(e,_e),t=0;t<16;t++)_e[t]=0;return _e[14]=8*St,d(e,_e),e}function w(Ae){var t,St=[];for(t=0;t<64;t+=4)St[t>>2]=Ae.charCodeAt(t)+(Ae.charCodeAt(t+1)<<8)+(Ae.charCodeAt(t+2)<<16)+(Ae.charCodeAt(t+3)<<24);return St}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(Ae){for(var t="",St=0;St<4;St++)t+=N[Ae>>8*St+4&15]+N[Ae>>8*St&15];return t}function A(Ae){return String.fromCharCode((255&Ae)>>0,(65280&Ae)>>8,(16711680&Ae)>>16,(4278190080&Ae)>>24)}function x(Ae){return y(Ae).map(A).join("")}var S=function(Ae){for(var t=0;t<Ae.length;t++)Ae[t]=L(Ae[t]);return Ae.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(Ae,t){if(S){var St=(65535&Ae)+(65535&t);return(Ae>>16)+(t>>16)+(St>>16)<<16|65535&St}return Ae+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(Ae,t){var St,e,_e,Se;if(Ae!==St){for(var Pe=(_e=Ae,Se=1+(256/Ae.length>>0),new Array(Se+1).join(_e)),Te=[],Ee=0;Ee<256;Ee++)Te[Ee]=Ee;var Re=0;for(Ee=0;Ee<256;Ee++){var Ie=Te[Ee];Re=(Re+Ie+Pe.charCodeAt(Ee))%256,Te[Ee]=Te[Re],Te[Re]=Ie}St=Ae,e=Te}else Te=e;var qe=t.length,Ge=0,Ce=0,Xe="";for(Ee=0;Ee<qe;Ee++)Ce=(Ce+(Ie=Te[Ge=(Ge+1)%256]))%256,Te[Ge]=Te[Ce],Te[Ce]=Ie,Pe=Te[(Te[Ge]+Te[Ce])%256],Xe+=String.fromCharCode(t.charCodeAt(Ee)^Pe);return Xe}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(Ae,t,St,e){this.v=1,this.r=2;var _e=192;Ae.forEach(function(Te){if(k.perm!==void 0)throw new Error("Invalid permission: "+Te);_e+=k[Te]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var Se=(t+this.padding).substr(0,32),Pe=(St+this.padding).substr(0,32);this.O=this.processOwnerPassword(Se,Pe),this.P=-(1+(255^_e)),this.encryptionKey=x(Se+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(e)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(Ae){if(/[^\u0000-\u00ff]/.test(Ae))throw new Error("Invalid PDF Name Object: "+Ae+", Only accept ASCII characters.");for(var t="",St=Ae.length,e=0;e<St;e++){var _e=Ae.charCodeAt(e);_e<33||_e===35||_e===37||_e===40||_e===41||_e===47||_e===60||_e===62||_e===91||_e===93||_e===123||_e===125||_e>126?t+="#"+("0"+_e.toString(16)).slice(-2):t+=Ae[e]}return t}function C(Ae){if(_typeof(Ae)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(St,e,_e){if(_e=_e||!1,typeof St!="string"||typeof e!="function"||typeof _e!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(St)||(t[St]={});var Se=Math.random().toString(35);return t[St][Se]=[e,!!_e],Se},this.unsubscribe=function(St){for(var e in t)if(t[e][St])return delete t[e][St],Object.keys(t[e]).length===0&&delete t[e],!0;return!1},this.publish=function(St){if(t.hasOwnProperty(St)){var e=Array.prototype.slice.call(arguments,1),_e=[];for(var Se in t[St]){var Pe=t[St][Se];try{Pe[0].apply(Ae,e)}catch(Te){n.console&&a.error("jsPDF PubSub Error",Te.message,Te)}Pe[1]&&_e.push(Se)}_e.length&&_e.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function j(Ae){if(!(this instanceof j))return new j(Ae);var t="opacity,stroke-opacity".split(",");for(var St in Ae)Ae.hasOwnProperty(St)&&t.indexOf(St)>=0&&(this[St]=Ae[St]);this.id="",this.objectNumber=-1}function O(Ae,t){this.gState=Ae,this.matrix=t,this.id="",this.objectNumber=-1}function B(Ae,t,St,e,_e){if(!(this instanceof B))return new B(Ae,t,St,e,_e);this.type=Ae==="axial"?2:3,this.coords=t,this.colors=St,O.call(this,e,_e)}function M(Ae,t,St,e,_e){if(!(this instanceof M))return new M(Ae,t,St,e,_e);this.boundingBox=Ae,this.xStep=t,this.yStep=St,this.stream="",this.cloneIndex=0,O.call(this,e,_e)}function E(Ae){var t,St=typeof arguments[0]=="string"?arguments[0]:"p",e=arguments[1],_e=arguments[2],Se=arguments[3],Pe=[],Te=1,Ee=16,Re="S",Ie=null;_typeof(Ae=Ae||{})==="object"&&(St=Ae.orientation,e=Ae.unit||e,_e=Ae.format||_e,Se=Ae.compress||Ae.compressPdf||Se,(Ie=Ae.encryption||null)!==null&&(Ie.userPassword=Ie.userPassword||"",Ie.ownerPassword=Ie.ownerPassword||"",Ie.userPermissions=Ie.userPermissions||[]),Te=typeof Ae.userUnit=="number"?Math.abs(Ae.userUnit):1,Ae.precision!==void 0&&(t=Ae.precision),Ae.floatPrecision!==void 0&&(Ee=Ae.floatPrecision),Re=Ae.defaultPathOperation||"S"),Pe=Ae.filters||(Se===!0?["FlateEncode"]:Pe),e=e||"mm",St=(""+(St||"P")).toLowerCase();var qe=Ae.putOnlyUsedFonts||!1,Ge={},Ce={internal:{},__private__:{}};Ce.__private__.PubSub=C;var Xe="1.3",We=Ce.__private__.getPdfVersion=function(){return Xe};Ce.__private__.setPdfVersion=function(ke){Xe=ke};var Ke={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};Ce.__private__.getPageFormats=function(){return Ke};var Be=Ce.__private__.getPageFormat=function(ke){return Ke[ke]};_e=_e||"a4";var Ye={COMPAT:"compat",ADVANCED:"advanced"},sn=Ye.COMPAT;function rn(){this.saveGraphicsState(),cn(new Hn(hi,0,0,-hi,0,ws()*hi).toString()+" cm"),this.setFontSize(this.getFontSize()/hi),Re="n",sn=Ye.ADVANCED}function $e(){this.restoreGraphicsState(),Re="S",sn=Ye.COMPAT}var tn=Ce.__private__.combineFontStyleAndFontWeight=function(ke,dn){if(ke=="bold"&&dn=="normal"||ke=="bold"&&dn==400||ke=="normal"&&dn=="italic"||ke=="bold"&&dn=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return dn&&(ke=dn==400||dn==="normal"?ke==="italic"?"italic":"normal":dn!=700&&dn!=="bold"||ke!=="normal"?(dn==700?"bold":dn)+""+ke:"bold"),ke};Ce.advancedAPI=function(ke){var dn=sn===Ye.COMPAT;return dn&&rn.call(this),typeof ke!="function"||(ke(this),dn&&$e.call(this)),this},Ce.compatAPI=function(ke){var dn=sn===Ye.ADVANCED;return dn&&$e.call(this),typeof ke!="function"||(ke(this),dn&&rn.call(this)),this},Ce.isAdvancedAPI=function(){return sn===Ye.ADVANCED};var Ve,ze=function(ke){if(sn!==Ye.ADVANCED)throw new Error(ke+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Qe=Ce.roundToPrecision=Ce.__private__.roundToPrecision=function(ke,dn){var Mn=t||dn;if(isNaN(ke)||isNaN(Mn))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ke.toFixed(Mn).replace(/0+$/,"")};Ve=Ce.hpf=Ce.__private__.hpf=typeof Ee=="number"?function(ke){if(isNaN(ke))throw new Error("Invalid argument passed to jsPDF.hpf");return Qe(ke,Ee)}:Ee==="smart"?function(ke){if(isNaN(ke))throw new Error("Invalid argument passed to jsPDF.hpf");return Qe(ke,ke>-1&&ke<1?16:5)}:function(ke){if(isNaN(ke))throw new Error("Invalid argument passed to jsPDF.hpf");return Qe(ke,16)};var gn=Ce.f2=Ce.__private__.f2=function(ke){if(isNaN(ke))throw new Error("Invalid argument passed to jsPDF.f2");return Qe(ke,2)},Me=Ce.__private__.f3=function(ke){if(isNaN(ke))throw new Error("Invalid argument passed to jsPDF.f3");return Qe(ke,3)},Ue=Ce.scale=Ce.__private__.scale=function(ke){if(isNaN(ke))throw new Error("Invalid argument passed to jsPDF.scale");return sn===Ye.COMPAT?ke*hi:sn===Ye.ADVANCED?ke:void 0},en=function(ke){return sn===Ye.COMPAT?ws()-ke:sn===Ye.ADVANCED?ke:void 0},pn=function(ke){return Ue(en(ke))};Ce.__private__.setPrecision=Ce.setPrecision=function(ke){typeof parseInt(ke,10)=="number"&&(t=parseInt(ke,10))};var An,xn="00000000000000000000000000000000",_n=Ce.__private__.getFileId=function(){return xn},En=Ce.__private__.setFileId=function(ke){return xn=ke!==void 0&&/^[a-fA-F0-9]{32}$/.test(ke)?ke.toUpperCase():xn.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),Ie!==null&&(Nr=new I(Ie.userPermissions,Ie.userPassword,Ie.ownerPassword,xn)),xn};Ce.setFileId=function(ke){return En(ke),this},Ce.getFileId=function(){return _n()};var hn=Ce.__private__.convertDateToPDFDate=function(ke){var dn=ke.getTimezoneOffset(),Mn=dn<0?"+":"-",Gn=Math.floor(Math.abs(dn/60)),si=Math.abs(dn%60),mi=[Mn,De(Gn),"'",De(si),"'"].join("");return["D:",ke.getFullYear(),De(ke.getMonth()+1),De(ke.getDate()),De(ke.getHours()),De(ke.getMinutes()),De(ke.getSeconds()),mi].join("")},Sn=Ce.__private__.convertPDFDateToDate=function(ke){var dn=parseInt(ke.substr(2,4),10),Mn=parseInt(ke.substr(6,2),10)-1,Gn=parseInt(ke.substr(8,2),10),si=parseInt(ke.substr(10,2),10),mi=parseInt(ke.substr(12,2),10),Ei=parseInt(ke.substr(14,2),10);return new Date(dn,Mn,Gn,si,mi,Ei,0)},In=Ce.__private__.setCreationDate=function(ke){var dn;if(ke===void 0&&(ke=new Date),ke instanceof Date)dn=hn(ke);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ke))throw new Error("Invalid argument passed to jsPDF.setCreationDate");dn=ke}return An=dn},je=Ce.__private__.getCreationDate=function(ke){var dn=An;return ke==="jsDate"&&(dn=Sn(An)),dn};Ce.setCreationDate=function(ke){return In(ke),this},Ce.getCreationDate=function(ke){return je(ke)};var Fe,De=Ce.__private__.padd2=function(ke){return("0"+parseInt(ke)).slice(-2)},Je=Ce.__private__.padd2Hex=function(ke){return("00"+(ke=ke.toString())).substr(ke.length)},nn=0,an=[],on=[],yn=0,Fn=[],On=[],Un=!1,Wn=on,ni=function(){nn=0,yn=0,on=[],an=[],Fn=[],Ti=Ci(),Mi=Ci()};Ce.__private__.setCustomOutputDestination=function(ke){Un=!0,Wn=ke};var Dn=function(ke){Un||(Wn=ke)};Ce.__private__.resetCustomOutputDestination=function(){Un=!1,Wn=on};var cn=Ce.__private__.out=function(ke){return ke=ke.toString(),yn+=ke.length+1,Wn.push(ke),Wn},qn=Ce.__private__.write=function(ke){return cn(arguments.length===1?ke.toString():Array.prototype.join.call(arguments," "))},fn=Ce.__private__.getArrayBuffer=function(ke){for(var dn=ke.length,Mn=new ArrayBuffer(dn),Gn=new Uint8Array(Mn);dn--;)Gn[dn]=ke.charCodeAt(dn);return Mn},vn=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];Ce.__private__.getStandardFonts=function(){return vn};var kn=Ae.fontSize||16;Ce.__private__.setFontSize=Ce.setFontSize=function(ke){return kn=sn===Ye.ADVANCED?ke/hi:ke,this};var Rn,zn=Ce.__private__.getFontSize=Ce.getFontSize=function(){return sn===Ye.COMPAT?kn:kn*hi},Qn=Ae.R2L||!1;Ce.__private__.setR2L=Ce.setR2L=function(ke){return Qn=ke,this},Ce.__private__.getR2L=Ce.getR2L=function(){return Qn};var ii,jn=Ce.__private__.setZoomMode=function(ke){var dn=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ke))Rn=ke;else if(isNaN(ke)){if(dn.indexOf(ke)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ke+'" is not recognized.');Rn=ke}else Rn=parseInt(ke,10)};Ce.__private__.getZoomMode=function(){return Rn};var fi,di=Ce.__private__.setPageMode=function(ke){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ke)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ke+'" is not recognized.');ii=ke};Ce.__private__.getPageMode=function(){return ii};var Ii=Ce.__private__.setLayoutMode=function(ke){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ke)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ke+'" is not recognized.');fi=ke};Ce.__private__.getLayoutMode=function(){return fi},Ce.__private__.setDisplayMode=Ce.setDisplayMode=function(ke,dn,Mn){return jn(ke),Ii(dn),di(Mn),this};var Si={title:"",subject:"",author:"",keywords:"",creator:""};Ce.__private__.getDocumentProperty=function(ke){if(Object.keys(Si).indexOf(ke)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Si[ke]},Ce.__private__.getDocumentProperties=function(){return Si},Ce.__private__.setDocumentProperties=Ce.setProperties=Ce.setDocumentProperties=function(ke){for(var dn in Si)Si.hasOwnProperty(dn)&&ke[dn]&&(Si[dn]=ke[dn]);return this},Ce.__private__.setDocumentProperty=function(ke,dn){if(Object.keys(Si).indexOf(ke)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Si[ke]=dn};var Ri,hi,Fi,Oi,Yi,ai={},Xn={},$n=[],wi={},Gi={},Bi={},Tn={},ci=null,bi=0,vi=[],Pi=new C(Ce),Ni=Ae.hotfixes||[],Cn={},Ln={},Bn=[],Hn=function ke(dn,Mn,Gn,si,mi,Ei){if(!(this instanceof ke))return new ke(dn,Mn,Gn,si,mi,Ei);isNaN(dn)&&(dn=1),isNaN(Mn)&&(Mn=0),isNaN(Gn)&&(Gn=0),isNaN(si)&&(si=1),isNaN(mi)&&(mi=0),isNaN(Ei)&&(Ei=0),this._matrix=[dn,Mn,Gn,si,mi,Ei]};Object.defineProperty(Hn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ke){this._matrix[0]=ke}}),Object.defineProperty(Hn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ke){this._matrix[1]=ke}}),Object.defineProperty(Hn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ke){this._matrix[2]=ke}}),Object.defineProperty(Hn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ke){this._matrix[3]=ke}}),Object.defineProperty(Hn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ke){this._matrix[4]=ke}}),Object.defineProperty(Hn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ke){this._matrix[5]=ke}}),Object.defineProperty(Hn.prototype,"a",{get:function(){return this._matrix[0]},set:function(ke){this._matrix[0]=ke}}),Object.defineProperty(Hn.prototype,"b",{get:function(){return this._matrix[1]},set:function(ke){this._matrix[1]=ke}}),Object.defineProperty(Hn.prototype,"c",{get:function(){return this._matrix[2]},set:function(ke){this._matrix[2]=ke}}),Object.defineProperty(Hn.prototype,"d",{get:function(){return this._matrix[3]},set:function(ke){this._matrix[3]=ke}}),Object.defineProperty(Hn.prototype,"e",{get:function(){return this._matrix[4]},set:function(ke){this._matrix[4]=ke}}),Object.defineProperty(Hn.prototype,"f",{get:function(){return this._matrix[5]},set:function(ke){this._matrix[5]=ke}}),Object.defineProperty(Hn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Hn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Hn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Hn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Hn.prototype.join=function(ke){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Ve).join(ke)},Hn.prototype.multiply=function(ke){var dn=ke.sx*this.sx+ke.shy*this.shx,Mn=ke.sx*this.shy+ke.shy*this.sy,Gn=ke.shx*this.sx+ke.sy*this.shx,si=ke.shx*this.shy+ke.sy*this.sy,mi=ke.tx*this.sx+ke.ty*this.shx+this.tx,Ei=ke.tx*this.shy+ke.ty*this.sy+this.ty;return new Hn(dn,Mn,Gn,si,mi,Ei)},Hn.prototype.decompose=function(){var ke=this.sx,dn=this.shy,Mn=this.shx,Gn=this.sy,si=this.tx,mi=this.ty,Ei=Math.sqrt(ke*ke+dn*dn),Ui=(ke/=Ei)*Mn+(dn/=Ei)*Gn;Mn-=ke*Ui,Gn-=dn*Ui;var Vi=Math.sqrt(Mn*Mn+Gn*Gn);return Ui/=Vi,ke*(Gn/=Vi)<dn*(Mn/=Vi)&&(ke=-ke,dn=-dn,Ui=-Ui,Ei=-Ei),{scale:new Hn(Ei,0,0,Vi,0,0),translate:new Hn(1,0,0,1,si,mi),rotate:new Hn(ke,dn,-dn,ke,0,0),skew:new Hn(1,0,Ui,1,0,0)}},Hn.prototype.toString=function(ke){return this.join(" ")},Hn.prototype.inversed=function(){var ke=this.sx,dn=this.shy,Mn=this.shx,Gn=this.sy,si=this.tx,mi=this.ty,Ei=1/(ke*Gn-dn*Mn),Ui=Gn*Ei,Vi=-dn*Ei,Qi=-Mn*Ei,Zi=ke*Ei;return new Hn(Ui,Vi,Qi,Zi,-Ui*si-Qi*mi,-Vi*si-Zi*mi)},Hn.prototype.applyToPoint=function(ke){var dn=ke.x*this.sx+ke.y*this.shx+this.tx,Mn=ke.x*this.shy+ke.y*this.sy+this.ty;return new Qs(dn,Mn)},Hn.prototype.applyToRectangle=function(ke){var dn=this.applyToPoint(ke),Mn=this.applyToPoint(new Qs(ke.x+ke.w,ke.y+ke.h));return new Ta(dn.x,dn.y,Mn.x-dn.x,Mn.y-dn.y)},Hn.prototype.clone=function(){var ke=this.sx,dn=this.shy,Mn=this.shx,Gn=this.sy,si=this.tx,mi=this.ty;return new Hn(ke,dn,Mn,Gn,si,mi)},Ce.Matrix=Hn;var ri=Ce.matrixMult=function(ke,dn){return dn.multiply(ke)},ui=new Hn(1,0,0,1,0,0);Ce.unitMatrix=Ce.identityMatrix=ui;var pi=function(ke,dn){if(!Gi[ke]){var Mn=(dn instanceof B?"Sh":"P")+(Object.keys(wi).length+1).toString(10);dn.id=Mn,Gi[ke]=Mn,wi[Mn]=dn,Pi.publish("addPattern",dn)}};Ce.ShadingPattern=B,Ce.TilingPattern=M,Ce.addShadingPattern=function(ke,dn){return ze("addShadingPattern()"),pi(ke,dn),this},Ce.beginTilingPattern=function(ke){ze("beginTilingPattern()"),xo(ke.boundingBox[0],ke.boundingBox[1],ke.boundingBox[2]-ke.boundingBox[0],ke.boundingBox[3]-ke.boundingBox[1],ke.matrix)},Ce.endTilingPattern=function(ke,dn){ze("endTilingPattern()"),dn.stream=On[Fe].join(`
`),pi(ke,dn),Pi.publish("endTilingPattern",dn),Bn.pop().restore()};var ki=Ce.__private__.newObject=function(){var ke=Ci();return xi(ke,!0),ke},Ci=Ce.__private__.newObjectDeferred=function(){return nn++,an[nn]=function(){return yn},nn},xi=function(ke,dn){return dn=typeof dn=="boolean"&&dn,an[ke]=yn,dn&&cn(ke+" 0 obj"),ke},Hi=Ce.__private__.newAdditionalObject=function(){var ke={objId:Ci(),content:""};return Fn.push(ke),ke},Ti=Ci(),Mi=Ci(),qi=Ce.__private__.decodeColorString=function(ke){var dn=ke.split(" ");if(dn.length!==2||dn[1]!=="g"&&dn[1]!=="G")dn.length===5&&(dn[4]==="k"||dn[4]==="K")&&(dn=[(1-dn[0])*(1-dn[3]),(1-dn[1])*(1-dn[3]),(1-dn[2])*(1-dn[3]),"r"]);else{var Mn=parseFloat(dn[0]);dn=[Mn,Mn,Mn,"r"]}for(var Gn="#",si=0;si<3;si++)Gn+=("0"+Math.floor(255*parseFloat(dn[si])).toString(16)).slice(-2);return Gn},Wi=Ce.__private__.encodeColorString=function(ke){var dn;typeof ke=="string"&&(ke={ch1:ke});var Mn=ke.ch1,Gn=ke.ch2,si=ke.ch3,mi=ke.ch4,Ei=ke.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Mn=="string"&&Mn.charAt(0)!=="#"){var Ui=new f(Mn);if(Ui.ok)Mn=Ui.toHex();else if(!/^\d*\.?\d*$/.test(Mn))throw new Error('Invalid color "'+Mn+'" passed to jsPDF.encodeColorString.')}if(typeof Mn=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Mn)&&(Mn="#"+Mn[1]+Mn[1]+Mn[2]+Mn[2]+Mn[3]+Mn[3]),typeof Mn=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Mn)){var Vi=parseInt(Mn.substr(1),16);Mn=Vi>>16&255,Gn=Vi>>8&255,si=255&Vi}if(Gn===void 0||mi===void 0&&Mn===Gn&&Gn===si)if(typeof Mn=="string")dn=Mn+" "+Ei[0];else switch(ke.precision){case 2:dn=gn(Mn/255)+" "+Ei[0];break;case 3:default:dn=Me(Mn/255)+" "+Ei[0]}else if(mi===void 0||_typeof(mi)==="object"){if(mi&&!isNaN(mi.a)&&mi.a===0)return dn=["1.","1.","1.",Ei[1]].join(" ");if(typeof Mn=="string")dn=[Mn,Gn,si,Ei[1]].join(" ");else switch(ke.precision){case 2:dn=[gn(Mn/255),gn(Gn/255),gn(si/255),Ei[1]].join(" ");break;default:case 3:dn=[Me(Mn/255),Me(Gn/255),Me(si/255),Ei[1]].join(" ")}}else if(typeof Mn=="string")dn=[Mn,Gn,si,mi,Ei[2]].join(" ");else switch(ke.precision){case 2:dn=[gn(Mn),gn(Gn),gn(si),gn(mi),Ei[2]].join(" ");break;case 3:default:dn=[Me(Mn),Me(Gn),Me(si),Me(mi),Ei[2]].join(" ")}return dn},Ki=Ce.__private__.getFilters=function(){return Pe},$i=Ce.__private__.putStream=function(ke){var dn=(ke=ke||{}).data||"",Mn=ke.filters||Ki(),Gn=ke.alreadyAppliedFilters||[],si=ke.addLength1||!1,mi=dn.length,Ei=ke.objectId,Ui=function(Tr){return Tr};if(Ie!==null&&Ei===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");Ie!==null&&(Ui=Nr.encryptor(Ei,0));var Vi={};Mn===!0&&(Mn=["FlateEncode"]);var Qi=ke.additionalKeyValues||[],Zi=(Vi=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(dn,Mn):{data:dn,reverseChain:[]}).reverseChain+(Array.isArray(Gn)?Gn.join(" "):Gn.toString());if(Vi.data.length!==0&&(Qi.push({key:"Length",value:Vi.data.length}),si===!0&&Qi.push({key:"Length1",value:mi})),Zi.length!=0)if(Zi.split("/").length-1==1)Qi.push({key:"Filter",value:Zi});else{Qi.push({key:"Filter",value:"["+Zi+"]"});for(var nr=0;nr<Qi.length;nr+=1)if(Qi[nr].key==="DecodeParms"){for(var pr=[],gr=0;gr<Vi.reverseChain.split("/").length-1;gr+=1)pr.push("null");pr.push(Qi[nr].value),Qi[nr].value="["+pr.join(" ")+"]"}}cn("<<");for(var Ar=0;Ar<Qi.length;Ar++)cn("/"+Qi[Ar].key+" "+Qi[Ar].value);cn(">>"),Vi.data.length!==0&&(cn("stream"),cn(Ui(Vi.data)),cn("endstream"))},ar=Ce.__private__.putPage=function(ke){var dn=ke.number,Mn=ke.data,Gn=ke.objId,si=ke.contentsObjId;xi(Gn,!0),cn("<</Type /Page"),cn("/Parent "+ke.rootDictionaryObjId+" 0 R"),cn("/Resources "+ke.resourceDictionaryObjId+" 0 R"),cn("/MediaBox ["+parseFloat(Ve(ke.mediaBox.bottomLeftX))+" "+parseFloat(Ve(ke.mediaBox.bottomLeftY))+" "+Ve(ke.mediaBox.topRightX)+" "+Ve(ke.mediaBox.topRightY)+"]"),ke.cropBox!==null&&cn("/CropBox ["+Ve(ke.cropBox.bottomLeftX)+" "+Ve(ke.cropBox.bottomLeftY)+" "+Ve(ke.cropBox.topRightX)+" "+Ve(ke.cropBox.topRightY)+"]"),ke.bleedBox!==null&&cn("/BleedBox ["+Ve(ke.bleedBox.bottomLeftX)+" "+Ve(ke.bleedBox.bottomLeftY)+" "+Ve(ke.bleedBox.topRightX)+" "+Ve(ke.bleedBox.topRightY)+"]"),ke.trimBox!==null&&cn("/TrimBox ["+Ve(ke.trimBox.bottomLeftX)+" "+Ve(ke.trimBox.bottomLeftY)+" "+Ve(ke.trimBox.topRightX)+" "+Ve(ke.trimBox.topRightY)+"]"),ke.artBox!==null&&cn("/ArtBox ["+Ve(ke.artBox.bottomLeftX)+" "+Ve(ke.artBox.bottomLeftY)+" "+Ve(ke.artBox.topRightX)+" "+Ve(ke.artBox.topRightY)+"]"),typeof ke.userUnit=="number"&&ke.userUnit!==1&&cn("/UserUnit "+ke.userUnit),Pi.publish("putPage",{objId:Gn,pageContext:vi[dn],pageNumber:dn,page:Mn}),cn("/Contents "+si+" 0 R"),cn(">>"),cn("endobj");var mi=Mn.join(`
`);return sn===Ye.ADVANCED&&(mi+=`
Q`),xi(si,!0),$i({data:mi,filters:Ki(),objectId:si}),cn("endobj"),Gn},rr=Ce.__private__.putPages=function(){var ke,dn,Mn=[];for(ke=1;ke<=bi;ke++)vi[ke].objId=Ci(),vi[ke].contentsObjId=Ci();for(ke=1;ke<=bi;ke++)Mn.push(ar({number:ke,data:On[ke],objId:vi[ke].objId,contentsObjId:vi[ke].contentsObjId,mediaBox:vi[ke].mediaBox,cropBox:vi[ke].cropBox,bleedBox:vi[ke].bleedBox,trimBox:vi[ke].trimBox,artBox:vi[ke].artBox,userUnit:vi[ke].userUnit,rootDictionaryObjId:Ti,resourceDictionaryObjId:Mi}));xi(Ti,!0),cn("<</Type /Pages");var Gn="/Kids [";for(dn=0;dn<bi;dn++)Gn+=Mn[dn]+" 0 R ";cn(Gn+"]"),cn("/Count "+bi),cn(">>"),cn("endobj"),Pi.publish("postPutPages")},kr=function(ke){Pi.publish("putFont",{font:ke,out:cn,newObject:ki,putStream:$i}),ke.isAlreadyPutted!==!0&&(ke.objectNumber=ki(),cn("<<"),cn("/Type /Font"),cn("/BaseFont /"+F(ke.postScriptName)),cn("/Subtype /Type1"),typeof ke.encoding=="string"&&cn("/Encoding /"+ke.encoding),cn("/FirstChar 32"),cn("/LastChar 255"),cn(">>"),cn("endobj"))},Fr=function(){for(var ke in ai)ai.hasOwnProperty(ke)&&(qe===!1||qe===!0&&Ge.hasOwnProperty(ke))&&kr(ai[ke])},Mr=function(ke){ke.objectNumber=ki();var dn=[];dn.push({key:"Type",value:"/XObject"}),dn.push({key:"Subtype",value:"/Form"}),dn.push({key:"BBox",value:"["+[Ve(ke.x),Ve(ke.y),Ve(ke.x+ke.width),Ve(ke.y+ke.height)].join(" ")+"]"}),dn.push({key:"Matrix",value:"["+ke.matrix.toString()+"]"});var Mn=ke.pages[1].join(`
`);$i({data:Mn,additionalKeyValues:dn,objectId:ke.objectNumber}),cn("endobj")},cs=function(){for(var ke in Cn)Cn.hasOwnProperty(ke)&&Mr(Cn[ke])},so=function(ke,dn){var Mn,Gn=[],si=1/(dn-1);for(Mn=0;Mn<1;Mn+=si)Gn.push(Mn);if(Gn.push(1),ke[0].offset!=0){var mi={offset:0,color:ke[0].color};ke.unshift(mi)}if(ke[ke.length-1].offset!=1){var Ei={offset:1,color:ke[ke.length-1].color};ke.push(Ei)}for(var Ui="",Vi=0,Qi=0;Qi<Gn.length;Qi++){for(Mn=Gn[Qi];Mn>ke[Vi+1].offset;)Vi++;var Zi=ke[Vi].offset,nr=(Mn-Zi)/(ke[Vi+1].offset-Zi),pr=ke[Vi].color,gr=ke[Vi+1].color;Ui+=Je(Math.round((1-nr)*pr[0]+nr*gr[0]).toString(16))+Je(Math.round((1-nr)*pr[1]+nr*gr[1]).toString(16))+Je(Math.round((1-nr)*pr[2]+nr*gr[2]).toString(16))}return Ui.trim()},hl=function(ke,dn){dn||(dn=21);var Mn=ki(),Gn=so(ke.colors,dn),si=[];si.push({key:"FunctionType",value:"0"}),si.push({key:"Domain",value:"[0.0 1.0]"}),si.push({key:"Size",value:"["+dn+"]"}),si.push({key:"BitsPerSample",value:"8"}),si.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),si.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$i({data:Gn,additionalKeyValues:si,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Mn}),cn("endobj"),ke.objectNumber=ki(),cn("<< /ShadingType "+ke.type),cn("/ColorSpace /DeviceRGB");var mi="/Coords ["+Ve(parseFloat(ke.coords[0]))+" "+Ve(parseFloat(ke.coords[1]))+" ";ke.type===2?mi+=Ve(parseFloat(ke.coords[2]))+" "+Ve(parseFloat(ke.coords[3])):mi+=Ve(parseFloat(ke.coords[2]))+" "+Ve(parseFloat(ke.coords[3]))+" "+Ve(parseFloat(ke.coords[4]))+" "+Ve(parseFloat(ke.coords[5])),cn(mi+="]"),ke.matrix&&cn("/Matrix ["+ke.matrix.toString()+"]"),cn("/Function "+Mn+" 0 R"),cn("/Extend [true true]"),cn(">>"),cn("endobj")},ul=function(ke,dn){var Mn=Ci(),Gn=ki();dn.push({resourcesOid:Mn,objectOid:Gn}),ke.objectNumber=Gn;var si=[];si.push({key:"Type",value:"/Pattern"}),si.push({key:"PatternType",value:"1"}),si.push({key:"PaintType",value:"1"}),si.push({key:"TilingType",value:"1"}),si.push({key:"BBox",value:"["+ke.boundingBox.map(Ve).join(" ")+"]"}),si.push({key:"XStep",value:Ve(ke.xStep)}),si.push({key:"YStep",value:Ve(ke.yStep)}),si.push({key:"Resources",value:Mn+" 0 R"}),ke.matrix&&si.push({key:"Matrix",value:"["+ke.matrix.toString()+"]"}),$i({data:ke.stream,additionalKeyValues:si,objectId:ke.objectNumber}),cn("endobj")},Vs=function(ke){var dn;for(dn in wi)wi.hasOwnProperty(dn)&&(wi[dn]instanceof B?hl(wi[dn]):wi[dn]instanceof M&&ul(wi[dn],ke))},ao=function(ke){for(var dn in ke.objectNumber=ki(),cn("<<"),ke)switch(dn){case"opacity":cn("/ca "+gn(ke[dn]));break;case"stroke-opacity":cn("/CA "+gn(ke[dn]))}cn(">>"),cn("endobj")},dl=function(){var ke;for(ke in Bi)Bi.hasOwnProperty(ke)&&ao(Bi[ke])},Aa=function(){for(var ke in cn("/XObject <<"),Cn)Cn.hasOwnProperty(ke)&&Cn[ke].objectNumber>=0&&cn("/"+ke+" "+Cn[ke].objectNumber+" 0 R");Pi.publish("putXobjectDict"),cn(">>")},pl=function(){Nr.oid=ki(),cn("<<"),cn("/Filter /Standard"),cn("/V "+Nr.v),cn("/R "+Nr.r),cn("/U <"+Nr.toHexString(Nr.U)+">"),cn("/O <"+Nr.toHexString(Nr.O)+">"),cn("/P "+Nr.P),cn(">>"),cn("endobj")},oo=function(){for(var ke in cn("/Font <<"),ai)ai.hasOwnProperty(ke)&&(qe===!1||qe===!0&&Ge.hasOwnProperty(ke))&&cn("/"+ke+" "+ai[ke].objectNumber+" 0 R");cn(">>")},gl=function(){if(Object.keys(wi).length>0){for(var ke in cn("/Shading <<"),wi)wi.hasOwnProperty(ke)&&wi[ke]instanceof B&&wi[ke].objectNumber>=0&&cn("/"+ke+" "+wi[ke].objectNumber+" 0 R");Pi.publish("putShadingPatternDict"),cn(">>")}},Gs=function(ke){if(Object.keys(wi).length>0){for(var dn in cn("/Pattern <<"),wi)wi.hasOwnProperty(dn)&&wi[dn]instanceof Ce.TilingPattern&&wi[dn].objectNumber>=0&&wi[dn].objectNumber<ke&&cn("/"+dn+" "+wi[dn].objectNumber+" 0 R");Pi.publish("putTilingPatternDict"),cn(">>")}},ml=function(){if(Object.keys(Bi).length>0){var ke;for(ke in cn("/ExtGState <<"),Bi)Bi.hasOwnProperty(ke)&&Bi[ke].objectNumber>=0&&cn("/"+ke+" "+Bi[ke].objectNumber+" 0 R");Pi.publish("putGStateDict"),cn(">>")}},br=function(ke){xi(ke.resourcesOid,!0),cn("<<"),cn("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),oo(),gl(),Gs(ke.objectOid),ml(),Aa(),cn(">>"),cn("endobj")},lo=function(){var ke=[];Fr(),dl(),cs(),Vs(ke),Pi.publish("putResources"),ke.forEach(br),br({resourcesOid:Mi,objectOid:Number.MAX_SAFE_INTEGER}),Pi.publish("postPutResources")},co=function(){Pi.publish("putAdditionalObjects");for(var ke=0;ke<Fn.length;ke++){var dn=Fn[ke];xi(dn.objId,!0),cn(dn.content),cn("endobj")}Pi.publish("postPutAdditionalObjects")},ho=function(ke){Xn[ke.fontName]=Xn[ke.fontName]||{},Xn[ke.fontName][ke.fontStyle]=ke.id},wa=function(ke,dn,Mn,Gn,si){var mi={id:"F"+(Object.keys(ai).length+1).toString(10),postScriptName:ke,fontName:dn,fontStyle:Mn,encoding:Gn,isStandardFont:si||!1,metadata:{}};return Pi.publish("addFont",{font:mi,instance:this}),ai[mi.id]=mi,ho(mi),mi.id},bl=function(ke){for(var dn=0,Mn=vn.length;dn<Mn;dn++){var Gn=wa.call(this,ke[dn][0],ke[dn][1],ke[dn][2],vn[dn][3],!0);qe===!1&&(Ge[Gn]=!0);var si=ke[dn][0].split("-");ho({id:Gn,fontName:si[0],fontStyle:si[1]||""})}Pi.publish("addFonts",{fonts:ai,dictionary:Xn})},ts=function(ke){return ke.foo=function(){try{return ke.apply(this,arguments)}catch(Gn){var dn=Gn.stack||"";~dn.indexOf(" at ")&&(dn=dn.split(" at ")[1]);var Mn="Error in function "+dn.split(`
`)[0].split("<")[0]+": "+Gn.message;if(!n.console)throw new Error(Mn);n.console.error(Mn,Gn),n.alert&&alert(Mn)}},ke.foo.bar=ke,ke.foo},Xs=function(ke,dn){var Mn,Gn,si,mi,Ei,Ui,Vi,Qi,Zi;if(si=(dn=dn||{}).sourceEncoding||"Unicode",Ei=dn.outputEncoding,(dn.autoencode||Ei)&&ai[Ri].metadata&&ai[Ri].metadata[si]&&ai[Ri].metadata[si].encoding&&(mi=ai[Ri].metadata[si].encoding,!Ei&&ai[Ri].encoding&&(Ei=ai[Ri].encoding),!Ei&&mi.codePages&&(Ei=mi.codePages[0]),typeof Ei=="string"&&(Ei=mi[Ei]),Ei)){for(Vi=!1,Ui=[],Mn=0,Gn=ke.length;Mn<Gn;Mn++)(Qi=Ei[ke.charCodeAt(Mn)])?Ui.push(String.fromCharCode(Qi)):Ui.push(ke[Mn]),Ui[Mn].charCodeAt(0)>>8&&(Vi=!0);ke=Ui.join("")}for(Mn=ke.length;Vi===void 0&&Mn!==0;)ke.charCodeAt(Mn-1)>>8&&(Vi=!0),Mn--;if(!Vi)return ke;for(Ui=dn.noBOM?[]:[254,255],Mn=0,Gn=ke.length;Mn<Gn;Mn++){if((Zi=(Qi=ke.charCodeAt(Mn))>>8)>>8)throw new Error("Character at position "+Mn+" of string '"+ke+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ui.push(Zi),Ui.push(Qi-(Zi<<8))}return String.fromCharCode.apply(void 0,Ui)},Or=Ce.__private__.pdfEscape=Ce.pdfEscape=function(ke,dn){return Xs(ke,dn).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Sa=Ce.__private__.beginPage=function(ke){On[++bi]=[],vi[bi]={objId:0,contentsObjId:0,userUnit:Number(Te),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ke[0]),topRightY:Number(ke[1])}},fo(bi),Dn(On[Fe])},uo=function(ke,dn){var Mn,Gn,si;switch(St=dn||St,typeof ke=="string"&&(Mn=Be(ke.toLowerCase()),Array.isArray(Mn)&&(Gn=Mn[0],si=Mn[1])),Array.isArray(ke)&&(Gn=ke[0]*hi,si=ke[1]*hi),isNaN(Gn)&&(Gn=_e[0],si=_e[1]),(Gn>14400||si>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Gn=Math.min(14400,Gn),si=Math.min(14400,si)),_e=[Gn,si],St.substr(0,1)){case"l":si>Gn&&(_e=[si,Gn]);break;case"p":Gn>si&&(_e=[si,Gn])}Sa(_e),yo(Ea),cn(es),ka!==0&&cn(ka+" J"),Na!==0&&cn(Na+" j"),Pi.publish("addPage",{pageNumber:bi})},vl=function(ke){ke>0&&ke<=bi&&(On.splice(ke,1),vi.splice(ke,1),bi--,Fe>bi&&(Fe=bi),this.setPage(Fe))},fo=function(ke){ke>0&&ke<=bi&&(Fe=ke)},yl=Ce.__private__.getNumberOfPages=Ce.getNumberOfPages=function(){return On.length-1},po=function(ke,dn,Mn){var Gn,si=void 0;return Mn=Mn||{},ke=ke!==void 0?ke:ai[Ri].fontName,dn=dn!==void 0?dn:ai[Ri].fontStyle,Gn=ke.toLowerCase(),Xn[Gn]!==void 0&&Xn[Gn][dn]!==void 0?si=Xn[Gn][dn]:Xn[ke]!==void 0&&Xn[ke][dn]!==void 0?si=Xn[ke][dn]:Mn.disableWarning===!1&&a.warn("Unable to look up font label for font '"+ke+"', '"+dn+"'. Refer to getFontList() for available fonts."),si||Mn.noFallback||(si=Xn.times[dn])==null&&(si=Xn.times.normal),si},Al=Ce.__private__.putInfo=function(){var ke=ki(),dn=function(Gn){return Gn};for(var Mn in Ie!==null&&(dn=Nr.encryptor(ke,0)),cn("<<"),cn("/Producer ("+Or(dn("jsPDF "+E.version))+")"),Si)Si.hasOwnProperty(Mn)&&Si[Mn]&&cn("/"+Mn.substr(0,1).toUpperCase()+Mn.substr(1)+" ("+Or(dn(Si[Mn]))+")");cn("/CreationDate ("+Or(dn(An))+")"),cn(">>"),cn("endobj")},xa=Ce.__private__.putCatalog=function(ke){var dn=(ke=ke||{}).rootDictionaryObjId||Ti;switch(ki(),cn("<<"),cn("/Type /Catalog"),cn("/Pages "+dn+" 0 R"),Rn||(Rn="fullwidth"),Rn){case"fullwidth":cn("/OpenAction [3 0 R /FitH null]");break;case"fullheight":cn("/OpenAction [3 0 R /FitV null]");break;case"fullpage":cn("/OpenAction [3 0 R /Fit]");break;case"original":cn("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Mn=""+Rn;Mn.substr(Mn.length-1)==="%"&&(Rn=parseInt(Rn)/100),typeof Rn=="number"&&cn("/OpenAction [3 0 R /XYZ null null "+gn(Rn)+"]")}switch(fi||(fi="continuous"),fi){case"continuous":cn("/PageLayout /OneColumn");break;case"single":cn("/PageLayout /SinglePage");break;case"two":case"twoleft":cn("/PageLayout /TwoColumnLeft");break;case"tworight":cn("/PageLayout /TwoColumnRight")}ii&&cn("/PageMode /"+ii),Pi.publish("putCatalog"),cn(">>"),cn("endobj")},_l=Ce.__private__.putTrailer=function(){cn("trailer"),cn("<<"),cn("/Size "+(nn+1)),cn("/Root "+nn+" 0 R"),cn("/Info "+(nn-1)+" 0 R"),Ie!==null&&cn("/Encrypt "+Nr.oid+" 0 R"),cn("/ID [ <"+xn+"> <"+xn+"> ]"),cn(">>")},wl=Ce.__private__.putHeader=function(){cn("%PDF-"+Xe),cn("%ºß¬à")},Sl=Ce.__private__.putXRef=function(){var ke="0000000000";cn("xref"),cn("0 "+(nn+1)),cn("0000000000 65535 f ");for(var dn=1;dn<=nn;dn++)typeof an[dn]=="function"?cn((ke+an[dn]()).slice(-10)+" 00000 n "):an[dn]!==void 0?cn((ke+an[dn]).slice(-10)+" 00000 n "):cn("0000000000 00000 n ")},hs=Ce.__private__.buildDocument=function(){ni(),Dn(on),Pi.publish("buildDocument"),wl(),rr(),co(),lo(),Ie!==null&&pl(),Al(),xa();var ke=yn;return Sl(),_l(),cn("startxref"),cn(""+ke),cn("%%EOF"),Dn(On[Fe]),on.join(`
`)},Ys=Ce.__private__.getBlob=function(ke){return new Blob([fn(ke)],{type:"application/pdf"})},Ks=Ce.output=Ce.__private__.output=ts(function(ke,dn){switch(typeof(dn=dn||{})=="string"?dn={filename:dn}:dn.filename=dn.filename||"generated.pdf",ke){case void 0:return hs();case"save":Ce.save(dn.filename);break;case"arraybuffer":return fn(hs());case"blob":return Ys(hs());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(Ys(hs()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Mn="",Gn=hs();try{Mn=h(Gn)}catch{Mn=h(unescape(encodeURIComponent(Gn)))}return"data:application/pdf;filename="+dn.filename+";base64,"+Mn;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var si="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",mi=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';dn.pdfObjectUrl&&(si=dn.pdfObjectUrl,mi="");var Ei='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+si+'"'+mi+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(dn)+");<\/script></body></html>",Ui=n.open();return Ui!==null&&Ui.document.write(Ei),Ui}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Vi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(dn.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+dn.filename+'" width="500px" height="400px" /></body></html>',Qi=n.open();if(Qi!==null){Qi.document.write(Vi);var Zi=this;Qi.document.documentElement.querySelector("#pdfViewer").onload=function(){Qi.document.title=dn.filename,Qi.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Zi.output("bloburl"))}}return Qi}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var nr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",dn)+'"></iframe></body></html>',pr=n.open();if(pr!==null&&(pr.document.write(nr),pr.document.title=dn.filename),pr||typeof safari>"u")return pr;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",dn);default:return null}}),go=function(ke){return Array.isArray(Ni)===!0&&Ni.indexOf(ke)>-1};switch(e){case"pt":hi=1;break;case"mm":hi=72/25.4;break;case"cm":hi=72/2.54;break;case"in":hi=72;break;case"px":hi=go("px_scaling")==1?.75:96/72;break;case"pc":case"em":hi=12;break;case"ex":hi=6;break;default:if(typeof e!="number")throw new Error("Invalid unit: "+e);hi=e}var Nr=null;In(),En();var xl=function(ke){return Ie!==null?Nr.encryptor(ke,0):function(dn){return dn}},mo=Ce.__private__.getPageInfo=Ce.getPageInfo=function(ke){if(isNaN(ke)||ke%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:vi[ke].objId,pageNumber:ke,pageContext:vi[ke]}},Ji=Ce.__private__.getPageInfoByObjId=function(ke){if(isNaN(ke)||ke%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var dn in vi)if(vi[dn].objId===ke)break;return mo(dn)},Ll=Ce.__private__.getCurrentPageInfo=Ce.getCurrentPageInfo=function(){return{objId:vi[Fe].objId,pageNumber:Fe,pageContext:vi[Fe]}};Ce.addPage=function(){return uo.apply(this,arguments),this},Ce.setPage=function(){return fo.apply(this,arguments),Dn.call(this,On[Fe]),this},Ce.insertPage=function(ke){return this.addPage(),this.movePage(Fe,ke),this},Ce.movePage=function(ke,dn){var Mn,Gn;if(ke>dn){Mn=On[ke],Gn=vi[ke];for(var si=ke;si>dn;si--)On[si]=On[si-1],vi[si]=vi[si-1];On[dn]=Mn,vi[dn]=Gn,this.setPage(dn)}else if(ke<dn){Mn=On[ke],Gn=vi[ke];for(var mi=ke;mi<dn;mi++)On[mi]=On[mi+1],vi[mi]=vi[mi+1];On[dn]=Mn,vi[dn]=Gn,this.setPage(dn)}return this},Ce.deletePage=function(){return vl.apply(this,arguments),this},Ce.__private__.text=Ce.text=function(ke,dn,Mn,Gn,si){var mi,Ei,Ui,Vi,Qi,Zi,nr,pr,gr,Ar=(Gn=Gn||{}).scope||this;if(typeof ke=="number"&&typeof dn=="number"&&(typeof Mn=="string"||Array.isArray(Mn))){var Tr=Mn;Mn=dn,dn=ke,ke=Tr}if(arguments[3]instanceof Hn?(ze("The transform parameter of text() with a Matrix value"),gr=si):(Ui=arguments[4],Vi=arguments[5],_typeof(nr=arguments[3])==="object"&&nr!==null||(typeof Ui=="string"&&(Vi=Ui,Ui=null),typeof nr=="string"&&(Vi=nr,nr=null),typeof nr=="number"&&(Ui=nr,nr=null),Gn={flags:nr,angle:Ui,align:Vi})),isNaN(dn)||isNaN(Mn)||ke==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ke.length===0)return Ar;var xr="",ns=!1,zr=typeof Gn.lineHeightFactor=="number"?Gn.lineHeightFactor:Rs,os=Ar.internal.scaleFactor;function Lo(dr){return dr=dr.split("	").join(Array(Gn.TabLen||9).join(" ")),Or(dr,nr)}function Ra(dr){for(var fr,yr=dr.concat(),Sr=[],gs=yr.length;gs--;)typeof(fr=yr.shift())=="string"?Sr.push(fr):Array.isArray(dr)&&(fr.length===1||fr[1]===void 0&&fr[2]===void 0)?Sr.push(fr[0]):Sr.push([fr[0],fr[1],fr[2]]);return Sr}function Da(dr,fr){var yr;if(typeof dr=="string")yr=fr(dr)[0];else if(Array.isArray(dr)){for(var Sr,gs,Wa=dr.concat(),ha=[],No=Wa.length;No--;)typeof(Sr=Wa.shift())=="string"?ha.push(fr(Sr)[0]):Array.isArray(Sr)&&typeof Sr[0]=="string"&&(gs=fr(Sr[0],Sr[1],Sr[2]),ha.push([gs[0],gs[1],gs[2]]));yr=ha}return yr}var ea=!1,Oa=!0;if(typeof ke=="string")ea=!0;else if(Array.isArray(ke)){var ja=ke.concat();Ei=[];for(var na,Er=ja.length;Er--;)(typeof(na=ja.shift())!="string"||Array.isArray(na)&&typeof na[0]!="string")&&(Oa=!1);ea=Oa}if(ea===!1)throw new Error('Type of text must be string or Array. "'+ke+'" is not recognized.');typeof ke=="string"&&(ke=ke.match(/[\r?\n]/)?ke.split(/\r\n|\r|\n/g):[ke]);var ia=kn/Ar.internal.scaleFactor,ra=ia*(zr-1);switch(Gn.baseline){case"bottom":Mn-=ra;break;case"top":Mn+=ia-ra;break;case"hanging":Mn+=ia-2*ra;break;case"middle":Mn+=ia/2-ra}if((Zi=Gn.maxWidth||0)>0&&(typeof ke=="string"?ke=Ar.splitTextToSize(ke,Zi):Object.prototype.toString.call(ke)==="[object Array]"&&(ke=ke.reduce(function(dr,fr){return dr.concat(Ar.splitTextToSize(fr,Zi))},[]))),mi={text:ke,x:dn,y:Mn,options:Gn,mutex:{pdfEscape:Or,activeFontKey:Ri,fonts:ai,activeFontSize:kn}},Pi.publish("preProcessText",mi),ke=mi.text,Ui=(Gn=mi.options).angle,!(gr instanceof Hn)&&Ui&&typeof Ui=="number"){Ui*=Math.PI/180,Gn.rotationDirection===0&&(Ui=-Ui),sn===Ye.ADVANCED&&(Ui=-Ui);var sa=Math.cos(Ui),Ba=Math.sin(Ui);gr=new Hn(sa,Ba,-Ba,sa,0,0)}else Ui&&Ui instanceof Hn&&(gr=Ui);sn!==Ye.ADVANCED||gr||(gr=ui),(Qi=Gn.charSpace||Zs)!==void 0&&(xr+=Ve(Ue(Qi))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(pr=Gn.horizontalScale)!==void 0&&(xr+=Ve(100*pr)+` Tz
`),Gn.lang;var jr=-1,Rl=Gn.renderingMode!==void 0?Gn.renderingMode:Gn.stroke,qa=Ar.internal.getCurrentPageInfo().pageContext;switch(Rl){case 0:case!1:case"fill":jr=0;break;case 1:case!0:case"stroke":jr=1;break;case 2:case"fillThenStroke":jr=2;break;case 3:case"invisible":jr=3;break;case 4:case"fillAndAddForClipping":jr=4;break;case 5:case"strokeAndAddPathForClipping":jr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":jr=6;break;case 7:case"addToPathForClipping":jr=7}var Po=qa.usedRenderingMode!==void 0?qa.usedRenderingMode:-1;jr!==-1?xr+=jr+` Tr
`:Po!==-1&&(xr+=`0 Tr
`),jr!==-1&&(qa.usedRenderingMode=jr),Vi=Gn.align||"left";var Gr,aa=kn*zr,Eo=Ar.internal.pageSize.getWidth(),Co=ai[Ri];Qi=Gn.charSpace||Zs,Zi=Gn.maxWidth||0,nr=Object.assign({autoencode:!0,noBOM:!0},Gn.flags);var Ss=[],js=function(dr){return Ar.getStringUnitWidth(dr,{font:Co,charSpace:Qi,fontSize:kn,doKerning:!1})*kn/os};if(Object.prototype.toString.call(ke)==="[object Array]"){var Br;Ei=Ra(ke),Vi!=="left"&&(Gr=Ei.map(js));var Ir,xs=0;if(Vi==="right"){dn-=Gr[0],ke=[],Er=Ei.length;for(var ds=0;ds<Er;ds++)ds===0?(Ir=as(dn),Br=us(Mn)):(Ir=Ue(xs-Gr[ds]),Br=-aa),ke.push([Ei[ds],Ir,Br]),xs=Gr[ds]}else if(Vi==="center"){dn-=Gr[0]/2,ke=[],Er=Ei.length;for(var fs=0;fs<Er;fs++)fs===0?(Ir=as(dn),Br=us(Mn)):(Ir=Ue((xs-Gr[fs])/2),Br=-aa),ke.push([Ei[fs],Ir,Br]),xs=Gr[fs]}else if(Vi==="left"){ke=[],Er=Ei.length;for(var oa=0;oa<Er;oa++)ke.push(Ei[oa])}else if(Vi==="justify"&&Co.encoding==="Identity-H"){ke=[],Er=Ei.length,Zi=Zi!==0?Zi:Eo;for(var ps=0,vr=0;vr<Er;vr++)if(Br=vr===0?us(Mn):-aa,Ir=vr===0?as(dn):ps,vr<Er-1){var Ua=Ue((Zi-Gr[vr])/(Ei[vr].split(" ").length-1)),Rr=Ei[vr].split(" ");ke.push([Rr[0]+" ",Ir,Br]),ps=0;for(var Xr=1;Xr<Rr.length;Xr++){var la=(js(Rr[Xr-1]+" "+Rr[Xr])-js(Rr[Xr]))*os+Ua;Xr==Rr.length-1?ke.push([Rr[Xr],la,0]):ke.push([Rr[Xr]+" ",la,0]),ps-=la}}else ke.push([Ei[vr],Ir,Br]);ke.push(["",ps,0])}else{if(Vi!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ke=[],Er=Ei.length,Zi=Zi!==0?Zi:Eo,vr=0;vr<Er;vr++)Br=vr===0?us(Mn):-aa,Ir=vr===0?as(dn):0,vr<Er-1?Ss.push(Ve(Ue((Zi-Gr[vr])/(Ei[vr].split(" ").length-1)))):Ss.push(0),ke.push([Ei[vr],Ir,Br])}}var ko=typeof Gn.R2L=="boolean"?Gn.R2L:Qn;ko===!0&&(ke=Da(ke,function(dr,fr,yr){return[dr.split("").reverse().join(""),fr,yr]})),mi={text:ke,x:dn,y:Mn,options:Gn,mutex:{pdfEscape:Or,activeFontKey:Ri,fonts:ai,activeFontSize:kn}},Pi.publish("postProcessText",mi),ke=mi.text,ns=mi.mutex.isHex||!1;var za=ai[Ri].encoding;za!=="WinAnsiEncoding"&&za!=="StandardEncoding"||(ke=Da(ke,function(dr,fr,yr){return[Lo(dr),fr,yr]})),Ei=Ra(ke),ke=[];for(var Bs,qs,Ls,Us=0,ca=1,zs=Array.isArray(Ei[0])?ca:Us,Ps="",Ha=function(dr,fr,yr){var Sr="";return yr instanceof Hn?(yr=typeof Gn.angle=="number"?ri(yr,new Hn(1,0,0,1,dr,fr)):ri(new Hn(1,0,0,1,dr,fr),yr),sn===Ye.ADVANCED&&(yr=ri(new Hn(1,0,0,-1,0,0),yr)),Sr=yr.join(" ")+` Tm
`):Sr=Ve(dr)+" "+Ve(fr)+` Td
`,Sr},Yr=0;Yr<Ei.length;Yr++){switch(Ps="",zs){case ca:Ls=(ns?"<":"(")+Ei[Yr][0]+(ns?">":")"),Bs=parseFloat(Ei[Yr][1]),qs=parseFloat(Ei[Yr][2]);break;case Us:Ls=(ns?"<":"(")+Ei[Yr]+(ns?">":")"),Bs=as(dn),qs=us(Mn)}Ss!==void 0&&Ss[Yr]!==void 0&&(Ps=Ss[Yr]+` Tw
`),Yr===0?ke.push(Ps+Ha(Bs,qs,gr)+Ls):zs===Us?ke.push(Ps+Ls):zs===ca&&ke.push(Ps+Ha(Bs,qs,gr)+Ls)}ke=zs===Us?ke.join(` Tj
T* `):ke.join(` Tj
`),ke+=` Tj
`;var Kr=`BT
/`;return Kr+=Ri+" "+kn+` Tf
`,Kr+=Ve(kn*zr)+` TL
`,Kr+=Ds+`
`,Kr+=xr,Kr+=ke,cn(Kr+="ET"),Ge[Ri]=!0,Ar};var Pl=Ce.__private__.clip=Ce.clip=function(ke){return cn(ke==="evenodd"?"W*":"W"),this};Ce.clipEvenOdd=function(){return Pl("evenodd")},Ce.__private__.discardPath=Ce.discardPath=function(){return cn("n"),this};var ss=Ce.__private__.isValidStyle=function(ke){var dn=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ke)!==-1&&(dn=!0),dn};Ce.__private__.setDefaultPathOperation=Ce.setDefaultPathOperation=function(ke){return ss(ke)&&(Re=ke),this};var bo=Ce.__private__.getStyle=Ce.getStyle=function(ke){var dn=Re;switch(ke){case"D":case"S":dn="S";break;case"F":dn="f";break;case"FD":case"DF":dn="B";break;case"f":case"f*":case"B":case"B*":dn=ke}return dn},vo=Ce.close=function(){return cn("h"),this};Ce.stroke=function(){return cn("S"),this},Ce.fill=function(ke){return Js("f",ke),this},Ce.fillEvenOdd=function(ke){return Js("f*",ke),this},Ce.fillStroke=function(ke){return Js("B",ke),this},Ce.fillStrokeEvenOdd=function(ke){return Js("B*",ke),this};var Js=function(ke,dn){_typeof(dn)==="object"?Cl(dn,ke):cn(ke)},La=function(ke){ke===null||sn===Ye.ADVANCED&&ke===void 0||(ke=bo(ke),cn(ke))};function El(ke,dn,Mn,Gn,si){var mi=new M(dn||this.boundingBox,Mn||this.xStep,Gn||this.yStep,this.gState,si||this.matrix);mi.stream=this.stream;var Ei=ke+"$$"+this.cloneIndex+++"$$";return pi(Ei,mi),mi}var Cl=function(ke,dn){var Mn=Gi[ke.key],Gn=wi[Mn];if(Gn instanceof B)cn("q"),cn(kl(dn)),Gn.gState&&Ce.setGState(Gn.gState),cn(ke.matrix.toString()+" cm"),cn("/"+Mn+" sh"),cn("Q");else if(Gn instanceof M){var si=new Hn(1,0,0,-1,0,ws());ke.matrix&&(si=si.multiply(ke.matrix||ui),Mn=El.call(Gn,ke.key,ke.boundingBox,ke.xStep,ke.yStep,si).id),cn("q"),cn("/Pattern cs"),cn("/"+Mn+" scn"),Gn.gState&&Ce.setGState(Gn.gState),cn(dn),cn("Q")}},kl=function(ke){switch(ke){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Pa=Ce.moveTo=function(ke,dn){return cn(Ve(Ue(ke))+" "+Ve(pn(dn))+" m"),this},Is=Ce.lineTo=function(ke,dn){return cn(Ve(Ue(ke))+" "+Ve(pn(dn))+" l"),this},As=Ce.curveTo=function(ke,dn,Mn,Gn,si,mi){return cn([Ve(Ue(ke)),Ve(pn(dn)),Ve(Ue(Mn)),Ve(pn(Gn)),Ve(Ue(si)),Ve(pn(mi)),"c"].join(" ")),this};Ce.__private__.line=Ce.line=function(ke,dn,Mn,Gn,si){if(isNaN(ke)||isNaN(dn)||isNaN(Mn)||isNaN(Gn)||!ss(si))throw new Error("Invalid arguments passed to jsPDF.line");return sn===Ye.COMPAT?this.lines([[Mn-ke,Gn-dn]],ke,dn,[1,1],si||"S"):this.lines([[Mn-ke,Gn-dn]],ke,dn,[1,1]).stroke()},Ce.__private__.lines=Ce.lines=function(ke,dn,Mn,Gn,si,mi){var Ei,Ui,Vi,Qi,Zi,nr,pr,gr,Ar,Tr,xr,ns;if(typeof ke=="number"&&(ns=Mn,Mn=dn,dn=ke,ke=ns),Gn=Gn||[1,1],mi=mi||!1,isNaN(dn)||isNaN(Mn)||!Array.isArray(ke)||!Array.isArray(Gn)||!ss(si)||typeof mi!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Pa(dn,Mn),Ei=Gn[0],Ui=Gn[1],Qi=ke.length,Tr=dn,xr=Mn,Vi=0;Vi<Qi;Vi++)(Zi=ke[Vi]).length===2?(Tr=Zi[0]*Ei+Tr,xr=Zi[1]*Ui+xr,Is(Tr,xr)):(nr=Zi[0]*Ei+Tr,pr=Zi[1]*Ui+xr,gr=Zi[2]*Ei+Tr,Ar=Zi[3]*Ui+xr,Tr=Zi[4]*Ei+Tr,xr=Zi[5]*Ui+xr,As(nr,pr,gr,Ar,Tr,xr));return mi&&vo(),La(si),this},Ce.path=function(ke){for(var dn=0;dn<ke.length;dn++){var Mn=ke[dn],Gn=Mn.c;switch(Mn.op){case"m":Pa(Gn[0],Gn[1]);break;case"l":Is(Gn[0],Gn[1]);break;case"c":As.apply(this,Gn);break;case"h":vo()}}return this},Ce.__private__.rect=Ce.rect=function(ke,dn,Mn,Gn,si){if(isNaN(ke)||isNaN(dn)||isNaN(Mn)||isNaN(Gn)||!ss(si))throw new Error("Invalid arguments passed to jsPDF.rect");return sn===Ye.COMPAT&&(Gn=-Gn),cn([Ve(Ue(ke)),Ve(pn(dn)),Ve(Ue(Mn)),Ve(Ue(Gn)),"re"].join(" ")),La(si),this},Ce.__private__.triangle=Ce.triangle=function(ke,dn,Mn,Gn,si,mi,Ei){if(isNaN(ke)||isNaN(dn)||isNaN(Mn)||isNaN(Gn)||isNaN(si)||isNaN(mi)||!ss(Ei))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Mn-ke,Gn-dn],[si-Mn,mi-Gn],[ke-si,dn-mi]],ke,dn,[1,1],Ei,!0),this},Ce.__private__.roundedRect=Ce.roundedRect=function(ke,dn,Mn,Gn,si,mi,Ei){if(isNaN(ke)||isNaN(dn)||isNaN(Mn)||isNaN(Gn)||isNaN(si)||isNaN(mi)||!ss(Ei))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ui=4/3*(Math.SQRT2-1);return si=Math.min(si,.5*Mn),mi=Math.min(mi,.5*Gn),this.lines([[Mn-2*si,0],[si*Ui,0,si,mi-mi*Ui,si,mi],[0,Gn-2*mi],[0,mi*Ui,-si*Ui,mi,-si,mi],[2*si-Mn,0],[-si*Ui,0,-si,-mi*Ui,-si,-mi],[0,2*mi-Gn],[0,-mi*Ui,si*Ui,-mi,si,-mi]],ke+si,dn,[1,1],Ei,!0),this},Ce.__private__.ellipse=Ce.ellipse=function(ke,dn,Mn,Gn,si){if(isNaN(ke)||isNaN(dn)||isNaN(Mn)||isNaN(Gn)||!ss(si))throw new Error("Invalid arguments passed to jsPDF.ellipse");var mi=4/3*(Math.SQRT2-1)*Mn,Ei=4/3*(Math.SQRT2-1)*Gn;return Pa(ke+Mn,dn),As(ke+Mn,dn-Ei,ke+mi,dn-Gn,ke,dn-Gn),As(ke-mi,dn-Gn,ke-Mn,dn-Ei,ke-Mn,dn),As(ke-Mn,dn+Ei,ke-mi,dn+Gn,ke,dn+Gn),As(ke+mi,dn+Gn,ke+Mn,dn+Ei,ke+Mn,dn),La(si),this},Ce.__private__.circle=Ce.circle=function(ke,dn,Mn,Gn){if(isNaN(ke)||isNaN(dn)||isNaN(Mn)||!ss(Gn))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ke,dn,Mn,Mn,Gn)},Ce.setFont=function(ke,dn,Mn){return Mn&&(dn=tn(dn,Mn)),Ri=po(ke,dn,{disableWarning:!1}),this};var Nl=Ce.__private__.getFont=Ce.getFont=function(){return ai[po.apply(Ce,arguments)]};Ce.__private__.getFontList=Ce.getFontList=function(){var ke,dn,Mn={};for(ke in Xn)if(Xn.hasOwnProperty(ke))for(dn in Mn[ke]=[],Xn[ke])Xn[ke].hasOwnProperty(dn)&&Mn[ke].push(dn);return Mn},Ce.addFont=function(ke,dn,Mn,Gn,si){var mi=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&mi.indexOf(arguments[3])!==-1?si=arguments[3]:arguments[3]&&mi.indexOf(arguments[3])==-1&&(Mn=tn(Mn,Gn)),si=si||"Identity-H",wa.call(this,ke,dn,Mn,si)};var Rs,Ea=Ae.lineWidth||.200025,$s=Ce.__private__.getLineWidth=Ce.getLineWidth=function(){return Ea},yo=Ce.__private__.setLineWidth=Ce.setLineWidth=function(ke){return Ea=ke,cn(Ve(Ue(ke))+" w"),this};Ce.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(ke,dn){if(ke=ke||[],dn=dn||0,isNaN(dn)||!Array.isArray(ke))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ke=ke.map(function(Mn){return Ve(Ue(Mn))}).join(" "),dn=Ve(Ue(dn)),cn("["+ke+"] "+dn+" d"),this};var Ao=Ce.__private__.getLineHeight=Ce.getLineHeight=function(){return kn*Rs};Ce.__private__.getLineHeight=Ce.getLineHeight=function(){return kn*Rs};var _o=Ce.__private__.setLineHeightFactor=Ce.setLineHeightFactor=function(ke){return typeof(ke=ke||1.15)=="number"&&(Rs=ke),this},wo=Ce.__private__.getLineHeightFactor=Ce.getLineHeightFactor=function(){return Rs};_o(Ae.lineHeight);var as=Ce.__private__.getHorizontalCoordinate=function(ke){return Ue(ke)},us=Ce.__private__.getVerticalCoordinate=function(ke){return sn===Ye.ADVANCED?ke:vi[Fe].mediaBox.topRightY-vi[Fe].mediaBox.bottomLeftY-Ue(ke)},Tl=Ce.__private__.getHorizontalCoordinateString=Ce.getHorizontalCoordinateString=function(ke){return Ve(as(ke))},_s=Ce.__private__.getVerticalCoordinateString=Ce.getVerticalCoordinateString=function(ke){return Ve(us(ke))},es=Ae.strokeColor||"0 G";Ce.__private__.getStrokeColor=Ce.getDrawColor=function(){return qi(es)},Ce.__private__.setStrokeColor=Ce.setDrawColor=function(ke,dn,Mn,Gn){return es=Wi({ch1:ke,ch2:dn,ch3:Mn,ch4:Gn,pdfColorType:"draw",precision:2}),cn(es),this};var Ca=Ae.fillColor||"0 g";Ce.__private__.getFillColor=Ce.getFillColor=function(){return qi(Ca)},Ce.__private__.setFillColor=Ce.setFillColor=function(ke,dn,Mn,Gn){return Ca=Wi({ch1:ke,ch2:dn,ch3:Mn,ch4:Gn,pdfColorType:"fill",precision:2}),cn(Ca),this};var Ds=Ae.textColor||"0 g",Fl=Ce.__private__.getTextColor=Ce.getTextColor=function(){return qi(Ds)};Ce.__private__.setTextColor=Ce.setTextColor=function(ke,dn,Mn,Gn){return Ds=Wi({ch1:ke,ch2:dn,ch3:Mn,ch4:Gn,pdfColorType:"text",precision:3}),this};var Zs=Ae.charSpace,Ml=Ce.__private__.getCharSpace=Ce.getCharSpace=function(){return parseFloat(Zs||0)};Ce.__private__.setCharSpace=Ce.setCharSpace=function(ke){if(isNaN(ke))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Zs=ke,this};var ka=0;Ce.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},Ce.__private__.setLineCap=Ce.setLineCap=function(ke){var dn=Ce.CapJoinStyles[ke];if(dn===void 0)throw new Error("Line cap style of '"+ke+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ka=dn,cn(dn+" J"),this};var Na=0;Ce.__private__.setLineJoin=Ce.setLineJoin=function(ke){var dn=Ce.CapJoinStyles[ke];if(dn===void 0)throw new Error("Line join style of '"+ke+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Na=dn,cn(dn+" j"),this},Ce.__private__.setLineMiterLimit=Ce.__private__.setMiterLimit=Ce.setLineMiterLimit=Ce.setMiterLimit=function(ke){if(ke=ke||0,isNaN(ke))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return cn(Ve(Ue(ke))+" M"),this},Ce.GState=j,Ce.setGState=function(ke){(ke=typeof ke=="string"?Bi[Tn[ke]]:So(null,ke)).equals(ci)||(cn("/"+ke.id+" gs"),ci=ke)};var So=function(ke,dn){if(!ke||!Tn[ke]){var Mn=!1;for(var Gn in Bi)if(Bi.hasOwnProperty(Gn)&&Bi[Gn].equals(dn)){Mn=!0;break}if(Mn)dn=Bi[Gn];else{var si="GS"+(Object.keys(Bi).length+1).toString(10);Bi[si]=dn,dn.id=si}return ke&&(Tn[ke]=dn.id),Pi.publish("addGState",dn),dn}};Ce.addGState=function(ke,dn){return So(ke,dn),this},Ce.saveGraphicsState=function(){return cn("q"),$n.push({key:Ri,size:kn,color:Ds}),this},Ce.restoreGraphicsState=function(){cn("Q");var ke=$n.pop();return Ri=ke.key,kn=ke.size,Ds=ke.color,ci=null,this},Ce.setCurrentTransformationMatrix=function(ke){return cn(ke.toString()+" cm"),this},Ce.comment=function(ke){return cn("#"+ke),this};var Qs=function(ke,dn){var Mn=ke||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Mn},set:function(mi){isNaN(mi)||(Mn=parseFloat(mi))}});var Gn=dn||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Gn},set:function(mi){isNaN(mi)||(Gn=parseFloat(mi))}});var si="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return si},set:function(mi){si=mi.toString()}}),this},Ta=function(ke,dn,Mn,Gn){Qs.call(this,ke,dn),this.type="rect";var si=Mn||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return si},set:function(Ei){isNaN(Ei)||(si=parseFloat(Ei))}});var mi=Gn||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return mi},set:function(Ei){isNaN(Ei)||(mi=parseFloat(Ei))}}),this},Fa=function(){this.page=bi,this.currentPage=Fe,this.pages=On.slice(0),this.pagesContext=vi.slice(0),this.x=Fi,this.y=Oi,this.matrix=Yi,this.width=Os(Fe),this.height=ws(Fe),this.outputDestination=Wn,this.id="",this.objectNumber=-1};Fa.prototype.restore=function(){bi=this.page,Fe=this.currentPage,vi=this.pagesContext,On=this.pages,Fi=this.x,Oi=this.y,Yi=this.matrix,Ma(Fe,this.width),Ia(Fe,this.height),Wn=this.outputDestination};var xo=function(ke,dn,Mn,Gn,si){Bn.push(new Fa),bi=Fe=0,On=[],Fi=ke,Oi=dn,Yi=si,Sa([Mn,Gn])},Il=function(ke){if(Ln[ke])Bn.pop().restore();else{var dn=new Fa,Mn="Xo"+(Object.keys(Cn).length+1).toString(10);dn.id=Mn,Ln[ke]=Mn,Cn[Mn]=dn,Pi.publish("addFormObject",dn),Bn.pop().restore()}};for(var ta in Ce.beginFormObject=function(ke,dn,Mn,Gn,si){return xo(ke,dn,Mn,Gn,si),this},Ce.endFormObject=function(ke){return Il(ke),this},Ce.doFormObject=function(ke,dn){var Mn=Cn[Ln[ke]];return cn("q"),cn(dn.toString()+" cm"),cn("/"+Mn.id+" Do"),cn("Q"),this},Ce.getFormObject=function(ke){var dn=Cn[Ln[ke]];return{x:dn.x,y:dn.y,width:dn.width,height:dn.height,matrix:dn.matrix}},Ce.save=function(ke,dn){return ke=ke||"generated.pdf",(dn=dn||{}).returnPromise=dn.returnPromise||!1,dn.returnPromise===!1?(l(Ys(hs()),ke),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(Mn,Gn){try{var si=l(Ys(hs()),ke);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),Mn(si)}catch(mi){Gn(mi.message)}})},E.API)E.API.hasOwnProperty(ta)&&(ta==="events"&&E.API.events.length?function(ke,dn){var Mn,Gn,si;for(si=dn.length-1;si!==-1;si--)Mn=dn[si][0],Gn=dn[si][1],ke.subscribe.apply(ke,[Mn].concat(typeof Gn=="function"?[Gn]:Gn))}(Pi,E.API.events):Ce[ta]=E.API[ta]);var Os=Ce.getPageWidth=function(ke){return(vi[ke=ke||Fe].mediaBox.topRightX-vi[ke].mediaBox.bottomLeftX)/hi},Ma=Ce.setPageWidth=function(ke,dn){vi[ke].mediaBox.topRightX=dn*hi+vi[ke].mediaBox.bottomLeftX},ws=Ce.getPageHeight=function(ke){return(vi[ke=ke||Fe].mediaBox.topRightY-vi[ke].mediaBox.bottomLeftY)/hi},Ia=Ce.setPageHeight=function(ke,dn){vi[ke].mediaBox.topRightY=dn*hi+vi[ke].mediaBox.bottomLeftY};return Ce.internal={pdfEscape:Or,getStyle:bo,getFont:Nl,getFontSize:zn,getCharSpace:Ml,getTextColor:Fl,getLineHeight:Ao,getLineHeightFactor:wo,getLineWidth:$s,write:qn,getHorizontalCoordinate:as,getVerticalCoordinate:us,getCoordinateString:Tl,getVerticalCoordinateString:_s,collections:{},newObject:ki,newAdditionalObject:Hi,newObjectDeferred:Ci,newObjectDeferredBegin:xi,getFilters:Ki,putStream:$i,events:Pi,scaleFactor:hi,pageSize:{getWidth:function(){return Os(Fe)},setWidth:function(ke){Ma(Fe,ke)},getHeight:function(){return ws(Fe)},setHeight:function(ke){Ia(Fe,ke)}},encryptionOptions:Ie,encryption:Nr,getEncryptor:xl,output:Ks,getNumberOfPages:yl,pages:On,out:cn,f2:gn,f3:Me,getPageInfo:mo,getPageInfoByObjId:Ji,getCurrentPageInfo:Ll,getPDFVersion:We,Point:Qs,Rectangle:Ta,Matrix:Hn,hasHotfix:go},Object.defineProperty(Ce.internal.pageSize,"width",{get:function(){return Os(Fe)},set:function(ke){Ma(Fe,ke)},enumerable:!0,configurable:!0}),Object.defineProperty(Ce.internal.pageSize,"height",{get:function(){return ws(Fe)},set:function(ke){Ia(Fe,ke)},enumerable:!0,configurable:!0}),bl.call(Ce,vn),Ri="F1",uo(_e,St),Pi.publish("initialized"),Ce}I.prototype.lsbFirstWord=function(Ae){return String.fromCharCode(Ae>>0&255,Ae>>8&255,Ae>>16&255,Ae>>24&255)},I.prototype.toHexString=function(Ae){return Ae.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(Ae){for(var t=[],St=0;St<Ae.length;St+=2)t.push(String.fromCharCode(parseInt(Ae.substr(St,2),16)));return t.join("")},I.prototype.processOwnerPassword=function(Ae,t){return P(x(t).substr(0,5),Ae)},I.prototype.encryptor=function(Ae,t){var St=x(this.encryptionKey+String.fromCharCode(255&Ae,Ae>>8&255,Ae>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return P(St,e)}},j.prototype.equals=function(Ae){var t,St="id,objectNumber,equals";if(!Ae||_typeof(Ae)!==_typeof(this))return!1;var e=0;for(t in this)if(!(St.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!Ae.hasOwnProperty(t)||this[t]!==Ae[t])return!1;e++}for(t in Ae)Ae.hasOwnProperty(t)&&St.indexOf(t)<0&&e--;return e===0},E.API={events:[]},E.version="2.5.2";var q=E.API,D=1,R=function(Ae){return Ae.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(Ae){return Ae.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(Ae){return Ae.toFixed(2)},z=function(Ae){return Ae.toFixed(5)};q.__acroform__={};var H=function(Ae,t){Ae.prototype=Object.create(t.prototype),Ae.prototype.constructor=Ae},W=function(Ae){return Ae*D},V=function(Ae){var t=new ut,St=At.internal.getHeight(Ae)||0,e=At.internal.getWidth(Ae)||0;return t.BBox=[0,0,Number(U(e)),Number(U(St))],t},G=q.__acroform__.setBit=function(Ae,t){if(Ae=Ae||0,t=t||0,isNaN(Ae)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return Ae|=1<<t},Y=q.__acroform__.clearBit=function(Ae,t){if(Ae=Ae||0,t=t||0,isNaN(Ae)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return Ae&=~(1<<t)},J=q.__acroform__.getBit=function(Ae,t){if(isNaN(Ae)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return Ae&1<<t?1:0},X=q.__acroform__.getBitForPdf=function(Ae,t){if(isNaN(Ae)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(Ae,t-1)},K=q.__acroform__.setBitForPdf=function(Ae,t){if(isNaN(Ae)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(Ae,t-1)},Z=q.__acroform__.clearBitForPdf=function(Ae,t){if(isNaN(Ae)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(Ae,t-1)},$=q.__acroform__.calculateCoordinates=function(Ae,t){var St=t.internal.getHorizontalCoordinate,e=t.internal.getVerticalCoordinate,_e=Ae[0],Se=Ae[1],Pe=Ae[2],Te=Ae[3],Ee={};return Ee.lowerLeft_X=St(_e)||0,Ee.lowerLeft_Y=e(Se+Te)||0,Ee.upperRight_X=St(_e+Pe)||0,Ee.upperRight_Y=e(Se)||0,[Number(U(Ee.lowerLeft_X)),Number(U(Ee.lowerLeft_Y)),Number(U(Ee.upperRight_X)),Number(U(Ee.upperRight_Y))]},Q=function(Ae){if(Ae.appearanceStreamContent)return Ae.appearanceStreamContent;if(Ae.V||Ae.DV){var t=[],St=Ae._V||Ae.DV,e=tt(Ae,St),_e=Ae.scope.internal.getFont(Ae.fontName,Ae.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(Ae.scope.__private__.encodeColorString(Ae.color)),t.push("/"+_e+" "+U(e.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(e.text),t.push("ET"),t.push("Q"),t.push("EMC");var Se=V(Ae);return Se.scope=Ae.scope,Se.stream=t.join(`
`),Se}},tt=function(Ae,t){var St=Ae.fontSize===0?Ae.maxFontSize:Ae.fontSize,e={text:"",fontSize:""},_e=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");_e=Ae.multiline?_e.map(function(Me){return Me.split(`
`)}):_e.map(function(Me){return[Me]});var Se=St,Pe=At.internal.getHeight(Ae)||0;Pe=Pe<0?-Pe:Pe;var Te=At.internal.getWidth(Ae)||0;Te=Te<0?-Te:Te;var Ee=function(Me,Ue,en){if(Me+1<_e.length){var pn=Ue+" "+_e[Me+1][0];return et(pn,Ae,en).width<=Te-4}return!1};Se++;t:for(;Se>0;){t="",Se--;var Re,Ie,qe=et("3",Ae,Se).height,Ge=Ae.multiline?Pe-Se:(Pe-qe)/2,Ce=Ge+=2,Xe=0,We=0,Ke=0;if(Se<=0){t=`(...) Tj
`,t+="% Width of Text: "+et(t,Ae,Se=12).width+", FieldWidth:"+Te+`
`;break}for(var Be="",Ye=0,sn=0;sn<_e.length;sn++)if(_e.hasOwnProperty(sn)){var rn=!1;if(_e[sn].length!==1&&Ke!==_e[sn].length-1){if((qe+2)*(Ye+2)+2>Pe)continue t;Be+=_e[sn][Ke],rn=!0,We=sn,sn--}else{Be=(Be+=_e[sn][Ke]+" ").substr(Be.length-1)==" "?Be.substr(0,Be.length-1):Be;var $e=parseInt(sn),tn=Ee($e,Be,Se),Ve=sn>=_e.length-1;if(tn&&!Ve){Be+=" ",Ke=0;continue}if(tn||Ve){if(Ve)We=$e;else if(Ae.multiline&&(qe+2)*(Ye+2)+2>Pe)continue t}else{if(!Ae.multiline||(qe+2)*(Ye+2)+2>Pe)continue t;We=$e}}for(var ze="",Qe=Xe;Qe<=We;Qe++){var gn=_e[Qe];if(Ae.multiline){if(Qe===We){ze+=gn[Ke]+" ",Ke=(Ke+1)%gn.length;continue}if(Qe===Xe){ze+=gn[gn.length-1]+" ";continue}}ze+=gn[0]+" "}switch(ze=ze.substr(ze.length-1)==" "?ze.substr(0,ze.length-1):ze,Ie=et(ze,Ae,Se).width,Ae.textAlign){case"right":Re=Te-Ie-2;break;case"center":Re=(Te-Ie)/2;break;case"left":default:Re=2}t+=U(Re)+" "+U(Ce)+` Td
`,t+="("+R(ze)+`) Tj
`,t+=-U(Re)+` 0 Td
`,Ce=-(Se+2),Ie=0,Xe=rn?We:We+1,Ye++,Be=""}break}return e.text=t,e.fontSize=Se,e},et=function(Ae,t,St){var e=t.scope.internal.getFont(t.fontName,t.fontStyle),_e=t.scope.getStringUnitWidth(Ae,{font:e,fontSize:parseFloat(St),charSpace:0})*parseFloat(St);return{height:t.scope.getStringUnitWidth("3",{font:e,fontSize:parseFloat(St),charSpace:0})*parseFloat(St)*1.5,width:_e}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(Ae,t){var St={type:"reference",object:Ae};t.internal.getPageInfo(Ae.page).pageContext.annotations.find(function(e){return e.type===St.type&&e.object===St.object})===void 0&&t.internal.getPageInfo(Ae.page).pageContext.annotations.push(St)},it=function(Ae,t){for(var St in Ae)if(Ae.hasOwnProperty(St)){var e=St,_e=Ae[St];t.internal.newObjectDeferredBegin(_e.objId,!0),_typeof(_e)==="object"&&typeof _e.putStream=="function"&&_e.putStream(),delete Ae[e]}},at=function(Ae,t){if(t.scope=Ae,Ae.internal!==void 0&&(Ae.internal.acroformPlugin===void 0||Ae.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,Ae.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),Ae.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=Ae.internal.scaleFactor,Ae.internal.acroformPlugin.acroFormDictionaryRoot=new ht,Ae.internal.acroformPlugin.acroFormDictionaryRoot.scope=Ae,Ae.internal.acroformPlugin.acroFormDictionaryRoot._eventID=Ae.internal.events.subscribe("postPutResources",function(){(function(St){St.internal.events.unsubscribe(St.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete St.internal.acroformPlugin.acroFormDictionaryRoot._eventID,St.internal.acroformPlugin.printedOut=!0})(Ae)}),Ae.internal.events.subscribe("buildDocument",function(){(function(St){St.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var e=St.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var _e in e)if(e.hasOwnProperty(_e)){var Se=e[_e];Se.objId=void 0,Se.hasAnnotation&&nt(Se,St)}})(Ae)}),Ae.internal.events.subscribe("putCatalog",function(){(function(St){if(St.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");St.internal.write("/AcroForm "+St.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(Ae)}),Ae.internal.events.subscribe("postPutPages",function(St){(function(e,_e){var Se=!e;for(var Pe in e||(_e.internal.newObjectDeferredBegin(_e.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),_e.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||_e.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(Pe)){var Te=e[Pe],Ee=[],Re=Te.Rect;if(Te.Rect&&(Te.Rect=$(Te.Rect,_e)),_e.internal.newObjectDeferredBegin(Te.objId,!0),Te.DA=At.createDefaultAppearanceStream(Te),_typeof(Te)==="object"&&typeof Te.getKeyValueListForStream=="function"&&(Ee=Te.getKeyValueListForStream()),Te.Rect=Re,Te.hasAppearanceStream&&!Te.appearanceStreamContent){var Ie=Q(Te);Ee.push({key:"AP",value:"<</N "+Ie+">>"}),_e.internal.acroformPlugin.xForms.push(Ie)}if(Te.appearanceStreamContent){var qe="";for(var Ge in Te.appearanceStreamContent)if(Te.appearanceStreamContent.hasOwnProperty(Ge)){var Ce=Te.appearanceStreamContent[Ge];if(qe+="/"+Ge+" ",qe+="<<",Object.keys(Ce).length>=1||Array.isArray(Ce)){for(var Pe in Ce)if(Ce.hasOwnProperty(Pe)){var Xe=Ce[Pe];typeof Xe=="function"&&(Xe=Xe.call(_e,Te)),qe+="/"+Pe+" "+Xe+" ",_e.internal.acroformPlugin.xForms.indexOf(Xe)>=0||_e.internal.acroformPlugin.xForms.push(Xe)}}else typeof(Xe=Ce)=="function"&&(Xe=Xe.call(_e,Te)),qe+="/"+Pe+" "+Xe,_e.internal.acroformPlugin.xForms.indexOf(Xe)>=0||_e.internal.acroformPlugin.xForms.push(Xe);qe+=">>"}Ee.push({key:"AP",value:`<<
`+qe+">>"})}_e.internal.putStream({additionalKeyValues:Ee,objectId:Te.objId}),_e.internal.out("endobj")}Se&&it(_e.internal.acroformPlugin.xForms,_e)})(St,Ae)}),Ae.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(Ae,t,St){var e=function(Pe){return Pe};if(Array.isArray(Ae)){for(var _e="[",Se=0;Se<Ae.length;Se++)switch(Se!==0&&(_e+=" "),_typeof(Ae[Se])){case"boolean":case"number":case"object":_e+=Ae[Se].toString();break;case"string":Ae[Se].substr(0,1)!=="/"?(t!==void 0&&St&&(e=St.internal.getEncryptor(t)),_e+="("+R(e(Ae[Se].toString()))+")"):_e+=Ae[Se].toString()}return _e+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(Ae,t,St){var e=function(_e){return _e};return t!==void 0&&St&&(e=St.internal.getEncryptor(t)),(Ae=Ae||"").toString(),Ae="("+R(e(Ae))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(Ae){this._objId=Ae}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var Ae=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:Ae,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var Ae=[],t=Object.getOwnPropertyNames(this).filter(function(Se){return Se!="content"&&Se!="appearanceStreamContent"&&Se!="scope"&&Se!="objId"&&Se.substring(0,1)!="_"});for(var St in t)if(Object.getOwnPropertyDescriptor(this,t[St]).configurable===!1){var e=t[St],_e=this[e];_e&&(Array.isArray(_e)?Ae.push({key:e,value:ot(_e,this.objId,this.scope)}):_e instanceof ct?(_e.scope=this.scope,Ae.push({key:e,value:_e.objId+" 0 R"})):typeof _e!="function"&&Ae.push({key:e,value:_e}))}return Ae};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var Ae,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(St){t=St}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(St){Ae=St.trim()},get:function(){return Ae||null}})};H(ut,ct);var ht=function(){ct.call(this);var Ae,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(Ae){var St=function(e){return e};return this.scope&&(St=this.scope.internal.getEncryptor(this.objId)),"("+R(St(Ae))+")"}},set:function(St){Ae=St}})};H(ht,ct);var lt=function Ae(){ct.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(Be){if(isNaN(Be))throw new Error('Invalid value "'+Be+'" for attribute F supplied.');t=Be}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X(t,3)},set:function(Be){Be?this.F=K(t,3):this.F=Z(t,3)}});var St=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return St},set:function(Be){if(isNaN(Be))throw new Error('Invalid value "'+Be+'" for attribute Ff supplied.');St=Be}});var e=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(e.length!==0)return e},set:function(Be){e=Be!==void 0?Be:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!e||isNaN(e[0])?0:e[0]},set:function(Be){e[0]=Be}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!e||isNaN(e[1])?0:e[1]},set:function(Be){e[1]=Be}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!e||isNaN(e[2])?0:e[2]},set:function(Be){e[2]=Be}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!e||isNaN(e[3])?0:e[3]},set:function(Be){e[3]=Be}});var _e="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return _e},set:function(Be){switch(Be){case"/Btn":case"/Tx":case"/Ch":case"/Sig":_e=Be;break;default:throw new Error('Invalid value "'+Be+'" for attribute FT supplied.')}}});var Se=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Se||Se.length<1){if(this instanceof yt)return;Se="FieldObject"+Ae.FieldNum++}var Be=function(Ye){return Ye};return this.scope&&(Be=this.scope.internal.getEncryptor(this.objId)),"("+R(Be(Se))+")"},set:function(Be){Se=Be.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Se},set:function(Be){Se=Be}});var Pe="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return Pe},set:function(Be){Pe=Be}});var Te="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return Te},set:function(Be){Te=Be}});var Ee=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return Ee},set:function(Be){Ee=Be}});var Re=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return Re===void 0?50/D:Re},set:function(Be){Re=Be}});var Ie="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return Ie},set:function(Be){Ie=Be}});var qe="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!qe||this instanceof yt||this instanceof Nt))return st(qe,this.objId,this.scope)},set:function(Be){Be=Be.toString(),qe=Be}});var Ge=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Ge)return this instanceof mt?Ge:st(Ge,this.objId,this.scope)},set:function(Be){Be=Be.toString(),Ge=this instanceof mt?Be:Be.substr(0,1)==="("?T(Be.substr(1,Be.length-2)):T(Be)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Ge.substr(1,Ge.length-1)):Ge},set:function(Be){Be=Be.toString(),Ge=this instanceof mt?"/"+Be:Be}});var Ce=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(Ce)return Ce},set:function(Be){this.V=Be}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(Ce)return this instanceof mt?Ce:st(Ce,this.objId,this.scope)},set:function(Be){Be=Be.toString(),Ce=this instanceof mt?Be:Be.substr(0,1)==="("?T(Be.substr(1,Be.length-2)):T(Be)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Ce.substr(1,Ce.length-1)):Ce},set:function(Be){Be=Be.toString(),Ce=this instanceof mt?"/"+Be:Be}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Xe,We=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return We},set:function(Be){Be=!!Be,We=Be}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Xe)return Xe},set:function(Be){Xe=Be}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,1)},set:function(Be){Be?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,2)},set:function(Be){Be?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,3)},set:function(Be){Be?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var Ke=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Ke!==null)return Ke},set:function(Be){if([0,1,2].indexOf(Be)===-1)throw new Error('Invalid value "'+Be+'" for attribute Q supplied.');Ke=Be}}),Object.defineProperty(this,"textAlign",{get:function(){var Be;switch(Ke){case 0:default:Be="left";break;case 1:Be="center";break;case 2:Be="right"}return Be},configurable:!0,enumerable:!0,set:function(Be){switch(Be){case"right":case 2:Ke=2;break;case"center":case 1:Ke=1;break;case"left":case 0:default:Ke=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var Ae=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return Ae},set:function(St){Ae=St}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return Ae},set:function(St){Ae=St}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(t,this.objId,this.scope)},set:function(St){var e,_e;_e=[],typeof(e=St)=="string"&&(_e=function(Se,Pe,Te){Te||(Te=1);for(var Ee,Re=[];Ee=Pe.exec(Se);)Re.push(Ee[Te]);return Re}(e,/\((.*?)\)/g)),t=_e}}),this.getOptions=function(){return t},this.setOptions=function(St){t=St,this.sort&&t.sort()},this.addOption=function(St){St=(St=St||"").toString(),t.push(St),this.sort&&t.sort()},this.removeOption=function(St,e){for(e=e||!1,St=(St=St||"").toString();t.indexOf(St)!==-1&&(t.splice(t.indexOf(St),1),e!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,18)},set:function(St){St?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,19)},set:function(St){this.combo===!0&&(St?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,20)},set:function(St){St?(this.Ff=K(this.Ff,20),t.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,22)},set:function(St){St?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(St){St?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,27)},set:function(St){St?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,15)},set:function(St){St?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,16)},set:function(St){St?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,17)},set:function(St){St?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(St){St?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var Ae,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var St=function(Se){return Se};if(this.scope&&(St=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var e,_e=[];for(e in _e.push("<<"),t)_e.push("/"+e+" ("+R(St(t[e]))+")");return _e.push(">>"),_e.join(`
`)}},set:function(St){_typeof(St)==="object"&&(t=St)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(St){typeof St=="string"&&(t.CA=St)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return Ae},set:function(St){Ae=St}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return Ae.substr(1,Ae.length-1)},set:function(St){Ae="/"+St}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var Ae=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return Ae},set:function(t){Ae=t!==void 0?t:[]}})};H(bt,mt);var yt=function(){var Ae,t;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return Ae},set:function(_e){Ae=_e}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(_e){t=_e}});var St,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var _e=function(Te){return Te};this.scope&&(_e=this.scope.internal.getEncryptor(this.objId));var Se,Pe=[];for(Se in Pe.push("<<"),e)Pe.push("/"+Se+" ("+R(_e(e[Se]))+")");return Pe.push(">>"),Pe.join(`
`)},set:function(_e){_typeof(_e)==="object"&&(e=_e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(_e){typeof _e=="string"&&(e.CA=_e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return St},set:function(_e){St=_e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return St.substr(1,St.length-1)},set:function(_e){St="/"+_e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(Ae){if(!("createAppearanceStream"in Ae)||!("getCA"in Ae))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var St=this.Kids[t];St.appearanceStreamContent=Ae.createAppearanceStream(St.optionName),St.caption=Ae.getCA()}},bt.prototype.createOption=function(Ae){var t=new yt;return t.Parent=this,t.optionName=Ae,this.Kids.push(t),xt.call(this.scope,t),t};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,13)},set:function(t){t?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,21)},set:function(t){t?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(t){t?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,24)},set:function(t){t?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,25)},set:function(t){t?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(t){t?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var Ae=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return Ae},set:function(t){Ae=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return Ae},set:function(t){Number.isInteger(t)&&(Ae=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,14)},set:function(Ae){Ae?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(Ae){var t=V(Ae);t.scope=Ae.scope;var St=[],e=Ae.scope.internal.getFont(Ae.fontName,Ae.fontStyle).id,_e=Ae.scope.__private__.encodeColorString(Ae.color),Se=tt(Ae,Ae.caption);return St.push("0.749023 g"),St.push("0 0 "+U(At.internal.getWidth(Ae))+" "+U(At.internal.getHeight(Ae))+" re"),St.push("f"),St.push("BMC"),St.push("q"),St.push("0 0 1 rg"),St.push("/"+e+" "+U(Se.fontSize)+" Tf "+_e),St.push("BT"),St.push(Se.text),St.push("ET"),St.push("Q"),St.push("EMC"),t.stream=St.join(`
`),t},YesNormal:function(Ae){var t=V(Ae);t.scope=Ae.scope;var St=Ae.scope.internal.getFont(Ae.fontName,Ae.fontStyle).id,e=Ae.scope.__private__.encodeColorString(Ae.color),_e=[],Se=At.internal.getHeight(Ae),Pe=At.internal.getWidth(Ae),Te=tt(Ae,Ae.caption);return _e.push("1 g"),_e.push("0 0 "+U(Pe)+" "+U(Se)+" re"),_e.push("f"),_e.push("q"),_e.push("0 0 1 rg"),_e.push("0 0 "+U(Pe-1)+" "+U(Se-1)+" re"),_e.push("W"),_e.push("n"),_e.push("0 g"),_e.push("BT"),_e.push("/"+St+" "+U(Te.fontSize)+" Tf "+e),_e.push(Te.text),_e.push("ET"),_e.push("Q"),t.stream=_e.join(`
`),t},OffPushDown:function(Ae){var t=V(Ae);t.scope=Ae.scope;var St=[];return St.push("0.749023 g"),St.push("0 0 "+U(At.internal.getWidth(Ae))+" "+U(At.internal.getHeight(Ae))+" re"),St.push("f"),t.stream=St.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(Ae){var t={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return t.N[Ae]=At.RadioButton.Circle.YesNormal,t.D[Ae]=At.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(Ae){var t=V(Ae);t.scope=Ae.scope;var St=[],e=At.internal.getWidth(Ae)<=At.internal.getHeight(Ae)?At.internal.getWidth(Ae)/4:At.internal.getHeight(Ae)/4;e=Number((.9*e).toFixed(5));var _e=At.internal.Bezier_C,Se=Number((e*_e).toFixed(5));return St.push("q"),St.push("1 0 0 1 "+z(At.internal.getWidth(Ae)/2)+" "+z(At.internal.getHeight(Ae)/2)+" cm"),St.push(e+" 0 m"),St.push(e+" "+Se+" "+Se+" "+e+" 0 "+e+" c"),St.push("-"+Se+" "+e+" -"+e+" "+Se+" -"+e+" 0 c"),St.push("-"+e+" -"+Se+" -"+Se+" -"+e+" 0 -"+e+" c"),St.push(Se+" -"+e+" "+e+" -"+Se+" "+e+" 0 c"),St.push("f"),St.push("Q"),t.stream=St.join(`
`),t},YesPushDown:function(Ae){var t=V(Ae);t.scope=Ae.scope;var St=[],e=At.internal.getWidth(Ae)<=At.internal.getHeight(Ae)?At.internal.getWidth(Ae)/4:At.internal.getHeight(Ae)/4;e=Number((.9*e).toFixed(5));var _e=Number((2*e).toFixed(5)),Se=Number((_e*At.internal.Bezier_C).toFixed(5)),Pe=Number((e*At.internal.Bezier_C).toFixed(5));return St.push("0.749023 g"),St.push("q"),St.push("1 0 0 1 "+z(At.internal.getWidth(Ae)/2)+" "+z(At.internal.getHeight(Ae)/2)+" cm"),St.push(_e+" 0 m"),St.push(_e+" "+Se+" "+Se+" "+_e+" 0 "+_e+" c"),St.push("-"+Se+" "+_e+" -"+_e+" "+Se+" -"+_e+" 0 c"),St.push("-"+_e+" -"+Se+" -"+Se+" -"+_e+" 0 -"+_e+" c"),St.push(Se+" -"+_e+" "+_e+" -"+Se+" "+_e+" 0 c"),St.push("f"),St.push("Q"),St.push("0 g"),St.push("q"),St.push("1 0 0 1 "+z(At.internal.getWidth(Ae)/2)+" "+z(At.internal.getHeight(Ae)/2)+" cm"),St.push(e+" 0 m"),St.push(e+" "+Pe+" "+Pe+" "+e+" 0 "+e+" c"),St.push("-"+Pe+" "+e+" -"+e+" "+Pe+" -"+e+" 0 c"),St.push("-"+e+" -"+Pe+" -"+Pe+" -"+e+" 0 -"+e+" c"),St.push(Pe+" -"+e+" "+e+" -"+Pe+" "+e+" 0 c"),St.push("f"),St.push("Q"),t.stream=St.join(`
`),t},OffPushDown:function(Ae){var t=V(Ae);t.scope=Ae.scope;var St=[],e=At.internal.getWidth(Ae)<=At.internal.getHeight(Ae)?At.internal.getWidth(Ae)/4:At.internal.getHeight(Ae)/4;e=Number((.9*e).toFixed(5));var _e=Number((2*e).toFixed(5)),Se=Number((_e*At.internal.Bezier_C).toFixed(5));return St.push("0.749023 g"),St.push("q"),St.push("1 0 0 1 "+z(At.internal.getWidth(Ae)/2)+" "+z(At.internal.getHeight(Ae)/2)+" cm"),St.push(_e+" 0 m"),St.push(_e+" "+Se+" "+Se+" "+_e+" 0 "+_e+" c"),St.push("-"+Se+" "+_e+" -"+_e+" "+Se+" -"+_e+" 0 c"),St.push("-"+_e+" -"+Se+" -"+Se+" -"+_e+" 0 -"+_e+" c"),St.push(Se+" -"+_e+" "+_e+" -"+Se+" "+_e+" 0 c"),St.push("f"),St.push("Q"),t.stream=St.join(`
`),t}},Cross:{createAppearanceStream:function(Ae){var t={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return t.N[Ae]=At.RadioButton.Cross.YesNormal,t.D[Ae]=At.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(Ae){var t=V(Ae);t.scope=Ae.scope;var St=[],e=At.internal.calculateCross(Ae);return St.push("q"),St.push("1 1 "+U(At.internal.getWidth(Ae)-2)+" "+U(At.internal.getHeight(Ae)-2)+" re"),St.push("W"),St.push("n"),St.push(U(e.x1.x)+" "+U(e.x1.y)+" m"),St.push(U(e.x2.x)+" "+U(e.x2.y)+" l"),St.push(U(e.x4.x)+" "+U(e.x4.y)+" m"),St.push(U(e.x3.x)+" "+U(e.x3.y)+" l"),St.push("s"),St.push("Q"),t.stream=St.join(`
`),t},YesPushDown:function(Ae){var t=V(Ae);t.scope=Ae.scope;var St=At.internal.calculateCross(Ae),e=[];return e.push("0.749023 g"),e.push("0 0 "+U(At.internal.getWidth(Ae))+" "+U(At.internal.getHeight(Ae))+" re"),e.push("f"),e.push("q"),e.push("1 1 "+U(At.internal.getWidth(Ae)-2)+" "+U(At.internal.getHeight(Ae)-2)+" re"),e.push("W"),e.push("n"),e.push(U(St.x1.x)+" "+U(St.x1.y)+" m"),e.push(U(St.x2.x)+" "+U(St.x2.y)+" l"),e.push(U(St.x4.x)+" "+U(St.x4.y)+" m"),e.push(U(St.x3.x)+" "+U(St.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(Ae){var t=V(Ae);t.scope=Ae.scope;var St=[];return St.push("0.749023 g"),St.push("0 0 "+U(At.internal.getWidth(Ae))+" "+U(At.internal.getHeight(Ae))+" re"),St.push("f"),t.stream=St.join(`
`),t}}},createDefaultAppearanceStream:function(Ae){var t=Ae.scope.internal.getFont(Ae.fontName,Ae.fontStyle).id,St=Ae.scope.__private__.encodeColorString(Ae.color);return"/"+t+" "+Ae.fontSize+" Tf "+St}};At.internal={Bezier_C:.551915024494,calculateCross:function(Ae){var t=At.internal.getWidth(Ae),St=At.internal.getHeight(Ae),e=Math.min(t,St);return{x1:{x:(t-e)/2,y:(St-e)/2+e},x2:{x:(t-e)/2+e,y:(St-e)/2},x3:{x:(t-e)/2,y:(St-e)/2},x4:{x:(t-e)/2+e,y:(St-e)/2+e}}}},At.internal.getWidth=function(Ae){var t=0;return _typeof(Ae)==="object"&&(t=W(Ae.Rect[2])),t},At.internal.getHeight=function(Ae){var t=0;return _typeof(Ae)==="object"&&(t=W(Ae.Rect[3])),t};var xt=q.addField=function(Ae){if(at(this,Ae),!(Ae instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=Ae).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),Ae.page=Ae.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};E.AcroForm;function _t(Ae){return Ae.reduce(function(t,St,e){return t[St]=e,t},{})}(function(Ae){Ae.__addimage__={};var t="UNKNOWN",St={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},e=Ae.__addimage__.getImageFileTypeByImageData=function(Me,Ue){var en,pn,An,xn,_n,En=t;if((Ue=Ue||t)==="RGBA"||Me.data!==void 0&&Me.data instanceof Uint8ClampedArray&&"height"in Me&&"width"in Me)return"RGBA";if(tn(Me))for(_n in St)for(An=St[_n],en=0;en<An.length;en+=1){for(xn=!0,pn=0;pn<An[en].length;pn+=1)if(An[en][pn]!==void 0&&An[en][pn]!==Me[pn]){xn=!1;break}if(xn===!0){En=_n;break}}else for(_n in St)for(An=St[_n],en=0;en<An.length;en+=1){for(xn=!0,pn=0;pn<An[en].length;pn+=1)if(An[en][pn]!==void 0&&An[en][pn]!==Me.charCodeAt(pn)){xn=!1;break}if(xn===!0){En=_n;break}}return En===t&&Ue!==t&&(En=Ue),En},_e=function Me(Ue){for(var en=this.internal.write,pn=this.internal.putStream,An=(0,this.internal.getFilters)();An.indexOf("FlateEncode")!==-1;)An.splice(An.indexOf("FlateEncode"),1);Ue.objectId=this.internal.newObject();var xn=[];if(xn.push({key:"Type",value:"/XObject"}),xn.push({key:"Subtype",value:"/Image"}),xn.push({key:"Width",value:Ue.width}),xn.push({key:"Height",value:Ue.height}),Ue.colorSpace===Ke.INDEXED?xn.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Ue.palette.length/3-1)+" "+("sMask"in Ue&&Ue.sMask!==void 0?Ue.objectId+2:Ue.objectId+1)+" 0 R]"}):(xn.push({key:"ColorSpace",value:"/"+Ue.colorSpace}),Ue.colorSpace===Ke.DEVICE_CMYK&&xn.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),xn.push({key:"BitsPerComponent",value:Ue.bitsPerComponent}),"decodeParameters"in Ue&&Ue.decodeParameters!==void 0&&xn.push({key:"DecodeParms",value:"<<"+Ue.decodeParameters+">>"}),"transparency"in Ue&&Array.isArray(Ue.transparency)){for(var _n="",En=0,hn=Ue.transparency.length;En<hn;En++)_n+=Ue.transparency[En]+" "+Ue.transparency[En]+" ";xn.push({key:"Mask",value:"["+_n+"]"})}Ue.sMask!==void 0&&xn.push({key:"SMask",value:Ue.objectId+1+" 0 R"});var Sn=Ue.filter!==void 0?["/"+Ue.filter]:void 0;if(pn({data:Ue.data,additionalKeyValues:xn,alreadyAppliedFilters:Sn,objectId:Ue.objectId}),en("endobj"),"sMask"in Ue&&Ue.sMask!==void 0){var In="/Predictor "+Ue.predictor+" /Colors 1 /BitsPerComponent "+Ue.bitsPerComponent+" /Columns "+Ue.width,je={width:Ue.width,height:Ue.height,colorSpace:"DeviceGray",bitsPerComponent:Ue.bitsPerComponent,decodeParameters:In,data:Ue.sMask};"filter"in Ue&&(je.filter=Ue.filter),Me.call(this,je)}if(Ue.colorSpace===Ke.INDEXED){var Fe=this.internal.newObject();pn({data:ze(new Uint8Array(Ue.palette)),objectId:Fe}),en("endobj")}},Se=function(){var Me=this.internal.collections.addImage_images;for(var Ue in Me)_e.call(this,Me[Ue])},Pe=function(){var Me,Ue=this.internal.collections.addImage_images,en=this.internal.write;for(var pn in Ue)en("/I"+(Me=Ue[pn]).index,Me.objectId,"0","R")},Te=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",Se),this.internal.events.subscribe("putXobjectDict",Pe))},Ee=function(){var Me=this.internal.collections.addImage_images;return Te.call(this),Me},Re=function(){return Object.keys(this.internal.collections.addImage_images).length},Ie=function(Me){return typeof Ae["process"+Me.toUpperCase()]=="function"},qe=function(Me){return _typeof(Me)==="object"&&Me.nodeType===1},Ge=function(Me,Ue){if(Me.nodeName==="IMG"&&Me.hasAttribute("src")){var en=""+Me.getAttribute("src");if(en.indexOf("data:image/")===0)return u(unescape(en).split("base64,").pop());var pn=Ae.loadFile(en,!0);if(pn!==void 0)return pn}if(Me.nodeName==="CANVAS"){if(Me.width===0||Me.height===0)throw new Error("Given canvas must have data. Canvas width: "+Me.width+", height: "+Me.height);var An;switch(Ue){case"PNG":An="image/png";break;case"WEBP":An="image/webp";break;case"JPEG":case"JPG":default:An="image/jpeg"}return u(Me.toDataURL(An,1).split("base64,").pop())}},Ce=function(Me){var Ue=this.internal.collections.addImage_images;if(Ue){for(var en in Ue)if(Me===Ue[en].alias)return Ue[en]}},Xe=function(Me,Ue,en){return Me||Ue||(Me=-96,Ue=-96),Me<0&&(Me=-1*en.width*72/Me/this.internal.scaleFactor),Ue<0&&(Ue=-1*en.height*72/Ue/this.internal.scaleFactor),Me===0&&(Me=Ue*en.width/en.height),Ue===0&&(Ue=Me*en.height/en.width),[Me,Ue]},We=function(Me,Ue,en,pn,An,xn){var _n=Xe.call(this,en,pn,An),En=this.internal.getCoordinateString,hn=this.internal.getVerticalCoordinateString,Sn=Ee.call(this);if(en=_n[0],pn=_n[1],Sn[An.index]=An,xn){xn*=Math.PI/180;var In=Math.cos(xn),je=Math.sin(xn),Fe=function(Je){return Je.toFixed(4)},De=[Fe(In),Fe(je),Fe(-1*je),Fe(In),0,0,"cm"]}this.internal.write("q"),xn?(this.internal.write([1,"0","0",1,En(Me),hn(Ue+pn),"cm"].join(" ")),this.internal.write(De.join(" ")),this.internal.write([En(en),"0","0",En(pn),"0","0","cm"].join(" "))):this.internal.write([En(en),"0","0",En(pn),En(Me),hn(Ue+pn),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+An.index+" Do"),this.internal.write("Q")},Ke=Ae.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};Ae.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Be=Ae.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Ye=Ae.__addimage__.sHashCode=function(Me){var Ue,en,pn=0;if(typeof Me=="string")for(en=Me.length,Ue=0;Ue<en;Ue++)pn=(pn<<5)-pn+Me.charCodeAt(Ue),pn|=0;else if(tn(Me))for(en=Me.byteLength/2,Ue=0;Ue<en;Ue++)pn=(pn<<5)-pn+Me[Ue],pn|=0;return pn},sn=Ae.__addimage__.validateStringAsBase64=function(Me){(Me=Me||"").toString().trim();var Ue=!0;return Me.length===0&&(Ue=!1),Me.length%4!=0&&(Ue=!1),/^[A-Za-z0-9+/]+$/.test(Me.substr(0,Me.length-2))===!1&&(Ue=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Me.substr(-2))===!1&&(Ue=!1),Ue},rn=Ae.__addimage__.extractImageFromDataUrl=function(Me){var Ue=(Me=Me||"").split("base64,"),en=null;if(Ue.length===2){var pn=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Ue[0]);Array.isArray(pn)&&(en={mimeType:pn[1],charset:pn[2],data:Ue[1]})}return en},$e=Ae.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};Ae.__addimage__.isArrayBuffer=function(Me){return $e()&&Me instanceof ArrayBuffer};var tn=Ae.__addimage__.isArrayBufferView=function(Me){return $e()&&typeof Uint32Array<"u"&&(Me instanceof Int8Array||Me instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&Me instanceof Uint8ClampedArray||Me instanceof Int16Array||Me instanceof Uint16Array||Me instanceof Int32Array||Me instanceof Uint32Array||Me instanceof Float32Array||Me instanceof Float64Array)},Ve=Ae.__addimage__.binaryStringToUint8Array=function(Me){for(var Ue=Me.length,en=new Uint8Array(Ue),pn=0;pn<Ue;pn++)en[pn]=Me.charCodeAt(pn);return en},ze=Ae.__addimage__.arrayBufferToBinaryString=function(Me){for(var Ue="",en=tn(Me)?Me:new Uint8Array(Me),pn=0;pn<en.length;pn+=8192)Ue+=String.fromCharCode.apply(null,en.subarray(pn,pn+8192));return Ue};Ae.addImage=function(){var Me,Ue,en,pn,An,xn,_n,En,hn;if(typeof arguments[1]=="number"?(Ue=t,en=arguments[1],pn=arguments[2],An=arguments[3],xn=arguments[4],_n=arguments[5],En=arguments[6],hn=arguments[7]):(Ue=arguments[1],en=arguments[2],pn=arguments[3],An=arguments[4],xn=arguments[5],_n=arguments[6],En=arguments[7],hn=arguments[8]),_typeof(Me=arguments[0])==="object"&&!qe(Me)&&"imageData"in Me){var Sn=Me;Me=Sn.imageData,Ue=Sn.format||Ue||t,en=Sn.x||en||0,pn=Sn.y||pn||0,An=Sn.w||Sn.width||An,xn=Sn.h||Sn.height||xn,_n=Sn.alias||_n,En=Sn.compression||En,hn=Sn.rotation||Sn.angle||hn}var In=this.internal.getFilters();if(En===void 0&&In.indexOf("FlateEncode")!==-1&&(En="SLOW"),isNaN(en)||isNaN(pn))throw new Error("Invalid coordinates passed to jsPDF.addImage");Te.call(this);var je=Qe.call(this,Me,Ue,_n,En);return We.call(this,en,pn,An,xn,je,hn),this};var Qe=function(Me,Ue,en,pn){var An,xn,_n;if(typeof Me=="string"&&e(Me)===t){Me=unescape(Me);var En=gn(Me,!1);(En!==""||(En=Ae.loadFile(Me,!0))!==void 0)&&(Me=En)}if(qe(Me)&&(Me=Ge(Me,Ue)),Ue=e(Me,Ue),!Ie(Ue))throw new Error("addImage does not support files of type '"+Ue+"', please ensure that a plugin for '"+Ue+"' support is added.");if(((_n=en)==null||_n.length===0)&&(en=function(hn){return typeof hn=="string"||tn(hn)?Ye(hn):tn(hn.data)?Ye(hn.data):null}(Me)),(An=Ce.call(this,en))||($e()&&(Me instanceof Uint8Array||Ue==="RGBA"||(xn=Me,Me=Ve(Me))),An=this["process"+Ue.toUpperCase()](Me,Re.call(this),en,function(hn){return hn&&typeof hn=="string"&&(hn=hn.toUpperCase()),hn in Ae.image_compression?hn:Be.NONE}(pn),xn)),!An)throw new Error("An unknown error occurred whilst processing the image.");return An},gn=Ae.__addimage__.convertBase64ToBinaryString=function(Me,Ue){var en;Ue=typeof Ue!="boolean"||Ue;var pn,An="";if(typeof Me=="string"){pn=(en=rn(Me))!==null?en.data:Me;try{An=u(pn)}catch(xn){if(Ue)throw sn(pn)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+xn.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return An};Ae.getImageProperties=function(Me){var Ue,en,pn="";if(qe(Me)&&(Me=Ge(Me)),typeof Me=="string"&&e(Me)===t&&((pn=gn(Me,!1))===""&&(pn=Ae.loadFile(Me)||""),Me=pn),en=e(Me),!Ie(en))throw new Error("addImage does not support files of type '"+en+"', please ensure that a plugin for '"+en+"' support is added.");if(!$e()||Me instanceof Uint8Array||(Me=Ve(Me)),!(Ue=this["process"+en.toUpperCase()](Me)))throw new Error("An unknown error occurred whilst processing the image");return Ue.fileType=en,Ue}})(E.API),function(Ae){var t=function(St){if(St!==void 0&&St!="")return!0};E.API.events.push(["addPage",function(St){this.internal.getPageInfo(St.pageNumber).pageContext.annotations=[]}]),Ae.events.push(["putPage",function(St){for(var e,_e,Se,Pe=this.internal.getCoordinateString,Te=this.internal.getVerticalCoordinateString,Ee=this.internal.getPageInfoByObjId(St.objId),Re=St.pageContext.annotations,Ie=!1,qe=0;qe<Re.length&&!Ie;qe++)switch((e=Re[qe]).type){case"link":(t(e.options.url)||t(e.options.pageNumber))&&(Ie=!0);break;case"reference":case"text":case"freetext":Ie=!0}if(Ie!=0){this.internal.write("/Annots [");for(var Ge=0;Ge<Re.length;Ge++){e=Re[Ge];var Ce=this.internal.pdfEscape,Xe=this.internal.getEncryptor(St.objId);switch(e.type){case"reference":this.internal.write(" "+e.object.objId+" 0 R ");break;case"text":var We=this.internal.newAdditionalObject(),Ke=this.internal.newAdditionalObject(),Be=this.internal.getEncryptor(We.objId),Ye=e.title||"Note";Se="<</Type /Annot /Subtype /Text "+(_e="/Rect ["+Pe(e.bounds.x)+" "+Te(e.bounds.y+e.bounds.h)+" "+Pe(e.bounds.x+e.bounds.w)+" "+Te(e.bounds.y)+"] ")+"/Contents ("+Ce(Be(e.contents))+")",Se+=" /Popup "+Ke.objId+" 0 R",Se+=" /P "+Ee.objId+" 0 R",Se+=" /T ("+Ce(Be(Ye))+") >>",We.content=Se;var sn=We.objId+" 0 R";Se="<</Type /Annot /Subtype /Popup "+(_e="/Rect ["+Pe(e.bounds.x+30)+" "+Te(e.bounds.y+e.bounds.h)+" "+Pe(e.bounds.x+e.bounds.w+30)+" "+Te(e.bounds.y)+"] ")+" /Parent "+sn,e.open&&(Se+=" /Open true"),Se+=" >>",Ke.content=Se,this.internal.write(We.objId,"0 R",Ke.objId,"0 R");break;case"freetext":_e="/Rect ["+Pe(e.bounds.x)+" "+Te(e.bounds.y)+" "+Pe(e.bounds.x+e.bounds.w)+" "+Te(e.bounds.y+e.bounds.h)+"] ";var rn=e.color||"#000000";Se="<</Type /Annot /Subtype /FreeText "+_e+"/Contents ("+Ce(Xe(e.contents))+")",Se+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+rn+")",Se+=" /Border [0 0 0]",Se+=" >>",this.internal.write(Se);break;case"link":if(e.options.name){var $e=this.annotations._nameMap[e.options.name];e.options.pageNumber=$e.page,e.options.top=$e.y}else e.options.top||(e.options.top=0);if(_e="/Rect ["+e.finalBounds.x+" "+e.finalBounds.y+" "+e.finalBounds.w+" "+e.finalBounds.h+"] ",Se="",e.options.url)Se="<</Type /Annot /Subtype /Link "+_e+"/Border [0 0 0] /A <</S /URI /URI ("+Ce(Xe(e.options.url))+") >>";else if(e.options.pageNumber)switch(Se="<</Type /Annot /Subtype /Link "+_e+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(e.options.pageNumber).objId+" 0 R",e.options.magFactor=e.options.magFactor||"XYZ",e.options.magFactor){case"Fit":Se+=" /Fit]";break;case"FitH":Se+=" /FitH "+e.options.top+"]";break;case"FitV":e.options.left=e.options.left||0,Se+=" /FitV "+e.options.left+"]";break;case"XYZ":default:var tn=Te(e.options.top);e.options.left=e.options.left||0,e.options.zoom===void 0&&(e.options.zoom=0),Se+=" /XYZ "+e.options.left+" "+tn+" "+e.options.zoom+"]"}Se!=""&&(Se+=" >>",this.internal.write(Se))}}this.internal.write("]")}}]),Ae.createAnnotation=function(St){var e=this.internal.getCurrentPageInfo();switch(St.type){case"link":this.link(St.bounds.x,St.bounds.y,St.bounds.w,St.bounds.h,St);break;case"text":case"freetext":e.pageContext.annotations.push(St)}},Ae.link=function(St,e,_e,Se,Pe){var Te=this.internal.getCurrentPageInfo(),Ee=this.internal.getCoordinateString,Re=this.internal.getVerticalCoordinateString;Te.pageContext.annotations.push({finalBounds:{x:Ee(St),y:Re(e),w:Ee(St+_e),h:Re(e+Se)},options:Pe,type:"link"})},Ae.textWithLink=function(St,e,_e,Se){var Pe,Te,Ee=this.getTextWidth(St),Re=this.internal.getLineHeight()/this.internal.scaleFactor;if(Se.maxWidth!==void 0){Te=Se.maxWidth;var Ie=this.splitTextToSize(St,Te).length;Pe=Math.ceil(Re*Ie)}else Te=Ee,Pe=Re;return this.text(St,e,_e,Se),_e+=.2*Re,Se.align==="center"&&(e-=Ee/2),Se.align==="right"&&(e-=Ee),this.link(e,_e-Re,Te,Pe,Se),Ee},Ae.getTextWidth=function(St){var e=this.internal.getFontSize();return this.getStringUnitWidth(St)*e/this.internal.scaleFactor}}(E.API),function(Ae){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},St={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},e={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},_e=[1570,1571,1573,1575];Ae.__arabicParser__={};var Se=Ae.__arabicParser__.isInArabicSubstitutionA=function(We){return t[We.charCodeAt(0)]!==void 0},Pe=Ae.__arabicParser__.isArabicLetter=function(We){return typeof We=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(We)},Te=Ae.__arabicParser__.isArabicEndLetter=function(We){return Pe(We)&&Se(We)&&t[We.charCodeAt(0)].length<=2},Ee=Ae.__arabicParser__.isArabicAlfLetter=function(We){return Pe(We)&&_e.indexOf(We.charCodeAt(0))>=0};Ae.__arabicParser__.arabicLetterHasIsolatedForm=function(We){return Pe(We)&&Se(We)&&t[We.charCodeAt(0)].length>=1};var Re=Ae.__arabicParser__.arabicLetterHasFinalForm=function(We){return Pe(We)&&Se(We)&&t[We.charCodeAt(0)].length>=2};Ae.__arabicParser__.arabicLetterHasInitialForm=function(We){return Pe(We)&&Se(We)&&t[We.charCodeAt(0)].length>=3};var Ie=Ae.__arabicParser__.arabicLetterHasMedialForm=function(We){return Pe(We)&&Se(We)&&t[We.charCodeAt(0)].length==4},qe=Ae.__arabicParser__.resolveLigatures=function(We){var Ke=0,Be=St,Ye="",sn=0;for(Ke=0;Ke<We.length;Ke+=1)Be[We.charCodeAt(Ke)]!==void 0?(sn++,typeof(Be=Be[We.charCodeAt(Ke)])=="number"&&(Ye+=String.fromCharCode(Be),Be=St,sn=0),Ke===We.length-1&&(Be=St,Ye+=We.charAt(Ke-(sn-1)),Ke-=sn-1,sn=0)):(Be=St,Ye+=We.charAt(Ke-sn),Ke-=sn,sn=0);return Ye};Ae.__arabicParser__.isArabicDiacritic=function(We){return We!==void 0&&e[We.charCodeAt(0)]!==void 0};var Ge=Ae.__arabicParser__.getCorrectForm=function(We,Ke,Be){return Pe(We)?Se(We)===!1?-1:!Re(We)||!Pe(Ke)&&!Pe(Be)||!Pe(Be)&&Te(Ke)||Te(We)&&!Pe(Ke)||Te(We)&&Ee(Ke)||Te(We)&&Te(Ke)?0:Ie(We)&&Pe(Ke)&&!Te(Ke)&&Pe(Be)&&Re(Be)?3:Te(We)||!Pe(Be)?1:2:-1},Ce=function(We){var Ke=0,Be=0,Ye=0,sn="",rn="",$e="",tn=(We=We||"").split("\\s+"),Ve=[];for(Ke=0;Ke<tn.length;Ke+=1){for(Ve.push(""),Be=0;Be<tn[Ke].length;Be+=1)sn=tn[Ke][Be],rn=tn[Ke][Be-1],$e=tn[Ke][Be+1],Pe(sn)?(Ye=Ge(sn,rn,$e),Ve[Ke]+=Ye!==-1?String.fromCharCode(t[sn.charCodeAt(0)][Ye]):sn):Ve[Ke]+=sn;Ve[Ke]=qe(Ve[Ke])}return Ve.join(" ")},Xe=Ae.__arabicParser__.processArabic=Ae.processArabic=function(){var We,Ke=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,Be=[];if(Array.isArray(Ke)){var Ye=0;for(Be=[],Ye=0;Ye<Ke.length;Ye+=1)Array.isArray(Ke[Ye])?Be.push([Ce(Ke[Ye][0]),Ke[Ye][1],Ke[Ye][2]]):Be.push([Ce(Ke[Ye])]);We=Be}else We=Ce(Ke);return typeof arguments[0]=="string"?We:(arguments[0].text=We,arguments[0])};Ae.events.push(["preProcessText",Xe])}(E.API),E.API.autoPrint=function(Ae){var t;switch((Ae=Ae||{}).variant=Ae.variant||"non-conform",Ae.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(Ae){var t=function(){var St=void 0;Object.defineProperty(this,"pdf",{get:function(){return St},set:function(Te){St=Te}});var e=150;Object.defineProperty(this,"width",{get:function(){return e},set:function(Te){e=isNaN(Te)||Number.isInteger(Te)===!1||Te<0?150:Te,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=e+1)}});var _e=300;Object.defineProperty(this,"height",{get:function(){return _e},set:function(Te){_e=isNaN(Te)||Number.isInteger(Te)===!1||Te<0?300:Te,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=_e+1)}});var Se=[];Object.defineProperty(this,"childNodes",{get:function(){return Se},set:function(Te){Se=Te}});var Pe={};Object.defineProperty(this,"style",{get:function(){return Pe},set:function(Te){Pe=Te}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(St,e){var _e;if((St=St||"2d")!=="2d")return null;for(_e in e)this.pdf.context2d.hasOwnProperty(_e)&&(this.pdf.context2d[_e]=e[_e]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},Ae.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(E.API),function(Ae){var t={left:0,top:0,bottom:0,right:0},St=!1,e=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),_e.call(this))},_e=function(){this.internal.__cell__.lastCell=new Se,this.internal.__cell__.pages=1},Se=function(){var Ee=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ee},set:function(We){Ee=We}});var Re=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Re},set:function(We){Re=We}});var Ie=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return Ie},set:function(We){Ie=We}});var qe=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return qe},set:function(We){qe=We}});var Ge=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Ge},set:function(We){Ge=We}});var Ce=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return Ce},set:function(We){Ce=We}});var Xe=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Xe},set:function(We){Xe=We}}),this};Se.prototype.clone=function(){return new Se(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Se.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},Ae.setHeaderFunction=function(Ee){return e.call(this),this.internal.__cell__.headerFunction=typeof Ee=="function"?Ee:void 0,this},Ae.getTextDimensions=function(Ee,Re){e.call(this);var Ie=(Re=Re||{}).fontSize||this.getFontSize(),qe=Re.font||this.getFont(),Ge=Re.scaleFactor||this.internal.scaleFactor,Ce=0,Xe=0,We=0,Ke=this;if(!Array.isArray(Ee)&&typeof Ee!="string"){if(typeof Ee!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");Ee=String(Ee)}var Be=Re.maxWidth;Be>0?typeof Ee=="string"?Ee=this.splitTextToSize(Ee,Be):Object.prototype.toString.call(Ee)==="[object Array]"&&(Ee=Ee.reduce(function(sn,rn){return sn.concat(Ke.splitTextToSize(rn,Be))},[])):Ee=Array.isArray(Ee)?Ee:[Ee];for(var Ye=0;Ye<Ee.length;Ye++)Ce<(We=this.getStringUnitWidth(Ee[Ye],{font:qe})*Ie)&&(Ce=We);return Ce!==0&&(Xe=Ee.length),{w:Ce/=Ge,h:Math.max((Xe*Ie*this.getLineHeightFactor()-Ie*(this.getLineHeightFactor()-1))/Ge,0)}},Ae.cellAddPage=function(){e.call(this),this.addPage();var Ee=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new Se(Ee.left,Ee.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var Pe=Ae.cell=function(){var Ee;Ee=arguments[0]instanceof Se?arguments[0]:new Se(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),e.call(this);var Re=this.internal.__cell__.lastCell,Ie=this.internal.__cell__.padding,qe=this.internal.__cell__.margins||t,Ge=this.internal.__cell__.tableHeaderRow,Ce=this.internal.__cell__.printHeaders;return Re.lineNumber!==void 0&&(Re.lineNumber===Ee.lineNumber?(Ee.x=(Re.x||0)+(Re.width||0),Ee.y=Re.y||0):Re.y+Re.height+Ee.height+qe.bottom>this.getPageHeight()?(this.cellAddPage(),Ee.y=qe.top,Ce&&Ge&&(this.printHeaderRow(Ee.lineNumber,!0),Ee.y+=Ge[0].height)):Ee.y=Re.y+Re.height||Ee.y),Ee.text[0]!==void 0&&(this.rect(Ee.x,Ee.y,Ee.width,Ee.height,St===!0?"FD":void 0),Ee.align==="right"?this.text(Ee.text,Ee.x+Ee.width-Ie,Ee.y+Ie,{align:"right",baseline:"top"}):Ee.align==="center"?this.text(Ee.text,Ee.x+Ee.width/2,Ee.y+Ie,{align:"center",baseline:"top",maxWidth:Ee.width-Ie-Ie}):this.text(Ee.text,Ee.x+Ie,Ee.y+Ie,{align:"left",baseline:"top",maxWidth:Ee.width-Ie-Ie})),this.internal.__cell__.lastCell=Ee,this};Ae.table=function(Ee,Re,Ie,qe,Ge){if(e.call(this),!Ie)throw new Error("No data for PDF table.");var Ce,Xe,We,Ke,Be=[],Ye=[],sn=[],rn={},$e={},tn=[],Ve=[],ze=(Ge=Ge||{}).autoSize||!1,Qe=Ge.printHeaders!==!1,gn=Ge.css&&Ge.css["font-size"]!==void 0?16*Ge.css["font-size"]:Ge.fontSize||12,Me=Ge.margins||Object.assign({width:this.getPageWidth()},t),Ue=typeof Ge.padding=="number"?Ge.padding:3,en=Ge.headerBackgroundColor||"#c8c8c8",pn=Ge.headerTextColor||"#000";if(_e.call(this),this.internal.__cell__.printHeaders=Qe,this.internal.__cell__.margins=Me,this.internal.__cell__.table_font_size=gn,this.internal.__cell__.padding=Ue,this.internal.__cell__.headerBackgroundColor=en,this.internal.__cell__.headerTextColor=pn,this.setFontSize(gn),qe==null)Ye=Be=Object.keys(Ie[0]),sn=Be.map(function(){return"left"});else if(Array.isArray(qe)&&_typeof(qe[0])==="object")for(Be=qe.map(function(Sn){return Sn.name}),Ye=qe.map(function(Sn){return Sn.prompt||Sn.name||""}),sn=qe.map(function(Sn){return Sn.align||"left"}),Ce=0;Ce<qe.length;Ce+=1)$e[qe[Ce].name]=qe[Ce].width*(19.049976/25.4);else Array.isArray(qe)&&typeof qe[0]=="string"&&(Ye=Be=qe,sn=Be.map(function(){return"left"}));if(ze||Array.isArray(qe)&&typeof qe[0]=="string")for(Ce=0;Ce<Be.length;Ce+=1){for(rn[Ke=Be[Ce]]=Ie.map(function(Sn){return Sn[Ke]}),this.setFont(void 0,"bold"),tn.push(this.getTextDimensions(Ye[Ce],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Xe=rn[Ke],this.setFont(void 0,"normal"),We=0;We<Xe.length;We+=1)tn.push(this.getTextDimensions(Xe[We],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);$e[Ke]=Math.max.apply(null,tn)+Ue+Ue,tn=[]}if(Qe){var An={};for(Ce=0;Ce<Be.length;Ce+=1)An[Be[Ce]]={},An[Be[Ce]].text=Ye[Ce],An[Be[Ce]].align=sn[Ce];var xn=Te.call(this,An,$e);Ve=Be.map(function(Sn){return new Se(Ee,Re,$e[Sn],xn,An[Sn].text,void 0,An[Sn].align)}),this.setTableHeaderRow(Ve),this.printHeaderRow(1,!1)}var _n=qe.reduce(function(Sn,In){return Sn[In.name]=In.align,Sn},{});for(Ce=0;Ce<Ie.length;Ce+=1){"rowStart"in Ge&&Ge.rowStart instanceof Function&&Ge.rowStart({row:Ce,data:Ie[Ce]},this);var En=Te.call(this,Ie[Ce],$e);for(We=0;We<Be.length;We+=1){var hn=Ie[Ce][Be[We]];"cellStart"in Ge&&Ge.cellStart instanceof Function&&Ge.cellStart({row:Ce,col:We,data:hn},this),Pe.call(this,new Se(Ee,Re,$e[Be[We]],En,hn,Ce+2,_n[Be[We]]))}}return this.internal.__cell__.table_x=Ee,this.internal.__cell__.table_y=Re,this};var Te=function(Ee,Re){var Ie=this.internal.__cell__.padding,qe=this.internal.__cell__.table_font_size,Ge=this.internal.scaleFactor;return Object.keys(Ee).map(function(Ce){var Xe=Ee[Ce];return this.splitTextToSize(Xe.hasOwnProperty("text")?Xe.text:Xe,Re[Ce]-Ie-Ie)},this).map(function(Ce){return this.getLineHeightFactor()*Ce.length*qe/Ge+Ie+Ie},this).reduce(function(Ce,Xe){return Math.max(Ce,Xe)},0)};Ae.setTableHeaderRow=function(Ee){e.call(this),this.internal.__cell__.tableHeaderRow=Ee},Ae.printHeaderRow=function(Ee,Re){if(e.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var Ie;if(St=!0,typeof this.internal.__cell__.headerFunction=="function"){var qe=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Se(qe[0],qe[1],qe[2],qe[3],void 0,-1)}this.setFont(void 0,"bold");for(var Ge=[],Ce=0;Ce<this.internal.__cell__.tableHeaderRow.length;Ce+=1){Ie=this.internal.__cell__.tableHeaderRow[Ce].clone(),Re&&(Ie.y=this.internal.__cell__.margins.top||0,Ge.push(Ie)),Ie.lineNumber=Ee;var Xe=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),Pe.call(this,Ie),this.setTextColor(Xe)}Ge.length>0&&this.setTableHeaderRow(Ge),this.setFont(void 0,"normal"),St=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(Ae){var t=Ae.family.replace(/"|'/g,"").toLowerCase(),St=function(Se){return Pt[Se=Se||"normal"]?Se:"normal"}(Ae.style),e=function(Se){if(!Se)return 400;if(typeof Se=="number")return Se>=100&&Se<=900&&Se%100==0?Se:400;if(/^\d00$/.test(Se))return parseInt(Se);switch(Se){case"bold":return 700;case"normal":default:return 400}}(Ae.weight),_e=function(Se){return typeof It[Se=Se||"normal"]=="number"?Se:"normal"}(Ae.stretch);return{family:t,style:St,weight:e,stretch:_e,src:Ae.src||[],ref:Ae.ref||{name:t,style:[_e,St,e].join(" ")}}}function Ot(Ae,t,St,e){var _e;for(_e=St;_e>=0&&_e<t.length;_e+=e)if(Ae[t[_e]])return Ae[t[_e]];for(_e=St;_e>=0&&_e<t.length;_e-=e)if(Ae[t[_e]])return Ae[t[_e]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(Ae){return[Ae.stretch,Ae.style,Ae.weight,Ae.family].join(" ")}function qt(Ae,t,St){for(var e=(St=St||{}).defaultFontFamily||"times",_e=Object.assign({},Bt,St.genericFontFamilies||{}),Se=null,Pe=null,Te=0;Te<t.length;++Te)if(_e[(Se=jt(t[Te])).family]&&(Se.family=_e[Se.family]),Ae.hasOwnProperty(Se.family)){Pe=Ae[Se.family];break}if(!(Pe=Pe||Ae[e]))throw new Error("Could not find a font-family for the rule '"+Et(Se)+"' and default family '"+e+"'.");if(Pe=function(Ee,Re){if(Re[Ee])return Re[Ee];var Ie=It[Ee],qe=Ie<=It.normal?-1:1,Ge=Ot(Re,kt,Ie,qe);if(!Ge)throw new Error("Could not find a matching font-stretch value for "+Ee);return Ge}(Se.stretch,Pe),Pe=function(Ee,Re){if(Re[Ee])return Re[Ee];for(var Ie=Pt[Ee],qe=0;qe<Ie.length;++qe)if(Re[Ie[qe]])return Re[Ie[qe]];throw new Error("Could not find a matching font-style for "+Ee)}(Se.style,Pe),!(Pe=function(Ee,Re){if(Re[Ee])return Re[Ee];if(Ee===400&&Re[500])return Re[500];if(Ee===500&&Re[400])return Re[400];var Ie=Ct[Ee],qe=Ot(Re,Ft,Ie,Ee<400?-1:1);if(!qe)throw new Error("Could not find a matching font-weight for value "+Ee);return qe}(Se.weight,Pe)))throw new Error("Failed to resolve a font for the rule '"+Et(Se)+"'.");return Pe}function Dt(Ae){return Ae.trimLeft()}function Rt(Ae,t){for(var St=0;St<Ae.length;){if(Ae.charAt(St)===t)return[Ae.substring(0,St),Ae.substring(St+1)];St+=1}return null}function Tt(Ae){var t=Ae.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],Ae.substring(t[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(Ae){var t,St,e,_e,Se,Pe,Te,Ee,Re,Ie=function(je){return je=je||{},this.isStrokeTransparent=je.isStrokeTransparent||!1,this.strokeOpacity=je.strokeOpacity||1,this.strokeStyle=je.strokeStyle||"#000000",this.fillStyle=je.fillStyle||"#000000",this.isFillTransparent=je.isFillTransparent||!1,this.fillOpacity=je.fillOpacity||1,this.font=je.font||"10px sans-serif",this.textBaseline=je.textBaseline||"alphabetic",this.textAlign=je.textAlign||"left",this.lineWidth=je.lineWidth||1,this.lineJoin=je.lineJoin||"miter",this.lineCap=je.lineCap||"butt",this.path=je.path||[],this.transform=je.transform!==void 0?je.transform.clone():new Ee,this.globalCompositeOperation=je.globalCompositeOperation||"normal",this.globalAlpha=je.globalAlpha||1,this.clip_path=je.clip_path||[],this.currentPoint=je.currentPoint||new Pe,this.miterLimit=je.miterLimit||10,this.lastPoint=je.lastPoint||new Pe,this.lineDashOffset=je.lineDashOffset||0,this.lineDash=je.lineDash||[],this.margin=je.margin||[0,0,0,0],this.prevPageLastElemOffset=je.prevPageLastElemOffset||0,this.ignoreClearRect=typeof je.ignoreClearRect!="boolean"||je.ignoreClearRect,this};Ae.events.push(["initialized",function(){this.context2d=new qe(this),t=this.internal.f2,St=this.internal.getCoordinateString,e=this.internal.getVerticalCoordinateString,_e=this.internal.getHorizontalCoordinate,Se=this.internal.getVerticalCoordinate,Pe=this.internal.Point,Te=this.internal.Rectangle,Ee=this.internal.Matrix,Re=new Ie}]);var qe=function(je){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Fe=je;Object.defineProperty(this,"pdf",{get:function(){return Fe}});var De=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return De},set:function(Dn){De=!!Dn}});var Je=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Je},set:function(Dn){Je=!!Dn}});var nn=0;Object.defineProperty(this,"posX",{get:function(){return nn},set:function(Dn){isNaN(Dn)||(nn=Dn)}});var an=0;Object.defineProperty(this,"posY",{get:function(){return an},set:function(Dn){isNaN(Dn)||(an=Dn)}}),Object.defineProperty(this,"margin",{get:function(){return Re.margin},set:function(Dn){var cn;typeof Dn=="number"?cn=[Dn,Dn,Dn,Dn]:((cn=new Array(4))[0]=Dn[0],cn[1]=Dn.length>=2?Dn[1]:cn[0],cn[2]=Dn.length>=3?Dn[2]:cn[0],cn[3]=Dn.length>=4?Dn[3]:cn[1]),Re.margin=cn}});var on=!1;Object.defineProperty(this,"autoPaging",{get:function(){return on},set:function(Dn){on=Dn}});var yn=0;Object.defineProperty(this,"lastBreak",{get:function(){return yn},set:function(Dn){yn=Dn}});var Fn=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Fn},set:function(Dn){Fn=Dn}}),Object.defineProperty(this,"ctx",{get:function(){return Re},set:function(Dn){Dn instanceof Ie&&(Re=Dn)}}),Object.defineProperty(this,"path",{get:function(){return Re.path},set:function(Dn){Re.path=Dn}});var On=[];Object.defineProperty(this,"ctxStack",{get:function(){return On},set:function(Dn){On=Dn}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Dn){var cn;cn=Ge(Dn),this.ctx.fillStyle=cn.style,this.ctx.isFillTransparent=cn.a===0,this.ctx.fillOpacity=cn.a,this.pdf.setFillColor(cn.r,cn.g,cn.b,{a:cn.a}),this.pdf.setTextColor(cn.r,cn.g,cn.b,{a:cn.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Dn){var cn=Ge(Dn);this.ctx.strokeStyle=cn.style,this.ctx.isStrokeTransparent=cn.a===0,this.ctx.strokeOpacity=cn.a,cn.a===0?this.pdf.setDrawColor(255,255,255):(cn.a,this.pdf.setDrawColor(cn.r,cn.g,cn.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Dn){["butt","round","square"].indexOf(Dn)!==-1&&(this.ctx.lineCap=Dn,this.pdf.setLineCap(Dn))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Dn){isNaN(Dn)||(this.ctx.lineWidth=Dn,this.pdf.setLineWidth(Dn))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Dn){["bevel","round","miter"].indexOf(Dn)!==-1&&(this.ctx.lineJoin=Dn,this.pdf.setLineJoin(Dn))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Dn){isNaN(Dn)||(this.ctx.miterLimit=Dn,this.pdf.setMiterLimit(Dn))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Dn){this.ctx.textBaseline=Dn}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Dn){["right","end","center","left","start"].indexOf(Dn)!==-1&&(this.ctx.textAlign=Dn)}});var Un=null;function Wn(Dn,cn){if(Un===null){var qn=function(fn){var vn=[];return Object.keys(fn).forEach(function(kn){fn[kn].forEach(function(Rn){var zn=null;switch(Rn){case"bold":zn={family:kn,weight:"bold"};break;case"italic":zn={family:kn,style:"italic"};break;case"bolditalic":zn={family:kn,weight:"bold",style:"italic"};break;case"":case"normal":zn={family:kn}}zn!==null&&(zn.ref={name:kn,style:Rn},vn.push(zn))})}),vn}(Dn.getFontList());Un=function(fn){for(var vn={},kn=0;kn<fn.length;++kn){var Rn=jt(fn[kn]),zn=Rn.family,Qn=Rn.stretch,ii=Rn.style,jn=Rn.weight;vn[zn]=vn[zn]||{},vn[zn][Qn]=vn[zn][Qn]||{},vn[zn][Qn][ii]=vn[zn][Qn][ii]||{},vn[zn][Qn][ii][jn]=Rn}return vn}(qn.concat(cn))}return Un}var ni=null;Object.defineProperty(this,"fontFaces",{get:function(){return ni},set:function(Dn){Un=null,ni=Dn}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Dn){var cn;if(this.ctx.font=Dn,(cn=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Dn))!==null){var qn=cn[1],fn=(cn[2],cn[3]),vn=cn[4],kn=(cn[5],cn[6]),Rn=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(vn)[2];vn=Math.floor(Rn==="px"?parseFloat(vn)*this.pdf.internal.scaleFactor:Rn==="em"?parseFloat(vn)*this.pdf.getFontSize():parseFloat(vn)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(vn);var zn=function(Si){var Ri,hi,Fi=[],Oi=Si.trim();if(Oi==="")return Wt;if(Oi in Mt)return[Mt[Oi]];for(;Oi!=="";){switch(hi=null,Ri=(Oi=Dt(Oi)).charAt(0)){case'"':case"'":hi=Rt(Oi.substring(1),Ri);break;default:hi=Tt(Oi)}if(hi===null||(Fi.push(hi[0]),(Oi=Dt(hi[1]))!==""&&Oi.charAt(0)!==","))return Wt;Oi=Oi.replace(/^,/,"")}return Fi}(kn);if(this.fontFaces){var Qn=qt(Wn(this.pdf,this.fontFaces),zn.map(function(Si){return{family:Si,stretch:"normal",weight:fn,style:qn}}));this.pdf.setFont(Qn.ref.name,Qn.ref.style)}else{var ii="";(fn==="bold"||parseInt(fn,10)>=700||qn==="bold")&&(ii="bold"),qn==="italic"&&(ii+="italic"),ii.length===0&&(ii="normal");for(var jn="",fi={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},di=0;di<zn.length;di++){if(this.pdf.internal.getFont(zn[di],ii,{noFallback:!0,disableWarning:!0})!==void 0){jn=zn[di];break}if(ii==="bolditalic"&&this.pdf.internal.getFont(zn[di],"bold",{noFallback:!0,disableWarning:!0})!==void 0)jn=zn[di],ii="bold";else if(this.pdf.internal.getFont(zn[di],"normal",{noFallback:!0,disableWarning:!0})!==void 0){jn=zn[di],ii="normal";break}}if(jn===""){for(var Ii=0;Ii<zn.length;Ii++)if(fi[zn[Ii]]){jn=fi[zn[Ii]];break}}jn=jn===""?"Times":jn,this.pdf.setFont(jn,ii)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Dn){this.ctx.globalCompositeOperation=Dn}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Dn){this.ctx.globalAlpha=Dn}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Dn){this.ctx.lineDashOffset=Dn,In.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Dn){this.ctx.lineDash=Dn,In.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Dn){this.ctx.ignoreClearRect=!!Dn}})};qe.prototype.setLineDash=function(je){this.lineDash=je},qe.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},qe.prototype.fill=function(){rn.call(this,"fill",!1)},qe.prototype.stroke=function(){rn.call(this,"stroke",!1)},qe.prototype.beginPath=function(){this.path=[{type:"begin"}]},qe.prototype.moveTo=function(je,Fe){if(isNaN(je)||isNaN(Fe))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var De=this.ctx.transform.applyToPoint(new Pe(je,Fe));this.path.push({type:"mt",x:De.x,y:De.y}),this.ctx.lastPoint=new Pe(je,Fe)},qe.prototype.closePath=function(){var je=new Pe(0,0),Fe=0;for(Fe=this.path.length-1;Fe!==-1;Fe--)if(this.path[Fe].type==="begin"&&_typeof(this.path[Fe+1])==="object"&&typeof this.path[Fe+1].x=="number"){je=new Pe(this.path[Fe+1].x,this.path[Fe+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new Pe(je.x,je.y)},qe.prototype.lineTo=function(je,Fe){if(isNaN(je)||isNaN(Fe))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var De=this.ctx.transform.applyToPoint(new Pe(je,Fe));this.path.push({type:"lt",x:De.x,y:De.y}),this.ctx.lastPoint=new Pe(De.x,De.y)},qe.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),rn.call(this,null,!0)},qe.prototype.quadraticCurveTo=function(je,Fe,De,Je){if(isNaN(De)||isNaN(Je)||isNaN(je)||isNaN(Fe))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var nn=this.ctx.transform.applyToPoint(new Pe(De,Je)),an=this.ctx.transform.applyToPoint(new Pe(je,Fe));this.path.push({type:"qct",x1:an.x,y1:an.y,x:nn.x,y:nn.y}),this.ctx.lastPoint=new Pe(nn.x,nn.y)},qe.prototype.bezierCurveTo=function(je,Fe,De,Je,nn,an){if(isNaN(nn)||isNaN(an)||isNaN(je)||isNaN(Fe)||isNaN(De)||isNaN(Je))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var on=this.ctx.transform.applyToPoint(new Pe(nn,an)),yn=this.ctx.transform.applyToPoint(new Pe(je,Fe)),Fn=this.ctx.transform.applyToPoint(new Pe(De,Je));this.path.push({type:"bct",x1:yn.x,y1:yn.y,x2:Fn.x,y2:Fn.y,x:on.x,y:on.y}),this.ctx.lastPoint=new Pe(on.x,on.y)},qe.prototype.arc=function(je,Fe,De,Je,nn,an){if(isNaN(je)||isNaN(Fe)||isNaN(De)||isNaN(Je)||isNaN(nn))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(an=!!an,!this.ctx.transform.isIdentity){var on=this.ctx.transform.applyToPoint(new Pe(je,Fe));je=on.x,Fe=on.y;var yn=this.ctx.transform.applyToPoint(new Pe(0,De)),Fn=this.ctx.transform.applyToPoint(new Pe(0,0));De=Math.sqrt(Math.pow(yn.x-Fn.x,2)+Math.pow(yn.y-Fn.y,2))}Math.abs(nn-Je)>=2*Math.PI&&(Je=0,nn=2*Math.PI),this.path.push({type:"arc",x:je,y:Fe,radius:De,startAngle:Je,endAngle:nn,counterclockwise:an})},qe.prototype.arcTo=function(je,Fe,De,Je,nn){throw new Error("arcTo not implemented.")},qe.prototype.rect=function(je,Fe,De,Je){if(isNaN(je)||isNaN(Fe)||isNaN(De)||isNaN(Je))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(je,Fe),this.lineTo(je+De,Fe),this.lineTo(je+De,Fe+Je),this.lineTo(je,Fe+Je),this.lineTo(je,Fe),this.lineTo(je+De,Fe),this.lineTo(je,Fe)},qe.prototype.fillRect=function(je,Fe,De,Je){if(isNaN(je)||isNaN(Fe)||isNaN(De)||isNaN(Je))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!Ce.call(this)){var nn={};this.lineCap!=="butt"&&(nn.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(nn.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(je,Fe,De,Je),this.fill(),nn.hasOwnProperty("lineCap")&&(this.lineCap=nn.lineCap),nn.hasOwnProperty("lineJoin")&&(this.lineJoin=nn.lineJoin)}},qe.prototype.strokeRect=function(je,Fe,De,Je){if(isNaN(je)||isNaN(Fe)||isNaN(De)||isNaN(Je))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Xe.call(this)||(this.beginPath(),this.rect(je,Fe,De,Je),this.stroke())},qe.prototype.clearRect=function(je,Fe,De,Je){if(isNaN(je)||isNaN(Fe)||isNaN(De)||isNaN(Je))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(je,Fe,De,Je))},qe.prototype.save=function(je){je=typeof je!="boolean"||je;for(var Fe=this.pdf.internal.getCurrentPageInfo().pageNumber,De=0;De<this.pdf.internal.getNumberOfPages();De++)this.pdf.setPage(De+1),this.pdf.internal.out("q");if(this.pdf.setPage(Fe),je){this.ctx.fontSize=this.pdf.internal.getFontSize();var Je=new Ie(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Je}},qe.prototype.restore=function(je){je=typeof je!="boolean"||je;for(var Fe=this.pdf.internal.getCurrentPageInfo().pageNumber,De=0;De<this.pdf.internal.getNumberOfPages();De++)this.pdf.setPage(De+1),this.pdf.internal.out("Q");this.pdf.setPage(Fe),je&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},qe.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Ge=function(je){var Fe,De,Je,nn;if(je.isCanvasGradient===!0&&(je=je.getColor()),!je)return{r:0,g:0,b:0,a:0,style:je};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(je))Fe=0,De=0,Je=0,nn=0;else{var an=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(je);if(an!==null)Fe=parseInt(an[1]),De=parseInt(an[2]),Je=parseInt(an[3]),nn=1;else if((an=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(je))!==null)Fe=parseInt(an[1]),De=parseInt(an[2]),Je=parseInt(an[3]),nn=parseFloat(an[4]);else{if(nn=1,typeof je=="string"&&je.charAt(0)!=="#"){var on=new f(je);je=on.ok?on.toHex():"#000000"}je.length===4?(Fe=je.substring(1,2),Fe+=Fe,De=je.substring(2,3),De+=De,Je=je.substring(3,4),Je+=Je):(Fe=je.substring(1,3),De=je.substring(3,5),Je=je.substring(5,7)),Fe=parseInt(Fe,16),De=parseInt(De,16),Je=parseInt(Je,16)}}return{r:Fe,g:De,b:Je,a:nn,style:je}},Ce=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Xe=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};qe.prototype.fillText=function(je,Fe,De,Je){if(isNaN(Fe)||isNaN(De)||typeof je!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Je=isNaN(Je)?void 0:Je,!Ce.call(this)){var nn=En(this.ctx.transform.rotation),an=this.ctx.transform.scaleX;Ue.call(this,{text:je,x:Fe,y:De,scale:an,angle:nn,align:this.textAlign,maxWidth:Je})}},qe.prototype.strokeText=function(je,Fe,De,Je){if(isNaN(Fe)||isNaN(De)||typeof je!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Xe.call(this)){Je=isNaN(Je)?void 0:Je;var nn=En(this.ctx.transform.rotation),an=this.ctx.transform.scaleX;Ue.call(this,{text:je,x:Fe,y:De,scale:an,renderingMode:"stroke",angle:nn,align:this.textAlign,maxWidth:Je})}},qe.prototype.measureText=function(je){if(typeof je!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Fe=this.pdf,De=this.pdf.internal.scaleFactor,Je=Fe.internal.getFontSize(),nn=Fe.getStringUnitWidth(je)*Je/Fe.internal.scaleFactor,an=function(on){var yn=(on=on||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return yn}}),this};return new an({width:nn*=Math.round(96*De/72*1e4)/1e4})},qe.prototype.scale=function(je,Fe){if(isNaN(je)||isNaN(Fe))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var De=new Ee(je,0,0,Fe,0,0);this.ctx.transform=this.ctx.transform.multiply(De)},qe.prototype.rotate=function(je){if(isNaN(je))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Fe=new Ee(Math.cos(je),Math.sin(je),-Math.sin(je),Math.cos(je),0,0);this.ctx.transform=this.ctx.transform.multiply(Fe)},qe.prototype.translate=function(je,Fe){if(isNaN(je)||isNaN(Fe))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var De=new Ee(1,0,0,1,je,Fe);this.ctx.transform=this.ctx.transform.multiply(De)},qe.prototype.transform=function(je,Fe,De,Je,nn,an){if(isNaN(je)||isNaN(Fe)||isNaN(De)||isNaN(Je)||isNaN(nn)||isNaN(an))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var on=new Ee(je,Fe,De,Je,nn,an);this.ctx.transform=this.ctx.transform.multiply(on)},qe.prototype.setTransform=function(je,Fe,De,Je,nn,an){je=isNaN(je)?1:je,Fe=isNaN(Fe)?0:Fe,De=isNaN(De)?0:De,Je=isNaN(Je)?1:Je,nn=isNaN(nn)?0:nn,an=isNaN(an)?0:an,this.ctx.transform=new Ee(je,Fe,De,Je,nn,an)};var We=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};qe.prototype.drawImage=function(je,Fe,De,Je,nn,an,on,yn,Fn){var On=this.pdf.getImageProperties(je),Un=1,Wn=1,ni=1,Dn=1;Je!==void 0&&yn!==void 0&&(ni=yn/Je,Dn=Fn/nn,Un=On.width/Je*yn/Je,Wn=On.height/nn*Fn/nn),an===void 0&&(an=Fe,on=De,Fe=0,De=0),Je!==void 0&&yn===void 0&&(yn=Je,Fn=nn),Je===void 0&&yn===void 0&&(yn=On.width,Fn=On.height);for(var cn,qn=this.ctx.transform.decompose(),fn=En(qn.rotate.shx),vn=new Ee,kn=(vn=(vn=(vn=vn.multiply(qn.translate)).multiply(qn.skew)).multiply(qn.scale)).applyToRectangle(new Te(an-Fe*ni,on-De*Dn,Je*Un,nn*Wn)),Rn=Ke.call(this,kn),zn=[],Qn=0;Qn<Rn.length;Qn+=1)zn.indexOf(Rn[Qn])===-1&&zn.push(Rn[Qn]);if(sn(zn),this.autoPaging)for(var ii=zn[0],jn=zn[zn.length-1],fi=ii;fi<jn+1;fi++){this.pdf.setPage(fi);var di=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ii=fi===1?this.posY+this.margin[0]:this.margin[0],Si=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ri=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],hi=fi===1?0:Si+(fi-2)*Ri;if(this.ctx.clip_path.length!==0){var Fi=this.path;cn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ye(cn,this.posX+this.margin[3],-hi+Ii+this.ctx.prevPageLastElemOffset),$e.call(this,"fill",!0),this.path=Fi}var Oi=JSON.parse(JSON.stringify(kn));Oi=Ye([Oi],this.posX+this.margin[3],-hi+Ii+this.ctx.prevPageLastElemOffset)[0];var Yi=(fi>ii||fi<jn)&&We.call(this);Yi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],di,Ri,null).clip().discardPath()),this.pdf.addImage(je,"JPEG",Oi.x,Oi.y,Oi.w,Oi.h,null,null,fn),Yi&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(je,"JPEG",kn.x,kn.y,kn.w,kn.h,null,null,fn)};var Ke=function(je,Fe,De){var Je=[];Fe=Fe||this.pdf.internal.pageSize.width,De=De||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var nn=this.posY+this.ctx.prevPageLastElemOffset;switch(je.type){default:case"mt":case"lt":Je.push(Math.floor((je.y+nn)/De)+1);break;case"arc":Je.push(Math.floor((je.y+nn-je.radius)/De)+1),Je.push(Math.floor((je.y+nn+je.radius)/De)+1);break;case"qct":var an=hn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,je.x1,je.y1,je.x,je.y);Je.push(Math.floor((an.y+nn)/De)+1),Je.push(Math.floor((an.y+an.h+nn)/De)+1);break;case"bct":var on=Sn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,je.x1,je.y1,je.x2,je.y2,je.x,je.y);Je.push(Math.floor((on.y+nn)/De)+1),Je.push(Math.floor((on.y+on.h+nn)/De)+1);break;case"rect":Je.push(Math.floor((je.y+nn)/De)+1),Je.push(Math.floor((je.y+je.h+nn)/De)+1)}for(var yn=0;yn<Je.length;yn+=1)for(;this.pdf.internal.getNumberOfPages()<Je[yn];)Be.call(this);return Je},Be=function(){var je=this.fillStyle,Fe=this.strokeStyle,De=this.font,Je=this.lineCap,nn=this.lineWidth,an=this.lineJoin;this.pdf.addPage(),this.fillStyle=je,this.strokeStyle=Fe,this.font=De,this.lineCap=Je,this.lineWidth=nn,this.lineJoin=an},Ye=function(je,Fe,De){for(var Je=0;Je<je.length;Je++)switch(je[Je].type){case"bct":je[Je].x2+=Fe,je[Je].y2+=De;case"qct":je[Je].x1+=Fe,je[Je].y1+=De;case"mt":case"lt":case"arc":default:je[Je].x+=Fe,je[Je].y+=De}return je},sn=function(je){return je.sort(function(Fe,De){return Fe-De})},rn=function(je,Fe){for(var De,Je,nn=this.fillStyle,an=this.strokeStyle,on=this.lineCap,yn=this.lineWidth,Fn=Math.abs(yn*this.ctx.transform.scaleX),On=this.lineJoin,Un=JSON.parse(JSON.stringify(this.path)),Wn=JSON.parse(JSON.stringify(this.path)),ni=[],Dn=0;Dn<Wn.length;Dn++)if(Wn[Dn].x!==void 0)for(var cn=Ke.call(this,Wn[Dn]),qn=0;qn<cn.length;qn+=1)ni.indexOf(cn[qn])===-1&&ni.push(cn[qn]);for(var fn=0;fn<ni.length;fn++)for(;this.pdf.internal.getNumberOfPages()<ni[fn];)Be.call(this);if(sn(ni),this.autoPaging)for(var vn=ni[0],kn=ni[ni.length-1],Rn=vn;Rn<kn+1;Rn++){this.pdf.setPage(Rn),this.fillStyle=nn,this.strokeStyle=an,this.lineCap=on,this.lineWidth=Fn,this.lineJoin=On;var zn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qn=Rn===1?this.posY+this.margin[0]:this.margin[0],ii=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],fi=Rn===1?0:ii+(Rn-2)*jn;if(this.ctx.clip_path.length!==0){var di=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ye(De,this.posX+this.margin[3],-fi+Qn+this.ctx.prevPageLastElemOffset),$e.call(this,je,!0),this.path=di}if(Je=JSON.parse(JSON.stringify(Un)),this.path=Ye(Je,this.posX+this.margin[3],-fi+Qn+this.ctx.prevPageLastElemOffset),Fe===!1||Rn===0){var Ii=(Rn>vn||Rn<kn)&&We.call(this);Ii&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zn,jn,null).clip().discardPath()),$e.call(this,je,Fe),Ii&&this.pdf.restoreGraphicsState()}this.lineWidth=yn}else this.lineWidth=Fn,$e.call(this,je,Fe),this.lineWidth=yn;this.path=Un},$e=function(je,Fe){if((je!=="stroke"||Fe||!Xe.call(this))&&(je==="stroke"||Fe||!Ce.call(this))){for(var De,Je,nn=[],an=this.path,on=0;on<an.length;on++){var yn=an[on];switch(yn.type){case"begin":nn.push({begin:!0});break;case"close":nn.push({close:!0});break;case"mt":nn.push({start:yn,deltas:[],abs:[]});break;case"lt":var Fn=nn.length;if(an[on-1]&&!isNaN(an[on-1].x)&&(De=[yn.x-an[on-1].x,yn.y-an[on-1].y],Fn>0)){for(;Fn>=0;Fn--)if(nn[Fn-1].close!==!0&&nn[Fn-1].begin!==!0){nn[Fn-1].deltas.push(De),nn[Fn-1].abs.push(yn);break}}break;case"bct":De=[yn.x1-an[on-1].x,yn.y1-an[on-1].y,yn.x2-an[on-1].x,yn.y2-an[on-1].y,yn.x-an[on-1].x,yn.y-an[on-1].y],nn[nn.length-1].deltas.push(De);break;case"qct":var On=an[on-1].x+2/3*(yn.x1-an[on-1].x),Un=an[on-1].y+2/3*(yn.y1-an[on-1].y),Wn=yn.x+2/3*(yn.x1-yn.x),ni=yn.y+2/3*(yn.y1-yn.y),Dn=yn.x,cn=yn.y;De=[On-an[on-1].x,Un-an[on-1].y,Wn-an[on-1].x,ni-an[on-1].y,Dn-an[on-1].x,cn-an[on-1].y],nn[nn.length-1].deltas.push(De);break;case"arc":nn.push({deltas:[],abs:[],arc:!0}),Array.isArray(nn[nn.length-1].abs)&&nn[nn.length-1].abs.push(yn)}}Je=Fe?null:je==="stroke"?"stroke":"fill";for(var qn=!1,fn=0;fn<nn.length;fn++)if(nn[fn].arc)for(var vn=nn[fn].abs,kn=0;kn<vn.length;kn++){var Rn=vn[kn];Rn.type==="arc"?ze.call(this,Rn.x,Rn.y,Rn.radius,Rn.startAngle,Rn.endAngle,Rn.counterclockwise,void 0,Fe,!qn):en.call(this,Rn.x,Rn.y),qn=!0}else if(nn[fn].close===!0)this.pdf.internal.out("h"),qn=!1;else if(nn[fn].begin!==!0){var zn=nn[fn].start.x,Qn=nn[fn].start.y;pn.call(this,nn[fn].deltas,zn,Qn),qn=!0}Je&&Qe.call(this,Je),Fe&&gn.call(this)}},tn=function(je){var Fe=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,De=Fe*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return je-De;case"top":return je+Fe-De;case"hanging":return je+Fe-2*De;case"middle":return je+Fe/2-De;case"ideographic":return je;case"alphabetic":default:return je}},Ve=function(je){return je+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};qe.prototype.createLinearGradient=function(){var je=function(){};return je.colorStops=[],je.addColorStop=function(Fe,De){this.colorStops.push([Fe,De])},je.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},je.isCanvasGradient=!0,je},qe.prototype.createPattern=function(){return this.createLinearGradient()},qe.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ze=function(je,Fe,De,Je,nn,an,on,yn,Fn){for(var On=xn.call(this,De,Je,nn,an),Un=0;Un<On.length;Un++){var Wn=On[Un];Un===0&&(Fn?Me.call(this,Wn.x1+je,Wn.y1+Fe):en.call(this,Wn.x1+je,Wn.y1+Fe)),An.call(this,je,Fe,Wn.x2,Wn.y2,Wn.x3,Wn.y3,Wn.x4,Wn.y4)}yn?gn.call(this):Qe.call(this,on)},Qe=function(je){switch(je){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},gn=function(){this.pdf.clip(),this.pdf.discardPath()},Me=function(je,Fe){this.pdf.internal.out(St(je)+" "+e(Fe)+" m")},Ue=function(je){var Fe;switch(je.align){case"right":case"end":Fe="right";break;case"center":Fe="center";break;case"left":case"start":default:Fe="left"}var De=this.pdf.getTextDimensions(je.text),Je=tn.call(this,je.y),nn=Ve.call(this,Je)-De.h,an=this.ctx.transform.applyToPoint(new Pe(je.x,Je)),on=this.ctx.transform.decompose(),yn=new Ee;yn=(yn=(yn=yn.multiply(on.translate)).multiply(on.skew)).multiply(on.scale);for(var Fn,On,Un,Wn=this.ctx.transform.applyToRectangle(new Te(je.x,Je,De.w,De.h)),ni=yn.applyToRectangle(new Te(je.x,nn,De.w,De.h)),Dn=Ke.call(this,ni),cn=[],qn=0;qn<Dn.length;qn+=1)cn.indexOf(Dn[qn])===-1&&cn.push(Dn[qn]);if(sn(cn),this.autoPaging)for(var fn=cn[0],vn=cn[cn.length-1],kn=fn;kn<vn+1;kn++){this.pdf.setPage(kn);var Rn=kn===1?this.posY+this.margin[0]:this.margin[0],zn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qn=this.pdf.internal.pageSize.height-this.margin[2],ii=Qn-this.margin[0],jn=this.pdf.internal.pageSize.width-this.margin[1],fi=jn-this.margin[3],di=kn===1?0:zn+(kn-2)*ii;if(this.ctx.clip_path.length!==0){var Ii=this.path;Fn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ye(Fn,this.posX+this.margin[3],-1*di+Rn),$e.call(this,"fill",!0),this.path=Ii}var Si=Ye([JSON.parse(JSON.stringify(ni))],this.posX+this.margin[3],-di+Rn+this.ctx.prevPageLastElemOffset)[0];je.scale>=.01&&(On=this.pdf.internal.getFontSize(),this.pdf.setFontSize(On*je.scale),Un=this.lineWidth,this.lineWidth=Un*je.scale);var Ri=this.autoPaging!=="text";if(Ri||Si.y+Si.h<=Qn){if(Ri||Si.y>=Rn&&Si.x<=jn){var hi=Ri?je.text:this.pdf.splitTextToSize(je.text,je.maxWidth||jn-Si.x)[0],Fi=Ye([JSON.parse(JSON.stringify(Wn))],this.posX+this.margin[3],-di+Rn+this.ctx.prevPageLastElemOffset)[0],Oi=Ri&&(kn>fn||kn<vn)&&We.call(this);Oi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],fi,ii,null).clip().discardPath()),this.pdf.text(hi,Fi.x,Fi.y,{angle:je.angle,align:Fe,renderingMode:je.renderingMode}),Oi&&this.pdf.restoreGraphicsState()}}else Si.y<Qn&&(this.ctx.prevPageLastElemOffset+=Qn-Si.y);je.scale>=.01&&(this.pdf.setFontSize(On),this.lineWidth=Un)}else je.scale>=.01&&(On=this.pdf.internal.getFontSize(),this.pdf.setFontSize(On*je.scale),Un=this.lineWidth,this.lineWidth=Un*je.scale),this.pdf.text(je.text,an.x+this.posX,an.y+this.posY,{angle:je.angle,align:Fe,renderingMode:je.renderingMode,maxWidth:je.maxWidth}),je.scale>=.01&&(this.pdf.setFontSize(On),this.lineWidth=Un)},en=function(je,Fe,De,Je){De=De||0,Je=Je||0,this.pdf.internal.out(St(je+De)+" "+e(Fe+Je)+" l")},pn=function(je,Fe,De){return this.pdf.lines(je,Fe,De,null,null)},An=function(je,Fe,De,Je,nn,an,on,yn){this.pdf.internal.out([t(_e(De+je)),t(Se(Je+Fe)),t(_e(nn+je)),t(Se(an+Fe)),t(_e(on+je)),t(Se(yn+Fe)),"c"].join(" "))},xn=function(je,Fe,De,Je){for(var nn=2*Math.PI,an=Math.PI/2;Fe>De;)Fe-=nn;var on=Math.abs(De-Fe);on<nn&&Je&&(on=nn-on);for(var yn=[],Fn=Je?-1:1,On=Fe;on>1e-5;){var Un=On+Fn*Math.min(on,an);yn.push(_n.call(this,je,On,Un)),on-=Math.abs(Un-On),On=Un}return yn},_n=function(je,Fe,De){var Je=(De-Fe)/2,nn=je*Math.cos(Je),an=je*Math.sin(Je),on=nn,yn=-an,Fn=on*on+yn*yn,On=Fn+on*nn+yn*an,Un=4/3*(Math.sqrt(2*Fn*On)-On)/(on*an-yn*nn),Wn=on-Un*yn,ni=yn+Un*on,Dn=Wn,cn=-ni,qn=Je+Fe,fn=Math.cos(qn),vn=Math.sin(qn);return{x1:je*Math.cos(Fe),y1:je*Math.sin(Fe),x2:Wn*fn-ni*vn,y2:Wn*vn+ni*fn,x3:Dn*fn-cn*vn,y3:Dn*vn+cn*fn,x4:je*Math.cos(De),y4:je*Math.sin(De)}},En=function(je){return 180*je/Math.PI},hn=function(je,Fe,De,Je,nn,an){var on=je+.5*(De-je),yn=Fe+.5*(Je-Fe),Fn=nn+.5*(De-nn),On=an+.5*(Je-an),Un=Math.min(je,nn,on,Fn),Wn=Math.max(je,nn,on,Fn),ni=Math.min(Fe,an,yn,On),Dn=Math.max(Fe,an,yn,On);return new Te(Un,ni,Wn-Un,Dn-ni)},Sn=function(je,Fe,De,Je,nn,an,on,yn){var Fn,On,Un,Wn,ni,Dn,cn,qn,fn,vn,kn,Rn,zn,Qn,ii=De-je,jn=Je-Fe,fi=nn-De,di=an-Je,Ii=on-nn,Si=yn-an;for(On=0;On<41;On++)fn=(cn=(Un=je+(Fn=On/40)*ii)+Fn*((ni=De+Fn*fi)-Un))+Fn*(ni+Fn*(nn+Fn*Ii-ni)-cn),vn=(qn=(Wn=Fe+Fn*jn)+Fn*((Dn=Je+Fn*di)-Wn))+Fn*(Dn+Fn*(an+Fn*Si-Dn)-qn),On==0?(kn=fn,Rn=vn,zn=fn,Qn=vn):(kn=Math.min(kn,fn),Rn=Math.min(Rn,vn),zn=Math.max(zn,fn),Qn=Math.max(Qn,vn));return new Te(Math.round(kn),Math.round(Rn),Math.round(zn-kn),Math.round(Qn-Rn))},In=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var je,Fe,De=(je=this.ctx.lineDash,Fe=this.ctx.lineDashOffset,JSON.stringify({lineDash:je,lineDashOffset:Fe}));this.prevLineDash!==De&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=De)}}})(E.API),function(Ae){var t=function(Se){var Pe,Te,Ee,Re,Ie,qe,Ge,Ce,Xe,We;for(Te=[],Ee=0,Re=(Se+=Pe="\0\0\0\0".slice(Se.length%4||4)).length;Re>Ee;Ee+=4)(Ie=(Se.charCodeAt(Ee)<<24)+(Se.charCodeAt(Ee+1)<<16)+(Se.charCodeAt(Ee+2)<<8)+Se.charCodeAt(Ee+3))!==0?(qe=(Ie=((Ie=((Ie=((Ie=(Ie-(We=Ie%85))/85)-(Xe=Ie%85))/85)-(Ce=Ie%85))/85)-(Ge=Ie%85))/85)%85,Te.push(qe+33,Ge+33,Ce+33,Xe+33,We+33)):Te.push(122);return function(Ke,Be){for(var Ye=Be;Ye>0;Ye--)Ke.pop()}(Te,Pe.length),String.fromCharCode.apply(String,Te)+"~>"},St=function(Se){var Pe,Te,Ee,Re,Ie,qe=String,Ge="length",Ce=255,Xe="charCodeAt",We="slice",Ke="replace";for(Se[We](-2),Se=Se[We](0,-2)[Ke](/\s/g,"")[Ke]("z","!!!!!"),Ee=[],Re=0,Ie=(Se+=Pe="uuuuu"[We](Se[Ge]%5||5))[Ge];Ie>Re;Re+=5)Te=52200625*(Se[Xe](Re)-33)+614125*(Se[Xe](Re+1)-33)+7225*(Se[Xe](Re+2)-33)+85*(Se[Xe](Re+3)-33)+(Se[Xe](Re+4)-33),Ee.push(Ce&Te>>24,Ce&Te>>16,Ce&Te>>8,Ce&Te);return function(Be,Ye){for(var sn=Ye;sn>0;sn--)Be.pop()}(Ee,Pe[Ge]),qe.fromCharCode.apply(qe,Ee)},e=function(Se){var Pe=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Se=Se.replace(/\s/g,"")).indexOf(">")!==-1&&(Se=Se.substr(0,Se.indexOf(">"))),Se.length%2&&(Se+="0"),Pe.test(Se)===!1)return"";for(var Te="",Ee=0;Ee<Se.length;Ee+=2)Te+=String.fromCharCode("0x"+(Se[Ee]+Se[Ee+1]));return Te},_e=function(Se){for(var Pe=new Uint8Array(Se.length),Te=Se.length;Te--;)Pe[Te]=Se.charCodeAt(Te);return Se=(Pe=zlibSync(Pe)).reduce(function(Ee,Re){return Ee+String.fromCharCode(Re)},"")};Ae.processDataByFilters=function(Se,Pe){var Te=0,Ee=Se||"",Re=[];for(typeof(Pe=Pe||[])=="string"&&(Pe=[Pe]),Te=0;Te<Pe.length;Te+=1)switch(Pe[Te]){case"ASCII85Decode":case"/ASCII85Decode":Ee=St(Ee),Re.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":Ee=t(Ee),Re.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":Ee=e(Ee),Re.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":Ee=Ee.split("").map(function(Ie){return("0"+Ie.charCodeAt().toString(16)).slice(-2)}).join("")+">",Re.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":Ee=_e(Ee),Re.push("/FlateDecode");break;default:throw new Error('The filter: "'+Pe[Te]+'" is not implemented')}return{data:Ee,reverseChain:Re.reverse().join(" ")}}}(E.API),function(Ae){Ae.loadFile=function(t,St,e){return function(_e,Se,Pe){Se=Se!==!1,Pe=typeof Pe=="function"?Pe:function(){};var Te=void 0;try{Te=function(Ee,Re,Ie){var qe=new XMLHttpRequest,Ge=0,Ce=function(Xe){var We=Xe.length,Ke=[],Be=String.fromCharCode;for(Ge=0;Ge<We;Ge+=1)Ke.push(Be(255&Xe.charCodeAt(Ge)));return Ke.join("")};if(qe.open("GET",Ee,!Re),qe.overrideMimeType("text/plain; charset=x-user-defined"),Re===!1&&(qe.onload=function(){qe.status===200?Ie(Ce(this.responseText)):Ie(void 0)}),qe.send(null),Re&&qe.status===200)return Ce(qe.responseText)}(_e,Se,Pe)}catch{}return Te}(t,St,e)},Ae.loadImageFile=Ae.loadFile}(E.API),function(Ae){function t(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(Pe){return Promise.reject(new Error("Could not load html2canvas: "+Pe))}).then(function(Pe){return Pe.default?Pe.default:Pe})}function St(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(Pe){return Promise.reject(new Error("Could not load dompurify: "+Pe))}).then(function(Pe){return Pe.default?Pe.default:Pe})}var e=function(Pe){var Te=_typeof(Pe);return Te==="undefined"?"undefined":Te==="string"||Pe instanceof String?"string":Te==="number"||Pe instanceof Number?"number":Te==="function"||Pe instanceof Function?"function":Pe&&Pe.constructor===Array?"array":Pe&&Pe.nodeType===1?"element":Te==="object"?"object":"unknown"},_e=function(Pe,Te){var Ee=document.createElement(Pe);for(var Re in Te.className&&(Ee.className=Te.className),Te.innerHTML&&Te.dompurify&&(Ee.innerHTML=Te.dompurify.sanitize(Te.innerHTML)),Te.style)Ee.style[Re]=Te.style[Re];return Ee},Se=function Pe(Te){var Ee=Object.assign(Pe.convert(Promise.resolve()),JSON.parse(JSON.stringify(Pe.template))),Re=Pe.convert(Promise.resolve(),Ee);return Re=(Re=Re.setProgress(1,Pe,1,[Pe])).set(Te)};(Se.prototype=Object.create(Promise.prototype)).constructor=Se,Se.convert=function(Pe,Te){return Pe.__proto__=Te||Se.prototype,Pe},Se.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Se.prototype.from=function(Pe,Te){return this.then(function(){switch(Te=Te||function(Ee){switch(e(Ee)){case"string":return"string";case"element":return Ee.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(Pe)){case"string":return this.then(St).then(function(Ee){return this.set({src:_e("div",{innerHTML:Pe,dompurify:Ee})})});case"element":return this.set({src:Pe});case"canvas":return this.set({canvas:Pe});case"img":return this.set({img:Pe});default:return this.error("Unknown source type.")}})},Se.prototype.to=function(Pe){switch(Pe){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Se.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var Pe={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},Te=function Ee(Re,Ie){for(var qe=Re.nodeType===3?document.createTextNode(Re.nodeValue):Re.cloneNode(!1),Ge=Re.firstChild;Ge;Ge=Ge.nextSibling)Ie!==!0&&Ge.nodeType===1&&Ge.nodeName==="SCRIPT"||qe.appendChild(Ee(Ge,Ie));return Re.nodeType===1&&(Re.nodeName==="CANVAS"?(qe.width=Re.width,qe.height=Re.height,qe.getContext("2d").drawImage(Re,0,0)):Re.nodeName!=="TEXTAREA"&&Re.nodeName!=="SELECT"||(qe.value=Re.value),qe.addEventListener("load",function(){qe.scrollTop=Re.scrollTop,qe.scrollLeft=Re.scrollLeft},!0)),qe}(this.prop.src,this.opt.html2canvas.javascriptEnabled);Te.tagName==="BODY"&&(Pe.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=_e("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=_e("div",{className:"html2pdf__container",style:Pe}),this.prop.container.appendChild(Te),this.prop.container.firstChild.appendChild(_e("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},Se.prototype.toCanvas=function(){var Pe=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Pe).then(t).then(function(Te){var Ee=Object.assign({},this.opt.html2canvas);return delete Ee.onrendered,Te(this.prop.container,Ee)}).then(function(Te){(this.opt.html2canvas.onrendered||function(){})(Te),this.prop.canvas=Te,document.body.removeChild(this.prop.overlay)})},Se.prototype.toContext2d=function(){var Pe=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Pe).then(t).then(function(Te){var Ee=this.opt.jsPDF,Re=this.opt.fontFaces,Ie=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,qe=Object.assign({async:!0,allowTaint:!0,scale:Ie,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete qe.onrendered,Ee.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,Ee.context2d.posX=this.opt.x,Ee.context2d.posY=this.opt.y,Ee.context2d.margin=this.opt.margin,Ee.context2d.fontFaces=Re,Re)for(var Ge=0;Ge<Re.length;++Ge){var Ce=Re[Ge],Xe=Ce.src.find(function(We){return We.format==="truetype"});Xe&&Ee.addFont(Xe.url,Ce.ref.name,Ce.ref.style)}return qe.windowHeight=qe.windowHeight||0,qe.windowHeight=qe.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):qe.windowHeight,Ee.context2d.save(!0),Te(this.prop.container,qe)}).then(function(Te){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(Te),this.prop.canvas=Te,document.body.removeChild(this.prop.overlay)})},Se.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var Pe=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Pe})},Se.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},Se.prototype.output=function(Pe,Te,Ee){return(Ee=Ee||"pdf").toLowerCase()==="img"||Ee.toLowerCase()==="image"?this.outputImg(Pe,Te):this.outputPdf(Pe,Te)},Se.prototype.outputPdf=function(Pe,Te){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(Pe,Te)})},Se.prototype.outputImg=function(Pe){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(Pe){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+Pe+'" is not supported.'}})},Se.prototype.save=function(Pe){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(Pe?{filename:Pe}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},Se.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},Se.prototype.set=function(Pe){if(e(Pe)!=="object")return this;var Te=Object.keys(Pe||{}).map(function(Ee){if(Ee in Se.template.prop)return function(){this.prop[Ee]=Pe[Ee]};switch(Ee){case"margin":return this.setMargin.bind(this,Pe.margin);case"jsPDF":return function(){return this.opt.jsPDF=Pe.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,Pe.pageSize);default:return function(){this.opt[Ee]=Pe[Ee]}}},this);return this.then(function(){return this.thenList(Te)})},Se.prototype.get=function(Pe,Te){return this.then(function(){var Ee=Pe in Se.template.prop?this.prop[Pe]:this.opt[Pe];return Te?Te(Ee):Ee})},Se.prototype.setMargin=function(Pe){return this.then(function(){switch(e(Pe)){case"number":Pe=[Pe,Pe,Pe,Pe];case"array":if(Pe.length===2&&(Pe=[Pe[0],Pe[1],Pe[0],Pe[1]]),Pe.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=Pe}).then(this.setPageSize)},Se.prototype.setPageSize=function(Pe){function Te(Ee,Re){return Math.floor(Ee*Re/72*96)}return this.then(function(){(Pe=Pe||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(Pe.inner={width:Pe.width-this.opt.margin[1]-this.opt.margin[3],height:Pe.height-this.opt.margin[0]-this.opt.margin[2]},Pe.inner.px={width:Te(Pe.inner.width,Pe.k),height:Te(Pe.inner.height,Pe.k)},Pe.inner.ratio=Pe.inner.height/Pe.inner.width),this.prop.pageSize=Pe})},Se.prototype.setProgress=function(Pe,Te,Ee,Re){return Pe!=null&&(this.progress.val=Pe),Te!=null&&(this.progress.state=Te),Ee!=null&&(this.progress.n=Ee),Re!=null&&(this.progress.stack=Re),this.progress.ratio=this.progress.val/this.progress.state,this},Se.prototype.updateProgress=function(Pe,Te,Ee,Re){return this.setProgress(Pe?this.progress.val+Pe:null,Te||null,Ee?this.progress.n+Ee:null,Re?this.progress.stack.concat(Re):null)},Se.prototype.then=function(Pe,Te){var Ee=this;return this.thenCore(Pe,Te,function(Re,Ie){return Ee.updateProgress(null,null,1,[Re]),Promise.prototype.then.call(this,function(qe){return Ee.updateProgress(null,Re),qe}).then(Re,Ie).then(function(qe){return Ee.updateProgress(1),qe})})},Se.prototype.thenCore=function(Pe,Te,Ee){Ee=Ee||Promise.prototype.then,Pe&&(Pe=Pe.bind(this)),Te&&(Te=Te.bind(this));var Re=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:Se.convert(Object.assign({},this),Promise.prototype),Ie=Ee.call(Re,Pe,Te);return Se.convert(Ie,this.__proto__)},Se.prototype.thenExternal=function(Pe,Te){return Promise.prototype.then.call(this,Pe,Te)},Se.prototype.thenList=function(Pe){var Te=this;return Pe.forEach(function(Ee){Te=Te.thenCore(Ee)}),Te},Se.prototype.catch=function(Pe){Pe&&(Pe=Pe.bind(this));var Te=Promise.prototype.catch.call(this,Pe);return Se.convert(Te,this)},Se.prototype.catchExternal=function(Pe){return Promise.prototype.catch.call(this,Pe)},Se.prototype.error=function(Pe){return this.then(function(){throw new Error(Pe)})},Se.prototype.using=Se.prototype.set,Se.prototype.saveAs=Se.prototype.save,Se.prototype.export=Se.prototype.output,Se.prototype.run=Se.prototype.then,E.getPageSize=function(Pe,Te,Ee){if(_typeof(Pe)==="object"){var Re=Pe;Pe=Re.orientation,Te=Re.unit||Te,Ee=Re.format||Ee}Te=Te||"mm",Ee=Ee||"a4",Pe=(""+(Pe||"P")).toLowerCase();var Ie,qe=(""+Ee).toLowerCase(),Ge={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(Te){case"pt":Ie=1;break;case"mm":Ie=72/25.4;break;case"cm":Ie=72/2.54;break;case"in":Ie=72;break;case"px":Ie=.75;break;case"pc":case"em":Ie=12;break;case"ex":Ie=6;break;default:throw"Invalid unit: "+Te}var Ce,Xe=0,We=0;if(Ge.hasOwnProperty(qe))Xe=Ge[qe][1]/Ie,We=Ge[qe][0]/Ie;else try{Xe=Ee[1],We=Ee[0]}catch{throw new Error("Invalid format: "+Ee)}if(Pe==="p"||Pe==="portrait")Pe="p",We>Xe&&(Ce=We,We=Xe,Xe=Ce);else{if(Pe!=="l"&&Pe!=="landscape")throw"Invalid orientation: "+Pe;Pe="l",Xe>We&&(Ce=We,We=Xe,Xe=Ce)}return{width:We,height:Xe,unit:Te,k:Ie,orientation:Pe}},Ae.html=function(Pe,Te){(Te=Te||{}).callback=Te.callback||function(){},Te.html2canvas=Te.html2canvas||{},Te.html2canvas.canvas=Te.html2canvas.canvas||this.canvas,Te.jsPDF=Te.jsPDF||this,Te.fontFaces=Te.fontFaces?Te.fontFaces.map(jt):null;var Ee=new Se(Te);return Te.worker?Ee:Ee.from(Pe).doCallback()}}(E.API),E.API.addJS=function(Ae){return Ht=Ae,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(Ae){var t;Ae.events.push(["postPutResources",function(){var St=this,e=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var _e=St.outline.render().split(/\r\n/),Se=0;Se<_e.length;Se++){var Pe=_e[Se],Te=e.exec(Pe);if(Te!=null){var Ee=Te[1];St.internal.newObjectDeferredBegin(Ee,!1)}St.internal.write(Pe)}if(this.outline.createNamedDestinations){var Re=this.internal.pages.length,Ie=[];for(Se=0;Se<Re;Se++){var qe=St.internal.newObject();Ie.push(qe);var Ge=St.internal.getPageInfo(Se+1);St.internal.write("<< /D["+Ge.objId+" 0 R /XYZ null null null]>> endobj")}var Ce=St.internal.newObject();for(St.internal.write("<< /Names [ "),Se=0;Se<Ie.length;Se++)St.internal.write("(page_"+(Se+1)+")"+Ie[Se]+" 0 R");St.internal.write(" ] >>","endobj"),t=St.internal.newObject(),St.internal.write("<< /Dests "+Ce+" 0 R"),St.internal.write(">>","endobj")}}]),Ae.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),Ae.events.push(["initialized",function(){var St=this;St.outline={createNamedDestinations:!1,root:{children:[]}},St.outline.add=function(e,_e,Se){var Pe={title:_e,options:Se,children:[]};return e==null&&(e=this.root),e.children.push(Pe),Pe},St.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=St,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},St.outline.genIds_r=function(e){e.id=St.internal.newObjectDeferred();for(var _e=0;_e<e.children.length;_e++)this.genIds_r(e.children[_e])},St.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},St.outline.renderItems=function(e){for(var _e=this.ctx.pdf.internal.getVerticalCoordinateString,Se=0;Se<e.children.length;Se++){var Pe=e.children[Se];this.objStart(Pe),this.line("/Title "+this.makeString(Pe.title)),this.line("/Parent "+this.makeRef(e)),Se>0&&this.line("/Prev "+this.makeRef(e.children[Se-1])),Se<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[Se+1])),Pe.children.length>0&&(this.line("/First "+this.makeRef(Pe.children[0])),this.line("/Last "+this.makeRef(Pe.children[Pe.children.length-1])));var Te=this.count=this.count_r({count:0},Pe);if(Te>0&&this.line("/Count "+Te),Pe.options&&Pe.options.pageNumber){var Ee=St.internal.getPageInfo(Pe.options.pageNumber);this.line("/Dest ["+Ee.objId+" 0 R /XYZ 0 "+_e(0)+" 0]")}this.objEnd()}for(var Re=0;Re<e.children.length;Re++)this.renderItems(e.children[Re])},St.outline.line=function(e){this.ctx.val+=e+`\r
`},St.outline.makeRef=function(e){return e.id+" 0 R"},St.outline.makeString=function(e){return"("+St.internal.pdfEscape(e)+")"},St.outline.objStart=function(e){this.ctx.val+=`\r
`+e.id+` 0 obj\r
<<\r
`},St.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},St.outline.count_r=function(e,_e){for(var Se=0;Se<_e.children.length;Se++)e.count++,this.count_r(e,_e.children[Se]);return e.count}}])}(E.API),function(Ae){var t=[192,193,194,195,196,197,198,199];Ae.processJPEG=function(St,e,_e,Se,Pe,Te){var Ee,Re=this.decode.DCT_DECODE,Ie=null;if(typeof St=="string"||this.__addimage__.isArrayBuffer(St)||this.__addimage__.isArrayBufferView(St)){switch(St=Pe||St,St=this.__addimage__.isArrayBuffer(St)?new Uint8Array(St):St,(Ee=function(qe){for(var Ge,Ce=256*qe.charCodeAt(4)+qe.charCodeAt(5),Xe=qe.length,We={width:0,height:0,numcomponents:1},Ke=4;Ke<Xe;Ke+=2){if(Ke+=Ce,t.indexOf(qe.charCodeAt(Ke+1))!==-1){Ge=256*qe.charCodeAt(Ke+5)+qe.charCodeAt(Ke+6),We={width:256*qe.charCodeAt(Ke+7)+qe.charCodeAt(Ke+8),height:Ge,numcomponents:qe.charCodeAt(Ke+9)};break}Ce=256*qe.charCodeAt(Ke+2)+qe.charCodeAt(Ke+3)}return We}(St=this.__addimage__.isArrayBufferView(St)?this.__addimage__.arrayBufferToBinaryString(St):St)).numcomponents){case 1:Te=this.color_spaces.DEVICE_GRAY;break;case 4:Te=this.color_spaces.DEVICE_CMYK;break;case 3:Te=this.color_spaces.DEVICE_RGB}Ie={data:St,width:Ee.width,height:Ee.height,colorSpace:Te,bitsPerComponent:8,filter:Re,index:e,alias:_e}}return Ie}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var Ae,t,St;function e(Se){var Pe,Te,Ee,Re,Ie,qe,Ge,Ce,Xe,We,Ke,Be,Ye,sn;for(this.data=Se,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},qe=null;;){switch(Pe=this.readUInt32(),Xe=(function(){var rn,$e;for($e=[],rn=0;rn<4;++rn)$e.push(String.fromCharCode(this.data[this.pos++]));return $e}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(Pe);break;case"fcTL":qe&&this.animation.frames.push(qe),this.pos+=4,qe={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},Ie=this.readUInt16(),Re=this.readUInt16()||100,qe.delay=1e3*Ie/Re,qe.disposeOp=this.data[this.pos++],qe.blendOp=this.data[this.pos++],qe.data=[];break;case"IDAT":case"fdAT":for(Xe==="fdAT"&&(this.pos+=4,Pe-=4),Se=(qe!=null?qe.data:void 0)||this.imgData,Be=0;0<=Pe?Be<Pe:Be>Pe;0<=Pe?++Be:--Be)Se.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(Ee=this.palette.length/3,this.transparency.indexed=this.read(Pe),this.transparency.indexed.length>Ee)throw new Error("More transparent colors than palette size");if((We=Ee-this.transparency.indexed.length)>0)for(Ye=0;0<=We?Ye<We:Ye>We;0<=We?++Ye:--Ye)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(Pe)[0];break;case 2:this.transparency.rgb=this.read(Pe)}break;case"tEXt":Ge=(Ke=this.read(Pe)).indexOf(0),Ce=String.fromCharCode.apply(String,Ke.slice(0,Ge)),this.text[Ce]=String.fromCharCode.apply(String,Ke.slice(Ge+1));break;case"IEND":return qe&&this.animation.frames.push(qe),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(sn=this.colorType)===4||sn===6,Te=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*Te,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=Pe}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}e.prototype.read=function(Se){var Pe,Te;for(Te=[],Pe=0;0<=Se?Pe<Se:Pe>Se;0<=Se?++Pe:--Pe)Te.push(this.data[this.pos++]);return Te},e.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},e.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},e.prototype.decodePixels=function(Se){var Pe=this.pixelBitlength/8,Te=new Uint8Array(this.width*this.height*Pe),Ee=0,Re=this;if(Se==null&&(Se=this.imgData),Se.length===0)return new Uint8Array(0);function Ie(qe,Ge,Ce,Xe){var We,Ke,Be,Ye,sn,rn,$e,tn,Ve,ze,Qe,gn,Me,Ue,en,pn,An,xn,_n,En,hn,Sn=Math.ceil((Re.width-qe)/Ce),In=Math.ceil((Re.height-Ge)/Xe),je=Re.width==Sn&&Re.height==In;for(Ue=Pe*Sn,gn=je?Te:new Uint8Array(Ue*In),rn=Se.length,Me=0,Ke=0;Me<In&&Ee<rn;){switch(Se[Ee++]){case 0:for(Ye=An=0;An<Ue;Ye=An+=1)gn[Ke++]=Se[Ee++];break;case 1:for(Ye=xn=0;xn<Ue;Ye=xn+=1)We=Se[Ee++],sn=Ye<Pe?0:gn[Ke-Pe],gn[Ke++]=(We+sn)%256;break;case 2:for(Ye=_n=0;_n<Ue;Ye=_n+=1)We=Se[Ee++],Be=(Ye-Ye%Pe)/Pe,en=Me&&gn[(Me-1)*Ue+Be*Pe+Ye%Pe],gn[Ke++]=(en+We)%256;break;case 3:for(Ye=En=0;En<Ue;Ye=En+=1)We=Se[Ee++],Be=(Ye-Ye%Pe)/Pe,sn=Ye<Pe?0:gn[Ke-Pe],en=Me&&gn[(Me-1)*Ue+Be*Pe+Ye%Pe],gn[Ke++]=(We+Math.floor((sn+en)/2))%256;break;case 4:for(Ye=hn=0;hn<Ue;Ye=hn+=1)We=Se[Ee++],Be=(Ye-Ye%Pe)/Pe,sn=Ye<Pe?0:gn[Ke-Pe],Me===0?en=pn=0:(en=gn[(Me-1)*Ue+Be*Pe+Ye%Pe],pn=Be&&gn[(Me-1)*Ue+(Be-1)*Pe+Ye%Pe]),$e=sn+en-pn,tn=Math.abs($e-sn),ze=Math.abs($e-en),Qe=Math.abs($e-pn),Ve=tn<=ze&&tn<=Qe?sn:ze<=Qe?en:pn,gn[Ke++]=(We+Ve)%256;break;default:throw new Error("Invalid filter algorithm: "+Se[Ee-1])}if(!je){var Fe=((Ge+Me*Xe)*Re.width+qe)*Pe,De=Me*Ue;for(Ye=0;Ye<Sn;Ye+=1){for(var Je=0;Je<Pe;Je+=1)Te[Fe++]=gn[De++];Fe+=(Ce-1)*Pe}}Me++}}return Se=unzlibSync(Se),Re.interlaceMethod==1?(Ie(0,0,8,8),Ie(4,0,8,8),Ie(0,4,4,8),Ie(2,0,4,4),Ie(0,2,2,4),Ie(1,0,2,2),Ie(0,1,1,2)):Ie(0,0,1,1),Te},e.prototype.decodePalette=function(){var Se,Pe,Te,Ee,Re,Ie,qe,Ge,Ce;for(Te=this.palette,Ie=this.transparency.indexed||[],Re=new Uint8Array((Ie.length||0)+Te.length),Ee=0,Se=0,Pe=qe=0,Ge=Te.length;qe<Ge;Pe=qe+=3)Re[Ee++]=Te[Pe],Re[Ee++]=Te[Pe+1],Re[Ee++]=Te[Pe+2],Re[Ee++]=(Ce=Ie[Se++])!=null?Ce:255;return Re},e.prototype.copyToImageData=function(Se,Pe){var Te,Ee,Re,Ie,qe,Ge,Ce,Xe,We,Ke,Be;if(Ee=this.colors,We=null,Te=this.hasAlphaChannel,this.palette.length&&(We=(Be=this._decodedPalette)!=null?Be:this._decodedPalette=this.decodePalette(),Ee=4,Te=!0),Xe=(Re=Se.data||Se).length,qe=We||Pe,Ie=Ge=0,Ee===1)for(;Ie<Xe;)Ce=We?4*Pe[Ie/4]:Ge,Ke=qe[Ce++],Re[Ie++]=Ke,Re[Ie++]=Ke,Re[Ie++]=Ke,Re[Ie++]=Te?qe[Ce++]:255,Ge=Ce;else for(;Ie<Xe;)Ce=We?4*Pe[Ie/4]:Ge,Re[Ie++]=qe[Ce++],Re[Ie++]=qe[Ce++],Re[Ie++]=qe[Ce++],Re[Ie++]=Te?qe[Ce++]:255,Ge=Ce},e.prototype.decode=function(){var Se;return Se=new Uint8Array(this.width*this.height*4),this.copyToImageData(Se,this.decodePixels()),Se};var _e=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{t=n.document.createElement("canvas"),St=t.getContext("2d")}catch{return!1}return!0}return!1};return _e(),Ae=function(Se){var Pe;if(_e()===!0)return St.width=Se.width,St.height=Se.height,St.clearRect(0,0,Se.width,Se.height),St.putImageData(Se,0,0),(Pe=new Image).src=t.toDataURL(),Pe;throw new Error("This method requires a Browser with Canvas-capability.")},e.prototype.decodeFrames=function(Se){var Pe,Te,Ee,Re,Ie,qe,Ge,Ce;if(this.animation){for(Ce=[],Te=Ie=0,qe=(Ge=this.animation.frames).length;Ie<qe;Te=++Ie)Pe=Ge[Te],Ee=Se.createImageData(Pe.width,Pe.height),Re=this.decodePixels(new Uint8Array(Pe.data)),this.copyToImageData(Ee,Re),Pe.imageData=Ee,Ce.push(Pe.image=Ae(Ee));return Ce}},e.prototype.renderFrame=function(Se,Pe){var Te,Ee,Re;return Te=(Ee=this.animation.frames)[Pe],Re=Ee[Pe-1],Pe===0&&Se.clearRect(0,0,this.width,this.height),(Re!=null?Re.disposeOp:void 0)===1?Se.clearRect(Re.xOffset,Re.yOffset,Re.width,Re.height):(Re!=null?Re.disposeOp:void 0)===2&&Se.putImageData(Re.imageData,Re.xOffset,Re.yOffset),Te.blendOp===0&&Se.clearRect(Te.xOffset,Te.yOffset,Te.width,Te.height),Se.drawImage(Te.image,Te.xOffset,Te.yOffset)},e.prototype.animate=function(Se){var Pe,Te,Ee,Re,Ie,qe,Ge=this;return Te=0,qe=this.animation,Re=qe.numFrames,Ee=qe.frames,Ie=qe.numPlays,(Pe=function(){var Ce,Xe;if(Ce=Te++%Re,Xe=Ee[Ce],Ge.renderFrame(Se,Ce),Re>1&&Te/Re<Ie)return Ge.animation._timeout=setTimeout(Pe,Xe.delay)})()},e.prototype.stopAnimation=function(){var Se;return clearTimeout((Se=this.animation)!=null?Se._timeout:void 0)},e.prototype.render=function(Se){var Pe,Te;return Se._png&&Se._png.stopAnimation(),Se._png=this,Se.width=this.width,Se.height=this.height,Pe=Se.getContext("2d"),this.animation?(this.decodeFrames(Pe),this.animate(Pe)):(Te=Pe.createImageData(this.width,this.height),this.copyToImageData(Te,this.decodePixels()),Pe.putImageData(Te,0,0))},e}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(Ae){var t=0;if(Ae[t++]!==71||Ae[t++]!==73||Ae[t++]!==70||Ae[t++]!==56||(Ae[t++]+1&253)!=56||Ae[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var St=Ae[t++]|Ae[t++]<<8,e=Ae[t++]|Ae[t++]<<8,_e=Ae[t++],Se=_e>>7,Pe=1<<(7&_e)+1;Ae[t++],Ae[t++];var Te=null,Ee=null;Se&&(Te=t,Ee=Pe,t+=3*Pe);var Re=!0,Ie=[],qe=0,Ge=null,Ce=0,Xe=null;for(this.width=St,this.height=e;Re&&t<Ae.length;)switch(Ae[t++]){case 33:switch(Ae[t++]){case 255:if(Ae[t]!==11||Ae[t+1]==78&&Ae[t+2]==69&&Ae[t+3]==84&&Ae[t+4]==83&&Ae[t+5]==67&&Ae[t+6]==65&&Ae[t+7]==80&&Ae[t+8]==69&&Ae[t+9]==50&&Ae[t+10]==46&&Ae[t+11]==48&&Ae[t+12]==3&&Ae[t+13]==1&&Ae[t+16]==0)t+=14,Xe=Ae[t++]|Ae[t++]<<8,t++;else for(t+=12;;){if(!((Me=Ae[t++])>=0))throw Error("Invalid block size");if(Me===0)break;t+=Me}break;case 249:if(Ae[t++]!==4||Ae[t+4]!==0)throw new Error("Invalid graphics extension block.");var We=Ae[t++];qe=Ae[t++]|Ae[t++]<<8,Ge=Ae[t++],!(1&We)&&(Ge=null),Ce=We>>2&7,t++;break;case 254:for(;;){if(!((Me=Ae[t++])>=0))throw Error("Invalid block size");if(Me===0)break;t+=Me}break;default:throw new Error("Unknown graphic control label: 0x"+Ae[t-1].toString(16))}break;case 44:var Ke=Ae[t++]|Ae[t++]<<8,Be=Ae[t++]|Ae[t++]<<8,Ye=Ae[t++]|Ae[t++]<<8,sn=Ae[t++]|Ae[t++]<<8,rn=Ae[t++],$e=rn>>6&1,tn=1<<(7&rn)+1,Ve=Te,ze=Ee,Qe=!1;rn>>7&&(Qe=!0,Ve=t,ze=tn,t+=3*tn);var gn=t;for(t++;;){var Me;if(!((Me=Ae[t++])>=0))throw Error("Invalid block size");if(Me===0)break;t+=Me}Ie.push({x:Ke,y:Be,width:Ye,height:sn,has_local_palette:Qe,palette_offset:Ve,palette_size:ze,data_offset:gn,data_length:t-gn,transparent_index:Ge,interlaced:!!$e,delay:qe,disposal:Ce});break;case 59:Re=!1;break;default:throw new Error("Unknown gif block: 0x"+Ae[t-1].toString(16))}this.numFrames=function(){return Ie.length},this.loopCount=function(){return Xe},this.frameInfo=function(Ue){if(Ue<0||Ue>=Ie.length)throw new Error("Frame index out of range.");return Ie[Ue]},this.decodeAndBlitFrameBGRA=function(Ue,en){var pn=this.frameInfo(Ue),An=pn.width*pn.height,xn=new Uint8Array(An);$t(Ae,pn.data_offset,xn,An);var _n=pn.palette_offset,En=pn.transparent_index;En===null&&(En=256);var hn=pn.width,Sn=St-hn,In=hn,je=4*(pn.y*St+pn.x),Fe=4*((pn.y+pn.height)*St+pn.x),De=je,Je=4*Sn;pn.interlaced===!0&&(Je+=4*St*7);for(var nn=8,an=0,on=xn.length;an<on;++an){var yn=xn[an];if(In===0&&(In=hn,(De+=Je)>=Fe&&(Je=4*Sn+4*St*(nn-1),De=je+(hn+Sn)*(nn<<1),nn>>=1)),yn===En)De+=4;else{var Fn=Ae[_n+3*yn],On=Ae[_n+3*yn+1],Un=Ae[_n+3*yn+2];en[De++]=Un,en[De++]=On,en[De++]=Fn,en[De++]=255}--In}},this.decodeAndBlitFrameRGBA=function(Ue,en){var pn=this.frameInfo(Ue),An=pn.width*pn.height,xn=new Uint8Array(An);$t(Ae,pn.data_offset,xn,An);var _n=pn.palette_offset,En=pn.transparent_index;En===null&&(En=256);var hn=pn.width,Sn=St-hn,In=hn,je=4*(pn.y*St+pn.x),Fe=4*((pn.y+pn.height)*St+pn.x),De=je,Je=4*Sn;pn.interlaced===!0&&(Je+=4*St*7);for(var nn=8,an=0,on=xn.length;an<on;++an){var yn=xn[an];if(In===0&&(In=hn,(De+=Je)>=Fe&&(Je=4*Sn+4*St*(nn-1),De=je+(hn+Sn)*(nn<<1),nn>>=1)),yn===En)De+=4;else{var Fn=Ae[_n+3*yn],On=Ae[_n+3*yn+1],Un=Ae[_n+3*yn+2];en[De++]=Fn,en[De++]=On,en[De++]=Un,en[De++]=255}--In}}}function $t(Ae,t,St,e){for(var _e=Ae[t++],Se=1<<_e,Pe=Se+1,Te=Pe+1,Ee=_e+1,Re=(1<<Ee)-1,Ie=0,qe=0,Ge=0,Ce=Ae[t++],Xe=new Int32Array(4096),We=null;;){for(;Ie<16&&Ce!==0;)qe|=Ae[t++]<<Ie,Ie+=8,Ce===1?Ce=Ae[t++]:--Ce;if(Ie<Ee)break;var Ke=qe&Re;if(qe>>=Ee,Ie-=Ee,Ke!==Se){if(Ke===Pe)break;for(var Be=Ke<Te?Ke:We,Ye=0,sn=Be;sn>Se;)sn=Xe[sn]>>8,++Ye;var rn=sn;if(Ge+Ye+(Be!==Ke?1:0)>e)return void a.log("Warning, gif stream longer than expected.");St[Ge++]=rn;var $e=Ge+=Ye;for(Be!==Ke&&(St[Ge++]=rn),sn=Be;Ye--;)sn=Xe[sn],St[--$e]=255&sn,sn>>=8;We!==null&&Te<4096&&(Xe[Te++]=We<<8|rn,Te>=Re+1&&Ee<12&&(++Ee,Re=Re<<1|1)),We=Ke}else Te=Pe+1,Re=(1<<(Ee=_e+1))-1,We=null}return Ge!==e&&a.log("Warning, gif stream shorter than expected."),St}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(Ae){var t,St,e,_e,Se,Pe=Math.floor,Te=new Array(64),Ee=new Array(64),Re=new Array(64),Ie=new Array(64),qe=new Array(65535),Ge=new Array(65535),Ce=new Array(64),Xe=new Array(64),We=[],Ke=0,Be=7,Ye=new Array(64),sn=new Array(64),rn=new Array(64),$e=new Array(256),tn=new Array(2048),Ve=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ze=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Qe=[0,1,2,3,4,5,6,7,8,9,10,11],gn=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Me=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Ue=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],en=[0,1,2,3,4,5,6,7,8,9,10,11],pn=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],An=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function xn(je,Fe){for(var De=0,Je=0,nn=new Array,an=1;an<=16;an++){for(var on=1;on<=je[an];on++)nn[Fe[Je]]=[],nn[Fe[Je]][0]=De,nn[Fe[Je]][1]=an,Je++,De++;De*=2}return nn}function _n(je){for(var Fe=je[0],De=je[1]-1;De>=0;)Fe&1<<De&&(Ke|=1<<Be),De--,--Be<0&&(Ke==255?(En(255),En(0)):En(Ke),Be=7,Ke=0)}function En(je){We.push(je)}function hn(je){En(je>>8&255),En(255&je)}function Sn(je,Fe,De,Je,nn){for(var an,on=nn[0],yn=nn[240],Fn=function(vn,kn){var Rn,zn,Qn,ii,jn,fi,di,Ii,Si,Ri,hi=0;for(Si=0;Si<8;++Si){Rn=vn[hi],zn=vn[hi+1],Qn=vn[hi+2],ii=vn[hi+3],jn=vn[hi+4],fi=vn[hi+5],di=vn[hi+6];var Fi=Rn+(Ii=vn[hi+7]),Oi=Rn-Ii,Yi=zn+di,ai=zn-di,Xn=Qn+fi,$n=Qn-fi,wi=ii+jn,Gi=ii-jn,Bi=Fi+wi,Tn=Fi-wi,ci=Yi+Xn,bi=Yi-Xn;vn[hi]=Bi+ci,vn[hi+4]=Bi-ci;var vi=.707106781*(bi+Tn);vn[hi+2]=Tn+vi,vn[hi+6]=Tn-vi;var Pi=.382683433*((Bi=Gi+$n)-(bi=ai+Oi)),Ni=.5411961*Bi+Pi,Cn=1.306562965*bi+Pi,Ln=.707106781*(ci=$n+ai),Bn=Oi+Ln,Hn=Oi-Ln;vn[hi+5]=Hn+Ni,vn[hi+3]=Hn-Ni,vn[hi+1]=Bn+Cn,vn[hi+7]=Bn-Cn,hi+=8}for(hi=0,Si=0;Si<8;++Si){Rn=vn[hi],zn=vn[hi+8],Qn=vn[hi+16],ii=vn[hi+24],jn=vn[hi+32],fi=vn[hi+40],di=vn[hi+48];var ri=Rn+(Ii=vn[hi+56]),ui=Rn-Ii,pi=zn+di,ki=zn-di,Ci=Qn+fi,xi=Qn-fi,Hi=ii+jn,Ti=ii-jn,Mi=ri+Hi,qi=ri-Hi,Wi=pi+Ci,Ki=pi-Ci;vn[hi]=Mi+Wi,vn[hi+32]=Mi-Wi;var $i=.707106781*(Ki+qi);vn[hi+16]=qi+$i,vn[hi+48]=qi-$i;var ar=.382683433*((Mi=Ti+xi)-(Ki=ki+ui)),rr=.5411961*Mi+ar,kr=1.306562965*Ki+ar,Fr=.707106781*(Wi=xi+ki),Mr=ui+Fr,cs=ui-Fr;vn[hi+40]=cs+rr,vn[hi+24]=cs-rr,vn[hi+8]=Mr+kr,vn[hi+56]=Mr-kr,hi++}for(Si=0;Si<64;++Si)Ri=vn[Si]*kn[Si],Ce[Si]=Ri>0?Ri+.5|0:Ri-.5|0;return Ce}(je,Fe),On=0;On<64;++On)Xe[Ve[On]]=Fn[On];var Un=Xe[0]-De;De=Xe[0],Un==0?_n(Je[0]):(_n(Je[Ge[an=32767+Un]]),_n(qe[an]));for(var Wn=63;Wn>0&&Xe[Wn]==0;)Wn--;if(Wn==0)return _n(on),De;for(var ni,Dn=1;Dn<=Wn;){for(var cn=Dn;Xe[Dn]==0&&Dn<=Wn;)++Dn;var qn=Dn-cn;if(qn>=16){ni=qn>>4;for(var fn=1;fn<=ni;++fn)_n(yn);qn&=15}an=32767+Xe[Dn],_n(nn[(qn<<4)+Ge[an]]),_n(qe[an]),Dn++}return Wn!=63&&_n(on),De}function In(je){je=Math.min(Math.max(je,1),100),Se!=je&&(function(Fe){for(var De=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Je=0;Je<64;Je++){var nn=Pe((De[Je]*Fe+50)/100);nn=Math.min(Math.max(nn,1),255),Te[Ve[Je]]=nn}for(var an=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],on=0;on<64;on++){var yn=Pe((an[on]*Fe+50)/100);yn=Math.min(Math.max(yn,1),255),Ee[Ve[on]]=yn}for(var Fn=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],On=0,Un=0;Un<8;Un++)for(var Wn=0;Wn<8;Wn++)Re[On]=1/(Te[Ve[On]]*Fn[Un]*Fn[Wn]*8),Ie[On]=1/(Ee[Ve[On]]*Fn[Un]*Fn[Wn]*8),On++}(je<50?Math.floor(5e3/je):Math.floor(200-2*je)),Se=je)}this.encode=function(je,Fe){Fe&&In(Fe),We=new Array,Ke=0,Be=7,hn(65496),hn(65504),hn(16),En(74),En(70),En(73),En(70),En(0),En(1),En(1),En(0),hn(1),hn(1),En(0),En(0),function(){hn(65499),hn(132),En(0);for(var zn=0;zn<64;zn++)En(Te[zn]);En(1);for(var Qn=0;Qn<64;Qn++)En(Ee[Qn])}(),function(zn,Qn){hn(65472),hn(17),En(8),hn(Qn),hn(zn),En(3),En(1),En(17),En(0),En(2),En(17),En(1),En(3),En(17),En(1)}(je.width,je.height),function(){hn(65476),hn(418),En(0);for(var zn=0;zn<16;zn++)En(ze[zn+1]);for(var Qn=0;Qn<=11;Qn++)En(Qe[Qn]);En(16);for(var ii=0;ii<16;ii++)En(gn[ii+1]);for(var jn=0;jn<=161;jn++)En(Me[jn]);En(1);for(var fi=0;fi<16;fi++)En(Ue[fi+1]);for(var di=0;di<=11;di++)En(en[di]);En(17);for(var Ii=0;Ii<16;Ii++)En(pn[Ii+1]);for(var Si=0;Si<=161;Si++)En(An[Si])}(),hn(65498),hn(12),En(3),En(1),En(0),En(2),En(17),En(3),En(17),En(0),En(63),En(0);var De=0,Je=0,nn=0;Ke=0,Be=7,this.encode.displayName="_encode_";for(var an,on,yn,Fn,On,Un,Wn,ni,Dn,cn=je.data,qn=je.width,fn=je.height,vn=4*qn,kn=0;kn<fn;){for(an=0;an<vn;){for(On=vn*kn+an,Wn=-1,ni=0,Dn=0;Dn<64;Dn++)Un=On+(ni=Dn>>3)*vn+(Wn=4*(7&Dn)),kn+ni>=fn&&(Un-=vn*(kn+1+ni-fn)),an+Wn>=vn&&(Un-=an+Wn-vn+4),on=cn[Un++],yn=cn[Un++],Fn=cn[Un++],Ye[Dn]=(tn[on]+tn[yn+256>>0]+tn[Fn+512>>0]>>16)-128,sn[Dn]=(tn[on+768>>0]+tn[yn+1024>>0]+tn[Fn+1280>>0]>>16)-128,rn[Dn]=(tn[on+1280>>0]+tn[yn+1536>>0]+tn[Fn+1792>>0]>>16)-128;De=Sn(Ye,Re,De,t,e),Je=Sn(sn,Ie,Je,St,_e),nn=Sn(rn,Ie,nn,St,_e),an+=32}kn+=8}if(Be>=0){var Rn=[];Rn[1]=Be+1,Rn[0]=(1<<Be+1)-1,_n(Rn)}return hn(65497),new Uint8Array(We)},Ae=Ae||50,function(){for(var je=String.fromCharCode,Fe=0;Fe<256;Fe++)$e[Fe]=je(Fe)}(),t=xn(ze,Qe),St=xn(Ue,en),e=xn(gn,Me),_e=xn(pn,An),function(){for(var je=1,Fe=2,De=1;De<=15;De++){for(var Je=je;Je<Fe;Je++)Ge[32767+Je]=De,qe[32767+Je]=[],qe[32767+Je][1]=De,qe[32767+Je][0]=Je;for(var nn=-(Fe-1);nn<=-je;nn++)Ge[32767+nn]=De,qe[32767+nn]=[],qe[32767+nn][1]=De,qe[32767+nn][0]=Fe-1+nn;je<<=1,Fe<<=1}}(),function(){for(var je=0;je<256;je++)tn[je]=19595*je,tn[je+256>>0]=38470*je,tn[je+512>>0]=7471*je+32768,tn[je+768>>0]=-11059*je,tn[je+1024>>0]=-21709*je,tn[je+1280>>0]=32768*je+8421375,tn[je+1536>>0]=-27439*je,tn[je+1792>>0]=-5329*je}(),In(Ae)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(Ae,t){if(this.pos=0,this.buffer=Ae,this.datav=new DataView(Ae.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(Ae){function t(ze){if(!ze)throw Error("assert :P")}function St(ze,Qe,gn){for(var Me=0;4>Me;Me++)if(ze[Qe+Me]!=gn.charCodeAt(Me))return!0;return!1}function e(ze,Qe,gn,Me,Ue){for(var en=0;en<Ue;en++)ze[Qe+en]=gn[Me+en]}function _e(ze,Qe,gn,Me){for(var Ue=0;Ue<Me;Ue++)ze[Qe+Ue]=gn}function Se(ze){return new Int32Array(ze)}function Pe(ze,Qe){for(var gn=[],Me=0;Me<ze;Me++)gn.push(new Qe);return gn}function Te(ze,Qe){var gn=[];return function Me(Ue,en,pn){for(var An=pn[en],xn=0;xn<An&&(Ue.push(pn.length>en+1?[]:new Qe),!(pn.length<en+1));xn++)Me(Ue[xn],en+1,pn)}(gn,0,ze),gn}var Ee=function(){var ze=this;function Qe(r,xe){for(var Oe=1<<xe-1>>>0;r&Oe;)Oe>>>=1;return Oe?(r&Oe-1)+Oe:r}function gn(r,xe,Oe,Ze,un){t(!(Ze%Oe));do r[xe+(Ze-=Oe)]=un;while(0<Ze)}function Me(r,xe,Oe,Ze,un){if(t(2328>=un),512>=un)var mn=Se(512);else if((mn=Se(un))==null)return 0;return function(bn,wn,Pn,Nn,Yn,oi){var li,ti,_i=wn,gi=1<<Pn,Kn=Se(16),Jn=Se(16);for(t(Yn!=0),t(Nn!=null),t(bn!=null),t(0<Pn),ti=0;ti<Yn;++ti){if(15<Nn[ti])return 0;++Kn[Nn[ti]]}if(Kn[0]==Yn)return 0;for(Jn[1]=0,li=1;15>li;++li){if(Kn[li]>1<<li)return 0;Jn[li+1]=Jn[li]+Kn[li]}for(ti=0;ti<Yn;++ti)li=Nn[ti],0<Nn[ti]&&(oi[Jn[li]++]=ti);if(Jn[15]==1)return(Nn=new Ue).g=0,Nn.value=oi[0],gn(bn,_i,1,gi,Nn),gi;var yi,Li=-1,Ai=gi-1,zi=0,Di=1,Xi=1,ji=1<<Pn;for(ti=0,li=1,Yn=2;li<=Pn;++li,Yn<<=1){if(Di+=Xi<<=1,0>(Xi-=Kn[li]))return 0;for(;0<Kn[li];--Kn[li])(Nn=new Ue).g=li,Nn.value=oi[ti++],gn(bn,_i+zi,Yn,ji,Nn),zi=Qe(zi,li)}for(li=Pn+1,Yn=2;15>=li;++li,Yn<<=1){if(Di+=Xi<<=1,0>(Xi-=Kn[li]))return 0;for(;0<Kn[li];--Kn[li]){if(Nn=new Ue,(zi&Ai)!=Li){for(_i+=ji,yi=1<<(Li=li)-Pn;15>Li&&!(0>=(yi-=Kn[Li]));)++Li,yi<<=1;gi+=ji=1<<(yi=Li-Pn),bn[wn+(Li=zi&Ai)].g=yi+Pn,bn[wn+Li].value=_i-wn-Li}Nn.g=li-Pn,Nn.value=oi[ti++],gn(bn,_i+(zi>>Pn),Yn,ji,Nn),zi=Qe(zi,li)}}return Di!=2*Jn[15]-1?0:gi}(r,xe,Oe,Ze,un,mn)}function Ue(){this.value=this.g=0}function en(){this.value=this.g=0}function pn(){this.G=Pe(5,Ue),this.H=Se(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=Pe(Er,en)}function An(r,xe,Oe,Ze){t(r!=null),t(xe!=null),t(2147483648>Ze),r.Ca=254,r.I=0,r.b=-8,r.Ka=0,r.oa=xe,r.pa=Oe,r.Jd=xe,r.Yc=Oe+Ze,r.Zc=4<=Ze?Oe+Ze-4+1:Oe,an(r)}function xn(r,xe){for(var Oe=0;0<xe--;)Oe|=yn(r,128)<<xe;return Oe}function _n(r,xe){var Oe=xn(r,xe);return on(r)?-Oe:Oe}function En(r,xe,Oe,Ze){var un,mn=0;for(t(r!=null),t(xe!=null),t(4294967288>Ze),r.Sb=Ze,r.Ra=0,r.u=0,r.h=0,4<Ze&&(Ze=4),un=0;un<Ze;++un)mn+=xe[Oe+un]<<8*un;r.Ra=mn,r.bb=Ze,r.oa=xe,r.pa=Oe}function hn(r){for(;8<=r.u&&r.bb<r.Sb;)r.Ra>>>=8,r.Ra+=r.oa[r.pa+r.bb]<<sa-8>>>0,++r.bb,r.u-=8;De(r)&&(r.h=1,r.u=0)}function Sn(r,xe){if(t(0<=xe),!r.h&&xe<=ra){var Oe=Fe(r)&ia[xe];return r.u+=xe,hn(r),Oe}return r.h=1,r.u=0}function In(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function je(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Fe(r){return r.Ra>>>(r.u&sa-1)>>>0}function De(r){return t(r.bb<=r.Sb),r.h||r.bb==r.Sb&&r.u>sa}function Je(r,xe){r.u=xe,r.h=De(r)}function nn(r){r.u>=Ba&&(t(r.u>=Ba),hn(r))}function an(r){t(r!=null&&r.oa!=null),r.pa<r.Zc?(r.I=(r.oa[r.pa++]|r.I<<8)>>>0,r.b+=8):(t(r!=null&&r.oa!=null),r.pa<r.Yc?(r.b+=8,r.I=r.oa[r.pa++]|r.I<<8):r.Ka?r.b=0:(r.I<<=8,r.b+=8,r.Ka=1))}function on(r){return xn(r,1)}function yn(r,xe){var Oe=r.Ca;0>r.b&&an(r);var Ze=r.b,un=Oe*xe>>>8,mn=(r.I>>>Ze>un)+0;for(mn?(Oe-=un,r.I-=un+1<<Ze>>>0):Oe=un+1,Ze=Oe,un=0;256<=Ze;)un+=8,Ze>>=8;return Ze=7^un+jr[Ze],r.b-=Ze,r.Ca=(Oe<<Ze)-1,mn}function Fn(r,xe,Oe){r[xe+0]=Oe>>24&255,r[xe+1]=Oe>>16&255,r[xe+2]=Oe>>8&255,r[xe+3]=Oe>>0&255}function On(r,xe){return r[xe+0]<<0|r[xe+1]<<8}function Un(r,xe){return On(r,xe)|r[xe+2]<<16}function Wn(r,xe){return On(r,xe)|On(r,xe+2)<<16}function ni(r,xe){var Oe=1<<xe;return t(r!=null),t(0<xe),r.X=Se(Oe),r.X==null?0:(r.Mb=32-xe,r.Xa=xe,1)}function Dn(r,xe){t(r!=null),t(xe!=null),t(r.Xa==xe.Xa),e(xe.X,0,r.X,0,1<<xe.Xa)}function cn(){this.X=[],this.Xa=this.Mb=0}function qn(r,xe,Oe,Ze){t(Oe!=null),t(Ze!=null);var un=Oe[0],mn=Ze[0];return un==0&&(un=(r*mn+xe/2)/xe),mn==0&&(mn=(xe*un+r/2)/r),0>=un||0>=mn?0:(Oe[0]=un,Ze[0]=mn,1)}function fn(r,xe){return r+(1<<xe)-1>>>xe}function vn(r,xe){return((4278255360&r)+(4278255360&xe)>>>0&4278255360)+((16711935&r)+(16711935&xe)>>>0&16711935)>>>0}function kn(r,xe){ze[xe]=function(Oe,Ze,un,mn,bn,wn,Pn){var Nn;for(Nn=0;Nn<bn;++Nn){var Yn=ze[r](wn[Pn+Nn-1],un,mn+Nn);wn[Pn+Nn]=vn(Oe[Ze+Nn],Yn)}}}function Rn(){this.ud=this.hd=this.jd=0}function zn(r,xe){return((4278124286&(r^xe))>>>1)+(r&xe)>>>0}function Qn(r){return 0<=r&&256>r?r:0>r?0:255<r?255:void 0}function ii(r,xe){return Qn(r+(r-xe+.5>>1))}function jn(r,xe,Oe){return Math.abs(xe-Oe)-Math.abs(r-Oe)}function fi(r,xe,Oe,Ze,un,mn,bn){for(Ze=mn[bn-1],Oe=0;Oe<un;++Oe)mn[bn+Oe]=Ze=vn(r[xe+Oe],Ze)}function di(r,xe,Oe,Ze,un){var mn;for(mn=0;mn<Oe;++mn){var bn=r[xe+mn],wn=bn>>8&255,Pn=16711935&(Pn=(Pn=16711935&bn)+((wn<<16)+wn));Ze[un+mn]=(4278255360&bn)+Pn>>>0}}function Ii(r,xe){xe.jd=r>>0&255,xe.hd=r>>8&255,xe.ud=r>>16&255}function Si(r,xe,Oe,Ze,un,mn){var bn;for(bn=0;bn<Ze;++bn){var wn=xe[Oe+bn],Pn=wn>>>8,Nn=wn,Yn=255&(Yn=(Yn=wn>>>16)+((r.jd<<24>>24)*(Pn<<24>>24)>>>5));Nn=255&(Nn=(Nn=Nn+((r.hd<<24>>24)*(Pn<<24>>24)>>>5))+((r.ud<<24>>24)*(Yn<<24>>24)>>>5)),un[mn+bn]=(4278255360&wn)+(Yn<<16)+Nn}}function Ri(r,xe,Oe,Ze,un){ze[xe]=function(mn,bn,wn,Pn,Nn,Yn,oi,li,ti){for(Pn=oi;Pn<li;++Pn)for(oi=0;oi<ti;++oi)Nn[Yn++]=un(wn[Ze(mn[bn++])])},ze[r]=function(mn,bn,wn,Pn,Nn,Yn,oi){var li=8>>mn.b,ti=mn.Ea,_i=mn.K[0],gi=mn.w;if(8>li)for(mn=(1<<mn.b)-1,gi=(1<<li)-1;bn<wn;++bn){var Kn,Jn=0;for(Kn=0;Kn<ti;++Kn)Kn&mn||(Jn=Ze(Pn[Nn++])),Yn[oi++]=un(_i[Jn&gi]),Jn>>=li}else ze["VP8LMapColor"+Oe](Pn,Nn,_i,gi,Yn,oi,bn,wn,ti)}}function hi(r,xe,Oe,Ze,un){for(Oe=xe+Oe;xe<Oe;){var mn=r[xe++];Ze[un++]=mn>>16&255,Ze[un++]=mn>>8&255,Ze[un++]=mn>>0&255}}function Fi(r,xe,Oe,Ze,un){for(Oe=xe+Oe;xe<Oe;){var mn=r[xe++];Ze[un++]=mn>>16&255,Ze[un++]=mn>>8&255,Ze[un++]=mn>>0&255,Ze[un++]=mn>>24&255}}function Oi(r,xe,Oe,Ze,un){for(Oe=xe+Oe;xe<Oe;){var mn=(bn=r[xe++])>>16&240|bn>>12&15,bn=bn>>0&240|bn>>28&15;Ze[un++]=mn,Ze[un++]=bn}}function Yi(r,xe,Oe,Ze,un){for(Oe=xe+Oe;xe<Oe;){var mn=(bn=r[xe++])>>16&248|bn>>13&7,bn=bn>>5&224|bn>>3&31;Ze[un++]=mn,Ze[un++]=bn}}function ai(r,xe,Oe,Ze,un){for(Oe=xe+Oe;xe<Oe;){var mn=r[xe++];Ze[un++]=mn>>0&255,Ze[un++]=mn>>8&255,Ze[un++]=mn>>16&255}}function Xn(r,xe,Oe,Ze,un,mn){if(mn==0)for(Oe=xe+Oe;xe<Oe;)Fn(Ze,((mn=r[xe++])[0]>>24|mn[1]>>8&65280|mn[2]<<8&16711680|mn[3]<<24)>>>0),un+=32;else e(Ze,un,r,xe,Oe)}function $n(r,xe){ze[xe][0]=ze[r+"0"],ze[xe][1]=ze[r+"1"],ze[xe][2]=ze[r+"2"],ze[xe][3]=ze[r+"3"],ze[xe][4]=ze[r+"4"],ze[xe][5]=ze[r+"5"],ze[xe][6]=ze[r+"6"],ze[xe][7]=ze[r+"7"],ze[xe][8]=ze[r+"8"],ze[xe][9]=ze[r+"9"],ze[xe][10]=ze[r+"10"],ze[xe][11]=ze[r+"11"],ze[xe][12]=ze[r+"12"],ze[xe][13]=ze[r+"13"],ze[xe][14]=ze[r+"0"],ze[xe][15]=ze[r+"0"]}function wi(r){return r==jl||r==Bl||r==Do||r==ql}function Gi(){this.eb=[],this.size=this.A=this.fb=0}function Bi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Tn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Gi,this.f.kb=new Bi,this.sd=null}function ci(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function bi(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function vi(r){return alert("todo:WebPSamplerProcessPlane"),r.T}function Pi(r,xe){var Oe=r.T,Ze=xe.ba.f.RGBA,un=Ze.eb,mn=Ze.fb+r.ka*Ze.A,bn=$r[xe.ba.S],wn=r.y,Pn=r.O,Nn=r.f,Yn=r.N,oi=r.ea,li=r.W,ti=xe.cc,_i=xe.dc,gi=xe.Mc,Kn=xe.Nc,Jn=r.ka,yi=r.ka+r.T,Li=r.U,Ai=Li+1>>1;for(Jn==0?bn(wn,Pn,null,null,Nn,Yn,oi,li,Nn,Yn,oi,li,un,mn,null,null,Li):(bn(xe.ec,xe.fc,wn,Pn,ti,_i,gi,Kn,Nn,Yn,oi,li,un,mn-Ze.A,un,mn,Li),++Oe);Jn+2<yi;Jn+=2)ti=Nn,_i=Yn,gi=oi,Kn=li,Yn+=r.Rc,li+=r.Rc,mn+=2*Ze.A,bn(wn,(Pn+=2*r.fa)-r.fa,wn,Pn,ti,_i,gi,Kn,Nn,Yn,oi,li,un,mn-Ze.A,un,mn,Li);return Pn+=r.fa,r.j+yi<r.o?(e(xe.ec,xe.fc,wn,Pn,Li),e(xe.cc,xe.dc,Nn,Yn,Ai),e(xe.Mc,xe.Nc,oi,li,Ai),Oe--):1&yi||bn(wn,Pn,null,null,Nn,Yn,oi,li,Nn,Yn,oi,li,un,mn+Ze.A,null,null,Li),Oe}function Ni(r,xe,Oe){var Ze=r.F,un=[r.J];if(Ze!=null){var mn=r.U,bn=xe.ba.S,wn=bn==Ro||bn==Do;xe=xe.ba.f.RGBA;var Pn=[0],Nn=r.ka;Pn[0]=r.T,r.Kb&&(Nn==0?--Pn[0]:(--Nn,un[0]-=r.width),r.j+r.ka+r.T==r.o&&(Pn[0]=r.o-r.j-Nn));var Yn=xe.eb;Nn=xe.fb+Nn*xe.A,r=fr(Ze,un[0],r.width,mn,Pn,Yn,Nn+(wn?0:3),xe.A),t(Oe==Pn),r&&wi(bn)&&Kr(Yn,Nn,wn,mn,Pn,xe.A)}return 0}function Cn(r){var xe=r.ma,Oe=xe.ba.S,Ze=11>Oe,un=Oe==Mo||Oe==Io||Oe==Ro||Oe==Ol||Oe==12||wi(Oe);if(xe.memory=null,xe.Ib=null,xe.Jb=null,xe.Nd=null,!Oa(xe.Oa,r,un?11:12))return 0;if(un&&wi(Oe)&&Ei(),r.da)alert("todo:use_scaling");else{if(Ze){if(xe.Ib=vi,r.Kb){if(Oe=r.U+1>>1,xe.memory=Se(r.U+2*Oe),xe.memory==null)return 0;xe.ec=xe.memory,xe.fc=0,xe.cc=xe.ec,xe.dc=xe.fc+r.U,xe.Mc=xe.cc,xe.Nc=xe.dc+Oe,xe.Ib=Pi,Ei()}}else alert("todo:EmitYUV");un&&(xe.Jb=Ni,Ze&&si())}if(Ze&&!Vc){for(r=0;256>r;++r)lu[r]=89858*(r-128)+jo>>Oo,uu[r]=-22014*(r-128)+jo,hu[r]=-45773*(r-128),cu[r]=113618*(r-128)+jo>>Oo;for(r=Ga;r<Hl;++r)xe=76283*(r-16)+jo>>Oo,du[r-Ga]=zr(xe,255),fu[r-Ga]=zr(xe+8>>4,15);Vc=1}return 1}function Ln(r){var xe=r.ma,Oe=r.U,Ze=r.T;return t(!(1&r.ka)),0>=Oe||0>=Ze?0:(Oe=xe.Ib(r,xe),xe.Jb!=null&&xe.Jb(r,xe,Oe),xe.Dc+=Oe,1)}function Bn(r){r.ma.memory=null}function Hn(r,xe,Oe,Ze){return Sn(r,8)!=47?0:(xe[0]=Sn(r,14)+1,Oe[0]=Sn(r,14)+1,Ze[0]=Sn(r,1),Sn(r,3)!=0?0:!r.h)}function ri(r,xe){if(4>r)return r+1;var Oe=r-2>>1;return(2+(1&r)<<Oe)+Sn(xe,Oe)+1}function ui(r,xe){return 120<xe?xe-120:1<=(Oe=((Oe=Yh[xe-1])>>4)*r+(8-(15&Oe)))?Oe:1;var Oe}function pi(r,xe,Oe){var Ze=Fe(Oe),un=r[xe+=255&Ze].g-8;return 0<un&&(Je(Oe,Oe.u+8),Ze=Fe(Oe),xe+=r[xe].value,xe+=Ze&(1<<un)-1),Je(Oe,Oe.u+r[xe].g),r[xe].value}function ki(r,xe,Oe){return Oe.g+=r.g,Oe.value+=r.value<<xe>>>0,t(8>=Oe.g),r.g}function Ci(r,xe,Oe){var Ze=r.xc;return t((xe=Ze==0?0:r.vc[r.md*(Oe>>Ze)+(xe>>Ze)])<r.Wb),r.Ya[xe]}function xi(r,xe,Oe,Ze){var un=r.ab,mn=r.c*xe,bn=r.C;xe=bn+xe;var wn=Oe,Pn=Ze;for(Ze=r.Ta,Oe=r.Ua;0<un--;){var Nn=r.gc[un],Yn=bn,oi=xe,li=wn,ti=Pn,_i=(Pn=Ze,wn=Oe,Nn.Ea);switch(t(Yn<oi),t(oi<=Nn.nc),Nn.hc){case 2:Po(li,ti,(oi-Yn)*_i,Pn,wn);break;case 0:var gi=Yn,Kn=oi,Jn=Pn,yi=wn,Li=(ji=Nn).Ea;gi==0&&(Rl(li,ti,null,null,1,Jn,yi),fi(li,ti+1,0,0,Li-1,Jn,yi+1),ti+=Li,yi+=Li,++gi);for(var Ai=1<<ji.b,zi=Ai-1,Di=fn(Li,ji.b),Xi=ji.K,ji=ji.w+(gi>>ji.b)*Di;gi<Kn;){var sr=Xi,or=ji,ir=1;for(qa(li,ti,Jn,yi-Li,1,Jn,yi);ir<Li;){var er=(ir&~zi)+Ai;er>Li&&(er=Li),(0,Ss[sr[or++]>>8&15])(li,ti+ +ir,Jn,yi+ir-Li,er-ir,Jn,yi+ir),ir=er}ti+=Li,yi+=Li,++gi&zi||(ji+=Di)}oi!=Nn.nc&&e(Pn,wn-_i,Pn,wn+(oi-Yn-1)*_i,_i);break;case 1:for(_i=li,Kn=ti,Li=(li=Nn.Ea)-(yi=li&~(Jn=(ti=1<<Nn.b)-1)),gi=fn(li,Nn.b),Ai=Nn.K,Nn=Nn.w+(Yn>>Nn.b)*gi;Yn<oi;){for(zi=Ai,Di=Nn,Xi=new Rn,ji=Kn+yi,sr=Kn+li;Kn<ji;)Ii(zi[Di++],Xi),js(Xi,_i,Kn,ti,Pn,wn),Kn+=ti,wn+=ti;Kn<sr&&(Ii(zi[Di++],Xi),js(Xi,_i,Kn,Li,Pn,wn),Kn+=Li,wn+=Li),++Yn&Jn||(Nn+=gi)}break;case 3:if(li==Pn&&ti==wn&&0<Nn.b){for(Kn=Pn,li=_i=wn+(oi-Yn)*_i-(yi=(oi-Yn)*fn(Nn.Ea,Nn.b)),ti=Pn,Jn=wn,gi=[],yi=(Li=yi)-1;0<=yi;--yi)gi[yi]=ti[Jn+yi];for(yi=Li-1;0<=yi;--yi)Kn[li+yi]=gi[yi];Gr(Nn,Yn,oi,Pn,_i,Pn,wn)}else Gr(Nn,Yn,oi,li,ti,Pn,wn)}wn=Ze,Pn=Oe}Pn!=Oe&&e(Ze,Oe,wn,Pn,mn)}function Hi(r,xe){var Oe=r.V,Ze=r.Ba+r.c*r.C,un=xe-r.C;if(t(xe<=r.l.o),t(16>=un),0<un){var mn=r.l,bn=r.Ta,wn=r.Ua,Pn=mn.width;if(xi(r,un,Oe,Ze),un=wn=[wn],t((Oe=r.C)<(Ze=xe)),t(mn.v<mn.va),Ze>mn.o&&(Ze=mn.o),Oe<mn.j){var Nn=mn.j-Oe;Oe=mn.j,un[0]+=Nn*Pn}if(Oe>=Ze?Oe=0:(un[0]+=4*mn.v,mn.ka=Oe-mn.j,mn.U=mn.va-mn.v,mn.T=Ze-Oe,Oe=1),Oe){if(wn=wn[0],11>(Oe=r.ca).S){var Yn=Oe.f.RGBA,oi=(Ze=Oe.S,un=mn.U,mn=mn.T,Nn=Yn.eb,Yn.A),li=mn;for(Yn=Yn.fb+r.Ma*Yn.A;0<li--;){var ti=bn,_i=wn,gi=un,Kn=Nn,Jn=Yn;switch(Ze){case Fo:Br(ti,_i,gi,Kn,Jn);break;case Mo:Ir(ti,_i,gi,Kn,Jn);break;case jl:Ir(ti,_i,gi,Kn,Jn),Kr(Kn,Jn,0,gi,1,0);break;case Dc:fs(ti,_i,gi,Kn,Jn);break;case Io:Xn(ti,_i,gi,Kn,Jn,1);break;case Bl:Xn(ti,_i,gi,Kn,Jn,1),Kr(Kn,Jn,0,gi,1,0);break;case Ro:Xn(ti,_i,gi,Kn,Jn,0);break;case Do:Xn(ti,_i,gi,Kn,Jn,0),Kr(Kn,Jn,1,gi,1,0);break;case Ol:xs(ti,_i,gi,Kn,Jn);break;case ql:xs(ti,_i,gi,Kn,Jn),dr(Kn,Jn,gi,1,0);break;case Oc:ds(ti,_i,gi,Kn,Jn);break;default:t(0)}wn+=Pn,Yn+=oi}r.Ma+=mn}else alert("todo:EmitRescaledRowsYUVA");t(r.Ma<=Oe.height)}}r.C=xe,t(r.C<=r.i)}function Ti(r){var xe;if(0<r.ua)return 0;for(xe=0;xe<r.Wb;++xe){var Oe=r.Ya[xe].G,Ze=r.Ya[xe].H;if(0<Oe[1][Ze[1]+0].g||0<Oe[2][Ze[2]+0].g||0<Oe[3][Ze[3]+0].g)return 0}return 1}function Mi(r,xe,Oe,Ze,un,mn){if(r.Z!=0){var bn=r.qd,wn=r.rd;for(t(Cs[r.Z]!=null);xe<Oe;++xe)Cs[r.Z](bn,wn,Ze,un,Ze,un,mn),bn=Ze,wn=un,un+=mn;r.qd=bn,r.rd=wn}}function qi(r,xe){var Oe=r.l.ma,Ze=Oe.Z==0||Oe.Z==1?r.l.j:r.C;if(Ze=r.C<Ze?Ze:r.C,t(xe<=r.l.o),xe>Ze){var un=r.l.width,mn=Oe.ca,bn=Oe.tb+un*Ze,wn=r.V,Pn=r.Ba+r.c*Ze,Nn=r.gc;t(r.ab==1),t(Nn[0].hc==3),Eo(Nn[0],Ze,xe,wn,Pn,mn,bn),Mi(Oe,Ze,xe,mn,bn,un)}r.C=r.Ma=xe}function Wi(r,xe,Oe,Ze,un,mn,bn){var wn=r.$/Ze,Pn=r.$%Ze,Nn=r.m,Yn=r.s,oi=Oe+r.$,li=oi;un=Oe+Ze*un;var ti=Oe+Ze*mn,_i=280+Yn.ua,gi=r.Pb?wn:16777216,Kn=0<Yn.ua?Yn.Wa:null,Jn=Yn.wc,yi=oi<ti?Ci(Yn,Pn,wn):null;t(r.C<mn),t(ti<=un);var Li=!1;t:for(;;){for(;Li||oi<ti;){var Ai=0;if(wn>=gi){var zi=oi-Oe;t((gi=r).Pb),gi.wd=gi.m,gi.xd=zi,0<gi.s.ua&&Dn(gi.s.Wa,gi.s.vb),gi=wn+Jh}if(Pn&Jn||(yi=Ci(Yn,Pn,wn)),t(yi!=null),yi.Qb&&(xe[oi]=yi.qb,Li=!0),!Li)if(nn(Nn),yi.jc){Ai=Nn,zi=xe;var Di=oi,Xi=yi.pd[Fe(Ai)&Er-1];t(yi.jc),256>Xi.g?(Je(Ai,Ai.u+Xi.g),zi[Di]=Xi.value,Ai=0):(Je(Ai,Ai.u+Xi.g-256),t(256<=Xi.value),Ai=Xi.value),Ai==0&&(Li=!0)}else Ai=pi(yi.G[0],yi.H[0],Nn);if(Nn.h)break;if(Li||256>Ai){if(!Li)if(yi.nd)xe[oi]=(yi.qb|Ai<<8)>>>0;else{if(nn(Nn),Li=pi(yi.G[1],yi.H[1],Nn),nn(Nn),zi=pi(yi.G[2],yi.H[2],Nn),Di=pi(yi.G[3],yi.H[3],Nn),Nn.h)break;xe[oi]=(Di<<24|Li<<16|Ai<<8|zi)>>>0}if(Li=!1,++oi,++Pn>=Ze&&(Pn=0,++wn,bn!=null&&wn<=mn&&!(wn%16)&&bn(r,wn),Kn!=null))for(;li<oi;)Ai=xe[li++],Kn.X[(506832829*Ai&4294967295)>>>Kn.Mb]=Ai}else if(280>Ai){if(Ai=ri(Ai-256,Nn),zi=pi(yi.G[4],yi.H[4],Nn),nn(Nn),zi=ui(Ze,zi=ri(zi,Nn)),Nn.h)break;if(oi-Oe<zi||un-oi<Ai)break t;for(Di=0;Di<Ai;++Di)xe[oi+Di]=xe[oi+Di-zi];for(oi+=Ai,Pn+=Ai;Pn>=Ze;)Pn-=Ze,++wn,bn!=null&&wn<=mn&&!(wn%16)&&bn(r,wn);if(t(oi<=un),Pn&Jn&&(yi=Ci(Yn,Pn,wn)),Kn!=null)for(;li<oi;)Ai=xe[li++],Kn.X[(506832829*Ai&4294967295)>>>Kn.Mb]=Ai}else{if(!(Ai<_i))break t;for(Li=Ai-280,t(Kn!=null);li<oi;)Ai=xe[li++],Kn.X[(506832829*Ai&4294967295)>>>Kn.Mb]=Ai;Ai=oi,t(!(Li>>>(zi=Kn).Xa)),xe[Ai]=zi.X[Li],Li=!0}Li||t(Nn.h==De(Nn))}if(r.Pb&&Nn.h&&oi<un)t(r.m.h),r.a=5,r.m=r.wd,r.$=r.xd,0<r.s.ua&&Dn(r.s.vb,r.s.Wa);else{if(Nn.h)break t;bn!=null&&bn(r,wn>mn?mn:wn),r.a=0,r.$=oi-Oe}return 1}return r.a=3,0}function Ki(r){t(r!=null),r.vc=null,r.yc=null,r.Ya=null;var xe=r.Wa;xe!=null&&(xe.X=null),r.vb=null,t(r!=null)}function $i(){var r=new Il;return r==null?null:(r.a=0,r.xb=qc,$n("Predictor","VP8LPredictors"),$n("Predictor","VP8LPredictors_C"),$n("PredictorAdd","VP8LPredictorsAdd"),$n("PredictorAdd","VP8LPredictorsAdd_C"),Po=di,js=Si,Br=hi,Ir=Fi,xs=Oi,ds=Yi,fs=ai,ze.VP8LMapColor32b=aa,ze.VP8LMapColor8b=Co,r)}function ar(r,xe,Oe,Ze,un){var mn=1,bn=[r],wn=[xe],Pn=Ze.m,Nn=Ze.s,Yn=null,oi=0;t:for(;;){if(Oe)for(;mn&&Sn(Pn,1);){var li=bn,ti=wn,_i=Ze,gi=1,Kn=_i.m,Jn=_i.gc[_i.ab],yi=Sn(Kn,2);if(_i.Oc&1<<yi)mn=0;else{switch(_i.Oc|=1<<yi,Jn.hc=yi,Jn.Ea=li[0],Jn.nc=ti[0],Jn.K=[null],++_i.ab,t(4>=_i.ab),yi){case 0:case 1:Jn.b=Sn(Kn,3)+2,gi=ar(fn(Jn.Ea,Jn.b),fn(Jn.nc,Jn.b),0,_i,Jn.K),Jn.K=Jn.K[0];break;case 3:var Li,Ai=Sn(Kn,8)+1,zi=16<Ai?0:4<Ai?1:2<Ai?2:3;if(li[0]=fn(Jn.Ea,zi),Jn.b=zi,Li=gi=ar(Ai,1,0,_i,Jn.K)){var Di,Xi=Ai,ji=Jn,sr=1<<(8>>ji.b),or=Se(sr);if(or==null)Li=0;else{var ir=ji.K[0],er=ji.w;for(or[0]=ji.K[0][0],Di=1;Di<1*Xi;++Di)or[Di]=vn(ir[er+Di],or[Di-1]);for(;Di<4*sr;++Di)or[Di]=0;ji.K[0]=null,ji.K[0]=or,Li=1}}gi=Li;break;case 2:break;default:t(0)}mn=gi}}if(bn=bn[0],wn=wn[0],mn&&Sn(Pn,1)&&!(mn=1<=(oi=Sn(Pn,4))&&11>=oi)){Ze.a=3;break t}var ur;if(ur=mn)e:{var hr,tr,_r,qr=Ze,wr=bn,Ur=wn,lr=oi,Wr=Oe,Vr=qr.m,Lr=qr.s,Cr=[null],Dr=1,Zr=0,ls=Kh[lr];n:for(;;){if(Wr&&Sn(Vr,1)){var Pr=Sn(Vr,3)+2,bs=fn(wr,Pr),Hs=fn(Ur,Pr),ua=bs*Hs;if(!ar(bs,Hs,0,qr,Cr))break n;for(Cr=Cr[0],Lr.xc=Pr,hr=0;hr<ua;++hr){var ks=Cr[hr]>>8&65535;Cr[hr]=ks,ks>=Dr&&(Dr=ks+1)}}if(Vr.h)break n;for(tr=0;5>tr;++tr){var mr=jc[tr];!tr&&0<lr&&(mr+=1<<lr),Zr<mr&&(Zr=mr)}var Wl=Pe(Dr*ls,Ue),Yc=Dr,Kc=Pe(Yc,pn);if(Kc==null)var qo=null;else t(65536>=Yc),qo=Kc;var Xa=Se(Zr);if(qo==null||Xa==null||Wl==null){qr.a=1;break n}var Uo=Wl;for(hr=_r=0;hr<Dr;++hr){var rs=qo[hr],da=rs.G,fa=rs.H,Jc=0,zo=1,$c=0;for(tr=0;5>tr;++tr){mr=jc[tr],da[tr]=Uo,fa[tr]=_r,!tr&&0<lr&&(mr+=1<<lr);r:{var Ho,Vl=mr,Wo=qr,Ya=Xa,mu=Uo,bu=_r,Gl=0,Ns=Wo.m,vu=Sn(Ns,1);if(_e(Ya,0,0,Vl),vu){var yu=Sn(Ns,1)+1,Au=Sn(Ns,1),Zc=Sn(Ns,Au==0?1:8);Ya[Zc]=1,yu==2&&(Ya[Zc=Sn(Ns,8)]=1);var Vo=1}else{var Qc=Se(19),th=Sn(Ns,4)+4;if(19<th){Wo.a=3;var Go=0;break r}for(Ho=0;Ho<th;++Ho)Qc[Xh[Ho]]=Sn(Ns,3);var Xl=void 0,Ka=void 0,eh=Wo,_u=Qc,Xo=Vl,nh=Ya,Yl=0,Ts=eh.m,ih=8,rh=Pe(128,Ue);i:for(;Me(rh,0,7,_u,19);){if(Sn(Ts,1)){var wu=2+2*Sn(Ts,3);if((Xl=2+Sn(Ts,wu))>Xo)break i}else Xl=Xo;for(Ka=0;Ka<Xo&&Xl--;){nn(Ts);var sh=rh[0+(127&Fe(Ts))];Je(Ts,Ts.u+sh.g);var pa=sh.value;if(16>pa)nh[Ka++]=pa,pa!=0&&(ih=pa);else{var Su=pa==16,ah=pa-16,xu=Vh[ah],oh=Sn(Ts,Wh[ah])+xu;if(Ka+oh>Xo)break i;for(var Lu=Su?ih:0;0<oh--;)nh[Ka++]=Lu}}Yl=1;break i}Yl||(eh.a=3),Vo=Yl}(Vo=Vo&&!Ns.h)&&(Gl=Me(mu,bu,8,Ya,Vl)),Vo&&Gl!=0?Go=Gl:(Wo.a=3,Go=0)}if(Go==0)break n;if(zo&&Gh[tr]==1&&(zo=Uo[_r].g==0),Jc+=Uo[_r].g,_r+=Go,3>=tr){var Ja,Kl=Xa[0];for(Ja=1;Ja<mr;++Ja)Xa[Ja]>Kl&&(Kl=Xa[Ja]);$c+=Kl}}if(rs.nd=zo,rs.Qb=0,zo&&(rs.qb=(da[3][fa[3]+0].value<<24|da[1][fa[1]+0].value<<16|da[2][fa[2]+0].value)>>>0,Jc==0&&256>da[0][fa[0]+0].value&&(rs.Qb=1,rs.qb+=da[0][fa[0]+0].value<<8)),rs.jc=!rs.Qb&&6>$c,rs.jc){var Yo,vs=rs;for(Yo=0;Yo<Er;++Yo){var Fs=Yo,Ms=vs.pd[Fs],Ko=vs.G[0][vs.H[0]+Fs];256<=Ko.value?(Ms.g=Ko.g+256,Ms.value=Ko.value):(Ms.g=0,Ms.value=0,Fs>>=ki(Ko,8,Ms),Fs>>=ki(vs.G[1][vs.H[1]+Fs],16,Ms),Fs>>=ki(vs.G[2][vs.H[2]+Fs],0,Ms),ki(vs.G[3][vs.H[3]+Fs],24,Ms))}}}Lr.vc=Cr,Lr.Wb=Dr,Lr.Ya=qo,Lr.yc=Wl,ur=1;break e}ur=0}if(!(mn=ur)){Ze.a=3;break t}if(0<oi){if(Nn.ua=1<<oi,!ni(Nn.Wa,oi)){Ze.a=1,mn=0;break t}}else Nn.ua=0;var Jl=Ze,lh=bn,Pu=wn,$l=Jl.s,Zl=$l.xc;if(Jl.c=lh,Jl.i=Pu,$l.md=fn(lh,Zl),$l.wc=Zl==0?-1:(1<<Zl)-1,Oe){Ze.xb=iu;break t}if((Yn=Se(bn*wn))==null){Ze.a=1,mn=0;break t}mn=(mn=Wi(Ze,Yn,0,bn,wn,wn,null))&&!Pn.h;break t}return mn?(un!=null?un[0]=Yn:(t(Yn==null),t(Oe)),Ze.$=0,Oe||Ki(Nn)):Ki(Nn),mn}function rr(r,xe){var Oe=r.c*r.i,Ze=Oe+xe+16*xe;return t(r.c<=xe),r.V=Se(Ze),r.V==null?(r.Ta=null,r.Ua=0,r.a=1,0):(r.Ta=r.V,r.Ua=r.Ba+Oe+xe,1)}function kr(r,xe){var Oe=r.C,Ze=xe-Oe,un=r.V,mn=r.Ba+r.c*Oe;for(t(xe<=r.l.o);0<Ze;){var bn=16<Ze?16:Ze,wn=r.l.ma,Pn=r.l.width,Nn=Pn*bn,Yn=wn.ca,oi=wn.tb+Pn*Oe,li=r.Ta,ti=r.Ua;xi(r,bn,un,mn),yr(li,ti,Yn,oi,Nn),Mi(wn,Oe,Oe+bn,Yn,oi,Pn),Ze-=bn,un+=bn*r.c,Oe+=bn}t(Oe==xe),r.C=r.Ma=xe}function Fr(){this.ub=this.yd=this.td=this.Rb=0}function Mr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function cs(){this.Fb=this.Bb=this.Cb=0,this.Zb=Se(4),this.Lb=Se(4)}function so(){this.Yb=function(){var r=[];return function xe(Oe,Ze,un){for(var mn=un[Ze],bn=0;bn<mn&&(Oe.push(un.length>Ze+1?[]:0),!(un.length<Ze+1));bn++)xe(Oe[bn],Ze+1,un)}(r,0,[3,11]),r}()}function hl(){this.jb=Se(3),this.Wc=Te([4,8],so),this.Xc=Te([4,17],so)}function ul(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Se(4),this.od=new Se(4)}function Vs(){this.ld=this.La=this.dd=this.tc=0}function ao(){this.Na=this.la=0}function dl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Aa(){this.ad=Se(384),this.Za=0,this.Ob=Se(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function pl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Vs),this.Y=0,this.ya=Array(new Aa),this.aa=0,this.l=new Gs}function oo(){this.y=Se(16),this.f=Se(8),this.ea=Se(8)}function gl(){this.cb=this.a=0,this.sc="",this.m=new In,this.Od=new Fr,this.Kc=new Mr,this.ed=new ul,this.Qa=new cs,this.Ic=this.$c=this.Aa=0,this.D=new pl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=Pe(8,In),this.ia=0,this.pb=Pe(4,dl),this.Pa=new hl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new oo),this.Hd=0,this.rb=Array(new ao),this.sb=0,this.wa=Array(new Vs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Aa),this.L=this.aa=0,this.gd=Te([4,2],Vs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Gs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ml(){var r=new gl;return r!=null&&(r.a=0,r.sc="OK",r.cb=0,r.Xb=0,Va||(Va=ho)),r}function br(r,xe,Oe){return r.a==0&&(r.a=xe,r.sc=Oe,r.cb=0),0}function lo(r,xe,Oe){return 3<=Oe&&r[xe+0]==157&&r[xe+1]==1&&r[xe+2]==42}function co(r,xe){if(r==null)return 0;if(r.a=0,r.sc="OK",xe==null)return br(r,2,"null VP8Io passed to VP8GetHeaders()");var Oe=xe.data,Ze=xe.w,un=xe.ha;if(4>un)return br(r,7,"Truncated header.");var mn=Oe[Ze+0]|Oe[Ze+1]<<8|Oe[Ze+2]<<16,bn=r.Od;if(bn.Rb=!(1&mn),bn.td=mn>>1&7,bn.yd=mn>>4&1,bn.ub=mn>>5,3<bn.td)return br(r,3,"Incorrect keyframe parameters.");if(!bn.yd)return br(r,4,"Frame not displayable.");Ze+=3,un-=3;var wn=r.Kc;if(bn.Rb){if(7>un)return br(r,7,"cannot parse picture header");if(!lo(Oe,Ze,un))return br(r,3,"Bad code word");wn.c=16383&(Oe[Ze+4]<<8|Oe[Ze+3]),wn.Td=Oe[Ze+4]>>6,wn.i=16383&(Oe[Ze+6]<<8|Oe[Ze+5]),wn.Ud=Oe[Ze+6]>>6,Ze+=7,un-=7,r.za=wn.c+15>>4,r.Ub=wn.i+15>>4,xe.width=wn.c,xe.height=wn.i,xe.Da=0,xe.j=0,xe.v=0,xe.va=xe.width,xe.o=xe.height,xe.da=0,xe.ib=xe.width,xe.hb=xe.height,xe.U=xe.width,xe.T=xe.height,_e((mn=r.Pa).jb,0,255,mn.jb.length),t((mn=r.Qa)!=null),mn.Cb=0,mn.Bb=0,mn.Fb=1,_e(mn.Zb,0,0,mn.Zb.length),_e(mn.Lb,0,0,mn.Lb)}if(bn.ub>un)return br(r,7,"bad partition length");An(mn=r.m,Oe,Ze,bn.ub),Ze+=bn.ub,un-=bn.ub,bn.Rb&&(wn.Ld=on(mn),wn.Kd=on(mn)),wn=r.Qa;var Pn,Nn=r.Pa;if(t(mn!=null),t(wn!=null),wn.Cb=on(mn),wn.Cb){if(wn.Bb=on(mn),on(mn)){for(wn.Fb=on(mn),Pn=0;4>Pn;++Pn)wn.Zb[Pn]=on(mn)?_n(mn,7):0;for(Pn=0;4>Pn;++Pn)wn.Lb[Pn]=on(mn)?_n(mn,6):0}if(wn.Bb)for(Pn=0;3>Pn;++Pn)Nn.jb[Pn]=on(mn)?xn(mn,8):255}else wn.Bb=0;if(mn.Ka)return br(r,3,"cannot parse segment header");if((wn=r.ed).zd=on(mn),wn.Tb=xn(mn,6),wn.wb=xn(mn,3),wn.Pc=on(mn),wn.Pc&&on(mn)){for(Nn=0;4>Nn;++Nn)on(mn)&&(wn.vd[Nn]=_n(mn,6));for(Nn=0;4>Nn;++Nn)on(mn)&&(wn.od[Nn]=_n(mn,6))}if(r.L=wn.Tb==0?0:wn.zd?1:2,mn.Ka)return br(r,3,"cannot parse filter header");var Yn=un;if(un=Pn=Ze,Ze=Pn+Yn,wn=Yn,r.Xb=(1<<xn(r.m,2))-1,Yn<3*(Nn=r.Xb))Oe=7;else{for(Pn+=3*Nn,wn-=3*Nn,Yn=0;Yn<Nn;++Yn){var oi=Oe[un+0]|Oe[un+1]<<8|Oe[un+2]<<16;oi>wn&&(oi=wn),An(r.Jc[+Yn],Oe,Pn,oi),Pn+=oi,wn-=oi,un+=3}An(r.Jc[+Nn],Oe,Pn,wn),Oe=Pn<Ze?0:5}if(Oe!=0)return br(r,Oe,"cannot parse partitions");for(Oe=xn(Pn=r.m,7),un=on(Pn)?_n(Pn,4):0,Ze=on(Pn)?_n(Pn,4):0,wn=on(Pn)?_n(Pn,4):0,Nn=on(Pn)?_n(Pn,4):0,Pn=on(Pn)?_n(Pn,4):0,Yn=r.Qa,oi=0;4>oi;++oi){if(Yn.Cb){var li=Yn.Zb[oi];Yn.Fb||(li+=Oe)}else{if(0<oi){r.pb[oi]=r.pb[0];continue}li=Oe}var ti=r.pb[oi];ti.Sc[0]=Ul[zr(li+un,127)],ti.Sc[1]=zl[zr(li+0,127)],ti.Eb[0]=2*Ul[zr(li+Ze,127)],ti.Eb[1]=101581*zl[zr(li+wn,127)]>>16,8>ti.Eb[1]&&(ti.Eb[1]=8),ti.Qc[0]=Ul[zr(li+Nn,117)],ti.Qc[1]=zl[zr(li+Pn,127)],ti.lc=li+Pn}if(!bn.Rb)return br(r,4,"Not a key frame.");for(on(mn),bn=r.Pa,Oe=0;4>Oe;++Oe){for(un=0;8>un;++un)for(Ze=0;3>Ze;++Ze)for(wn=0;11>wn;++wn)Nn=yn(mn,eu[Oe][un][Ze][wn])?xn(mn,8):Qh[Oe][un][Ze][wn],bn.Wc[Oe][un].Yb[Ze][wn]=Nn;for(un=0;17>un;++un)bn.Xc[Oe][un]=bn.Wc[Oe][nu[un]]}return r.kc=on(mn),r.kc&&(r.Bd=xn(mn,8)),r.cb=1}function ho(r,xe,Oe,Ze,un,mn,bn){var wn=xe[un].Yb[Oe];for(Oe=0;16>un;++un){if(!yn(r,wn[Oe+0]))return un;for(;!yn(r,wn[Oe+1]);)if(wn=xe[++un].Yb[0],Oe=0,un==16)return 16;var Pn=xe[un+1].Yb;if(yn(r,wn[Oe+2])){var Nn=r,Yn=0;if(yn(Nn,(li=wn)[(oi=Oe)+3]))if(yn(Nn,li[oi+6])){for(wn=0,oi=2*(Yn=yn(Nn,li[oi+8]))+(li=yn(Nn,li[oi+9+Yn])),Yn=0,li=$h[oi];li[wn];++wn)Yn+=Yn+yn(Nn,li[wn]);Yn+=3+(8<<oi)}else yn(Nn,li[oi+7])?(Yn=7+2*yn(Nn,165),Yn+=yn(Nn,145)):Yn=5+yn(Nn,159);else Yn=yn(Nn,li[oi+4])?3+yn(Nn,li[oi+5]):2;wn=Pn[2]}else Yn=1,wn=Pn[1];Pn=bn+Zh[un],0>(Nn=r).b&&an(Nn);var oi,li=Nn.b,ti=(oi=Nn.Ca>>1)-(Nn.I>>li)>>31;--Nn.b,Nn.Ca+=ti,Nn.Ca|=1,Nn.I-=(oi+1&ti)<<li,mn[Pn]=((Yn^ti)-ti)*Ze[(0<un)+0]}return 16}function wa(r){var xe=r.rb[r.sb-1];xe.la=0,xe.Na=0,_e(r.zc,0,0,r.zc.length),r.ja=0}function bl(r,xe){if(r==null)return 0;if(xe==null)return br(r,2,"NULL VP8Io parameter in VP8Decode().");if(!r.cb&&!co(r,xe))return 0;if(t(r.cb),xe.ac==null||xe.ac(xe)){xe.ob&&(r.L=0);var Oe=Bo[r.L];if(r.L==2?(r.yb=0,r.zb=0):(r.yb=xe.v-Oe>>4,r.zb=xe.j-Oe>>4,0>r.yb&&(r.yb=0),0>r.zb&&(r.zb=0)),r.Va=xe.o+15+Oe>>4,r.Hb=xe.va+15+Oe>>4,r.Hb>r.za&&(r.Hb=r.za),r.Va>r.Ub&&(r.Va=r.Ub),0<r.L){var Ze=r.ed;for(Oe=0;4>Oe;++Oe){var un;if(r.Qa.Cb){var mn=r.Qa.Lb[Oe];r.Qa.Fb||(mn+=Ze.Tb)}else mn=Ze.Tb;for(un=0;1>=un;++un){var bn=r.gd[Oe][un],wn=mn;if(Ze.Pc&&(wn+=Ze.vd[0],un&&(wn+=Ze.od[0])),0<(wn=0>wn?0:63<wn?63:wn)){var Pn=wn;0<Ze.wb&&(Pn=4<Ze.wb?Pn>>2:Pn>>1)>9-Ze.wb&&(Pn=9-Ze.wb),1>Pn&&(Pn=1),bn.dd=Pn,bn.tc=2*wn+Pn,bn.ld=40<=wn?2:15<=wn?1:0}else bn.tc=0;bn.La=un}}}Oe=0}else br(r,6,"Frame setup failed"),Oe=r.a;if(Oe=Oe==0){if(Oe){r.$c=0,0<r.Aa||(r.Ic=gu);t:{Oe=r.Ic,Ze=4*(Pn=r.za);var Nn=32*Pn,Yn=Pn+1,oi=0<r.L?Pn*(0<r.Aa?2:1):0,li=(r.Aa==2?2:1)*Pn;if((bn=Ze+832+(un=3*(16*Oe+Bo[r.L])/2*Nn)+(mn=r.Fa!=null&&0<r.Fa.length?r.Kc.c*r.Kc.i:0))!=bn)Oe=0;else{if(bn>r.Vb){if(r.Vb=0,r.Ec=Se(bn),r.Fc=0,r.Ec==null){Oe=br(r,1,"no memory during frame initialization.");break t}r.Vb=bn}bn=r.Ec,wn=r.Fc,r.Ac=bn,r.Bc=wn,wn+=Ze,r.Gd=Pe(Nn,oo),r.Hd=0,r.rb=Pe(Yn+1,ao),r.sb=1,r.wa=oi?Pe(oi,Vs):null,r.Y=0,r.D.Nb=0,r.D.wa=r.wa,r.D.Y=r.Y,0<r.Aa&&(r.D.Y+=Pn),t(!0),r.oc=bn,r.pc=wn,wn+=832,r.ya=Pe(li,Aa),r.aa=0,r.D.ya=r.ya,r.D.aa=r.aa,r.Aa==2&&(r.D.aa+=Pn),r.R=16*Pn,r.B=8*Pn,Pn=(Nn=Bo[r.L])*r.R,Nn=Nn/2*r.B,r.sa=bn,r.ta=wn+Pn,r.qa=r.sa,r.ra=r.ta+16*Oe*r.R+Nn,r.Ha=r.qa,r.Ia=r.ra+8*Oe*r.B+Nn,r.$c=0,wn+=un,r.mb=mn?bn:null,r.nb=mn?wn:null,t(wn+mn<=r.Fc+r.Vb),wa(r),_e(r.Ac,r.Bc,0,Ze),Oe=1}}if(Oe){if(xe.ka=0,xe.y=r.sa,xe.O=r.ta,xe.f=r.qa,xe.N=r.ra,xe.ea=r.Ha,xe.Vd=r.Ia,xe.fa=r.R,xe.Rc=r.B,xe.F=null,xe.J=0,!No){for(Oe=-255;255>=Oe;++Oe)Sr[255+Oe]=0>Oe?-Oe:Oe;for(Oe=-1020;1020>=Oe;++Oe)gs[1020+Oe]=-128>Oe?-128:127<Oe?127:Oe;for(Oe=-112;112>=Oe;++Oe)Wa[112+Oe]=-16>Oe?-16:15<Oe?15:Oe;for(Oe=-255;510>=Oe;++Oe)ha[255+Oe]=0>Oe?0:255<Oe?255:Oe;No=1}oa=Al,ps=vl,Ua=fo,Rr=yl,Xr=po,vr=uo,la=Ca,ko=Ds,za=Ml,Bs=ka,qs=Fl,Ls=Zs,Us=Na,ca=So,zs=wo,Ps=as,Ha=us,Yr=Tl,is[0]=ss,is[1]=_l,is[2]=Ll,is[3]=Pl,is[4]=bo,is[5]=Js,is[6]=vo,is[7]=La,is[8]=Cl,is[9]=El,Es[0]=go,Es[1]=Sl,Es[2]=hs,Es[3]=Ys,Es[4]=Nr,Es[5]=xl,Es[6]=mo,ms[0]=As,ms[1]=wl,ms[2]=kl,ms[3]=Pa,ms[4]=Rs,ms[5]=Nl,ms[6]=Ea,Oe=1}else Oe=0}Oe&&(Oe=function(ti,_i){for(ti.M=0;ti.M<ti.Va;++ti.M){var gi,Kn=ti.Jc[ti.M&ti.Xb],Jn=ti.m,yi=ti;for(gi=0;gi<yi.za;++gi){var Li=Jn,Ai=yi,zi=Ai.Ac,Di=Ai.Bc+4*gi,Xi=Ai.zc,ji=Ai.ya[Ai.aa+gi];if(Ai.Qa.Bb?ji.$b=yn(Li,Ai.Pa.jb[0])?2+yn(Li,Ai.Pa.jb[2]):yn(Li,Ai.Pa.jb[1]):ji.$b=0,Ai.kc&&(ji.Ad=yn(Li,Ai.Bd)),ji.Za=!yn(Li,145)+0,ji.Za){var sr=ji.Ob,or=0;for(Ai=0;4>Ai;++Ai){var ir,er=Xi[0+Ai];for(ir=0;4>ir;++ir){er=tu[zi[Di+ir]][er];for(var ur=Bc[yn(Li,er[0])];0<ur;)ur=Bc[2*ur+yn(Li,er[ur])];er=-ur,zi[Di+ir]=er}e(sr,or,zi,Di,4),or+=4,Xi[0+Ai]=er}}else er=yn(Li,156)?yn(Li,128)?1:3:yn(Li,163)?2:0,ji.Ob[0]=er,_e(zi,Di,er,4),_e(Xi,0,er,4);ji.Dd=yn(Li,142)?yn(Li,114)?yn(Li,183)?1:3:2:0}if(yi.m.Ka)return br(ti,7,"Premature end-of-partition0 encountered.");for(;ti.ja<ti.za;++ti.ja){if(yi=Kn,Li=(Jn=ti).rb[Jn.sb-1],zi=Jn.rb[Jn.sb+Jn.ja],gi=Jn.ya[Jn.aa+Jn.ja],Di=Jn.kc?gi.Ad:0)Li.la=zi.la=0,gi.Za||(Li.Na=zi.Na=0),gi.Hc=0,gi.Gc=0,gi.ia=0;else{var hr,tr;if(Li=zi,zi=yi,Di=Jn.Pa.Xc,Xi=Jn.ya[Jn.aa+Jn.ja],ji=Jn.pb[Xi.$b],Ai=Xi.ad,sr=0,or=Jn.rb[Jn.sb-1],er=ir=0,_e(Ai,sr,0,384),Xi.Za)var _r=0,qr=Di[3];else{ur=Se(16);var wr=Li.Na+or.Na;if(wr=Va(zi,Di[1],wr,ji.Eb,0,ur,0),Li.Na=or.Na=(0<wr)+0,1<wr)oa(ur,0,Ai,sr);else{var Ur=ur[0]+3>>3;for(ur=0;256>ur;ur+=16)Ai[sr+ur]=Ur}_r=1,qr=Di[0]}var lr=15&Li.la,Wr=15&or.la;for(ur=0;4>ur;++ur){var Vr=1&Wr;for(Ur=tr=0;4>Ur;++Ur)lr=lr>>1|(Vr=(wr=Va(zi,qr,wr=Vr+(1&lr),ji.Sc,_r,Ai,sr))>_r)<<7,tr=tr<<2|(3<wr?3:1<wr?2:Ai[sr+0]!=0),sr+=16;lr>>=4,Wr=Wr>>1|Vr<<7,ir=(ir<<8|tr)>>>0}for(qr=lr,_r=Wr>>4,hr=0;4>hr;hr+=2){for(tr=0,lr=Li.la>>4+hr,Wr=or.la>>4+hr,ur=0;2>ur;++ur){for(Vr=1&Wr,Ur=0;2>Ur;++Ur)wr=Vr+(1&lr),lr=lr>>1|(Vr=0<(wr=Va(zi,Di[2],wr,ji.Qc,0,Ai,sr)))<<3,tr=tr<<2|(3<wr?3:1<wr?2:Ai[sr+0]!=0),sr+=16;lr>>=2,Wr=Wr>>1|Vr<<5}er|=tr<<4*hr,qr|=lr<<4<<hr,_r|=(240&Wr)<<hr}Li.la=qr,or.la=_r,Xi.Hc=ir,Xi.Gc=er,Xi.ia=43690&er?0:ji.ia,Di=!(ir|er)}if(0<Jn.L&&(Jn.wa[Jn.Y+Jn.ja]=Jn.gd[gi.$b][gi.Za],Jn.wa[Jn.Y+Jn.ja].La|=!Di),yi.Ka)return br(ti,7,"Premature end-of-file encountered.")}if(wa(ti),Jn=_i,yi=1,gi=(Kn=ti).D,Li=0<Kn.L&&Kn.M>=Kn.zb&&Kn.M<=Kn.Va,Kn.Aa==0)t:{if(gi.M=Kn.M,gi.uc=Li,Da(Kn,gi),yi=1,gi=(tr=Kn.D).Nb,Li=(er=Bo[Kn.L])*Kn.R,zi=er/2*Kn.B,ur=16*gi*Kn.R,Ur=8*gi*Kn.B,Di=Kn.sa,Xi=Kn.ta-Li+ur,ji=Kn.qa,Ai=Kn.ra-zi+Ur,sr=Kn.Ha,or=Kn.Ia-zi+Ur,Wr=(lr=tr.M)==0,ir=lr>=Kn.Va-1,Kn.Aa==2&&Da(Kn,tr),tr.uc)for(Vr=(wr=Kn).D.M,t(wr.D.uc),tr=wr.yb;tr<wr.Hb;++tr){_r=tr,qr=Vr;var Lr=(Cr=(mr=wr).D).Nb;hr=mr.R;var Cr=Cr.wa[Cr.Y+_r],Dr=mr.sa,Zr=mr.ta+16*Lr*hr+16*_r,ls=Cr.dd,Pr=Cr.tc;if(Pr!=0)if(t(3<=Pr),mr.L==1)0<_r&&Ps(Dr,Zr,hr,Pr+4),Cr.La&&Yr(Dr,Zr,hr,Pr),0<qr&&zs(Dr,Zr,hr,Pr+4),Cr.La&&Ha(Dr,Zr,hr,Pr);else{var bs=mr.B,Hs=mr.qa,ua=mr.ra+8*Lr*bs+8*_r,ks=mr.Ha,mr=mr.Ia+8*Lr*bs+8*_r;Lr=Cr.ld,0<_r&&(ko(Dr,Zr,hr,Pr+4,ls,Lr),Bs(Hs,ua,ks,mr,bs,Pr+4,ls,Lr)),Cr.La&&(Ls(Dr,Zr,hr,Pr,ls,Lr),ca(Hs,ua,ks,mr,bs,Pr,ls,Lr)),0<qr&&(la(Dr,Zr,hr,Pr+4,ls,Lr),za(Hs,ua,ks,mr,bs,Pr+4,ls,Lr)),Cr.La&&(qs(Dr,Zr,hr,Pr,ls,Lr),Us(Hs,ua,ks,mr,bs,Pr,ls,Lr))}}if(Kn.ia&&alert("todo:DitherRow"),Jn.put!=null){if(tr=16*lr,lr=16*(lr+1),Wr?(Jn.y=Kn.sa,Jn.O=Kn.ta+ur,Jn.f=Kn.qa,Jn.N=Kn.ra+Ur,Jn.ea=Kn.Ha,Jn.W=Kn.Ia+Ur):(tr-=er,Jn.y=Di,Jn.O=Xi,Jn.f=ji,Jn.N=Ai,Jn.ea=sr,Jn.W=or),ir||(lr-=er),lr>Jn.o&&(lr=Jn.o),Jn.F=null,Jn.J=null,Kn.Fa!=null&&0<Kn.Fa.length&&tr<lr&&(Jn.J=Ia(Kn,Jn,tr,lr-tr),Jn.F=Kn.mb,Jn.F==null&&Jn.F.length==0)){yi=br(Kn,3,"Could not decode alpha data.");break t}tr<Jn.j&&(er=Jn.j-tr,tr=Jn.j,t(!(1&er)),Jn.O+=Kn.R*er,Jn.N+=Kn.B*(er>>1),Jn.W+=Kn.B*(er>>1),Jn.F!=null&&(Jn.J+=Jn.width*er)),tr<lr&&(Jn.O+=Jn.v,Jn.N+=Jn.v>>1,Jn.W+=Jn.v>>1,Jn.F!=null&&(Jn.J+=Jn.v),Jn.ka=tr-Jn.j,Jn.U=Jn.va-Jn.v,Jn.T=lr-tr,yi=Jn.put(Jn))}gi+1!=Kn.Ic||ir||(e(Kn.sa,Kn.ta-Li,Di,Xi+16*Kn.R,Li),e(Kn.qa,Kn.ra-zi,ji,Ai+8*Kn.B,zi),e(Kn.Ha,Kn.Ia-zi,sr,or+8*Kn.B,zi))}if(!yi)return br(ti,6,"Output aborted.")}return 1}(r,xe)),xe.bc!=null&&xe.bc(xe),Oe&=1}return Oe?(r.cb=0,Oe):0}function ts(r,xe,Oe,Ze,un){un=r[xe+Oe+32*Ze]+(un>>3),r[xe+Oe+32*Ze]=-256&un?0>un?0:255:un}function Xs(r,xe,Oe,Ze,un,mn){ts(r,xe,0,Oe,Ze+un),ts(r,xe,1,Oe,Ze+mn),ts(r,xe,2,Oe,Ze-mn),ts(r,xe,3,Oe,Ze-un)}function Or(r){return(20091*r>>16)+r}function Sa(r,xe,Oe,Ze){var un,mn=0,bn=Se(16);for(un=0;4>un;++un){var wn=r[xe+0]+r[xe+8],Pn=r[xe+0]-r[xe+8],Nn=(35468*r[xe+4]>>16)-Or(r[xe+12]),Yn=Or(r[xe+4])+(35468*r[xe+12]>>16);bn[mn+0]=wn+Yn,bn[mn+1]=Pn+Nn,bn[mn+2]=Pn-Nn,bn[mn+3]=wn-Yn,mn+=4,xe++}for(un=mn=0;4>un;++un)wn=(r=bn[mn+0]+4)+bn[mn+8],Pn=r-bn[mn+8],Nn=(35468*bn[mn+4]>>16)-Or(bn[mn+12]),ts(Oe,Ze,0,0,wn+(Yn=Or(bn[mn+4])+(35468*bn[mn+12]>>16))),ts(Oe,Ze,1,0,Pn+Nn),ts(Oe,Ze,2,0,Pn-Nn),ts(Oe,Ze,3,0,wn-Yn),mn++,Ze+=32}function uo(r,xe,Oe,Ze){var un=r[xe+0]+4,mn=35468*r[xe+4]>>16,bn=Or(r[xe+4]),wn=35468*r[xe+1]>>16;Xs(Oe,Ze,0,un+bn,r=Or(r[xe+1]),wn),Xs(Oe,Ze,1,un+mn,r,wn),Xs(Oe,Ze,2,un-mn,r,wn),Xs(Oe,Ze,3,un-bn,r,wn)}function vl(r,xe,Oe,Ze,un){Sa(r,xe,Oe,Ze),un&&Sa(r,xe+16,Oe,Ze+4)}function fo(r,xe,Oe,Ze){ps(r,xe+0,Oe,Ze,1),ps(r,xe+32,Oe,Ze+128,1)}function yl(r,xe,Oe,Ze){var un;for(r=r[xe+0]+4,un=0;4>un;++un)for(xe=0;4>xe;++xe)ts(Oe,Ze,xe,un,r)}function po(r,xe,Oe,Ze){r[xe+0]&&Rr(r,xe+0,Oe,Ze),r[xe+16]&&Rr(r,xe+16,Oe,Ze+4),r[xe+32]&&Rr(r,xe+32,Oe,Ze+128),r[xe+48]&&Rr(r,xe+48,Oe,Ze+128+4)}function Al(r,xe,Oe,Ze){var un,mn=Se(16);for(un=0;4>un;++un){var bn=r[xe+0+un]+r[xe+12+un],wn=r[xe+4+un]+r[xe+8+un],Pn=r[xe+4+un]-r[xe+8+un],Nn=r[xe+0+un]-r[xe+12+un];mn[0+un]=bn+wn,mn[8+un]=bn-wn,mn[4+un]=Nn+Pn,mn[12+un]=Nn-Pn}for(un=0;4>un;++un)bn=(r=mn[0+4*un]+3)+mn[3+4*un],wn=mn[1+4*un]+mn[2+4*un],Pn=mn[1+4*un]-mn[2+4*un],Nn=r-mn[3+4*un],Oe[Ze+0]=bn+wn>>3,Oe[Ze+16]=Nn+Pn>>3,Oe[Ze+32]=bn-wn>>3,Oe[Ze+48]=Nn-Pn>>3,Ze+=64}function xa(r,xe,Oe){var Ze,un=xe-32,mn=Hr,bn=255-r[un-1];for(Ze=0;Ze<Oe;++Ze){var wn,Pn=mn,Nn=bn+r[xe-1];for(wn=0;wn<Oe;++wn)r[xe+wn]=Pn[Nn+r[un+wn]];xe+=32}}function _l(r,xe){xa(r,xe,4)}function wl(r,xe){xa(r,xe,8)}function Sl(r,xe){xa(r,xe,16)}function hs(r,xe){var Oe;for(Oe=0;16>Oe;++Oe)e(r,xe+32*Oe,r,xe-32,16)}function Ys(r,xe){var Oe;for(Oe=16;0<Oe;--Oe)_e(r,xe,r[xe-1],16),xe+=32}function Ks(r,xe,Oe){var Ze;for(Ze=0;16>Ze;++Ze)_e(xe,Oe+32*Ze,r,16)}function go(r,xe){var Oe,Ze=16;for(Oe=0;16>Oe;++Oe)Ze+=r[xe-1+32*Oe]+r[xe+Oe-32];Ks(Ze>>5,r,xe)}function Nr(r,xe){var Oe,Ze=8;for(Oe=0;16>Oe;++Oe)Ze+=r[xe-1+32*Oe];Ks(Ze>>4,r,xe)}function xl(r,xe){var Oe,Ze=8;for(Oe=0;16>Oe;++Oe)Ze+=r[xe+Oe-32];Ks(Ze>>4,r,xe)}function mo(r,xe){Ks(128,r,xe)}function Ji(r,xe,Oe){return r+2*xe+Oe+2>>2}function Ll(r,xe){var Oe,Ze=xe-32;for(Ze=new Uint8Array([Ji(r[Ze-1],r[Ze+0],r[Ze+1]),Ji(r[Ze+0],r[Ze+1],r[Ze+2]),Ji(r[Ze+1],r[Ze+2],r[Ze+3]),Ji(r[Ze+2],r[Ze+3],r[Ze+4])]),Oe=0;4>Oe;++Oe)e(r,xe+32*Oe,Ze,0,Ze.length)}function Pl(r,xe){var Oe=r[xe-1],Ze=r[xe-1+32],un=r[xe-1+64],mn=r[xe-1+96];Fn(r,xe+0,16843009*Ji(r[xe-1-32],Oe,Ze)),Fn(r,xe+32,16843009*Ji(Oe,Ze,un)),Fn(r,xe+64,16843009*Ji(Ze,un,mn)),Fn(r,xe+96,16843009*Ji(un,mn,mn))}function ss(r,xe){var Oe,Ze=4;for(Oe=0;4>Oe;++Oe)Ze+=r[xe+Oe-32]+r[xe-1+32*Oe];for(Ze>>=3,Oe=0;4>Oe;++Oe)_e(r,xe+32*Oe,Ze,4)}function bo(r,xe){var Oe=r[xe-1+0],Ze=r[xe-1+32],un=r[xe-1+64],mn=r[xe-1-32],bn=r[xe+0-32],wn=r[xe+1-32],Pn=r[xe+2-32],Nn=r[xe+3-32];r[xe+0+96]=Ji(Ze,un,r[xe-1+96]),r[xe+1+96]=r[xe+0+64]=Ji(Oe,Ze,un),r[xe+2+96]=r[xe+1+64]=r[xe+0+32]=Ji(mn,Oe,Ze),r[xe+3+96]=r[xe+2+64]=r[xe+1+32]=r[xe+0+0]=Ji(bn,mn,Oe),r[xe+3+64]=r[xe+2+32]=r[xe+1+0]=Ji(wn,bn,mn),r[xe+3+32]=r[xe+2+0]=Ji(Pn,wn,bn),r[xe+3+0]=Ji(Nn,Pn,wn)}function vo(r,xe){var Oe=r[xe+1-32],Ze=r[xe+2-32],un=r[xe+3-32],mn=r[xe+4-32],bn=r[xe+5-32],wn=r[xe+6-32],Pn=r[xe+7-32];r[xe+0+0]=Ji(r[xe+0-32],Oe,Ze),r[xe+1+0]=r[xe+0+32]=Ji(Oe,Ze,un),r[xe+2+0]=r[xe+1+32]=r[xe+0+64]=Ji(Ze,un,mn),r[xe+3+0]=r[xe+2+32]=r[xe+1+64]=r[xe+0+96]=Ji(un,mn,bn),r[xe+3+32]=r[xe+2+64]=r[xe+1+96]=Ji(mn,bn,wn),r[xe+3+64]=r[xe+2+96]=Ji(bn,wn,Pn),r[xe+3+96]=Ji(wn,Pn,Pn)}function Js(r,xe){var Oe=r[xe-1+0],Ze=r[xe-1+32],un=r[xe-1+64],mn=r[xe-1-32],bn=r[xe+0-32],wn=r[xe+1-32],Pn=r[xe+2-32],Nn=r[xe+3-32];r[xe+0+0]=r[xe+1+64]=mn+bn+1>>1,r[xe+1+0]=r[xe+2+64]=bn+wn+1>>1,r[xe+2+0]=r[xe+3+64]=wn+Pn+1>>1,r[xe+3+0]=Pn+Nn+1>>1,r[xe+0+96]=Ji(un,Ze,Oe),r[xe+0+64]=Ji(Ze,Oe,mn),r[xe+0+32]=r[xe+1+96]=Ji(Oe,mn,bn),r[xe+1+32]=r[xe+2+96]=Ji(mn,bn,wn),r[xe+2+32]=r[xe+3+96]=Ji(bn,wn,Pn),r[xe+3+32]=Ji(wn,Pn,Nn)}function La(r,xe){var Oe=r[xe+0-32],Ze=r[xe+1-32],un=r[xe+2-32],mn=r[xe+3-32],bn=r[xe+4-32],wn=r[xe+5-32],Pn=r[xe+6-32],Nn=r[xe+7-32];r[xe+0+0]=Oe+Ze+1>>1,r[xe+1+0]=r[xe+0+64]=Ze+un+1>>1,r[xe+2+0]=r[xe+1+64]=un+mn+1>>1,r[xe+3+0]=r[xe+2+64]=mn+bn+1>>1,r[xe+0+32]=Ji(Oe,Ze,un),r[xe+1+32]=r[xe+0+96]=Ji(Ze,un,mn),r[xe+2+32]=r[xe+1+96]=Ji(un,mn,bn),r[xe+3+32]=r[xe+2+96]=Ji(mn,bn,wn),r[xe+3+64]=Ji(bn,wn,Pn),r[xe+3+96]=Ji(wn,Pn,Nn)}function El(r,xe){var Oe=r[xe-1+0],Ze=r[xe-1+32],un=r[xe-1+64],mn=r[xe-1+96];r[xe+0+0]=Oe+Ze+1>>1,r[xe+2+0]=r[xe+0+32]=Ze+un+1>>1,r[xe+2+32]=r[xe+0+64]=un+mn+1>>1,r[xe+1+0]=Ji(Oe,Ze,un),r[xe+3+0]=r[xe+1+32]=Ji(Ze,un,mn),r[xe+3+32]=r[xe+1+64]=Ji(un,mn,mn),r[xe+3+64]=r[xe+2+64]=r[xe+0+96]=r[xe+1+96]=r[xe+2+96]=r[xe+3+96]=mn}function Cl(r,xe){var Oe=r[xe-1+0],Ze=r[xe-1+32],un=r[xe-1+64],mn=r[xe-1+96],bn=r[xe-1-32],wn=r[xe+0-32],Pn=r[xe+1-32],Nn=r[xe+2-32];r[xe+0+0]=r[xe+2+32]=Oe+bn+1>>1,r[xe+0+32]=r[xe+2+64]=Ze+Oe+1>>1,r[xe+0+64]=r[xe+2+96]=un+Ze+1>>1,r[xe+0+96]=mn+un+1>>1,r[xe+3+0]=Ji(wn,Pn,Nn),r[xe+2+0]=Ji(bn,wn,Pn),r[xe+1+0]=r[xe+3+32]=Ji(Oe,bn,wn),r[xe+1+32]=r[xe+3+64]=Ji(Ze,Oe,bn),r[xe+1+64]=r[xe+3+96]=Ji(un,Ze,Oe),r[xe+1+96]=Ji(mn,un,Ze)}function kl(r,xe){var Oe;for(Oe=0;8>Oe;++Oe)e(r,xe+32*Oe,r,xe-32,8)}function Pa(r,xe){var Oe;for(Oe=0;8>Oe;++Oe)_e(r,xe,r[xe-1],8),xe+=32}function Is(r,xe,Oe){var Ze;for(Ze=0;8>Ze;++Ze)_e(xe,Oe+32*Ze,r,8)}function As(r,xe){var Oe,Ze=8;for(Oe=0;8>Oe;++Oe)Ze+=r[xe+Oe-32]+r[xe-1+32*Oe];Is(Ze>>4,r,xe)}function Nl(r,xe){var Oe,Ze=4;for(Oe=0;8>Oe;++Oe)Ze+=r[xe+Oe-32];Is(Ze>>3,r,xe)}function Rs(r,xe){var Oe,Ze=4;for(Oe=0;8>Oe;++Oe)Ze+=r[xe-1+32*Oe];Is(Ze>>3,r,xe)}function Ea(r,xe){Is(128,r,xe)}function $s(r,xe,Oe){var Ze=r[xe-Oe],un=r[xe+0],mn=3*(un-Ze)+Dl[1020+r[xe-2*Oe]-r[xe+Oe]],bn=To[112+(mn+4>>3)];r[xe-Oe]=Hr[255+Ze+To[112+(mn+3>>3)]],r[xe+0]=Hr[255+un-bn]}function yo(r,xe,Oe,Ze){var un=r[xe+0],mn=r[xe+Oe];return Jr[255+r[xe-2*Oe]-r[xe-Oe]]>Ze||Jr[255+mn-un]>Ze}function Ao(r,xe,Oe,Ze){return 4*Jr[255+r[xe-Oe]-r[xe+0]]+Jr[255+r[xe-2*Oe]-r[xe+Oe]]<=Ze}function _o(r,xe,Oe,Ze,un){var mn=r[xe-3*Oe],bn=r[xe-2*Oe],wn=r[xe-Oe],Pn=r[xe+0],Nn=r[xe+Oe],Yn=r[xe+2*Oe],oi=r[xe+3*Oe];return 4*Jr[255+wn-Pn]+Jr[255+bn-Nn]>Ze?0:Jr[255+r[xe-4*Oe]-mn]<=un&&Jr[255+mn-bn]<=un&&Jr[255+bn-wn]<=un&&Jr[255+oi-Yn]<=un&&Jr[255+Yn-Nn]<=un&&Jr[255+Nn-Pn]<=un}function wo(r,xe,Oe,Ze){var un=2*Ze+1;for(Ze=0;16>Ze;++Ze)Ao(r,xe+Ze,Oe,un)&&$s(r,xe+Ze,Oe)}function as(r,xe,Oe,Ze){var un=2*Ze+1;for(Ze=0;16>Ze;++Ze)Ao(r,xe+Ze*Oe,1,un)&&$s(r,xe+Ze*Oe,1)}function us(r,xe,Oe,Ze){var un;for(un=3;0<un;--un)wo(r,xe+=4*Oe,Oe,Ze)}function Tl(r,xe,Oe,Ze){var un;for(un=3;0<un;--un)as(r,xe+=4,Oe,Ze)}function _s(r,xe,Oe,Ze,un,mn,bn,wn){for(mn=2*mn+1;0<un--;){if(_o(r,xe,Oe,mn,bn))if(yo(r,xe,Oe,wn))$s(r,xe,Oe);else{var Pn=r,Nn=xe,Yn=Oe,oi=Pn[Nn-2*Yn],li=Pn[Nn-Yn],ti=Pn[Nn+0],_i=Pn[Nn+Yn],gi=Pn[Nn+2*Yn],Kn=27*(yi=Dl[1020+3*(ti-li)+Dl[1020+oi-_i]])+63>>7,Jn=18*yi+63>>7,yi=9*yi+63>>7;Pn[Nn-3*Yn]=Hr[255+Pn[Nn-3*Yn]+yi],Pn[Nn-2*Yn]=Hr[255+oi+Jn],Pn[Nn-Yn]=Hr[255+li+Kn],Pn[Nn+0]=Hr[255+ti-Kn],Pn[Nn+Yn]=Hr[255+_i-Jn],Pn[Nn+2*Yn]=Hr[255+gi-yi]}xe+=Ze}}function es(r,xe,Oe,Ze,un,mn,bn,wn){for(mn=2*mn+1;0<un--;){if(_o(r,xe,Oe,mn,bn))if(yo(r,xe,Oe,wn))$s(r,xe,Oe);else{var Pn=r,Nn=xe,Yn=Oe,oi=Pn[Nn-Yn],li=Pn[Nn+0],ti=Pn[Nn+Yn],_i=To[112+((gi=3*(li-oi))+4>>3)],gi=To[112+(gi+3>>3)],Kn=_i+1>>1;Pn[Nn-2*Yn]=Hr[255+Pn[Nn-2*Yn]+Kn],Pn[Nn-Yn]=Hr[255+oi+gi],Pn[Nn+0]=Hr[255+li-_i],Pn[Nn+Yn]=Hr[255+ti-Kn]}xe+=Ze}}function Ca(r,xe,Oe,Ze,un,mn){_s(r,xe,Oe,1,16,Ze,un,mn)}function Ds(r,xe,Oe,Ze,un,mn){_s(r,xe,1,Oe,16,Ze,un,mn)}function Fl(r,xe,Oe,Ze,un,mn){var bn;for(bn=3;0<bn;--bn)es(r,xe+=4*Oe,Oe,1,16,Ze,un,mn)}function Zs(r,xe,Oe,Ze,un,mn){var bn;for(bn=3;0<bn;--bn)es(r,xe+=4,1,Oe,16,Ze,un,mn)}function Ml(r,xe,Oe,Ze,un,mn,bn,wn){_s(r,xe,un,1,8,mn,bn,wn),_s(Oe,Ze,un,1,8,mn,bn,wn)}function ka(r,xe,Oe,Ze,un,mn,bn,wn){_s(r,xe,1,un,8,mn,bn,wn),_s(Oe,Ze,1,un,8,mn,bn,wn)}function Na(r,xe,Oe,Ze,un,mn,bn,wn){es(r,xe+4*un,un,1,8,mn,bn,wn),es(Oe,Ze+4*un,un,1,8,mn,bn,wn)}function So(r,xe,Oe,Ze,un,mn,bn,wn){es(r,xe+4,1,un,8,mn,bn,wn),es(Oe,Ze+4,1,un,8,mn,bn,wn)}function Qs(){this.ba=new Tn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new bi,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ta(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Fa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xo(){this.ua=0,this.Wa=new cn,this.vb=new cn,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new pn,this.yc=new Ue}function Il(){this.xb=this.a=0,this.l=new Gs,this.ca=new Tn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new je,this.Pb=0,this.wd=new je,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xo,this.ab=0,this.gc=Pe(4,Fa),this.Oc=0}function ta(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Gs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Os(r,xe,Oe,Ze,un,mn,bn){for(r=r==null?0:r[xe+0],xe=0;xe<bn;++xe)un[mn+xe]=r+Oe[Ze+xe]&255,r=un[mn+xe]}function Ma(r,xe,Oe,Ze,un,mn,bn){var wn;if(r==null)Os(null,null,Oe,Ze,un,mn,bn);else for(wn=0;wn<bn;++wn)un[mn+wn]=r[xe+wn]+Oe[Ze+wn]&255}function ws(r,xe,Oe,Ze,un,mn,bn){if(r==null)Os(null,null,Oe,Ze,un,mn,bn);else{var wn,Pn=r[xe+0],Nn=Pn,Yn=Pn;for(wn=0;wn<bn;++wn)Nn=Yn+(Pn=r[xe+wn])-Nn,Yn=Oe[Ze+wn]+(-256&Nn?0>Nn?0:255:Nn)&255,Nn=Pn,un[mn+wn]=Yn}}function Ia(r,xe,Oe,Ze){var un=xe.width,mn=xe.o;if(t(r!=null&&xe!=null),0>Oe||0>=Ze||Oe+Ze>mn)return null;if(!r.Cc){if(r.ga==null){var bn;if(r.ga=new ta,(bn=r.ga==null)||(bn=xe.width*xe.o,t(r.Gb.length==0),r.Gb=Se(bn),r.Uc=0,r.Gb==null?bn=0:(r.mb=r.Gb,r.nb=r.Uc,r.rc=null,bn=1),bn=!bn),!bn){bn=r.ga;var wn=r.Fa,Pn=r.P,Nn=r.qc,Yn=r.mb,oi=r.nb,li=Pn+1,ti=Nn-1,_i=bn.l;if(t(wn!=null&&Yn!=null&&xe!=null),Cs[0]=null,Cs[1]=Os,Cs[2]=Ma,Cs[3]=ws,bn.ca=Yn,bn.tb=oi,bn.c=xe.width,bn.i=xe.height,t(0<bn.c&&0<bn.i),1>=Nn)xe=0;else if(bn.$a=wn[Pn+0]>>0&3,bn.Z=wn[Pn+0]>>2&3,bn.Lc=wn[Pn+0]>>4&3,Pn=wn[Pn+0]>>6&3,0>bn.$a||1<bn.$a||4<=bn.Z||1<bn.Lc||Pn)xe=0;else if(_i.put=Ln,_i.ac=Cn,_i.bc=Bn,_i.ma=bn,_i.width=xe.width,_i.height=xe.height,_i.Da=xe.Da,_i.v=xe.v,_i.va=xe.va,_i.j=xe.j,_i.o=xe.o,bn.$a)t:{t(bn.$a==1),xe=$i();e:for(;;){if(xe==null){xe=0;break t}if(t(bn!=null),bn.mc=xe,xe.c=bn.c,xe.i=bn.i,xe.l=bn.l,xe.l.ma=bn,xe.l.width=bn.c,xe.l.height=bn.i,xe.a=0,En(xe.m,wn,li,ti),!ar(bn.c,bn.i,1,xe,null)||(xe.ab==1&&xe.gc[0].hc==3&&Ti(xe.s)?(bn.ic=1,wn=xe.c*xe.i,xe.Ta=null,xe.Ua=0,xe.V=Se(wn),xe.Ba=0,xe.V==null?(xe.a=1,xe=0):xe=1):(bn.ic=0,xe=rr(xe,bn.c)),!xe))break e;xe=1;break t}bn.mc=null,xe=0}else xe=ti>=bn.c*bn.i;bn=!xe}if(bn)return null;r.ga.Lc!=1?r.Ga=0:Ze=mn-Oe}t(r.ga!=null),t(Oe+Ze<=mn);t:{if(xe=(wn=r.ga).c,mn=wn.l.o,wn.$a==0){if(li=r.rc,ti=r.Vc,_i=r.Fa,Pn=r.P+1+Oe*xe,Nn=r.mb,Yn=r.nb+Oe*xe,t(Pn<=r.P+r.qc),wn.Z!=0)for(t(Cs[wn.Z]!=null),bn=0;bn<Ze;++bn)Cs[wn.Z](li,ti,_i,Pn,Nn,Yn,xe),li=Nn,ti=Yn,Yn+=xe,Pn+=xe;else for(bn=0;bn<Ze;++bn)e(Nn,Yn,_i,Pn,xe),li=Nn,ti=Yn,Yn+=xe,Pn+=xe;r.rc=li,r.Vc=ti}else{if(t(wn.mc!=null),xe=Oe+Ze,t((bn=wn.mc)!=null),t(xe<=bn.i),bn.C>=xe)xe=1;else if(wn.ic||si(),wn.ic){wn=bn.V,li=bn.Ba,ti=bn.c;var gi=bn.i,Kn=(_i=1,Pn=bn.$/ti,Nn=bn.$%ti,Yn=bn.m,oi=bn.s,bn.$),Jn=ti*gi,yi=ti*xe,Li=oi.wc,Ai=Kn<yi?Ci(oi,Nn,Pn):null;t(Kn<=Jn),t(xe<=gi),t(Ti(oi));e:for(;;){for(;!Yn.h&&Kn<yi;){if(Nn&Li||(Ai=Ci(oi,Nn,Pn)),t(Ai!=null),nn(Yn),256>(gi=pi(Ai.G[0],Ai.H[0],Yn)))wn[li+Kn]=gi,++Kn,++Nn>=ti&&(Nn=0,++Pn<=xe&&!(Pn%16)&&qi(bn,Pn));else{if(!(280>gi)){_i=0;break e}gi=ri(gi-256,Yn);var zi,Di=pi(Ai.G[4],Ai.H[4],Yn);if(nn(Yn),!(Kn>=(Di=ui(ti,Di=ri(Di,Yn)))&&Jn-Kn>=gi)){_i=0;break e}for(zi=0;zi<gi;++zi)wn[li+Kn+zi]=wn[li+Kn+zi-Di];for(Kn+=gi,Nn+=gi;Nn>=ti;)Nn-=ti,++Pn<=xe&&!(Pn%16)&&qi(bn,Pn);Kn<yi&&Nn&Li&&(Ai=Ci(oi,Nn,Pn))}t(Yn.h==De(Yn))}qi(bn,Pn>xe?xe:Pn);break e}!_i||Yn.h&&Kn<Jn?(_i=0,bn.a=Yn.h?5:3):bn.$=Kn,xe=_i}else xe=Wi(bn,bn.V,bn.Ba,bn.c,bn.i,xe,kr);if(!xe){Ze=0;break t}}Oe+Ze>=mn&&(r.Cc=1),Ze=1}if(!Ze)return null;if(r.Cc&&((Ze=r.ga)!=null&&(Ze.mc=null),r.ga=null,0<r.Ga))return alert("todo:WebPDequantizeLevels"),null}return r.nb+Oe*un}function ke(r,xe,Oe,Ze,un,mn){for(;0<un--;){var bn,wn=r,Pn=xe+(Oe?1:0),Nn=r,Yn=xe+(Oe?0:3);for(bn=0;bn<Ze;++bn){var oi=Nn[Yn+4*bn];oi!=255&&(oi*=32897,wn[Pn+4*bn+0]=wn[Pn+4*bn+0]*oi>>23,wn[Pn+4*bn+1]=wn[Pn+4*bn+1]*oi>>23,wn[Pn+4*bn+2]=wn[Pn+4*bn+2]*oi>>23)}xe+=mn}}function dn(r,xe,Oe,Ze,un){for(;0<Ze--;){var mn;for(mn=0;mn<Oe;++mn){var bn=r[xe+2*mn+0],wn=15&(Nn=r[xe+2*mn+1]),Pn=4369*wn,Nn=(240&Nn|Nn>>4)*Pn>>16;r[xe+2*mn+0]=(240&bn|bn>>4)*Pn>>16&240|(15&bn|bn<<4)*Pn>>16>>4&15,r[xe+2*mn+1]=240&Nn|wn}xe+=un}}function Mn(r,xe,Oe,Ze,un,mn,bn,wn){var Pn,Nn,Yn=255;for(Nn=0;Nn<un;++Nn){for(Pn=0;Pn<Ze;++Pn){var oi=r[xe+Pn];mn[bn+4*Pn]=oi,Yn&=oi}xe+=Oe,bn+=wn}return Yn!=255}function Gn(r,xe,Oe,Ze,un){var mn;for(mn=0;mn<un;++mn)Oe[Ze+mn]=r[xe+mn]>>8}function si(){Kr=ke,dr=dn,fr=Mn,yr=Gn}function mi(r,xe,Oe){ze[r]=function(Ze,un,mn,bn,wn,Pn,Nn,Yn,oi,li,ti,_i,gi,Kn,Jn,yi,Li){var Ai,zi=Li-1>>1,Di=wn[Pn+0]|Nn[Yn+0]<<16,Xi=oi[li+0]|ti[_i+0]<<16;t(Ze!=null);var ji=3*Di+Xi+131074>>2;for(xe(Ze[un+0],255&ji,ji>>16,gi,Kn),mn!=null&&(ji=3*Xi+Di+131074>>2,xe(mn[bn+0],255&ji,ji>>16,Jn,yi)),Ai=1;Ai<=zi;++Ai){var sr=wn[Pn+Ai]|Nn[Yn+Ai]<<16,or=oi[li+Ai]|ti[_i+Ai]<<16,ir=Di+sr+Xi+or+524296,er=ir+2*(sr+Xi)>>3;ji=er+Di>>1,Di=(ir=ir+2*(Di+or)>>3)+sr>>1,xe(Ze[un+2*Ai-1],255&ji,ji>>16,gi,Kn+(2*Ai-1)*Oe),xe(Ze[un+2*Ai-0],255&Di,Di>>16,gi,Kn+(2*Ai-0)*Oe),mn!=null&&(ji=ir+Xi>>1,Di=er+or>>1,xe(mn[bn+2*Ai-1],255&ji,ji>>16,Jn,yi+(2*Ai-1)*Oe),xe(mn[bn+2*Ai+0],255&Di,Di>>16,Jn,yi+(2*Ai+0)*Oe)),Di=sr,Xi=or}1&Li||(ji=3*Di+Xi+131074>>2,xe(Ze[un+Li-1],255&ji,ji>>16,gi,Kn+(Li-1)*Oe),mn!=null&&(ji=3*Xi+Di+131074>>2,xe(mn[bn+Li-1],255&ji,ji>>16,Jn,yi+(Li-1)*Oe)))}}function Ei(){$r[Fo]=ru,$r[Mo]=Uc,$r[Dc]=su,$r[Io]=zc,$r[Ro]=Hc,$r[Ol]=Wc,$r[Oc]=au,$r[jl]=Uc,$r[Bl]=zc,$r[Do]=Hc,$r[ql]=Wc}function Ui(r){return r&-16384?0>r?0:255:r>>ou}function Vi(r,xe){return Ui((19077*r>>8)+(26149*xe>>8)-14234)}function Qi(r,xe,Oe){return Ui((19077*r>>8)-(6419*xe>>8)-(13320*Oe>>8)+8708)}function Zi(r,xe){return Ui((19077*r>>8)+(33050*xe>>8)-17685)}function nr(r,xe,Oe,Ze,un){Ze[un+0]=Vi(r,Oe),Ze[un+1]=Qi(r,xe,Oe),Ze[un+2]=Zi(r,xe)}function pr(r,xe,Oe,Ze,un){Ze[un+0]=Zi(r,xe),Ze[un+1]=Qi(r,xe,Oe),Ze[un+2]=Vi(r,Oe)}function gr(r,xe,Oe,Ze,un){var mn=Qi(r,xe,Oe);xe=mn<<3&224|Zi(r,xe)>>3,Ze[un+0]=248&Vi(r,Oe)|mn>>5,Ze[un+1]=xe}function Ar(r,xe,Oe,Ze,un){var mn=240&Zi(r,xe)|15;Ze[un+0]=240&Vi(r,Oe)|Qi(r,xe,Oe)>>4,Ze[un+1]=mn}function Tr(r,xe,Oe,Ze,un){Ze[un+0]=255,nr(r,xe,Oe,Ze,un+1)}function xr(r,xe,Oe,Ze,un){pr(r,xe,Oe,Ze,un),Ze[un+3]=255}function ns(r,xe,Oe,Ze,un){nr(r,xe,Oe,Ze,un),Ze[un+3]=255}function zr(r,xe){return 0>r?0:r>xe?xe:r}function os(r,xe,Oe){ze[r]=function(Ze,un,mn,bn,wn,Pn,Nn,Yn,oi){for(var li=Yn+(-2&oi)*Oe;Yn!=li;)xe(Ze[un+0],mn[bn+0],wn[Pn+0],Nn,Yn),xe(Ze[un+1],mn[bn+0],wn[Pn+0],Nn,Yn+Oe),un+=2,++bn,++Pn,Yn+=2*Oe;1&oi&&xe(Ze[un+0],mn[bn+0],wn[Pn+0],Nn,Yn)}}function Lo(r,xe,Oe){return Oe==0?r==0?xe==0?6:5:xe==0?4:0:Oe}function Ra(r,xe,Oe,Ze,un){switch(r>>>30){case 3:ps(xe,Oe,Ze,un,0);break;case 2:vr(xe,Oe,Ze,un);break;case 1:Rr(xe,Oe,Ze,un)}}function Da(r,xe){var Oe,Ze,un=xe.M,mn=xe.Nb,bn=r.oc,wn=r.pc+40,Pn=r.oc,Nn=r.pc+584,Yn=r.oc,oi=r.pc+600;for(Oe=0;16>Oe;++Oe)bn[wn+32*Oe-1]=129;for(Oe=0;8>Oe;++Oe)Pn[Nn+32*Oe-1]=129,Yn[oi+32*Oe-1]=129;for(0<un?bn[wn-1-32]=Pn[Nn-1-32]=Yn[oi-1-32]=129:(_e(bn,wn-32-1,127,21),_e(Pn,Nn-32-1,127,9),_e(Yn,oi-32-1,127,9)),Ze=0;Ze<r.za;++Ze){var li=xe.ya[xe.aa+Ze];if(0<Ze){for(Oe=-1;16>Oe;++Oe)e(bn,wn+32*Oe-4,bn,wn+32*Oe+12,4);for(Oe=-1;8>Oe;++Oe)e(Pn,Nn+32*Oe-4,Pn,Nn+32*Oe+4,4),e(Yn,oi+32*Oe-4,Yn,oi+32*Oe+4,4)}var ti=r.Gd,_i=r.Hd+Ze,gi=li.ad,Kn=li.Hc;if(0<un&&(e(bn,wn-32,ti[_i].y,0,16),e(Pn,Nn-32,ti[_i].f,0,8),e(Yn,oi-32,ti[_i].ea,0,8)),li.Za){var Jn=bn,yi=wn-32+16;for(0<un&&(Ze>=r.za-1?_e(Jn,yi,ti[_i].y[15],4):e(Jn,yi,ti[_i+1].y,0,4)),Oe=0;4>Oe;Oe++)Jn[yi+128+Oe]=Jn[yi+256+Oe]=Jn[yi+384+Oe]=Jn[yi+0+Oe];for(Oe=0;16>Oe;++Oe,Kn<<=2)Jn=bn,yi=wn+Gc[Oe],is[li.Ob[Oe]](Jn,yi),Ra(Kn,gi,16*+Oe,Jn,yi)}else if(Jn=Lo(Ze,un,li.Ob[0]),Es[Jn](bn,wn),Kn!=0)for(Oe=0;16>Oe;++Oe,Kn<<=2)Ra(Kn,gi,16*+Oe,bn,wn+Gc[Oe]);for(Oe=li.Gc,Jn=Lo(Ze,un,li.Dd),ms[Jn](Pn,Nn),ms[Jn](Yn,oi),Kn=gi,Jn=Pn,yi=Nn,255&(li=Oe>>0)&&(170&li?Ua(Kn,256,Jn,yi):Xr(Kn,256,Jn,yi)),li=Yn,Kn=oi,255&(Oe>>=8)&&(170&Oe?Ua(gi,320,li,Kn):Xr(gi,320,li,Kn)),un<r.Ub-1&&(e(ti[_i].y,0,bn,wn+480,16),e(ti[_i].f,0,Pn,Nn+224,8),e(ti[_i].ea,0,Yn,oi+224,8)),Oe=8*mn*r.B,ti=r.sa,_i=r.ta+16*Ze+16*mn*r.R,gi=r.qa,li=r.ra+8*Ze+Oe,Kn=r.Ha,Jn=r.Ia+8*Ze+Oe,Oe=0;16>Oe;++Oe)e(ti,_i+Oe*r.R,bn,wn+32*Oe,16);for(Oe=0;8>Oe;++Oe)e(gi,li+Oe*r.B,Pn,Nn+32*Oe,8),e(Kn,Jn+Oe*r.B,Yn,oi+32*Oe,8)}}function ea(r,xe,Oe,Ze,un,mn,bn,wn,Pn){var Nn=[0],Yn=[0],oi=0,li=Pn!=null?Pn.kd:0,ti=Pn??new Ta;if(r==null||12>Oe)return 7;ti.data=r,ti.w=xe,ti.ha=Oe,xe=[xe],Oe=[Oe],ti.gb=[ti.gb];t:{var _i=xe,gi=Oe,Kn=ti.gb;if(t(r!=null),t(gi!=null),t(Kn!=null),Kn[0]=0,12<=gi[0]&&!St(r,_i[0],"RIFF")){if(St(r,_i[0]+8,"WEBP")){Kn=3;break t}var Jn=Wn(r,_i[0]+4);if(12>Jn||4294967286<Jn){Kn=3;break t}if(li&&Jn>gi[0]-8){Kn=7;break t}Kn[0]=Jn,_i[0]+=12,gi[0]-=12}Kn=0}if(Kn!=0)return Kn;for(Jn=0<ti.gb[0],Oe=Oe[0];;){t:{var yi=r;gi=xe,Kn=Oe;var Li=Nn,Ai=Yn,zi=_i=[0];if((ji=oi=[oi])[0]=0,8>Kn[0])Kn=7;else{if(!St(yi,gi[0],"VP8X")){if(Wn(yi,gi[0]+4)!=10){Kn=3;break t}if(18>Kn[0]){Kn=7;break t}var Di=Wn(yi,gi[0]+8),Xi=1+Un(yi,gi[0]+12);if(2147483648<=Xi*(yi=1+Un(yi,gi[0]+15))){Kn=3;break t}zi!=null&&(zi[0]=Di),Li!=null&&(Li[0]=Xi),Ai!=null&&(Ai[0]=yi),gi[0]+=18,Kn[0]-=18,ji[0]=1}Kn=0}}if(oi=oi[0],_i=_i[0],Kn!=0)return Kn;if(gi=!!(2&_i),!Jn&&oi)return 3;if(mn!=null&&(mn[0]=!!(16&_i)),bn!=null&&(bn[0]=gi),wn!=null&&(wn[0]=0),bn=Nn[0],_i=Yn[0],oi&&gi&&Pn==null){Kn=0;break}if(4>Oe){Kn=7;break}if(Jn&&oi||!Jn&&!oi&&!St(r,xe[0],"ALPH")){Oe=[Oe],ti.na=[ti.na],ti.P=[ti.P],ti.Sa=[ti.Sa];t:{Di=r,Kn=xe,Jn=Oe;var ji=ti.gb;Li=ti.na,Ai=ti.P,zi=ti.Sa,Xi=22,t(Di!=null),t(Jn!=null),yi=Kn[0];var sr=Jn[0];for(t(Li!=null),t(zi!=null),Li[0]=null,Ai[0]=null,zi[0]=0;;){if(Kn[0]=yi,Jn[0]=sr,8>sr){Kn=7;break t}var or=Wn(Di,yi+4);if(4294967286<or){Kn=3;break t}var ir=8+or+1&-2;if(Xi+=ir,0<ji&&Xi>ji){Kn=3;break t}if(!St(Di,yi,"VP8 ")||!St(Di,yi,"VP8L")){Kn=0;break t}if(sr[0]<ir){Kn=7;break t}St(Di,yi,"ALPH")||(Li[0]=Di,Ai[0]=yi+8,zi[0]=or),yi+=ir,sr-=ir}}if(Oe=Oe[0],ti.na=ti.na[0],ti.P=ti.P[0],ti.Sa=ti.Sa[0],Kn!=0)break}Oe=[Oe],ti.Ja=[ti.Ja],ti.xa=[ti.xa];t:if(ji=r,Kn=xe,Jn=Oe,Li=ti.gb[0],Ai=ti.Ja,zi=ti.xa,Di=Kn[0],yi=!St(ji,Di,"VP8 "),Xi=!St(ji,Di,"VP8L"),t(ji!=null),t(Jn!=null),t(Ai!=null),t(zi!=null),8>Jn[0])Kn=7;else{if(yi||Xi){if(ji=Wn(ji,Di+4),12<=Li&&ji>Li-12){Kn=3;break t}if(li&&ji>Jn[0]-8){Kn=7;break t}Ai[0]=ji,Kn[0]+=8,Jn[0]-=8,zi[0]=Xi}else zi[0]=5<=Jn[0]&&ji[Di+0]==47&&!(ji[Di+4]>>5),Ai[0]=Jn[0];Kn=0}if(Oe=Oe[0],ti.Ja=ti.Ja[0],ti.xa=ti.xa[0],xe=xe[0],Kn!=0)break;if(4294967286<ti.Ja)return 3;if(wn==null||gi||(wn[0]=ti.xa?2:1),bn=[bn],_i=[_i],ti.xa){if(5>Oe){Kn=7;break}wn=bn,li=_i,gi=mn,r==null||5>Oe?r=0:5<=Oe&&r[xe+0]==47&&!(r[xe+4]>>5)?(Jn=[0],ji=[0],Li=[0],En(Ai=new je,r,xe,Oe),Hn(Ai,Jn,ji,Li)?(wn!=null&&(wn[0]=Jn[0]),li!=null&&(li[0]=ji[0]),gi!=null&&(gi[0]=Li[0]),r=1):r=0):r=0}else{if(10>Oe){Kn=7;break}wn=_i,r==null||10>Oe||!lo(r,xe+3,Oe-3)?r=0:(li=r[xe+0]|r[xe+1]<<8|r[xe+2]<<16,gi=16383&(r[xe+7]<<8|r[xe+6]),r=16383&(r[xe+9]<<8|r[xe+8]),1&li||3<(li>>1&7)||!(li>>4&1)||li>>5>=ti.Ja||!gi||!r?r=0:(bn&&(bn[0]=gi),wn&&(wn[0]=r),r=1))}if(!r||(bn=bn[0],_i=_i[0],oi&&(Nn[0]!=bn||Yn[0]!=_i)))return 3;Pn!=null&&(Pn[0]=ti,Pn.offset=xe-Pn.w,t(4294967286>xe-Pn.w),t(Pn.offset==Pn.ha-Oe));break}return Kn==0||Kn==7&&oi&&Pn==null?(mn!=null&&(mn[0]|=ti.na!=null&&0<ti.na.length),Ze!=null&&(Ze[0]=bn),un!=null&&(un[0]=_i),0):Kn}function Oa(r,xe,Oe){var Ze=xe.width,un=xe.height,mn=0,bn=0,wn=Ze,Pn=un;if(xe.Da=r!=null&&0<r.Da,xe.Da&&(wn=r.cd,Pn=r.bd,mn=r.v,bn=r.j,11>Oe||(mn&=-2,bn&=-2),0>mn||0>bn||0>=wn||0>=Pn||mn+wn>Ze||bn+Pn>un))return 0;if(xe.v=mn,xe.j=bn,xe.va=mn+wn,xe.o=bn+Pn,xe.U=wn,xe.T=Pn,xe.da=r!=null&&0<r.da,xe.da){if(!qn(wn,Pn,Oe=[r.ib],mn=[r.hb]))return 0;xe.ib=Oe[0],xe.hb=mn[0]}return xe.ob=r!=null&&r.ob,xe.Kb=r==null||!r.Sd,xe.da&&(xe.ob=xe.ib<3*Ze/4&&xe.hb<3*un/4,xe.Kb=0),1}function ja(r){if(r==null)return 2;if(11>r.S){var xe=r.f.RGBA;xe.fb+=(r.height-1)*xe.A,xe.A=-xe.A}else xe=r.f.kb,r=r.height,xe.O+=(r-1)*xe.fa,xe.fa=-xe.fa,xe.N+=(r-1>>1)*xe.Ab,xe.Ab=-xe.Ab,xe.W+=(r-1>>1)*xe.Db,xe.Db=-xe.Db,xe.F!=null&&(xe.J+=(r-1)*xe.lb,xe.lb=-xe.lb);return 0}function na(r,xe,Oe,Ze){if(Ze==null||0>=r||0>=xe)return 2;if(Oe!=null){if(Oe.Da){var un=Oe.cd,mn=Oe.bd,bn=-2&Oe.v,wn=-2&Oe.j;if(0>bn||0>wn||0>=un||0>=mn||bn+un>r||wn+mn>xe)return 2;r=un,xe=mn}if(Oe.da){if(!qn(r,xe,un=[Oe.ib],mn=[Oe.hb]))return 2;r=un[0],xe=mn[0]}}Ze.width=r,Ze.height=xe;t:{var Pn=Ze.width,Nn=Ze.height;if(r=Ze.S,0>=Pn||0>=Nn||!(r>=Fo&&13>r))r=2;else{if(0>=Ze.Rd&&Ze.sd==null){bn=mn=un=xe=0;var Yn=(wn=Pn*Xc[r])*Nn;if(11>r||(mn=(Nn+1)/2*(xe=(Pn+1)/2),r==12&&(bn=(un=Pn)*Nn)),(Nn=Se(Yn+2*mn+bn))==null){r=1;break t}Ze.sd=Nn,11>r?((Pn=Ze.f.RGBA).eb=Nn,Pn.fb=0,Pn.A=wn,Pn.size=Yn):((Pn=Ze.f.kb).y=Nn,Pn.O=0,Pn.fa=wn,Pn.Fd=Yn,Pn.f=Nn,Pn.N=0+Yn,Pn.Ab=xe,Pn.Cd=mn,Pn.ea=Nn,Pn.W=0+Yn+mn,Pn.Db=xe,Pn.Ed=mn,r==12&&(Pn.F=Nn,Pn.J=0+Yn+2*mn),Pn.Tc=bn,Pn.lb=un)}if(xe=1,un=Ze.S,mn=Ze.width,bn=Ze.height,un>=Fo&&13>un)if(11>un)r=Ze.f.RGBA,xe&=(wn=Math.abs(r.A))*(bn-1)+mn<=r.size,xe&=wn>=mn*Xc[un],xe&=r.eb!=null;else{r=Ze.f.kb,wn=(mn+1)/2,Yn=(bn+1)/2,Pn=Math.abs(r.fa),Nn=Math.abs(r.Ab);var oi=Math.abs(r.Db),li=Math.abs(r.lb),ti=li*(bn-1)+mn;xe&=Pn*(bn-1)+mn<=r.Fd,xe&=Nn*(Yn-1)+wn<=r.Cd,xe=(xe&=oi*(Yn-1)+wn<=r.Ed)&Pn>=mn&Nn>=wn&oi>=wn,xe&=r.y!=null,xe&=r.f!=null,xe&=r.ea!=null,un==12&&(xe&=li>=mn,xe&=ti<=r.Tc,xe&=r.F!=null)}else xe=0;r=xe?0:2}}return r!=0||Oe!=null&&Oe.fd&&(r=ja(Ze)),r}var Er=64,ia=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ra=24,sa=32,Ba=8,jr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];kn("Predictor0","PredictorAdd0"),ze.Predictor0=function(){return 4278190080},ze.Predictor1=function(r){return r},ze.Predictor2=function(r,xe,Oe){return xe[Oe+0]},ze.Predictor3=function(r,xe,Oe){return xe[Oe+1]},ze.Predictor4=function(r,xe,Oe){return xe[Oe-1]},ze.Predictor5=function(r,xe,Oe){return zn(zn(r,xe[Oe+1]),xe[Oe+0])},ze.Predictor6=function(r,xe,Oe){return zn(r,xe[Oe-1])},ze.Predictor7=function(r,xe,Oe){return zn(r,xe[Oe+0])},ze.Predictor8=function(r,xe,Oe){return zn(xe[Oe-1],xe[Oe+0])},ze.Predictor9=function(r,xe,Oe){return zn(xe[Oe+0],xe[Oe+1])},ze.Predictor10=function(r,xe,Oe){return zn(zn(r,xe[Oe-1]),zn(xe[Oe+0],xe[Oe+1]))},ze.Predictor11=function(r,xe,Oe){var Ze=xe[Oe+0];return 0>=jn(Ze>>24&255,r>>24&255,(xe=xe[Oe-1])>>24&255)+jn(Ze>>16&255,r>>16&255,xe>>16&255)+jn(Ze>>8&255,r>>8&255,xe>>8&255)+jn(255&Ze,255&r,255&xe)?Ze:r},ze.Predictor12=function(r,xe,Oe){var Ze=xe[Oe+0];return(Qn((r>>24&255)+(Ze>>24&255)-((xe=xe[Oe-1])>>24&255))<<24|Qn((r>>16&255)+(Ze>>16&255)-(xe>>16&255))<<16|Qn((r>>8&255)+(Ze>>8&255)-(xe>>8&255))<<8|Qn((255&r)+(255&Ze)-(255&xe)))>>>0},ze.Predictor13=function(r,xe,Oe){var Ze=xe[Oe-1];return(ii((r=zn(r,xe[Oe+0]))>>24&255,Ze>>24&255)<<24|ii(r>>16&255,Ze>>16&255)<<16|ii(r>>8&255,Ze>>8&255)<<8|ii(r>>0&255,Ze>>0&255))>>>0};var Rl=ze.PredictorAdd0;ze.PredictorAdd1=fi,kn("Predictor2","PredictorAdd2"),kn("Predictor3","PredictorAdd3"),kn("Predictor4","PredictorAdd4"),kn("Predictor5","PredictorAdd5"),kn("Predictor6","PredictorAdd6"),kn("Predictor7","PredictorAdd7"),kn("Predictor8","PredictorAdd8"),kn("Predictor9","PredictorAdd9"),kn("Predictor10","PredictorAdd10"),kn("Predictor11","PredictorAdd11"),kn("Predictor12","PredictorAdd12"),kn("Predictor13","PredictorAdd13");var qa=ze.PredictorAdd2;Ri("ColorIndexInverseTransform","MapARGB","32b",function(r){return r>>8&255},function(r){return r}),Ri("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(r){return r},function(r){return r>>8&255});var Po,Gr=ze.ColorIndexInverseTransform,aa=ze.MapARGB,Eo=ze.VP8LColorIndexInverseTransformAlpha,Co=ze.MapAlpha,Ss=ze.VP8LPredictorsAdd=[];Ss.length=16,(ze.VP8LPredictors=[]).length=16,(ze.VP8LPredictorsAdd_C=[]).length=16,(ze.VP8LPredictors_C=[]).length=16;var js,Br,Ir,xs,ds,fs,oa,ps,vr,Ua,Rr,Xr,la,ko,za,Bs,qs,Ls,Us,ca,zs,Ps,Ha,Yr,Kr,dr,fr,yr,Sr=Se(511),gs=Se(2041),Wa=Se(225),ha=Se(767),No=0,Dl=gs,To=Wa,Hr=ha,Jr=Sr,Fo=0,Mo=1,Dc=2,Io=3,Ro=4,Ol=5,Oc=6,jl=7,Bl=8,Do=9,ql=10,Wh=[2,3,7],Vh=[3,3,11],jc=[280,256,256,256,40],Gh=[0,1,1,1,0],Xh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Yh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Kh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Jh=8,Ul=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],zl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Va=null,$h=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Zh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Bc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Qh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],tu=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],eu=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],nu=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Es=[],is=[],ms=[],iu=1,qc=2,Cs=[],$r=[];mi("UpsampleRgbLinePair",nr,3),mi("UpsampleBgrLinePair",pr,3),mi("UpsampleRgbaLinePair",ns,4),mi("UpsampleBgraLinePair",xr,4),mi("UpsampleArgbLinePair",Tr,4),mi("UpsampleRgba4444LinePair",Ar,2),mi("UpsampleRgb565LinePair",gr,2);var ru=ze.UpsampleRgbLinePair,su=ze.UpsampleBgrLinePair,Uc=ze.UpsampleRgbaLinePair,zc=ze.UpsampleBgraLinePair,Hc=ze.UpsampleArgbLinePair,Wc=ze.UpsampleRgba4444LinePair,au=ze.UpsampleRgb565LinePair,Oo=16,jo=1<<Oo-1,Ga=-227,Hl=482,ou=6,Vc=0,lu=Se(256),cu=Se(256),hu=Se(256),uu=Se(256),du=Se(Hl-Ga),fu=Se(Hl-Ga);os("YuvToRgbRow",nr,3),os("YuvToBgrRow",pr,3),os("YuvToRgbaRow",ns,4),os("YuvToBgraRow",xr,4),os("YuvToArgbRow",Tr,4),os("YuvToRgba4444Row",Ar,2),os("YuvToRgb565Row",gr,2);var Gc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Bo=[0,2,8],pu=[8,7,6,4,4,2,2,2,1,1,1,1],gu=1;this.WebPDecodeRGBA=function(r,xe,Oe,Ze,un){var mn=Mo,bn=new Qs,wn=new Tn;bn.ba=wn,wn.S=mn,wn.width=[wn.width],wn.height=[wn.height];var Pn=wn.width,Nn=wn.height,Yn=new ci;if(Yn==null||r==null)var oi=2;else t(Yn!=null),oi=ea(r,xe,Oe,Yn.width,Yn.height,Yn.Pd,Yn.Qd,Yn.format,null);if(oi!=0?Pn=0:(Pn!=null&&(Pn[0]=Yn.width[0]),Nn!=null&&(Nn[0]=Yn.height[0]),Pn=1),Pn){wn.width=wn.width[0],wn.height=wn.height[0],Ze!=null&&(Ze[0]=wn.width),un!=null&&(un[0]=wn.height);t:{if(Ze=new Gs,(un=new Ta).data=r,un.w=xe,un.ha=Oe,un.kd=1,xe=[0],t(un!=null),((r=ea(un.data,un.w,un.ha,null,null,null,xe,null,un))==0||r==7)&&xe[0]&&(r=4),(xe=r)==0){if(t(bn!=null),Ze.data=un.data,Ze.w=un.w+un.offset,Ze.ha=un.ha-un.offset,Ze.put=Ln,Ze.ac=Cn,Ze.bc=Bn,Ze.ma=bn,un.xa){if((r=$i())==null){bn=1;break t}if(function(li,ti){var _i=[0],gi=[0],Kn=[0];e:for(;;){if(li==null)return 0;if(ti==null)return li.a=2,0;if(li.l=ti,li.a=0,En(li.m,ti.data,ti.w,ti.ha),!Hn(li.m,_i,gi,Kn)){li.a=3;break e}if(li.xb=qc,ti.width=_i[0],ti.height=gi[0],!ar(_i[0],gi[0],1,li,null))break e;return 1}return t(li.a!=0),0}(r,Ze)){if(Ze=(xe=na(Ze.width,Ze.height,bn.Oa,bn.ba))==0){e:{Ze=r;n:for(;;){if(Ze==null){Ze=0;break e}if(t(Ze.s.yc!=null),t(Ze.s.Ya!=null),t(0<Ze.s.Wb),t((Oe=Ze.l)!=null),t((un=Oe.ma)!=null),Ze.xb!=0){if(Ze.ca=un.ba,Ze.tb=un.tb,t(Ze.ca!=null),!Oa(un.Oa,Oe,Io)){Ze.a=2;break n}if(!rr(Ze,Oe.width)||Oe.da)break n;if((Oe.da||wi(Ze.ca.S))&&si(),11>Ze.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Ze.ca.f.kb.F!=null&&si()),Ze.Pb&&0<Ze.s.ua&&Ze.s.vb.X==null&&!ni(Ze.s.vb,Ze.s.Wa.Xa)){Ze.a=1;break n}Ze.xb=0}if(!Wi(Ze,Ze.V,Ze.Ba,Ze.c,Ze.i,Oe.o,Hi))break n;un.Dc=Ze.Ma,Ze=1;break e}t(Ze.a!=0),Ze=0}Ze=!Ze}Ze&&(xe=r.a)}else xe=r.a}else{if((r=new ml)==null){bn=1;break t}if(r.Fa=un.na,r.P=un.P,r.qc=un.Sa,co(r,Ze)){if((xe=na(Ze.width,Ze.height,bn.Oa,bn.ba))==0){if(r.Aa=0,Oe=bn.Oa,t((un=r)!=null),Oe!=null){if(0<(Pn=0>(Pn=Oe.Md)?0:100<Pn?255:255*Pn/100)){for(Nn=Yn=0;4>Nn;++Nn)12>(oi=un.pb[Nn]).lc&&(oi.ia=Pn*pu[0>oi.lc?0:oi.lc]>>3),Yn|=oi.ia;Yn&&(alert("todo:VP8InitRandom"),un.ia=1)}un.Ga=Oe.Id,100<un.Ga?un.Ga=100:0>un.Ga&&(un.Ga=0)}bl(r,Ze)||(xe=r.a)}}else xe=r.a}xe==0&&bn.Oa!=null&&bn.Oa.fd&&(xe=ja(bn.ba))}bn=xe}mn=bn!=0?null:11>mn?wn.f.RGBA.eb:wn.f.kb.y}else mn=null;return mn};var Xc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function Re(ze,Qe){for(var gn="",Me=0;Me<4;Me++)gn+=String.fromCharCode(ze[Qe++]);return gn}function Ie(ze,Qe){return(ze[Qe+0]<<0|ze[Qe+1]<<8|ze[Qe+2]<<16)>>>0}function qe(ze,Qe){return(ze[Qe+0]<<0|ze[Qe+1]<<8|ze[Qe+2]<<16|ze[Qe+3]<<24)>>>0}new Ee;var Ge=[0],Ce=[0],Xe=[],We=new Ee,Ke=Ae,Be=function(ze,Qe){var gn={},Me=0,Ue=!1,en=0,pn=0;if(gn.frames=[],!function(Fe,De,Je,nn){for(var an=0;an<nn;an++)if(Fe[De+an]!=Je.charCodeAt(an))return!0;return!1}(ze,Qe,"RIFF",4)){var An,xn;for(qe(ze,Qe+=4),Qe+=8;Qe<ze.length;){var _n=Re(ze,Qe),En=qe(ze,Qe+=4);Qe+=4;var hn=En+(1&En);switch(_n){case"VP8 ":case"VP8L":gn.frames[Me]===void 0&&(gn.frames[Me]={}),(je=gn.frames[Me]).src_off=Ue?pn:Qe-8,je.src_size=en+En+8,Me++,Ue&&(Ue=!1,en=0,pn=0);break;case"VP8X":(je=gn.header={}).feature_flags=ze[Qe];var Sn=Qe+4;je.canvas_width=1+Ie(ze,Sn),Sn+=3,je.canvas_height=1+Ie(ze,Sn),Sn+=3;break;case"ALPH":Ue=!0,en=hn+8,pn=Qe-8;break;case"ANIM":(je=gn.header).bgcolor=qe(ze,Qe),Sn=Qe+4,je.loop_count=(An=ze)[(xn=Sn)+0]<<0|An[xn+1]<<8,Sn+=2;break;case"ANMF":var In,je;(je=gn.frames[Me]={}).offset_x=2*Ie(ze,Qe),Qe+=3,je.offset_y=2*Ie(ze,Qe),Qe+=3,je.width=1+Ie(ze,Qe),Qe+=3,je.height=1+Ie(ze,Qe),Qe+=3,je.duration=Ie(ze,Qe),Qe+=3,In=ze[Qe++],je.dispose=1&In,je.blend=In>>1&1}_n!="ANMF"&&(Qe+=hn)}return gn}}(Ke,0);Be.response=Ke,Be.rgbaoutput=!0,Be.dataurl=!1;var Ye=Be.header?Be.header:null,sn=Be.frames?Be.frames:null;if(Ye){Ye.loop_counter=Ye.loop_count,Ge=[Ye.canvas_height],Ce=[Ye.canvas_width];for(var rn=0;rn<sn.length&&sn[rn].blend!=0;rn++);}var $e=sn[0],tn=We.WebPDecodeRGBA(Ke,$e.src_off,$e.src_size,Ce,Ge);$e.rgba=tn,$e.imgwidth=Ce[0],$e.imgheight=Ge[0];for(var Ve=0;Ve<Ce[0]*Ge[0]*4;Ve++)Xe[Ve]=tn[Ve];return this.width=Ce,this.height=Ge,this.data=Xe,this}(function(Ae){var t=function(){return typeof zlibSync=="function"},St=function(Ge,Ce,Xe,We){var Ke=4,Be=Pe;switch(We){case Ae.image_compression.FAST:Ke=1,Be=Se;break;case Ae.image_compression.MEDIUM:Ke=6,Be=Te;break;case Ae.image_compression.SLOW:Ke=9,Be=Ee}Ge=e(Ge,Ce,Xe,Be);var Ye=zlibSync(Ge,{level:Ke});return Ae.__addimage__.arrayBufferToBinaryString(Ye)},e=function(Ge,Ce,Xe,We){for(var Ke,Be,Ye,sn=Ge.length/Ce,rn=new Uint8Array(Ge.length+sn),$e=Ie(),tn=0;tn<sn;tn+=1){if(Ye=tn*Ce,Ke=Ge.subarray(Ye,Ye+Ce),We)rn.set(We(Ke,Xe,Be),Ye+tn);else{for(var Ve,ze=$e.length,Qe=[];Ve<ze;Ve+=1)Qe[Ve]=$e[Ve](Ke,Xe,Be);var gn=qe(Qe.concat());rn.set(Qe[gn],Ye+tn)}Be=Ke}return rn},_e=function(Ge){var Ce=Array.apply([],Ge);return Ce.unshift(0),Ce},Se=function(Ge,Ce){var Xe,We=[],Ke=Ge.length;We[0]=1;for(var Be=0;Be<Ke;Be+=1)Xe=Ge[Be-Ce]||0,We[Be+1]=Ge[Be]-Xe+256&255;return We},Pe=function(Ge,Ce,Xe){var We,Ke=[],Be=Ge.length;Ke[0]=2;for(var Ye=0;Ye<Be;Ye+=1)We=Xe&&Xe[Ye]||0,Ke[Ye+1]=Ge[Ye]-We+256&255;return Ke},Te=function(Ge,Ce,Xe){var We,Ke,Be=[],Ye=Ge.length;Be[0]=3;for(var sn=0;sn<Ye;sn+=1)We=Ge[sn-Ce]||0,Ke=Xe&&Xe[sn]||0,Be[sn+1]=Ge[sn]+256-(We+Ke>>>1)&255;return Be},Ee=function(Ge,Ce,Xe){var We,Ke,Be,Ye,sn=[],rn=Ge.length;sn[0]=4;for(var $e=0;$e<rn;$e+=1)We=Ge[$e-Ce]||0,Ke=Xe&&Xe[$e]||0,Be=Xe&&Xe[$e-Ce]||0,Ye=Re(We,Ke,Be),sn[$e+1]=Ge[$e]-Ye+256&255;return sn},Re=function(Ge,Ce,Xe){if(Ge===Ce&&Ce===Xe)return Ge;var We=Math.abs(Ce-Xe),Ke=Math.abs(Ge-Xe),Be=Math.abs(Ge+Ce-Xe-Xe);return We<=Ke&&We<=Be?Ge:Ke<=Be?Ce:Xe},Ie=function(){return[_e,Se,Pe,Te,Ee]},qe=function(Ge){var Ce=Ge.map(function(Xe){return Xe.reduce(function(We,Ke){return We+Math.abs(Ke)},0)});return Ce.indexOf(Math.min.apply(null,Ce))};Ae.processPNG=function(Ge,Ce,Xe,We){var Ke,Be,Ye,sn,rn,$e,tn,Ve,ze,Qe,gn,Me,Ue,en,pn,An=this.decode.FLATE_DECODE,xn="";if(this.__addimage__.isArrayBuffer(Ge)&&(Ge=new Uint8Array(Ge)),this.__addimage__.isArrayBufferView(Ge)){if(Ge=(Ye=new Kt(Ge)).imgData,Be=Ye.bits,Ke=Ye.colorSpace,rn=Ye.colors,[4,6].indexOf(Ye.colorType)!==-1){if(Ye.bits===8){ze=(Ve=Ye.pixelBitlength==32?new Uint32Array(Ye.decodePixels().buffer):Ye.pixelBitlength==16?new Uint16Array(Ye.decodePixels().buffer):new Uint8Array(Ye.decodePixels().buffer)).length,gn=new Uint8Array(ze*Ye.colors),Qe=new Uint8Array(ze);var _n,En=Ye.pixelBitlength-Ye.bits;for(en=0,pn=0;en<ze;en++){for(Ue=Ve[en],_n=0;_n<En;)gn[pn++]=Ue>>>_n&255,_n+=Ye.bits;Qe[en]=Ue>>>_n&255}}if(Ye.bits===16){ze=(Ve=new Uint32Array(Ye.decodePixels().buffer)).length,gn=new Uint8Array(ze*(32/Ye.pixelBitlength)*Ye.colors),Qe=new Uint8Array(ze*(32/Ye.pixelBitlength)),Me=Ye.colors>1,en=0,pn=0;for(var hn=0;en<ze;)Ue=Ve[en++],gn[pn++]=Ue>>>0&255,Me&&(gn[pn++]=Ue>>>16&255,Ue=Ve[en++],gn[pn++]=Ue>>>0&255),Qe[hn++]=Ue>>>16&255;Be=8}We!==Ae.image_compression.NONE&&t()?(Ge=St(gn,Ye.width*Ye.colors,Ye.colors,We),tn=St(Qe,Ye.width,1,We)):(Ge=gn,tn=Qe,An=void 0)}if(Ye.colorType===3&&(Ke=this.color_spaces.INDEXED,$e=Ye.palette,Ye.transparency.indexed)){var Sn=Ye.transparency.indexed,In=0;for(en=0,ze=Sn.length;en<ze;++en)In+=Sn[en];if((In/=255)===ze-1&&Sn.indexOf(0)!==-1)sn=[Sn.indexOf(0)];else if(In!==ze){for(Ve=Ye.decodePixels(),Qe=new Uint8Array(Ve.length),en=0,ze=Ve.length;en<ze;en++)Qe[en]=Sn[Ve[en]];tn=St(Qe,Ye.width,1)}}var je=function(Fe){var De;switch(Fe){case Ae.image_compression.FAST:De=11;break;case Ae.image_compression.MEDIUM:De=13;break;case Ae.image_compression.SLOW:De=14;break;default:De=12}return De}(We);return An===this.decode.FLATE_DECODE&&(xn="/Predictor "+je+" "),xn+="/Colors "+rn+" /BitsPerComponent "+Be+" /Columns "+Ye.width,(this.__addimage__.isArrayBuffer(Ge)||this.__addimage__.isArrayBufferView(Ge))&&(Ge=this.__addimage__.arrayBufferToBinaryString(Ge)),(tn&&this.__addimage__.isArrayBuffer(tn)||this.__addimage__.isArrayBufferView(tn))&&(tn=this.__addimage__.arrayBufferToBinaryString(tn)),{alias:Xe,data:Ge,index:Ce,filter:An,decodeParameters:xn,transparency:sn,palette:$e,sMask:tn,predictor:je,width:Ye.width,height:Ye.height,bitsPerComponent:Be,colorSpace:Ke}}}})(E.API),function(Ae){Ae.processGIF89A=function(t,St,e,_e){var Se=new Zt(t),Pe=Se.width,Te=Se.height,Ee=[];Se.decodeAndBlitFrameRGBA(0,Ee);var Re={data:Ee,width:Pe,height:Te},Ie=new Qt(100).encode(Re,100);return Ae.processJPEG.call(this,Ie,St,e,_e)},Ae.processGIF87A=Ae.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var Ae=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(Ae);for(var t=0;t<Ae;t++){var St=this.datav.getUint8(this.pos++,!0),e=this.datav.getUint8(this.pos++,!0),_e=this.datav.getUint8(this.pos++,!0),Se=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:_e,green:e,blue:St,quad:Se}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var Ae="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[Ae]()}catch(St){a.log("bit decode error:"+St)}},te.prototype.bit1=function(){var Ae,t=Math.ceil(this.width/8),St=t%4;for(Ae=this.height-1;Ae>=0;Ae--){for(var e=this.bottom_up?Ae:this.height-1-Ae,_e=0;_e<t;_e++)for(var Se=this.datav.getUint8(this.pos++,!0),Pe=e*this.width*4+8*_e*4,Te=0;Te<8&&8*_e+Te<this.width;Te++){var Ee=this.palette[Se>>7-Te&1];this.data[Pe+4*Te]=Ee.blue,this.data[Pe+4*Te+1]=Ee.green,this.data[Pe+4*Te+2]=Ee.red,this.data[Pe+4*Te+3]=255}St!==0&&(this.pos+=4-St)}},te.prototype.bit4=function(){for(var Ae=Math.ceil(this.width/2),t=Ae%4,St=this.height-1;St>=0;St--){for(var e=this.bottom_up?St:this.height-1-St,_e=0;_e<Ae;_e++){var Se=this.datav.getUint8(this.pos++,!0),Pe=e*this.width*4+2*_e*4,Te=Se>>4,Ee=15&Se,Re=this.palette[Te];if(this.data[Pe]=Re.blue,this.data[Pe+1]=Re.green,this.data[Pe+2]=Re.red,this.data[Pe+3]=255,2*_e+1>=this.width)break;Re=this.palette[Ee],this.data[Pe+4]=Re.blue,this.data[Pe+4+1]=Re.green,this.data[Pe+4+2]=Re.red,this.data[Pe+4+3]=255}t!==0&&(this.pos+=4-t)}},te.prototype.bit8=function(){for(var Ae=this.width%4,t=this.height-1;t>=0;t--){for(var St=this.bottom_up?t:this.height-1-t,e=0;e<this.width;e++){var _e=this.datav.getUint8(this.pos++,!0),Se=St*this.width*4+4*e;if(_e<this.palette.length){var Pe=this.palette[_e];this.data[Se]=Pe.red,this.data[Se+1]=Pe.green,this.data[Se+2]=Pe.blue,this.data[Se+3]=255}else this.data[Se]=255,this.data[Se+1]=255,this.data[Se+2]=255,this.data[Se+3]=255}Ae!==0&&(this.pos+=4-Ae)}},te.prototype.bit15=function(){for(var Ae=this.width%3,t=parseInt("11111",2),St=this.height-1;St>=0;St--){for(var e=this.bottom_up?St:this.height-1-St,_e=0;_e<this.width;_e++){var Se=this.datav.getUint16(this.pos,!0);this.pos+=2;var Pe=(Se&t)/t*255|0,Te=(Se>>5&t)/t*255|0,Ee=(Se>>10&t)/t*255|0,Re=Se>>15?255:0,Ie=e*this.width*4+4*_e;this.data[Ie]=Ee,this.data[Ie+1]=Te,this.data[Ie+2]=Pe,this.data[Ie+3]=Re}this.pos+=Ae}},te.prototype.bit16=function(){for(var Ae=this.width%3,t=parseInt("11111",2),St=parseInt("111111",2),e=this.height-1;e>=0;e--){for(var _e=this.bottom_up?e:this.height-1-e,Se=0;Se<this.width;Se++){var Pe=this.datav.getUint16(this.pos,!0);this.pos+=2;var Te=(Pe&t)/t*255|0,Ee=(Pe>>5&St)/St*255|0,Re=(Pe>>11)/t*255|0,Ie=_e*this.width*4+4*Se;this.data[Ie]=Re,this.data[Ie+1]=Ee,this.data[Ie+2]=Te,this.data[Ie+3]=255}this.pos+=Ae}},te.prototype.bit24=function(){for(var Ae=this.height-1;Ae>=0;Ae--){for(var t=this.bottom_up?Ae:this.height-1-Ae,St=0;St<this.width;St++){var e=this.datav.getUint8(this.pos++,!0),_e=this.datav.getUint8(this.pos++,!0),Se=this.datav.getUint8(this.pos++,!0),Pe=t*this.width*4+4*St;this.data[Pe]=Se,this.data[Pe+1]=_e,this.data[Pe+2]=e,this.data[Pe+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var Ae=this.height-1;Ae>=0;Ae--)for(var t=this.bottom_up?Ae:this.height-1-Ae,St=0;St<this.width;St++){var e=this.datav.getUint8(this.pos++,!0),_e=this.datav.getUint8(this.pos++,!0),Se=this.datav.getUint8(this.pos++,!0),Pe=this.datav.getUint8(this.pos++,!0),Te=t*this.width*4+4*St;this.data[Te]=Se,this.data[Te+1]=_e,this.data[Te+2]=e,this.data[Te+3]=Pe}},te.prototype.getData=function(){return this.data},function(Ae){Ae.processBMP=function(t,St,e,_e){var Se=new te(t,!1),Pe=Se.width,Te=Se.height,Ee={data:Se.getData(),width:Pe,height:Te},Re=new Qt(100).encode(Ee,100);return Ae.processJPEG.call(this,Re,St,e,_e)}}(E.API),ee.prototype.getData=function(){return this.data},function(Ae){Ae.processWEBP=function(t,St,e,_e){var Se=new ee(t),Pe=Se.width,Te=Se.height,Ee={data:Se.getData(),width:Pe,height:Te},Re=new Qt(100).encode(Ee,100);return Ae.processJPEG.call(this,Re,St,e,_e)}}(E.API),E.API.processRGBA=function(Ae,t,St){for(var e=Ae.data,_e=e.length,Se=new Uint8Array(_e/4*3),Pe=new Uint8Array(_e/4),Te=0,Ee=0,Re=0;Re<_e;Re+=4){var Ie=e[Re],qe=e[Re+1],Ge=e[Re+2],Ce=e[Re+3];Se[Te++]=Ie,Se[Te++]=qe,Se[Te++]=Ge,Pe[Ee++]=Ce}var Xe=this.__addimage__.arrayBufferToBinaryString(Se);return{alpha:this.__addimage__.arrayBufferToBinaryString(Pe),data:Xe,index:t,alias:St,colorSpace:"DeviceRGB",bitsPerComponent:8,width:Ae.width,height:Ae.height}},E.API.setLanguage=function(Ae){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[Ae]!==void 0&&(this.internal.languageSettings.languageCode=Ae,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(Ae,t){var St,e,_e=(t=t||{}).font||this.internal.getFont(),Se=t.fontSize||this.internal.getFontSize(),Pe=t.charSpace||this.internal.getCharSpace(),Te=t.widths?t.widths:_e.metadata.Unicode.widths,Ee=Te.fof?Te.fof:1,Re=t.kerning?t.kerning:_e.metadata.Unicode.kerning,Ie=Re.fof?Re.fof:1,qe=t.doKerning!==!1,Ge=0,Ce=Ae.length,Xe=0,We=Te[0]||Ee,Ke=[];for(St=0;St<Ce;St++)e=Ae.charCodeAt(St),typeof _e.metadata.widthOfString=="function"?Ke.push((_e.metadata.widthOfGlyph(_e.metadata.characterToGlyph(e))+Pe*(1e3/Se)||0)/1e3):(Ge=qe&&_typeof(Re[e])==="object"&&!isNaN(parseInt(Re[e][Xe],10))?Re[e][Xe]/Ie:0,Ke.push((Te[e]||We)/Ee+Ge)),Xe=e;return Ke},Yt=Vt.getStringUnitWidth=function(Ae,t){var St=(t=t||{}).fontSize||this.internal.getFontSize(),e=t.font||this.internal.getFont(),_e=t.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(Ae=Vt.processArabic(Ae)),typeof e.metadata.widthOfString=="function"?e.metadata.widthOfString(Ae,St,_e)/St:Gt.apply(this,arguments).reduce(function(Se,Pe){return Se+Pe},0)},Jt=function(Ae,t,St,e){for(var _e=[],Se=0,Pe=Ae.length,Te=0;Se!==Pe&&Te+t[Se]<St;)Te+=t[Se],Se++;_e.push(Ae.slice(0,Se));var Ee=Se;for(Te=0;Se!==Pe;)Te+t[Se]>e&&(_e.push(Ae.slice(Ee,Se)),Te=0,Ee=Se),Te+=t[Se],Se++;return Ee!==Se&&_e.push(Ae.slice(Ee,Se)),_e},Xt=function(Ae,t,St){St||(St={});var e,_e,Se,Pe,Te,Ee,Re,Ie=[],qe=[Ie],Ge=St.textIndent||0,Ce=0,Xe=0,We=Ae.split(" "),Ke=Gt.apply(this,[" ",St])[0];if(Ee=St.lineIndent===-1?We[0].length+2:St.lineIndent||0){var Be=Array(Ee).join(" "),Ye=[];We.map(function(rn){(rn=rn.split(/\s*\n/)).length>1?Ye=Ye.concat(rn.map(function($e,tn){return(tn&&$e.length?`
`:"")+$e})):Ye.push(rn[0])}),We=Ye,Ee=Yt.apply(this,[Be,St])}for(Se=0,Pe=We.length;Se<Pe;Se++){var sn=0;if(e=We[Se],Ee&&e[0]==`
`&&(e=e.substr(1),sn=1),Ge+Ce+(Xe=(_e=Gt.apply(this,[e,St])).reduce(function(rn,$e){return rn+$e},0))>t||sn){if(Xe>t){for(Te=Jt.apply(this,[e,_e,t-(Ge+Ce),t]),Ie.push(Te.shift()),Ie=[Te.pop()];Te.length;)qe.push([Te.shift()]);Xe=_e.slice(e.length-(Ie[0]?Ie[0].length:0)).reduce(function(rn,$e){return rn+$e},0)}else Ie=[e];qe.push(Ie),Ge=Xe+Ee,Ce=Ke}else Ie.push(e),Ge+=Ce+Xe,Ce=Ke}return Re=Ee?function(rn,$e){return($e?Be:"")+rn.join(" ")}:function(rn){return rn.join(" ")},qe.map(Re)},Vt.splitTextToSize=function(Ae,t,St){var e,_e=(St=St||{}).fontSize||this.internal.getFontSize(),Se=(function(Ie){if(Ie.widths&&Ie.kerning)return{widths:Ie.widths,kerning:Ie.kerning};var qe=this.internal.getFont(Ie.fontName,Ie.fontStyle);return qe.metadata.Unicode?{widths:qe.metadata.Unicode.widths||{0:1},kerning:qe.metadata.Unicode.kerning||{}}:{font:qe.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,St);e=Array.isArray(Ae)?Ae:String(Ae).split(/\r?\n/);var Pe=1*this.internal.scaleFactor*t/_e;Se.textIndent=St.textIndent?1*St.textIndent*this.internal.scaleFactor/_e:0,Se.lineIndent=St.lineIndent;var Te,Ee,Re=[];for(Te=0,Ee=e.length;Te<Ee;Te++)Re=Re.concat(Xt.apply(this,[e[Te],Pe,Se]));return Re},function(Ae){Ae.__fontmetrics__=Ae.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",St={},e={},_e=0;_e<t.length;_e++)St[t[_e]]="0123456789abcdef"[_e],e["0123456789abcdef"[_e]]=t[_e];var Se=function(qe){return"0x"+parseInt(qe,10).toString(16)},Pe=Ae.__fontmetrics__.compress=function(qe){var Ge,Ce,Xe,We,Ke=["{"];for(var Be in qe){if(Ge=qe[Be],isNaN(parseInt(Be,10))?Ce="'"+Be+"'":(Be=parseInt(Be,10),Ce=(Ce=Se(Be).slice(2)).slice(0,-1)+e[Ce.slice(-1)]),typeof Ge=="number")Ge<0?(Xe=Se(Ge).slice(3),We="-"):(Xe=Se(Ge).slice(2),We=""),Xe=We+Xe.slice(0,-1)+e[Xe.slice(-1)];else{if(_typeof(Ge)!=="object")throw new Error("Don't know what to do with value type "+_typeof(Ge)+".");Xe=Pe(Ge)}Ke.push(Ce+Xe)}return Ke.push("}"),Ke.join("")},Te=Ae.__fontmetrics__.uncompress=function(qe){if(typeof qe!="string")throw new Error("Invalid argument passed to uncompress.");for(var Ge,Ce,Xe,We,Ke={},Be=1,Ye=Ke,sn=[],rn="",$e="",tn=qe.length-1,Ve=1;Ve<tn;Ve+=1)(We=qe[Ve])=="'"?Ge?(Xe=Ge.join(""),Ge=void 0):Ge=[]:Ge?Ge.push(We):We=="{"?(sn.push([Ye,Xe]),Ye={},Xe=void 0):We=="}"?((Ce=sn.pop())[0][Ce[1]]=Ye,Xe=void 0,Ye=Ce[0]):We=="-"?Be=-1:Xe===void 0?St.hasOwnProperty(We)?(rn+=St[We],Xe=parseInt(rn,16)*Be,Be=1,rn=""):rn+=We:St.hasOwnProperty(We)?($e+=St[We],Ye[Xe]=parseInt($e,16)*Be,Be=1,Xe=void 0,$e=""):$e+=We;return Ke},Ee={codePages:["WinAnsiEncoding"],WinAnsiEncoding:Te("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},Re={Unicode:{Courier:Ee,"Courier-Bold":Ee,"Courier-BoldOblique":Ee,"Courier-Oblique":Ee,Helvetica:Ee,"Helvetica-Bold":Ee,"Helvetica-BoldOblique":Ee,"Helvetica-Oblique":Ee,"Times-Roman":Ee,"Times-Bold":Ee,"Times-BoldItalic":Ee,"Times-Italic":Ee}},Ie={Unicode:{"Courier-Oblique":Te("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":Te("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":Te("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:Te("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":Te("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":Te("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:Te("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:Te("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":Te("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:Te("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":Te("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":Te("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":Te("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":Te("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};Ae.events.push(["addFont",function(qe){var Ge=qe.font,Ce=Ie.Unicode[Ge.postScriptName];Ce&&(Ge.metadata.Unicode={},Ge.metadata.Unicode.widths=Ce.widths,Ge.metadata.Unicode.kerning=Ce.kerning);var Xe=Re.Unicode[Ge.postScriptName];Xe&&(Ge.metadata.Unicode.encoding=Xe,Ge.encoding=Xe.codePages[0])}])}(E.API),function(Ae){var t=function(St){for(var e=St.length,_e=new Uint8Array(e),Se=0;Se<e;Se++)_e[Se]=St.charCodeAt(Se);return _e};Ae.API.events.push(["addFont",function(St){var e=void 0,_e=St.font,Se=St.instance;if(!_e.isStandardFont){if(Se===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+_e.postScriptName+"').");if(typeof(e=Se.existsFileInVFS(_e.postScriptName)===!1?Se.loadFile(_e.postScriptName):Se.getFileFromVFS(_e.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+_e.postScriptName+"').");(function(Pe,Te){Te=/^\x00\x01\x00\x00/.test(Te)?t(Te):t(u(Te)),Pe.metadata=Ae.API.TTFFont.open(Te),Pe.metadata.Unicode=Pe.metadata.Unicode||{encoding:{},kerning:{},widths:[]},Pe.metadata.glyIdsUsed=[0]})(_e,e)}}])}(E),function(Ae){function t(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es-DNRFPLUU.js"),__vite__mapDeps([0,1]))).catch(function(St){return Promise.reject(new Error("Could not load canvg: "+St))}).then(function(St){return St.default?St.default:St})}E.API.addSvgAsImage=function(St,e,_e,Se,Pe,Te,Ee,Re){if(isNaN(e)||isNaN(_e))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(Se)||isNaN(Pe))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var Ie=document.createElement("canvas");Ie.width=Se,Ie.height=Pe;var qe=Ie.getContext("2d");qe.fillStyle="#fff",qe.fillRect(0,0,Ie.width,Ie.height);var Ge={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},Ce=this;return t().then(function(Xe){return Xe.fromString(qe,St,Ge)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Xe){return Xe.render(Ge)}).then(function(){Ce.addImage(Ie.toDataURL("image/jpeg",1),e,_e,Se,Pe,Ee,Re)})}}(),E.API.putTotalPages=function(Ae){var t,St=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(Ae,"g"),St=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(Ae,this.internal.getFont()),"g"),St=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var e=1;e<=this.internal.getNumberOfPages();e++)for(var _e=0;_e<this.internal.pages[e].length;_e++)this.internal.pages[e][_e]=this.internal.pages[e][_e].replace(t,St);return this},E.API.viewerPreferences=function(Ae,t){var St;Ae=Ae||{},t=t||!1;var e,_e,Se,Pe={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},Te=Object.keys(Pe),Ee=[],Re=0,Ie=0,qe=0;function Ge(Xe,We){var Ke,Be=!1;for(Ke=0;Ke<Xe.length;Ke+=1)Xe[Ke]===We&&(Be=!0);return Be}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(Pe)),this.internal.viewerpreferences.isSubscribed=!1),St=this.internal.viewerpreferences.configuration,Ae==="reset"||t===!0){var Ce=Te.length;for(qe=0;qe<Ce;qe+=1)St[Te[qe]].value=St[Te[qe]].defaultValue,St[Te[qe]].explicitSet=!1}if(_typeof(Ae)==="object"){for(_e in Ae)if(Se=Ae[_e],Ge(Te,_e)&&Se!==void 0){if(St[_e].type==="boolean"&&typeof Se=="boolean")St[_e].value=Se;else if(St[_e].type==="name"&&Ge(St[_e].valueSet,Se))St[_e].value=Se;else if(St[_e].type==="integer"&&Number.isInteger(Se))St[_e].value=Se;else if(St[_e].type==="array"){for(Re=0;Re<Se.length;Re+=1)if(e=!0,Se[Re].length===1&&typeof Se[Re][0]=="number")Ee.push(String(Se[Re]-1));else if(Se[Re].length>1){for(Ie=0;Ie<Se[Re].length;Ie+=1)typeof Se[Re][Ie]!="number"&&(e=!1);e===!0&&Ee.push([Se[Re][0]-1,Se[Re][1]-1].join(" "))}St[_e].value="["+Ee.join(" ")+"]"}else St[_e].value=St[_e].defaultValue;St[_e].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Xe,We=[];for(Xe in St)St[Xe].explicitSet===!0&&(St[Xe].type==="name"?We.push("/"+Xe+" /"+St[Xe].value):We.push("/"+Xe+" "+St[Xe].value));We.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+We.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=St,this},function(Ae){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',_e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Se=unescape(encodeURIComponent(e)),Pe=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),Te=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),Ee=unescape(encodeURIComponent("</x:xmpmeta>")),Re=Se.length+Pe.length+Te.length+_e.length+Ee.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+Re+" >>"),this.internal.write("stream"),this.internal.write(_e+Se+Pe+Te+Ee),this.internal.write("endstream"),this.internal.write("endobj")},St=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};Ae.addMetadata=function(e,_e){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:e,namespaceuri:_e||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",St),this.internal.events.subscribe("postPutResources",t)),this}}(E.API),function(Ae){var t=Ae.API,St=t.pdfEscape16=function(Se,Pe){for(var Te,Ee=Pe.metadata.Unicode.widths,Re=["","0","00","000","0000"],Ie=[""],qe=0,Ge=Se.length;qe<Ge;++qe){if(Te=Pe.metadata.characterToGlyph(Se.charCodeAt(qe)),Pe.metadata.glyIdsUsed.push(Te),Pe.metadata.toUnicode[Te]=Se.charCodeAt(qe),Ee.indexOf(Te)==-1&&(Ee.push(Te),Ee.push([parseInt(Pe.metadata.widthOfGlyph(Te),10)])),Te=="0")return Ie.join("");Te=Te.toString(16),Ie.push(Re[4-Te.length],Te)}return Ie.join("")},e=function(Se){var Pe,Te,Ee,Re,Ie,qe,Ge;for(Ie=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,Ee=[],qe=0,Ge=(Te=Object.keys(Se).sort(function(Ce,Xe){return Ce-Xe})).length;qe<Ge;qe++)Pe=Te[qe],Ee.length>=100&&(Ie+=`
`+Ee.length+` beginbfchar
`+Ee.join(`
`)+`
endbfchar`,Ee=[]),Se[Pe]!==void 0&&Se[Pe]!==null&&typeof Se[Pe].toString=="function"&&(Re=("0000"+Se[Pe].toString(16)).slice(-4),Pe=("0000"+(+Pe).toString(16)).slice(-4),Ee.push("<"+Pe+"><"+Re+">"));return Ee.length&&(Ie+=`
`+Ee.length+` beginbfchar
`+Ee.join(`
`)+`
endbfchar
`),Ie+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(Se){(function(Pe){var Te=Pe.font,Ee=Pe.out,Re=Pe.newObject,Ie=Pe.putStream;if(Te.metadata instanceof Ae.API.TTFFont&&Te.encoding==="Identity-H"){for(var qe=Te.metadata.Unicode.widths,Ge=Te.metadata.subset.encode(Te.metadata.glyIdsUsed,1),Ce="",Xe=0;Xe<Ge.length;Xe++)Ce+=String.fromCharCode(Ge[Xe]);var We=Re();Ie({data:Ce,addLength1:!0,objectId:We}),Ee("endobj");var Ke=Re();Ie({data:e(Te.metadata.toUnicode),addLength1:!0,objectId:Ke}),Ee("endobj");var Be=Re();Ee("<<"),Ee("/Type /FontDescriptor"),Ee("/FontName /"+F(Te.fontName)),Ee("/FontFile2 "+We+" 0 R"),Ee("/FontBBox "+Ae.API.PDFObject.convert(Te.metadata.bbox)),Ee("/Flags "+Te.metadata.flags),Ee("/StemV "+Te.metadata.stemV),Ee("/ItalicAngle "+Te.metadata.italicAngle),Ee("/Ascent "+Te.metadata.ascender),Ee("/Descent "+Te.metadata.decender),Ee("/CapHeight "+Te.metadata.capHeight),Ee(">>"),Ee("endobj");var Ye=Re();Ee("<<"),Ee("/Type /Font"),Ee("/BaseFont /"+F(Te.fontName)),Ee("/FontDescriptor "+Be+" 0 R"),Ee("/W "+Ae.API.PDFObject.convert(qe)),Ee("/CIDToGIDMap /Identity"),Ee("/DW 1000"),Ee("/Subtype /CIDFontType2"),Ee("/CIDSystemInfo"),Ee("<<"),Ee("/Supplement 0"),Ee("/Registry (Adobe)"),Ee("/Ordering ("+Te.encoding+")"),Ee(">>"),Ee(">>"),Ee("endobj"),Te.objectNumber=Re(),Ee("<<"),Ee("/Type /Font"),Ee("/Subtype /Type0"),Ee("/ToUnicode "+Ke+" 0 R"),Ee("/BaseFont /"+F(Te.fontName)),Ee("/Encoding /"+Te.encoding),Ee("/DescendantFonts ["+Ye+" 0 R]"),Ee(">>"),Ee("endobj"),Te.isAlreadyPutted=!0}})(Se)}]),t.events.push(["putFont",function(Se){(function(Pe){var Te=Pe.font,Ee=Pe.out,Re=Pe.newObject,Ie=Pe.putStream;if(Te.metadata instanceof Ae.API.TTFFont&&Te.encoding==="WinAnsiEncoding"){for(var qe=Te.metadata.rawData,Ge="",Ce=0;Ce<qe.length;Ce++)Ge+=String.fromCharCode(qe[Ce]);var Xe=Re();Ie({data:Ge,addLength1:!0,objectId:Xe}),Ee("endobj");var We=Re();Ie({data:e(Te.metadata.toUnicode),addLength1:!0,objectId:We}),Ee("endobj");var Ke=Re();Ee("<<"),Ee("/Descent "+Te.metadata.decender),Ee("/CapHeight "+Te.metadata.capHeight),Ee("/StemV "+Te.metadata.stemV),Ee("/Type /FontDescriptor"),Ee("/FontFile2 "+Xe+" 0 R"),Ee("/Flags 96"),Ee("/FontBBox "+Ae.API.PDFObject.convert(Te.metadata.bbox)),Ee("/FontName /"+F(Te.fontName)),Ee("/ItalicAngle "+Te.metadata.italicAngle),Ee("/Ascent "+Te.metadata.ascender),Ee(">>"),Ee("endobj"),Te.objectNumber=Re();for(var Be=0;Be<Te.metadata.hmtx.widths.length;Be++)Te.metadata.hmtx.widths[Be]=parseInt(Te.metadata.hmtx.widths[Be]*(1e3/Te.metadata.head.unitsPerEm));Ee("<</Subtype/TrueType/Type/Font/ToUnicode "+We+" 0 R/BaseFont/"+F(Te.fontName)+"/FontDescriptor "+Ke+" 0 R/Encoding/"+Te.encoding+" /FirstChar 29 /LastChar 255 /Widths "+Ae.API.PDFObject.convert(Te.metadata.hmtx.widths)+">>"),Ee("endobj"),Te.isAlreadyPutted=!0}})(Se)}]);var _e=function(Se){var Pe,Te=Se.text||"",Ee=Se.x,Re=Se.y,Ie=Se.options||{},qe=Se.mutex||{},Ge=qe.pdfEscape,Ce=qe.activeFontKey,Xe=qe.fonts,We=Ce,Ke="",Be=0,Ye="",sn=Xe[We].encoding;if(Xe[We].encoding!=="Identity-H")return{text:Te,x:Ee,y:Re,options:Ie,mutex:qe};for(Ye=Te,We=Ce,Array.isArray(Te)&&(Ye=Te[0]),Be=0;Be<Ye.length;Be+=1)Xe[We].metadata.hasOwnProperty("cmap")&&(Pe=Xe[We].metadata.cmap.unicode.codeMap[Ye[Be].charCodeAt(0)]),Pe||Ye[Be].charCodeAt(0)<256&&Xe[We].metadata.hasOwnProperty("Unicode")?Ke+=Ye[Be]:Ke+="";var rn="";return parseInt(We.slice(1))<14||sn==="WinAnsiEncoding"?rn=Ge(Ke,We).split("").map(function($e){return $e.charCodeAt(0).toString(16)}).join(""):sn==="Identity-H"&&(rn=St(Ke,Xe[We])),qe.isHex=!0,{text:rn,x:Ee,y:Re,options:Ie,mutex:qe}};t.events.push(["postProcessText",function(Se){var Pe=Se.text||"",Te=[],Ee={text:Pe,x:Se.x,y:Se.y,options:Se.options,mutex:Se.mutex};if(Array.isArray(Pe)){var Re=0;for(Re=0;Re<Pe.length;Re+=1)Array.isArray(Pe[Re])&&Pe[Re].length===3?Te.push([_e(Object.assign({},Ee,{text:Pe[Re][0]})).text,Pe[Re][1],Pe[Re][2]]):Te.push(_e(Object.assign({},Ee,{text:Pe[Re]})).text);Se.text=Te}else Se.text=_e(Object.assign({},Ee,{text:Pe})).text}])}(E),function(Ae){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};Ae.existsFileInVFS=function(St){return t.call(this),this.internal.vFS[St]!==void 0},Ae.addFileToVFS=function(St,e){return t.call(this),this.internal.vFS[St]=e,this},Ae.getFileFromVFS=function(St){return t.call(this),this.internal.vFS[St]!==void 0?this.internal.vFS[St]:null}}(E.API),function(Ae){Ae.__bidiEngine__=Ae.prototype.__bidiEngine__=function(e){var _e,Se,Pe,Te,Ee,Re,Ie,qe=t,Ge=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Ce=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Xe={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},We={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Ke=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],Be=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Ye=!1,sn=0;this.__bidiEngine__={};var rn=function(Me){var Ue=Me.charCodeAt(),en=Ue>>8,pn=We[en];return pn!==void 0?qe[256*pn+(255&Ue)]:en===252||en===253?"AL":Be.test(en)?"L":en===8?"R":"N"},$e=function(Me){for(var Ue,en=0;en<Me.length;en++){if((Ue=rn(Me.charAt(en)))==="L")return!1;if(Ue==="R")return!0}return!1},tn=function(Me,Ue,en,pn){var An,xn,_n,En,hn=Ue[pn];switch(hn){case"L":case"R":Ye=!1;break;case"N":case"AN":break;case"EN":Ye&&(hn="AN");break;case"AL":Ye=!0,hn="R";break;case"WS":hn="N";break;case"CS":pn<1||pn+1>=Ue.length||(An=en[pn-1])!=="EN"&&An!=="AN"||(xn=Ue[pn+1])!=="EN"&&xn!=="AN"?hn="N":Ye&&(xn="AN"),hn=xn===An?xn:"N";break;case"ES":hn=(An=pn>0?en[pn-1]:"B")==="EN"&&pn+1<Ue.length&&Ue[pn+1]==="EN"?"EN":"N";break;case"ET":if(pn>0&&en[pn-1]==="EN"){hn="EN";break}if(Ye){hn="N";break}for(_n=pn+1,En=Ue.length;_n<En&&Ue[_n]==="ET";)_n++;hn=_n<En&&Ue[_n]==="EN"?"EN":"N";break;case"NSM":if(Pe&&!Te){for(En=Ue.length,_n=pn+1;_n<En&&Ue[_n]==="NSM";)_n++;if(_n<En){var Sn=Me[pn],In=Sn>=1425&&Sn<=2303||Sn===64286;if(An=Ue[_n],In&&(An==="R"||An==="AL")){hn="R";break}}}hn=pn<1||(An=Ue[pn-1])==="B"?"N":en[pn-1];break;case"B":Ye=!1,_e=!0,hn=sn;break;case"S":Se=!0,hn="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Ye=!1;break;case"BN":hn="N"}return hn},Ve=function(Me,Ue,en){var pn=Me.split("");return en&&ze(pn,en,{hiLevel:sn}),pn.reverse(),Ue&&Ue.reverse(),pn.join("")},ze=function(Me,Ue,en){var pn,An,xn,_n,En,hn=-1,Sn=Me.length,In=0,je=[],Fe=sn?Ce:Ge,De=[];for(Ye=!1,_e=!1,Se=!1,An=0;An<Sn;An++)De[An]=rn(Me[An]);for(xn=0;xn<Sn;xn++){if(En=In,je[xn]=tn(Me,De,je,xn),pn=240&(In=Fe[En][Xe[je[xn]]]),In&=15,Ue[xn]=_n=Fe[In][5],pn>0)if(pn===16){for(An=hn;An<xn;An++)Ue[An]=1;hn=-1}else hn=-1;if(Fe[In][6])hn===-1&&(hn=xn);else if(hn>-1){for(An=hn;An<xn;An++)Ue[An]=_n;hn=-1}De[xn]==="B"&&(Ue[xn]=0),en.hiLevel|=_n}Se&&function(Je,nn,an){for(var on=0;on<an;on++)if(Je[on]==="S"){nn[on]=sn;for(var yn=on-1;yn>=0&&Je[yn]==="WS";yn--)nn[yn]=sn}}(De,Ue,Sn)},Qe=function(Me,Ue,en,pn,An){if(!(An.hiLevel<Me)){if(Me===1&&sn===1&&!_e)return Ue.reverse(),void(en&&en.reverse());for(var xn,_n,En,hn,Sn=Ue.length,In=0;In<Sn;){if(pn[In]>=Me){for(En=In+1;En<Sn&&pn[En]>=Me;)En++;for(hn=In,_n=En-1;hn<_n;hn++,_n--)xn=Ue[hn],Ue[hn]=Ue[_n],Ue[_n]=xn,en&&(xn=en[hn],en[hn]=en[_n],en[_n]=xn);In=En}In++}}},gn=function(Me,Ue,en){var pn=Me.split(""),An={hiLevel:sn};return en||(en=[]),ze(pn,en,An),function(xn,_n,En){if(En.hiLevel!==0&&Ie)for(var hn,Sn=0;Sn<xn.length;Sn++)_n[Sn]===1&&(hn=Ke.indexOf(xn[Sn]))>=0&&(xn[Sn]=Ke[hn+1])}(pn,en,An),Qe(2,pn,Ue,en,An),Qe(1,pn,Ue,en,An),pn.join("")};return this.__bidiEngine__.doBidiReorder=function(Me,Ue,en){if(function(An,xn){if(xn)for(var _n=0;_n<An.length;_n++)xn[_n]=_n;Te===void 0&&(Te=$e(An)),Re===void 0&&(Re=$e(An))}(Me,Ue),Pe||!Ee||Re)if(Pe&&Ee&&Te^Re)sn=Te?1:0,Me=Ve(Me,Ue,en);else if(!Pe&&Ee&&Re)sn=Te?1:0,Me=gn(Me,Ue,en),Me=Ve(Me,Ue);else if(!Pe||Te||Ee||Re){if(Pe&&!Ee&&Te^Re)Me=Ve(Me,Ue),Te?(sn=0,Me=gn(Me,Ue,en)):(sn=1,Me=gn(Me,Ue,en),Me=Ve(Me,Ue));else if(Pe&&Te&&!Ee&&Re)sn=1,Me=gn(Me,Ue,en),Me=Ve(Me,Ue);else if(!Pe&&!Ee&&Te^Re){var pn=Ie;Te?(sn=1,Me=gn(Me,Ue,en),sn=0,Ie=!1,Me=gn(Me,Ue,en),Ie=pn):(sn=0,Me=gn(Me,Ue,en),Me=Ve(Me,Ue),sn=1,Ie=!1,Me=gn(Me,Ue,en),Ie=pn,Me=Ve(Me,Ue))}}else sn=0,Me=gn(Me,Ue,en);else sn=Te?1:0,Me=gn(Me,Ue,en);return Me},this.__bidiEngine__.setOptions=function(Me){Me&&(Pe=Me.isInputVisual,Ee=Me.isOutputVisual,Te=Me.isInputRtl,Re=Me.isOutputRtl,Ie=Me.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],St=new Ae.__bidiEngine__({isInputVisual:!0});Ae.API.events.push(["postProcessText",function(e){var _e=e.text,Se=(e.x,e.y,e.options||{}),Pe=(e.mutex,Se.lang,[]);if(Se.isInputVisual=typeof Se.isInputVisual!="boolean"||Se.isInputVisual,St.setOptions(Se),Object.prototype.toString.call(_e)==="[object Array]"){var Te=0;for(Pe=[],Te=0;Te<_e.length;Te+=1)Object.prototype.toString.call(_e[Te])==="[object Array]"?Pe.push([St.doBidiReorder(_e[Te][0]),_e[Te][1],_e[Te][2]]):Pe.push([St.doBidiReorder(_e[Te])]);e.text=Pe}else e.text=St.doBidiReorder(_e);St.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function Ae(t){var St;if(this.rawData=t,St=this.contents=new ne(t),this.contents.pos=4,St.readString(4)==="ttcf")throw new Error("TTCF not supported.");St.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return Ae.open=function(t){return new Ae(t)},Ae.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},Ae.prototype.registerTTF=function(){var t,St,e,_e,Se;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var Pe,Te,Ee,Re;for(Re=[],Pe=0,Te=(Ee=this.bbox).length;Pe<Te;Pe++)t=Ee[Pe],Re.push(Math.round(t*this.scaleFactor));return Re}).call(this),this.stemV=0,this.post.exists?(e=255&(_e=this.post.italic_angle),32768&(St=_e>>16)&&(St=-(1+(65535^St))),this.italicAngle=+(St+"."+e)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Se=this.familyClass)===1||Se===2||Se===3||Se===4||Se===5||Se===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},Ae.prototype.characterToGlyph=function(t){var St;return((St=this.cmap.unicode)!=null?St.codeMap[t]:void 0)||0},Ae.prototype.widthOfGlyph=function(t){var St;return St=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*St},Ae.prototype.widthOfString=function(t,St,e){var _e,Se,Pe,Te;for(Pe=0,Se=0,Te=(t=""+t).length;0<=Te?Se<Te:Se>Te;Se=0<=Te?++Se:--Se)_e=t.charCodeAt(Se),Pe+=this.widthOfGlyph(this.characterToGlyph(_e))+e*(1e3/St)||0;return Pe*(St/1e3)},Ae.prototype.lineHeight=function(t,St){var e;return St==null&&(St=!1),e=St?this.lineGap:0,(this.ascender+e-this.decender)/1e3*t},Ae}();var re,ne=function(){function Ae(t){this.data=t??[],this.pos=0,this.length=this.data.length}return Ae.prototype.readByte=function(){return this.data[this.pos++]},Ae.prototype.writeByte=function(t){return this.data[this.pos++]=t},Ae.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},Ae.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},Ae.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},Ae.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},Ae.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},Ae.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},Ae.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},Ae.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},Ae.prototype.readString=function(t){var St,e;for(e=[],St=0;0<=t?St<t:St>t;St=0<=t?++St:--St)e[St]=String.fromCharCode(this.readByte());return e.join("")},Ae.prototype.writeString=function(t){var St,e,_e;for(_e=[],St=0,e=t.length;0<=e?St<e:St>e;St=0<=e?++St:--St)_e.push(this.writeByte(t.charCodeAt(St)));return _e},Ae.prototype.readShort=function(){return this.readInt16()},Ae.prototype.writeShort=function(t){return this.writeInt16(t)},Ae.prototype.readLongLong=function(){var t,St,e,_e,Se,Pe,Te,Ee;return t=this.readByte(),St=this.readByte(),e=this.readByte(),_e=this.readByte(),Se=this.readByte(),Pe=this.readByte(),Te=this.readByte(),Ee=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^St)+1099511627776*(255^e)+4294967296*(255^_e)+16777216*(255^Se)+65536*(255^Pe)+256*(255^Te)+(255^Ee)+1):72057594037927940*t+281474976710656*St+1099511627776*e+4294967296*_e+16777216*Se+65536*Pe+256*Te+Ee},Ae.prototype.writeLongLong=function(t){var St,e;return St=Math.floor(t/4294967296),e=4294967295&t,this.writeByte(St>>24&255),this.writeByte(St>>16&255),this.writeByte(St>>8&255),this.writeByte(255&St),this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},Ae.prototype.readInt=function(){return this.readInt32()},Ae.prototype.writeInt=function(t){return this.writeInt32(t)},Ae.prototype.read=function(t){var St,e;for(St=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)St.push(this.readByte());return St},Ae.prototype.write=function(t){var St,e,_e,Se;for(Se=[],e=0,_e=t.length;e<_e;e++)St=t[e],Se.push(this.writeByte(St));return Se},Ae}(),ie=function(){var Ae;function t(St){var e,_e,Se;for(this.scalarType=St.readInt(),this.tableCount=St.readShort(),this.searchRange=St.readShort(),this.entrySelector=St.readShort(),this.rangeShift=St.readShort(),this.tables={},_e=0,Se=this.tableCount;0<=Se?_e<Se:_e>Se;_e=0<=Se?++_e:--_e)e={tag:St.readString(4),checksum:St.readInt(),offset:St.readInt(),length:St.readInt()},this.tables[e.tag]=e}return t.prototype.encode=function(St){var e,_e,Se,Pe,Te,Ee,Re,Ie,qe,Ge,Ce,Xe,We;for(We in Ce=Object.keys(St).length,Ee=Math.log(2),qe=16*Math.floor(Math.log(Ce)/Ee),Pe=Math.floor(qe/Ee),Ie=16*Ce-qe,(_e=new ne).writeInt(this.scalarType),_e.writeShort(Ce),_e.writeShort(qe),_e.writeShort(Pe),_e.writeShort(Ie),Se=16*Ce,Re=_e.pos+Se,Te=null,Xe=[],St)for(Ge=St[We],_e.writeString(We),_e.writeInt(Ae(Ge)),_e.writeInt(Re),_e.writeInt(Ge.length),Xe=Xe.concat(Ge),We==="head"&&(Te=Re),Re+=Ge.length;Re%4;)Xe.push(0),Re++;return _e.write(Xe),e=2981146554-Ae(_e.data),_e.pos=Te+8,_e.writeUInt32(e),_e.data},Ae=function(St){var e,_e,Se,Pe;for(St=ve.call(St);St.length%4;)St.push(0);for(Se=new ne(St),_e=0,e=0,Pe=St.length;e<Pe;e=e+=4)_e+=Se.readUInt32();return 4294967295&_e},t}(),ae={}.hasOwnProperty,oe=function(Ae,t){for(var St in t)ae.call(t,St)&&(Ae[St]=t[St]);function e(){this.constructor=Ae}return e.prototype=t.prototype,Ae.prototype=new e,Ae.__super__=t.prototype,Ae};re=function(){function Ae(t){var St;this.file=t,St=this.file.directory.tables[this.tag],this.exists=!!St,St&&(this.offset=St.offset,this.length=St.length,this.parse(this.file.contents))}return Ae.prototype.parse=function(){},Ae.prototype.encode=function(){},Ae.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},Ae}();var se=function(Ae){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="head",t.prototype.parse=function(St){return St.pos=this.offset,this.version=St.readInt(),this.revision=St.readInt(),this.checkSumAdjustment=St.readInt(),this.magicNumber=St.readInt(),this.flags=St.readShort(),this.unitsPerEm=St.readShort(),this.created=St.readLongLong(),this.modified=St.readLongLong(),this.xMin=St.readShort(),this.yMin=St.readShort(),this.xMax=St.readShort(),this.yMax=St.readShort(),this.macStyle=St.readShort(),this.lowestRecPPEM=St.readShort(),this.fontDirectionHint=St.readShort(),this.indexToLocFormat=St.readShort(),this.glyphDataFormat=St.readShort()},t.prototype.encode=function(St){var e;return(e=new ne).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(St),e.writeShort(this.glyphDataFormat),e.data},t}(),ce=function(){function Ae(t,St){var e,_e,Se,Pe,Te,Ee,Re,Ie,qe,Ge,Ce,Xe,We,Ke,Be,Ye,sn;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=St+t.readInt(),qe=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(Ee=0;Ee<256;++Ee)this.codeMap[Ee]=t.readByte();break;case 4:for(Ce=t.readUInt16(),Ge=Ce/2,t.pos+=6,Se=function(){var rn,$e;for($e=[],Ee=rn=0;0<=Ge?rn<Ge:rn>Ge;Ee=0<=Ge?++rn:--rn)$e.push(t.readUInt16());return $e}(),t.pos+=2,We=function(){var rn,$e;for($e=[],Ee=rn=0;0<=Ge?rn<Ge:rn>Ge;Ee=0<=Ge?++rn:--rn)$e.push(t.readUInt16());return $e}(),Re=function(){var rn,$e;for($e=[],Ee=rn=0;0<=Ge?rn<Ge:rn>Ge;Ee=0<=Ge?++rn:--rn)$e.push(t.readUInt16());return $e}(),Ie=function(){var rn,$e;for($e=[],Ee=rn=0;0<=Ge?rn<Ge:rn>Ge;Ee=0<=Ge?++rn:--rn)$e.push(t.readUInt16());return $e}(),_e=(this.length-t.pos+this.offset)/2,Te=function(){var rn,$e;for($e=[],Ee=rn=0;0<=_e?rn<_e:rn>_e;Ee=0<=_e?++rn:--rn)$e.push(t.readUInt16());return $e}(),Ee=Be=0,sn=Se.length;Be<sn;Ee=++Be)for(Ke=Se[Ee],e=Ye=Xe=We[Ee];Xe<=Ke?Ye<=Ke:Ye>=Ke;e=Xe<=Ke?++Ye:--Ye)Ie[Ee]===0?Pe=e+Re[Ee]:(Pe=Te[Ie[Ee]/2+(e-Xe)-(Ge-Ee)]||0)!==0&&(Pe+=Re[Ee]),this.codeMap[e]=65535&Pe}t.pos=qe}return Ae.encode=function(t,St){var e,_e,Se,Pe,Te,Ee,Re,Ie,qe,Ge,Ce,Xe,We,Ke,Be,Ye,sn,rn,$e,tn,Ve,ze,Qe,gn,Me,Ue,en,pn,An,xn,_n,En,hn,Sn,In,je,Fe,De,Je,nn,an,on,yn,Fn,On,Un;switch(pn=new ne,Pe=Object.keys(t).sort(function(Wn,ni){return Wn-ni}),St){case"macroman":for(We=0,Ke=function(){var Wn=[];for(Xe=0;Xe<256;++Xe)Wn.push(0);return Wn}(),Ye={0:0},Se={},An=0,hn=Pe.length;An<hn;An++)Ye[yn=t[_e=Pe[An]]]==null&&(Ye[yn]=++We),Se[_e]={old:t[_e],new:Ye[t[_e]]},Ke[_e]=Ye[t[_e]];return pn.writeUInt16(1),pn.writeUInt16(0),pn.writeUInt32(12),pn.writeUInt16(0),pn.writeUInt16(262),pn.writeUInt16(0),pn.write(Ke),{charMap:Se,subtable:pn.data,maxGlyphID:We+1};case"unicode":for(Ue=[],qe=[],sn=0,Ye={},e={},Be=Re=null,xn=0,Sn=Pe.length;xn<Sn;xn++)Ye[$e=t[_e=Pe[xn]]]==null&&(Ye[$e]=++sn),e[_e]={old:$e,new:Ye[$e]},Te=Ye[$e]-_e,Be!=null&&Te===Re||(Be&&qe.push(Be),Ue.push(_e),Re=Te),Be=_e;for(Be&&qe.push(Be),qe.push(65535),Ue.push(65535),gn=2*(Qe=Ue.length),ze=2*Math.pow(Math.log(Qe)/Math.LN2,2),Ge=Math.log(ze/2)/Math.LN2,Ve=2*Qe-ze,Ee=[],tn=[],Ce=[],Xe=_n=0,In=Ue.length;_n<In;Xe=++_n){if(Me=Ue[Xe],Ie=qe[Xe],Me===65535){Ee.push(0),tn.push(0);break}if(Me-(en=e[Me].new)>=32768)for(Ee.push(0),tn.push(2*(Ce.length+Qe-Xe)),_e=En=Me;Me<=Ie?En<=Ie:En>=Ie;_e=Me<=Ie?++En:--En)Ce.push(e[_e].new);else Ee.push(en-Me),tn.push(0)}for(pn.writeUInt16(3),pn.writeUInt16(1),pn.writeUInt32(12),pn.writeUInt16(4),pn.writeUInt16(16+8*Qe+2*Ce.length),pn.writeUInt16(0),pn.writeUInt16(gn),pn.writeUInt16(ze),pn.writeUInt16(Ge),pn.writeUInt16(Ve),an=0,je=qe.length;an<je;an++)_e=qe[an],pn.writeUInt16(_e);for(pn.writeUInt16(0),on=0,Fe=Ue.length;on<Fe;on++)_e=Ue[on],pn.writeUInt16(_e);for(Fn=0,De=Ee.length;Fn<De;Fn++)Te=Ee[Fn],pn.writeUInt16(Te);for(On=0,Je=tn.length;On<Je;On++)rn=tn[On],pn.writeUInt16(rn);for(Un=0,nn=Ce.length;Un<nn;Un++)We=Ce[Un],pn.writeUInt16(We);return{charMap:e,subtable:pn.data,maxGlyphID:sn+1}}},Ae}(),ue=function(Ae){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="cmap",t.prototype.parse=function(St){var e,_e,Se;for(St.pos=this.offset,this.version=St.readUInt16(),Se=St.readUInt16(),this.tables=[],this.unicode=null,_e=0;0<=Se?_e<Se:_e>Se;_e=0<=Se?++_e:--_e)e=new ce(St,this.offset),this.tables.push(e),e.isUnicode&&this.unicode==null&&(this.unicode=e);return!0},t.encode=function(St,e){var _e,Se;return e==null&&(e="macroman"),_e=ce.encode(St,e),(Se=new ne).writeUInt16(0),Se.writeUInt16(1),_e.table=Se.data.concat(_e.subtable),_e},t}(),he=function(Ae){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="hhea",t.prototype.parse=function(St){return St.pos=this.offset,this.version=St.readInt(),this.ascender=St.readShort(),this.decender=St.readShort(),this.lineGap=St.readShort(),this.advanceWidthMax=St.readShort(),this.minLeftSideBearing=St.readShort(),this.minRightSideBearing=St.readShort(),this.xMaxExtent=St.readShort(),this.caretSlopeRise=St.readShort(),this.caretSlopeRun=St.readShort(),this.caretOffset=St.readShort(),St.pos+=8,this.metricDataFormat=St.readShort(),this.numberOfMetrics=St.readUInt16()},t}(),le=function(Ae){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="OS/2",t.prototype.parse=function(St){if(St.pos=this.offset,this.version=St.readUInt16(),this.averageCharWidth=St.readShort(),this.weightClass=St.readUInt16(),this.widthClass=St.readUInt16(),this.type=St.readShort(),this.ySubscriptXSize=St.readShort(),this.ySubscriptYSize=St.readShort(),this.ySubscriptXOffset=St.readShort(),this.ySubscriptYOffset=St.readShort(),this.ySuperscriptXSize=St.readShort(),this.ySuperscriptYSize=St.readShort(),this.ySuperscriptXOffset=St.readShort(),this.ySuperscriptYOffset=St.readShort(),this.yStrikeoutSize=St.readShort(),this.yStrikeoutPosition=St.readShort(),this.familyClass=St.readShort(),this.panose=function(){var e,_e;for(_e=[],e=0;e<10;++e)_e.push(St.readByte());return _e}(),this.charRange=function(){var e,_e;for(_e=[],e=0;e<4;++e)_e.push(St.readInt());return _e}(),this.vendorID=St.readString(4),this.selection=St.readShort(),this.firstCharIndex=St.readShort(),this.lastCharIndex=St.readShort(),this.version>0&&(this.ascent=St.readShort(),this.descent=St.readShort(),this.lineGap=St.readShort(),this.winAscent=St.readShort(),this.winDescent=St.readShort(),this.codePageRange=function(){var e,_e;for(_e=[],e=0;e<2;e=++e)_e.push(St.readInt());return _e}(),this.version>1))return this.xHeight=St.readShort(),this.capHeight=St.readShort(),this.defaultChar=St.readShort(),this.breakChar=St.readShort(),this.maxContext=St.readShort()},t}(),fe=function(Ae){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="post",t.prototype.parse=function(St){var e,_e,Se;switch(St.pos=this.offset,this.format=St.readInt(),this.italicAngle=St.readInt(),this.underlinePosition=St.readShort(),this.underlineThickness=St.readShort(),this.isFixedPitch=St.readInt(),this.minMemType42=St.readInt(),this.maxMemType42=St.readInt(),this.minMemType1=St.readInt(),this.maxMemType1=St.readInt(),this.format){case 65536:break;case 131072:var Pe;for(_e=St.readUInt16(),this.glyphNameIndex=[],Pe=0;0<=_e?Pe<_e:Pe>_e;Pe=0<=_e?++Pe:--Pe)this.glyphNameIndex.push(St.readUInt16());for(this.names=[],Se=[];St.pos<this.offset+this.length;)e=St.readByte(),Se.push(this.names.push(St.readString(e)));return Se;case 151552:return _e=St.readUInt16(),this.offsets=St.read(_e);case 196608:break;case 262144:return this.map=(function(){var Te,Ee,Re;for(Re=[],Pe=Te=0,Ee=this.file.maxp.numGlyphs;0<=Ee?Te<Ee:Te>Ee;Pe=0<=Ee?++Te:--Te)Re.push(St.readUInt32());return Re}).call(this)}},t}(),de=function(Ae,t){this.raw=Ae,this.length=Ae.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},pe=function(Ae){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="name",t.prototype.parse=function(St){var e,_e,Se,Pe,Te,Ee,Re,Ie,qe,Ge,Ce;for(St.pos=this.offset,St.readShort(),e=St.readShort(),Ee=St.readShort(),_e=[],Pe=0;0<=e?Pe<e:Pe>e;Pe=0<=e?++Pe:--Pe)_e.push({platformID:St.readShort(),encodingID:St.readShort(),languageID:St.readShort(),nameID:St.readShort(),length:St.readShort(),offset:this.offset+Ee+St.readShort()});for(Re={},Pe=qe=0,Ge=_e.length;qe<Ge;Pe=++qe)Se=_e[Pe],St.pos=Se.offset,Ie=St.readString(Se.length),Te=new de(Ie,Se),Re[Ce=Se.nameID]==null&&(Re[Ce]=[]),Re[Se.nameID].push(Te);this.strings=Re,this.copyright=Re[0],this.fontFamily=Re[1],this.fontSubfamily=Re[2],this.uniqueSubfamily=Re[3],this.fontName=Re[4],this.version=Re[5];try{this.postscriptName=Re[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=Re[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=Re[7],this.manufacturer=Re[8],this.designer=Re[9],this.description=Re[10],this.vendorUrl=Re[11],this.designerUrl=Re[12],this.license=Re[13],this.licenseUrl=Re[14],this.preferredFamily=Re[15],this.preferredSubfamily=Re[17],this.compatibleFull=Re[18],this.sampleText=Re[19]},t}(),ge=function(Ae){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="maxp",t.prototype.parse=function(St){return St.pos=this.offset,this.version=St.readInt(),this.numGlyphs=St.readUInt16(),this.maxPoints=St.readUInt16(),this.maxContours=St.readUInt16(),this.maxCompositePoints=St.readUInt16(),this.maxComponentContours=St.readUInt16(),this.maxZones=St.readUInt16(),this.maxTwilightPoints=St.readUInt16(),this.maxStorage=St.readUInt16(),this.maxFunctionDefs=St.readUInt16(),this.maxInstructionDefs=St.readUInt16(),this.maxStackElements=St.readUInt16(),this.maxSizeOfInstructions=St.readUInt16(),this.maxComponentElements=St.readUInt16(),this.maxComponentDepth=St.readUInt16()},t}(),me=function(Ae){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="hmtx",t.prototype.parse=function(St){var e,_e,Se,Pe,Te,Ee,Re;for(St.pos=this.offset,this.metrics=[],e=0,Ee=this.file.hhea.numberOfMetrics;0<=Ee?e<Ee:e>Ee;e=0<=Ee?++e:--e)this.metrics.push({advance:St.readUInt16(),lsb:St.readInt16()});for(Se=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var Ie,qe;for(qe=[],e=Ie=0;0<=Se?Ie<Se:Ie>Se;e=0<=Se?++Ie:--Ie)qe.push(St.readInt16());return qe}(),this.widths=(function(){var Ie,qe,Ge,Ce;for(Ce=[],Ie=0,qe=(Ge=this.metrics).length;Ie<qe;Ie++)Pe=Ge[Ie],Ce.push(Pe.advance);return Ce}).call(this),_e=this.widths[this.widths.length-1],Re=[],e=Te=0;0<=Se?Te<Se:Te>Se;e=0<=Se?++Te:--Te)Re.push(this.widths.push(_e));return Re},t.prototype.forGlyph=function(St){return St in this.metrics?this.metrics[St]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[St-this.metrics.length]}},t}(),ve=[].slice,be=function(Ae){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(St){var e,_e,Se,Pe,Te,Ee,Re,Ie,qe,Ge;return St in this.cache?this.cache[St]:(Pe=this.file.loca,e=this.file.contents,_e=Pe.indexOf(St),(Se=Pe.lengthOf(St))===0?this.cache[St]=null:(e.pos=this.offset+_e,Te=(Ee=new ne(e.read(Se))).readShort(),Ie=Ee.readShort(),Ge=Ee.readShort(),Re=Ee.readShort(),qe=Ee.readShort(),this.cache[St]=Te===-1?new we(Ee,Ie,Ge,Re,qe):new ye(Ee,Te,Ie,Ge,Re,qe),this.cache[St]))},t.prototype.encode=function(St,e,_e){var Se,Pe,Te,Ee,Re;for(Te=[],Pe=[],Ee=0,Re=e.length;Ee<Re;Ee++)Se=St[e[Ee]],Pe.push(Te.length),Se&&(Te=Te.concat(Se.encode(_e)));return Pe.push(Te.length),{table:Te,offsets:Pe}},t}(),ye=function(){function Ae(t,St,e,_e,Se,Pe){this.raw=t,this.numberOfContours=St,this.xMin=e,this.yMin=_e,this.xMax=Se,this.yMax=Pe,this.compound=!1}return Ae.prototype.encode=function(){return this.raw.data},Ae}(),we=function(){function Ae(t,St,e,_e,Se){var Pe,Te;for(this.raw=t,this.xMin=St,this.yMin=e,this.xMax=_e,this.yMax=Se,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],Pe=this.raw;Te=Pe.readShort(),this.glyphOffsets.push(Pe.pos),this.glyphIDs.push(Pe.readUInt16()),32&Te;)Pe.pos+=1&Te?4:2,128&Te?Pe.pos+=8:64&Te?Pe.pos+=4:8&Te&&(Pe.pos+=2)}return Ae.prototype.encode=function(){var t,St,e;for(St=new ne(ve.call(this.raw.data)),t=0,e=this.glyphIDs.length;t<e;++t)St.pos=this.glyphOffsets[t];return St.data},Ae}(),Ne=function(Ae){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="loca",t.prototype.parse=function(St){var e,_e;return St.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=e===0?(function(){var Se,Pe;for(Pe=[],_e=0,Se=this.length;_e<Se;_e+=2)Pe.push(2*St.readUInt16());return Pe}).call(this):(function(){var Se,Pe;for(Pe=[],_e=0,Se=this.length;_e<Se;_e+=4)Pe.push(St.readUInt32());return Pe}).call(this)},t.prototype.indexOf=function(St){return this.offsets[St]},t.prototype.lengthOf=function(St){return this.offsets[St+1]-this.offsets[St]},t.prototype.encode=function(St,e){for(var _e=new Uint32Array(this.offsets.length),Se=0,Pe=0,Te=0;Te<_e.length;++Te)if(_e[Te]=Se,Pe<e.length&&e[Pe]==Te){++Pe,_e[Te]=Se;var Ee=this.offsets[Te],Re=this.offsets[Te+1]-Ee;Re>0&&(Se+=Re)}for(var Ie=new Array(4*_e.length),qe=0;qe<_e.length;++qe)Ie[4*qe+3]=255&_e[qe],Ie[4*qe+2]=(65280&_e[qe])>>8,Ie[4*qe+1]=(16711680&_e[qe])>>16,Ie[4*qe]=(4278190080&_e[qe])>>24;return Ie},t}(),Le=function(){function Ae(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return Ae.prototype.generateCmap=function(){var t,St,e,_e,Se;for(St in _e=this.font.cmap.tables[0].codeMap,t={},Se=this.subset)e=Se[St],t[St]=_e[e];return t},Ae.prototype.glyphsFor=function(t){var St,e,_e,Se,Pe,Te,Ee;for(_e={},Pe=0,Te=t.length;Pe<Te;Pe++)_e[Se=t[Pe]]=this.font.glyf.glyphFor(Se);for(Se in St=[],_e)(e=_e[Se])!=null&&e.compound&&St.push.apply(St,e.glyphIDs);if(St.length>0)for(Se in Ee=this.glyphsFor(St))e=Ee[Se],_e[Se]=e;return _e},Ae.prototype.encode=function(t,St){var e,_e,Se,Pe,Te,Ee,Re,Ie,qe,Ge,Ce,Xe,We,Ke,Be;for(_e in e=ue.encode(this.generateCmap(),"unicode"),Pe=this.glyphsFor(t),Ce={0:0},Be=e.charMap)Ce[(Ee=Be[_e]).old]=Ee.new;for(Xe in Ge=e.maxGlyphID,Pe)Xe in Ce||(Ce[Xe]=Ge++);return Ie=function(Ye){var sn,rn;for(sn in rn={},Ye)rn[Ye[sn]]=sn;return rn}(Ce),qe=Object.keys(Ie).sort(function(Ye,sn){return Ye-sn}),We=function(){var Ye,sn,rn;for(rn=[],Ye=0,sn=qe.length;Ye<sn;Ye++)Te=qe[Ye],rn.push(Ie[Te]);return rn}(),Se=this.font.glyf.encode(Pe,We,Ce),Re=this.font.loca.encode(Se.offsets,We),Ke={cmap:this.font.cmap.raw(),glyf:Se.table,loca:Re,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(St)},this.font.os2.exists&&(Ke["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Ke)},Ae}();E.API.PDFObject=function(){var Ae;function t(){}return Ae=function(St,e){return(Array(e+1).join("0")+St).slice(-e)},t.convert=function(St){var e,_e,Se,Pe;if(Array.isArray(St))return"["+function(){var Te,Ee,Re;for(Re=[],Te=0,Ee=St.length;Te<Ee;Te++)e=St[Te],Re.push(t.convert(e));return Re}().join(" ")+"]";if(typeof St=="string")return"/"+St;if(St!=null&&St.isString)return"("+St+")";if(St instanceof Date)return"(D:"+Ae(St.getUTCFullYear(),4)+Ae(St.getUTCMonth(),2)+Ae(St.getUTCDate(),2)+Ae(St.getUTCHours(),2)+Ae(St.getUTCMinutes(),2)+Ae(St.getUTCSeconds(),2)+"Z)";if({}.toString.call(St)==="[object Object]"){for(_e in Se=["<<"],St)Pe=St[_e],Se.push("/"+_e+" "+t.convert(Pe));return Se.push(">>"),Se.join(`
`)}return""+St},t}();function commonjsRequire(Ae){throw new Error('Could not dynamically require "'+Ae+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports$1){(function(t,St){module.exports=t.pdfjsLib=St()})(globalThis,()=>(()=>{var __webpack_modules__=[,(Ae,t)=>{var Yi;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=hn,t.bytesToString=On,t.createValidAbsoluteUrl=In,t.getModificationDate=di,t.getUuid=Fi,t.getVerbosityLevel=An,t.info=xn,t.isArrayBuffer=jn,t.isArrayEqual=fi,t.isNodeJS=void 0,t.normalizeUnicode=hi,t.objectFromMap=Dn,t.objectSize=ni,t.setVerbosityLevel=pn,t.shadow=je,t.string32=Wn,t.stringToBytes=Un,t.stringToPDFString=zn,t.stringToUTF8String=Qn,t.unreachable=En,t.utf8StringToString=ii,t.warn=_n;const St=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=St;const e=[1,0,0,1,0,0];t.IDENTITY_MATRIX=e;const _e=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=_e;const Se=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=Se;const Pe=1.35;t.LINE_FACTOR=Pe;const Te=.35;t.LINE_DESCENT_FACTOR=Te;const Ee=Te/Pe;t.BASELINE_FACTOR=Ee;const Re={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=Re;const Ie={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=Ie;const qe="pdfjs_internal_editor_";t.AnnotationEditorPrefix=qe;const Ge={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=Ge;const Ce={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=Ce;const Xe={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=Xe;const We={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=We;const Ke={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=Ke;const Be={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=Be;const Ye={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=Ye;const sn={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=sn;const rn={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=rn;const $e={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=$e;const tn={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=tn;const Ve={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=Ve;const ze={O:"PageOpen",C:"PageClose"};t.PageActionEventType=ze;const Qe={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=Qe;const gn={NONE:0,BINARY:1};t.CMapCompressionType=gn;const Me={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=Me;const Ue={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=Ue;let en=Qe.WARNINGS;function pn(ai){Number.isInteger(ai)&&(en=ai)}function An(){return en}function xn(ai){en>=Qe.INFOS&&console.log(`Info: ${ai}`)}function _n(ai){en>=Qe.WARNINGS&&console.log(`Warning: ${ai}`)}function En(ai){throw new Error(ai)}function hn(ai,Xn){ai||En(Xn)}function Sn(ai){switch(ai==null?void 0:ai.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function In(ai,Xn=null,$n=null){if(!ai)return null;try{if($n&&typeof ai=="string"){if($n.addDefaultProtocol&&ai.startsWith("www.")){const Gi=ai.match(/\./g);(Gi==null?void 0:Gi.length)>=2&&(ai=`http://${ai}`)}if($n.tryConvertEncoding)try{ai=Qn(ai)}catch{}}const wi=Xn?new URL(ai,Xn):new URL(ai);if(Sn(wi))return wi}catch{}return null}function je(ai,Xn,$n,wi=!1){return Object.defineProperty(ai,Xn,{value:$n,enumerable:!wi,configurable:!0,writable:!1}),$n}const Fe=function(){function Xn($n,wi){this.constructor===Xn&&En("Cannot initialize BaseException."),this.message=$n,this.name=wi}return Xn.prototype=new Error,Xn.constructor=Xn,Xn}();t.BaseException=Fe;class De extends Fe{constructor(Xn,$n){super(Xn,"PasswordException"),this.code=$n}}t.PasswordException=De;class Je extends Fe{constructor(Xn,$n){super(Xn,"UnknownErrorException"),this.details=$n}}t.UnknownErrorException=Je;class nn extends Fe{constructor(Xn){super(Xn,"InvalidPDFException")}}t.InvalidPDFException=nn;class an extends Fe{constructor(Xn){super(Xn,"MissingPDFException")}}t.MissingPDFException=an;class on extends Fe{constructor(Xn,$n){super(Xn,"UnexpectedResponseException"),this.status=$n}}t.UnexpectedResponseException=on;class yn extends Fe{constructor(Xn){super(Xn,"FormatError")}}t.FormatError=yn;class Fn extends Fe{constructor(Xn){super(Xn,"AbortException")}}t.AbortException=Fn;function On(ai){(typeof ai!="object"||(ai==null?void 0:ai.length)===void 0)&&En("Invalid argument for bytesToString");const Xn=ai.length,$n=8192;if(Xn<$n)return String.fromCharCode.apply(null,ai);const wi=[];for(let Gi=0;Gi<Xn;Gi+=$n){const Bi=Math.min(Gi+$n,Xn),Tn=ai.subarray(Gi,Bi);wi.push(String.fromCharCode.apply(null,Tn))}return wi.join("")}function Un(ai){typeof ai!="string"&&En("Invalid argument for stringToBytes");const Xn=ai.length,$n=new Uint8Array(Xn);for(let wi=0;wi<Xn;++wi)$n[wi]=ai.charCodeAt(wi)&255;return $n}function Wn(ai){return String.fromCharCode(ai>>24&255,ai>>16&255,ai>>8&255,ai&255)}function ni(ai){return Object.keys(ai).length}function Dn(ai){const Xn=Object.create(null);for(const[$n,wi]of ai)Xn[$n]=wi;return Xn}function cn(){const ai=new Uint8Array(4);return ai[0]=1,new Uint32Array(ai.buffer,0,1)[0]===1}function qn(){try{return new Function(""),!0}catch{return!1}}class fn{static get isLittleEndian(){return je(this,"isLittleEndian",cn())}static get isEvalSupported(){return je(this,"isEvalSupported",qn())}static get isOffscreenCanvasSupported(){return je(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?je(this,"platform",{isWin:!1,isMac:!1}):je(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Xn,$n;return je(this,"isCSSRoundSupported",($n=(Xn=globalThis.CSS)==null?void 0:Xn.supports)==null?void 0:$n.call(Xn,"width: round(1.5px, 1px)"))}}t.FeatureTest=fn;const vn=[...Array(256).keys()].map(ai=>ai.toString(16).padStart(2,"0"));class kn{static makeHexColor(Xn,$n,wi){return`#${vn[Xn]}${vn[$n]}${vn[wi]}`}static scaleMinMax(Xn,$n){let wi;Xn[0]?(Xn[0]<0&&(wi=$n[0],$n[0]=$n[1],$n[1]=wi),$n[0]*=Xn[0],$n[1]*=Xn[0],Xn[3]<0&&(wi=$n[2],$n[2]=$n[3],$n[3]=wi),$n[2]*=Xn[3],$n[3]*=Xn[3]):(wi=$n[0],$n[0]=$n[2],$n[2]=wi,wi=$n[1],$n[1]=$n[3],$n[3]=wi,Xn[1]<0&&(wi=$n[2],$n[2]=$n[3],$n[3]=wi),$n[2]*=Xn[1],$n[3]*=Xn[1],Xn[2]<0&&(wi=$n[0],$n[0]=$n[1],$n[1]=wi),$n[0]*=Xn[2],$n[1]*=Xn[2]),$n[0]+=Xn[4],$n[1]+=Xn[4],$n[2]+=Xn[5],$n[3]+=Xn[5]}static transform(Xn,$n){return[Xn[0]*$n[0]+Xn[2]*$n[1],Xn[1]*$n[0]+Xn[3]*$n[1],Xn[0]*$n[2]+Xn[2]*$n[3],Xn[1]*$n[2]+Xn[3]*$n[3],Xn[0]*$n[4]+Xn[2]*$n[5]+Xn[4],Xn[1]*$n[4]+Xn[3]*$n[5]+Xn[5]]}static applyTransform(Xn,$n){const wi=Xn[0]*$n[0]+Xn[1]*$n[2]+$n[4],Gi=Xn[0]*$n[1]+Xn[1]*$n[3]+$n[5];return[wi,Gi]}static applyInverseTransform(Xn,$n){const wi=$n[0]*$n[3]-$n[1]*$n[2],Gi=(Xn[0]*$n[3]-Xn[1]*$n[2]+$n[2]*$n[5]-$n[4]*$n[3])/wi,Bi=(-Xn[0]*$n[1]+Xn[1]*$n[0]+$n[4]*$n[1]-$n[5]*$n[0])/wi;return[Gi,Bi]}static getAxialAlignedBoundingBox(Xn,$n){const wi=this.applyTransform(Xn,$n),Gi=this.applyTransform(Xn.slice(2,4),$n),Bi=this.applyTransform([Xn[0],Xn[3]],$n),Tn=this.applyTransform([Xn[2],Xn[1]],$n);return[Math.min(wi[0],Gi[0],Bi[0],Tn[0]),Math.min(wi[1],Gi[1],Bi[1],Tn[1]),Math.max(wi[0],Gi[0],Bi[0],Tn[0]),Math.max(wi[1],Gi[1],Bi[1],Tn[1])]}static inverseTransform(Xn){const $n=Xn[0]*Xn[3]-Xn[1]*Xn[2];return[Xn[3]/$n,-Xn[1]/$n,-Xn[2]/$n,Xn[0]/$n,(Xn[2]*Xn[5]-Xn[4]*Xn[3])/$n,(Xn[4]*Xn[1]-Xn[5]*Xn[0])/$n]}static singularValueDecompose2dScale(Xn){const $n=[Xn[0],Xn[2],Xn[1],Xn[3]],wi=Xn[0]*$n[0]+Xn[1]*$n[2],Gi=Xn[0]*$n[1]+Xn[1]*$n[3],Bi=Xn[2]*$n[0]+Xn[3]*$n[2],Tn=Xn[2]*$n[1]+Xn[3]*$n[3],ci=(wi+Tn)/2,bi=Math.sqrt((wi+Tn)**2-4*(wi*Tn-Bi*Gi))/2,vi=ci+bi||1,Pi=ci-bi||1;return[Math.sqrt(vi),Math.sqrt(Pi)]}static normalizeRect(Xn){const $n=Xn.slice(0);return Xn[0]>Xn[2]&&($n[0]=Xn[2],$n[2]=Xn[0]),Xn[1]>Xn[3]&&($n[1]=Xn[3],$n[3]=Xn[1]),$n}static intersect(Xn,$n){const wi=Math.max(Math.min(Xn[0],Xn[2]),Math.min($n[0],$n[2])),Gi=Math.min(Math.max(Xn[0],Xn[2]),Math.max($n[0],$n[2]));if(wi>Gi)return null;const Bi=Math.max(Math.min(Xn[1],Xn[3]),Math.min($n[1],$n[3])),Tn=Math.min(Math.max(Xn[1],Xn[3]),Math.max($n[1],$n[3]));return Bi>Tn?null:[wi,Bi,Gi,Tn]}static bezierBoundingBox(Xn,$n,wi,Gi,Bi,Tn,ci,bi){const vi=[],Pi=[[],[]];let Ni,Cn,Ln,Bn,Hn,ri,ui,pi;for(let Hi=0;Hi<2;++Hi){if(Hi===0?(Cn=6*Xn-12*wi+6*Bi,Ni=-3*Xn+9*wi-9*Bi+3*ci,Ln=3*wi-3*Xn):(Cn=6*$n-12*Gi+6*Tn,Ni=-3*$n+9*Gi-9*Tn+3*bi,Ln=3*Gi-3*$n),Math.abs(Ni)<1e-12){if(Math.abs(Cn)<1e-12)continue;Bn=-Ln/Cn,0<Bn&&Bn<1&&vi.push(Bn);continue}ui=Cn*Cn-4*Ln*Ni,pi=Math.sqrt(ui),!(ui<0)&&(Hn=(-Cn+pi)/(2*Ni),0<Hn&&Hn<1&&vi.push(Hn),ri=(-Cn-pi)/(2*Ni),0<ri&&ri<1&&vi.push(ri))}let ki=vi.length,Ci;const xi=ki;for(;ki--;)Bn=vi[ki],Ci=1-Bn,Pi[0][ki]=Ci*Ci*Ci*Xn+3*Ci*Ci*Bn*wi+3*Ci*Bn*Bn*Bi+Bn*Bn*Bn*ci,Pi[1][ki]=Ci*Ci*Ci*$n+3*Ci*Ci*Bn*Gi+3*Ci*Bn*Bn*Tn+Bn*Bn*Bn*bi;return Pi[0][xi]=Xn,Pi[1][xi]=$n,Pi[0][xi+1]=ci,Pi[1][xi+1]=bi,Pi[0].length=Pi[1].length=xi+2,[Math.min(...Pi[0]),Math.min(...Pi[1]),Math.max(...Pi[0]),Math.max(...Pi[1])]}}t.Util=kn;const Rn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function zn(ai){if(ai[0]>="ï"){let $n;if(ai[0]==="þ"&&ai[1]==="ÿ"?$n="utf-16be":ai[0]==="ÿ"&&ai[1]==="þ"?$n="utf-16le":ai[0]==="ï"&&ai[1]==="»"&&ai[2]==="¿"&&($n="utf-8"),$n)try{const wi=new TextDecoder($n,{fatal:!0}),Gi=Un(ai);return wi.decode(Gi)}catch(wi){_n(`stringToPDFString: "${wi}".`)}}const Xn=[];for(let $n=0,wi=ai.length;$n<wi;$n++){const Gi=Rn[ai.charCodeAt($n)];Xn.push(Gi?String.fromCharCode(Gi):ai.charAt($n))}return Xn.join("")}function Qn(ai){return decodeURIComponent(escape(ai))}function ii(ai){return unescape(encodeURIComponent(ai))}function jn(ai){return typeof ai=="object"&&(ai==null?void 0:ai.byteLength)!==void 0}function fi(ai,Xn){if(ai.length!==Xn.length)return!1;for(let $n=0,wi=ai.length;$n<wi;$n++)if(ai[$n]!==Xn[$n])return!1;return!0}function di(ai=new Date){return[ai.getUTCFullYear().toString(),(ai.getUTCMonth()+1).toString().padStart(2,"0"),ai.getUTCDate().toString().padStart(2,"0"),ai.getUTCHours().toString().padStart(2,"0"),ai.getUTCMinutes().toString().padStart(2,"0"),ai.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ii{constructor(){Zn(this,Yi,!1);this.promise=new Promise((Xn,$n)=>{this.resolve=wi=>{ei(this,Yi,!0),Xn(wi)},this.reject=wi=>{ei(this,Yi,!0),$n(wi)}})}get settled(){return He(this,Yi)}}Yi=new WeakMap,t.PromiseCapability=Ii;let Si=null,Ri=null;function hi(ai){return Si||(Si=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ri=new Map([["ﬅ","ſt"]])),ai.replaceAll(Si,(Xn,$n,wi)=>$n?$n.normalize("NFKC"):Ri.get(wi))}function Fi(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ai=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ai);else for(let Xn=0;Xn<32;Xn++)ai[Xn]=Math.floor(Math.random()*255);return On(ai)}const Oi="pdfjs_internal_id_";t.AnnotationPrefix=Oi},(__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{var Ae,St,e,_e,ga,Jo,Te,Ee,Re,Ie,qe,Ge,Ce,Xe,We,$o,Be,Ye,tc,rn,$e;Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(Ve){if(typeof Ve=="string"||Ve instanceof URL?Ve={url:Ve}:(0,_util.isArrayBuffer)(Ve)&&(Ve={data:Ve}),typeof Ve!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!Ve.url&&!Ve.data&&!Ve.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const ze=new PDFDocumentLoadingTask,{docId:Qe}=ze,gn=Ve.url?getUrlProp(Ve.url):null,Me=Ve.data?getDataProp(Ve.data):null,Ue=Ve.httpHeaders||null,en=Ve.withCredentials===!0,pn=Ve.password??null,An=Ve.range instanceof PDFDataRangeTransport?Ve.range:null,xn=Number.isInteger(Ve.rangeChunkSize)&&Ve.rangeChunkSize>0?Ve.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let _n=Ve.worker instanceof PDFWorker?Ve.worker:null;const En=Ve.verbosity,hn=typeof Ve.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(Ve.docBaseUrl)?Ve.docBaseUrl:null,Sn=typeof Ve.cMapUrl=="string"?Ve.cMapUrl:null,In=Ve.cMapPacked!==!1,je=Ve.CMapReaderFactory||DefaultCMapReaderFactory,Fe=typeof Ve.standardFontDataUrl=="string"?Ve.standardFontDataUrl:null,De=Ve.StandardFontDataFactory||DefaultStandardFontDataFactory,Je=Ve.stopAtErrors!==!0,nn=Number.isInteger(Ve.maxImageSize)&&Ve.maxImageSize>-1?Ve.maxImageSize:-1,an=Ve.isEvalSupported!==!1,on=typeof Ve.isOffscreenCanvasSupported=="boolean"?Ve.isOffscreenCanvasSupported:!_util.isNodeJS,yn=Number.isInteger(Ve.canvasMaxAreaInBytes)?Ve.canvasMaxAreaInBytes:-1,Fn=typeof Ve.disableFontFace=="boolean"?Ve.disableFontFace:_util.isNodeJS,On=Ve.fontExtraProperties===!0,Un=Ve.enableXfa===!0,Wn=Ve.ownerDocument||globalThis.document,ni=Ve.disableRange===!0,Dn=Ve.disableStream===!0,cn=Ve.disableAutoFetch===!0,qn=Ve.pdfBug===!0,fn=An?An.length:Ve.length??NaN,vn=typeof Ve.useSystemFonts=="boolean"?Ve.useSystemFonts:!_util.isNodeJS&&!Fn,kn=typeof Ve.useWorkerFetch=="boolean"?Ve.useWorkerFetch:je===_display_utils.DOMCMapReaderFactory&&De===_display_utils.DOMStandardFontDataFactory&&Sn&&Fe&&(0,_display_utils.isValidFetchUrl)(Sn,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Fe,document.baseURI),Rn=Ve.canvasFactory||new DefaultCanvasFactory({ownerDocument:Wn}),zn=Ve.filterFactory||new DefaultFilterFactory({docId:Qe,ownerDocument:Wn}),Qn=null;(0,_util.setVerbosityLevel)(En);const ii={canvasFactory:Rn,filterFactory:zn};if(kn||(ii.cMapReaderFactory=new je({baseUrl:Sn,isCompressed:In}),ii.standardFontDataFactory=new De({baseUrl:Fe})),!_n){const di={verbosity:En,port:_worker_options.GlobalWorkerOptions.workerPort};_n=di.port?PDFWorker.fromPort(di):new PDFWorker(di),ze._worker=_n}const jn={docId:Qe,apiVersion:"3.11.174",data:Me,password:pn,disableAutoFetch:cn,rangeChunkSize:xn,length:fn,docBaseUrl:hn,enableXfa:Un,evaluatorOptions:{maxImageSize:nn,disableFontFace:Fn,ignoreErrors:Je,isEvalSupported:an,isOffscreenCanvasSupported:on,canvasMaxAreaInBytes:yn,fontExtraProperties:On,useSystemFonts:vn,cMapUrl:kn?Sn:null,standardFontDataUrl:kn?Fe:null}},fi={ignoreErrors:Je,isEvalSupported:an,disableFontFace:Fn,fontExtraProperties:On,enableXfa:Un,ownerDocument:Wn,disableAutoFetch:cn,pdfBug:qn,styleElement:Qn};return _n.promise.then(function(){if(ze.destroyed)throw new Error("Loading aborted");const di=_fetchDocument(_n,jn),Ii=new Promise(function(Si){let Ri;An?Ri=new _transport_stream.PDFDataTransportStream({length:fn,initialData:An.initialData,progressiveDone:An.progressiveDone,contentDispositionFilename:An.contentDispositionFilename,disableRange:ni,disableStream:Dn},An):Me||(Ri=(Fi=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Fi):(0,_display_utils.isValidFetchUrl)(Fi.url)?new _displayFetch_stream.PDFFetchStream(Fi):new _displayNetwork.PDFNetworkStream(Fi))({url:gn,length:fn,httpHeaders:Ue,withCredentials:en,rangeChunkSize:xn,disableRange:ni,disableStream:Dn})),Si(Ri)});return Promise.all([di,Ii]).then(function([Si,Ri]){if(ze.destroyed)throw new Error("Loading aborted");const hi=new _message_handler.MessageHandler(Qe,Si,_n.port),Fi=new WorkerTransport(hi,ze,Ri,fi,ii);ze._transport=Fi,hi.send("Ready",null)})}).catch(ze._capability.reject),ze}async function _fetchDocument(Ve,ze){if(Ve.destroyed)throw new Error("Worker was destroyed");const Qe=await Ve.messageHandler.sendWithPromise("GetDocRequest",ze,ze.data?[ze.data.buffer]:null);if(Ve.destroyed)throw new Error("Worker was destroyed");return Qe}function getUrlProp(Ve){if(Ve instanceof URL)return Ve.href;try{return new URL(Ve,window.location).href}catch{if(_util.isNodeJS&&typeof Ve=="string")return Ve}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(Ve){if(_util.isNodeJS&&typeof Buffer<"u"&&Ve instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(Ve instanceof Uint8Array&&Ve.byteLength===Ve.buffer.byteLength)return Ve;if(typeof Ve=="string")return(0,_util.stringToBytes)(Ve);if(typeof Ve=="object"&&!isNaN(Ve==null?void 0:Ve.length)||(0,_util.isArrayBuffer)(Ve))return new Uint8Array(Ve);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${$a(t,Ae)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var ze,Qe,gn;this.destroyed=!0;try{(ze=this._worker)!=null&&ze.port&&(this._worker._pendingDestroy=!0),await((Qe=this._transport)==null?void 0:Qe.destroy())}catch(Me){throw(gn=this._worker)!=null&&gn.port&&delete this._worker._pendingDestroy,Me}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Ae=new WeakMap,Zn(t,Ae,0);let PDFDocumentLoadingTask=t;exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(ze,Qe,gn=!1,Me=null){this.length=ze,this.initialData=Qe,this.progressiveDone=gn,this.contentDispositionFilename=Me,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(ze){this._rangeListeners.push(ze)}addProgressListener(ze){this._progressListeners.push(ze)}addProgressiveReadListener(ze){this._progressiveReadListeners.push(ze)}addProgressiveDoneListener(ze){this._progressiveDoneListeners.push(ze)}onDataRange(ze,Qe){for(const gn of this._rangeListeners)gn(ze,Qe)}onDataProgress(ze,Qe){this._readyCapability.promise.then(()=>{for(const gn of this._progressListeners)gn(ze,Qe)})}onDataProgressiveRead(ze){this._readyCapability.promise.then(()=>{for(const Qe of this._progressiveReadListeners)Qe(ze)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const ze of this._progressiveDoneListeners)ze()})}transportReady(){this._readyCapability.resolve()}requestDataRange(ze,Qe){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(ze,Qe){this._pdfInfo=ze,this._transport=Qe,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(gn=>{if(!gn)return gn;const Me=[];for(const Ue in gn)Me.push(...gn[Ue]);return Me}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(ze){return this._transport.getPage(ze)}getPageIndex(ze){return this._transport.getPageIndex(ze)}getDestinations(){return this._transport.getDestinations()}getDestination(ze){return this._transport.getDestination(ze)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(ze=!1){return this._transport.startCleanup(ze||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(ze,Qe,gn,Me=!1){Zn(this,_e);Zn(this,St,null);Zn(this,e,!1);this._pageIndex=ze,this._pageInfo=Qe,this._transport=gn,this._stats=Me?new _display_utils.StatTimer:null,this._pdfBug=Me,this.commonObjs=gn.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:ze,rotation:Qe=this.rotate,offsetX:gn=0,offsetY:Me=0,dontFlip:Ue=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:ze,rotation:Qe,offsetX:gn,offsetY:Me,dontFlip:Ue})}getAnnotations({intent:ze="display"}={}){const Qe=this._transport.getRenderingIntent(ze);return this._transport.getAnnotations(this._pageIndex,Qe.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var ze;return((ze=this._transport._htmlForXfa)==null?void 0:ze.children[this._pageIndex])||null}render({canvasContext:ze,viewport:Qe,intent:gn="display",annotationMode:Me=_util.AnnotationMode.ENABLE,transform:Ue=null,background:en=null,optionalContentConfigPromise:pn=null,annotationCanvasMap:An=null,pageColors:xn=null,printAnnotationStorage:_n=null}){var De,Je;(De=this._stats)==null||De.time("Overall");const En=this._transport.getRenderingIntent(gn,Me,_n);ei(this,e,!1),Vn(this,_e,Jo).call(this),pn||(pn=this._transport.getOptionalContentConfig());let hn=this._intentStates.get(En.cacheKey);hn||(hn=Object.create(null),this._intentStates.set(En.cacheKey,hn)),hn.streamReaderCancelTimeout&&(clearTimeout(hn.streamReaderCancelTimeout),hn.streamReaderCancelTimeout=null);const Sn=!!(En.renderingIntent&_util.RenderingIntentFlag.PRINT);hn.displayReadyCapability||(hn.displayReadyCapability=new _util.PromiseCapability,hn.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Je=this._stats)==null||Je.time("Page Request"),this._pumpOperatorList(En));const In=nn=>{var an,on;hn.renderTasks.delete(je),(this._maybeCleanupAfterRender||Sn)&&ei(this,e,!0),Vn(this,_e,ga).call(this,!Sn),nn?(je.capability.reject(nn),this._abortOperatorList({intentState:hn,reason:nn instanceof Error?nn:new Error(nn)})):je.capability.resolve(),(an=this._stats)==null||an.timeEnd("Rendering"),(on=this._stats)==null||on.timeEnd("Overall")},je=new InternalRenderTask({callback:In,params:{canvasContext:ze,viewport:Qe,transform:Ue,background:en},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:An,operatorList:hn.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Sn,pdfBug:this._pdfBug,pageColors:xn});(hn.renderTasks||(hn.renderTasks=new Set)).add(je);const Fe=je.task;return Promise.all([hn.displayReadyCapability.promise,pn]).then(([nn,an])=>{var on;if(this.destroyed){In();return}(on=this._stats)==null||on.time("Rendering"),je.initializeGraphics({transparency:nn,optionalContentConfig:an}),je.operatorListChanged()}).catch(In),Fe}getOperatorList({intent:ze="display",annotationMode:Qe=_util.AnnotationMode.ENABLE,printAnnotationStorage:gn=null}={}){var An;function Me(){en.operatorList.lastChunk&&(en.opListReadCapability.resolve(en.operatorList),en.renderTasks.delete(pn))}const Ue=this._transport.getRenderingIntent(ze,Qe,gn,!0);let en=this._intentStates.get(Ue.cacheKey);en||(en=Object.create(null),this._intentStates.set(Ue.cacheKey,en));let pn;return en.opListReadCapability||(pn=Object.create(null),pn.operatorListChanged=Me,en.opListReadCapability=new _util.PromiseCapability,(en.renderTasks||(en.renderTasks=new Set)).add(pn),en.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(An=this._stats)==null||An.time("Page Request"),this._pumpOperatorList(Ue)),en.opListReadCapability.promise}streamTextContent({includeMarkedContent:ze=!1,disableNormalization:Qe=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:ze===!0,disableNormalization:Qe===!0},{highWaterMark:100,size(Me){return Me.items.length}})}getTextContent(ze={}){if(this._transport._htmlForXfa)return this.getXfa().then(gn=>_xfa_text.XfaText.textContent(gn));const Qe=this.streamTextContent(ze);return new Promise(function(gn,Me){function Ue(){en.read().then(function({value:An,done:xn}){if(xn){gn(pn);return}Object.assign(pn.styles,An.styles),pn.items.push(...An.items),Ue()},Me)}const en=Qe.getReader(),pn={items:[],styles:Object.create(null)};Ue()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const ze=[];for(const Qe of this._intentStates.values())if(this._abortOperatorList({intentState:Qe,reason:new Error("Page was destroyed."),force:!0}),!Qe.opListReadCapability)for(const gn of Qe.renderTasks)ze.push(gn.completed),gn.cancel();return this.objs.clear(),ei(this,e,!1),Vn(this,_e,Jo).call(this),Promise.all(ze)}cleanup(ze=!1){ei(this,e,!0);const Qe=Vn(this,_e,ga).call(this,!1);return ze&&Qe&&this._stats&&(this._stats=new _display_utils.StatTimer),Qe}_startRenderPage(ze,Qe){var Me,Ue;const gn=this._intentStates.get(Qe);gn&&((Me=this._stats)==null||Me.timeEnd("Page Request"),(Ue=gn.displayReadyCapability)==null||Ue.resolve(ze))}_renderPageChunk(ze,Qe){for(let gn=0,Me=ze.length;gn<Me;gn++)Qe.operatorList.fnArray.push(ze.fnArray[gn]),Qe.operatorList.argsArray.push(ze.argsArray[gn]);Qe.operatorList.lastChunk=ze.lastChunk,Qe.operatorList.separateAnnots=ze.separateAnnots;for(const gn of Qe.renderTasks)gn.operatorListChanged();ze.lastChunk&&Vn(this,_e,ga).call(this,!0)}_pumpOperatorList({renderingIntent:ze,cacheKey:Qe,annotationStorageSerializable:gn}){const{map:Me,transfers:Ue}=gn,pn=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:ze,cacheKey:Qe,annotationStorage:Me},Ue).getReader(),An=this._intentStates.get(Qe);An.streamReader=pn;const xn=()=>{pn.read().then(({value:_n,done:En})=>{if(En){An.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(_n,An),xn())},_n=>{if(An.streamReader=null,!this._transport.destroyed){if(An.operatorList){An.operatorList.lastChunk=!0;for(const En of An.renderTasks)En.operatorListChanged();Vn(this,_e,ga).call(this,!0)}if(An.displayReadyCapability)An.displayReadyCapability.reject(_n);else if(An.opListReadCapability)An.opListReadCapability.reject(_n);else throw _n}})};xn()}_abortOperatorList({intentState:ze,reason:Qe,force:gn=!1}){if(ze.streamReader){if(ze.streamReaderCancelTimeout&&(clearTimeout(ze.streamReaderCancelTimeout),ze.streamReaderCancelTimeout=null),!gn){if(ze.renderTasks.size>0)return;if(Qe instanceof _display_utils.RenderingCancelledException){let Me=RENDERING_CANCELLED_TIMEOUT;Qe.extraDelay>0&&Qe.extraDelay<1e3&&(Me+=Qe.extraDelay),ze.streamReaderCancelTimeout=setTimeout(()=>{ze.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:ze,reason:Qe,force:!0})},Me);return}}if(ze.streamReader.cancel(new _util.AbortException(Qe.message)).catch(()=>{}),ze.streamReader=null,!this._transport.destroyed){for(const[Me,Ue]of this._intentStates)if(Ue===ze){this._intentStates.delete(Me);break}this.cleanup()}}}get stats(){return this._stats}}St=new WeakMap,e=new WeakMap,_e=new WeakSet,ga=function(ze=!1){if(Vn(this,_e,Jo).call(this),!He(this,e)||this.destroyed)return!1;if(ze)return ei(this,St,setTimeout(()=>{ei(this,St,null),Vn(this,_e,ga).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:Qe,operatorList:gn}of this._intentStates.values())if(Qe.size>0||!gn.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ei(this,e,!1),!0},Jo=function(){He(this,St)&&(clearTimeout(He(this,St)),ei(this,St,null))},exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Zn(this,Te,new Set);Zn(this,Ee,Promise.resolve())}postMessage(ze,Qe){const gn={data:structuredClone(ze,Qe?{transfer:Qe}:null)};He(this,Ee).then(()=>{for(const Me of He(this,Te))Me.call(this,gn)})}addEventListener(ze,Qe){He(this,Te).add(Qe)}removeEventListener(ze,Qe){He(this,Te).delete(Qe)}terminate(){He(this,Te).clear()}}Te=new WeakMap,Ee=new WeakMap,exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const Ve=(Re=document==null?void 0:document.currentScript)==null?void 0:Re.src;Ve&&(PDFWorkerUtil.fallbackWorkerSrc=Ve.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Ve,ze){let Qe;try{if(Qe=new URL(Ve),!Qe.origin||Qe.origin==="null")return!1}catch{return!1}const gn=new URL(ze,Qe);return Qe.origin===gn.origin},PDFWorkerUtil.createCDNWrapper=function(Ve){const ze=`importScripts("${Ve}");`;return URL.createObjectURL(new Blob([ze]))}}const _PDFWorker=class _PDFWorker{constructor({name:Ve=null,port:ze=null,verbosity:Qe=(0,_util.getVerbosityLevel)()}={}){var gn;if(this.name=Ve,this.destroyed=!1,this.verbosity=Qe,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,ze){if((gn=He(_PDFWorker,Ie))!=null&&gn.has(ze))throw new Error("Cannot use more than one PDFWorker per port.");(He(_PDFWorker,Ie)||ei(_PDFWorker,Ie,new WeakMap)).set(ze,this),this._initializeFromPort(ze);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Ve){this._port=Ve,this._messageHandler=new _message_handler.MessageHandler("main","worker",Ve),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Ve}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Ve)||(Ve=PDFWorkerUtil.createCDNWrapper(new URL(Ve,window.location).href));const ze=new Worker(Ve),Qe=new _message_handler.MessageHandler("main","worker",ze),gn=()=>{ze.removeEventListener("error",Me),Qe.destroy(),ze.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Me=()=>{this._webWorker||gn()};ze.addEventListener("error",Me),Qe.on("test",en=>{if(ze.removeEventListener("error",Me),this.destroyed){gn();return}en?(this._messageHandler=Qe,this._port=ze,this._webWorker=ze,this._readyCapability.resolve(),Qe.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),Qe.destroy(),ze.terminate())}),Qe.on("ready",en=>{if(ze.removeEventListener("error",Me),this.destroyed){gn();return}try{Ue()}catch{this._setupFakeWorker()}});const Ue=()=>{const en=new Uint8Array;Qe.send("test",en,[en.buffer])};Ue();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(Ve=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const ze=new LoopbackPort;this._port=ze;const Qe=`fake${PDFWorkerUtil.fakeWorkerId++}`,gn=new _message_handler.MessageHandler(Qe+"_worker",Qe,ze);Ve.setup(gn,ze);const Me=new _message_handler.MessageHandler(Qe,Qe+"_worker",ze);this._messageHandler=Me,this._readyCapability.resolve(),Me.send("configure",{verbosity:this.verbosity})}).catch(Ve=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Ve.message}".`))})}destroy(){var Ve;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(Ve=He(_PDFWorker,Ie))==null||Ve.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Ve){var Qe;if(!(Ve!=null&&Ve.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const ze=(Qe=He(this,Ie))==null?void 0:Qe.get(Ve.port);if(ze){if(ze._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return ze}return new _PDFWorker(Ve)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var Ve;try{return((Ve=globalThis.pdfjsWorker)==null?void 0:Ve.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};Ie=new WeakMap,Zn(_PDFWorker,Ie);let PDFWorker=_PDFWorker;exports$1.PDFWorker=PDFWorker;class WorkerTransport{constructor(ze,Qe,gn,Me,Ue){Zn(this,We);Zn(this,qe,new Map);Zn(this,Ge,new Map);Zn(this,Ce,new Map);Zn(this,Xe,null);this.messageHandler=ze,this.loadingTask=Qe,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Me.ownerDocument,styleElement:Me.styleElement}),this._params=Me,this.canvasFactory=Ue.canvasFactory,this.filterFactory=Ue.filterFactory,this.cMapReaderFactory=Ue.cMapReaderFactory,this.standardFontDataFactory=Ue.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=gn,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(ze,Qe=_util.AnnotationMode.ENABLE,gn=null,Me=!1){let Ue=_util.RenderingIntentFlag.DISPLAY,en=_annotation_storage.SerializableEmpty;switch(ze){case"any":Ue=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Ue=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${ze}`)}switch(Qe){case _util.AnnotationMode.DISABLE:Ue+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Ue+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Ue+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,en=(Ue&_util.RenderingIntentFlag.PRINT&&gn instanceof _annotation_storage.PrintAnnotationStorage?gn:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${Qe}`)}return Me&&(Ue+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Ue,cacheKey:`${Ue}_${en.hash}`,annotationStorageSerializable:en}}destroy(){var gn;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(gn=He(this,Xe))==null||gn.reject(new Error("Worker was destroyed during onPassword callback"));const ze=[];for(const Me of He(this,Ge).values())ze.push(Me._destroy());He(this,Ge).clear(),He(this,Ce).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const Qe=this.messageHandler.sendWithPromise("Terminate",null);return ze.push(Qe),Promise.all(ze).then(()=>{var Me;this.commonObjs.clear(),this.fontLoader.clear(),He(this,qe).clear(),this.filterFactory.destroy(),(Me=this._networkStream)==null||Me.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:ze,loadingTask:Qe}=this;ze.on("GetReader",(gn,Me)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Ue=>{this._lastProgress={loaded:Ue.loaded,total:Ue.total}},Me.onPull=()=>{this._fullReader.read().then(function({value:Ue,done:en}){if(en){Me.close();return}(0,_util.assert)(Ue instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Me.enqueue(new Uint8Array(Ue),1,[Ue])}).catch(Ue=>{Me.error(Ue)})},Me.onCancel=Ue=>{this._fullReader.cancel(Ue),Me.ready.catch(en=>{if(!this.destroyed)throw en})}}),ze.on("ReaderHeadersReady",gn=>{const Me=new _util.PromiseCapability,Ue=this._fullReader;return Ue.headersReady.then(()=>{var en;(!Ue.isStreamingSupported||!Ue.isRangeSupported)&&(this._lastProgress&&((en=Qe.onProgress)==null||en.call(Qe,this._lastProgress)),Ue.onProgress=pn=>{var An;(An=Qe.onProgress)==null||An.call(Qe,{loaded:pn.loaded,total:pn.total})}),Me.resolve({isStreamingSupported:Ue.isStreamingSupported,isRangeSupported:Ue.isRangeSupported,contentLength:Ue.contentLength})},Me.reject),Me.promise}),ze.on("GetRangeReader",(gn,Me)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Ue=this._networkStream.getRangeReader(gn.begin,gn.end);if(!Ue){Me.close();return}Me.onPull=()=>{Ue.read().then(function({value:en,done:pn}){if(pn){Me.close();return}(0,_util.assert)(en instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Me.enqueue(new Uint8Array(en),1,[en])}).catch(en=>{Me.error(en)})},Me.onCancel=en=>{Ue.cancel(en),Me.ready.catch(pn=>{if(!this.destroyed)throw pn})}}),ze.on("GetDoc",({pdfInfo:gn})=>{this._numPages=gn.numPages,this._htmlForXfa=gn.htmlForXfa,delete gn.htmlForXfa,Qe._capability.resolve(new PDFDocumentProxy(gn,this))}),ze.on("DocException",function(gn){let Me;switch(gn.name){case"PasswordException":Me=new _util.PasswordException(gn.message,gn.code);break;case"InvalidPDFException":Me=new _util.InvalidPDFException(gn.message);break;case"MissingPDFException":Me=new _util.MissingPDFException(gn.message);break;case"UnexpectedResponseException":Me=new _util.UnexpectedResponseException(gn.message,gn.status);break;case"UnknownErrorException":Me=new _util.UnknownErrorException(gn.message,gn.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}Qe._capability.reject(Me)}),ze.on("PasswordRequest",gn=>{if(ei(this,Xe,new _util.PromiseCapability),Qe.onPassword){const Me=Ue=>{Ue instanceof Error?He(this,Xe).reject(Ue):He(this,Xe).resolve({password:Ue})};try{Qe.onPassword(Me,gn.code)}catch(Ue){He(this,Xe).reject(Ue)}}else He(this,Xe).reject(new _util.PasswordException(gn.message,gn.code));return He(this,Xe).promise}),ze.on("DataLoaded",gn=>{var Me;(Me=Qe.onProgress)==null||Me.call(Qe,{loaded:gn.length,total:gn.length}),this.downloadInfoCapability.resolve(gn)}),ze.on("StartRenderPage",gn=>{if(this.destroyed)return;He(this,Ge).get(gn.pageIndex)._startRenderPage(gn.transparency,gn.cacheKey)}),ze.on("commonobj",([gn,Me,Ue])=>{var en;if(!this.destroyed&&!this.commonObjs.has(gn))switch(Me){case"Font":const pn=this._params;if("error"in Ue){const _n=Ue.error;(0,_util.warn)(`Error during font loading: ${_n}`),this.commonObjs.resolve(gn,_n);break}const An=pn.pdfBug&&((en=globalThis.FontInspector)!=null&&en.enabled)?(_n,En)=>globalThis.FontInspector.fontAdded(_n,En):null,xn=new _font_loader.FontFaceObject(Ue,{isEvalSupported:pn.isEvalSupported,disableFontFace:pn.disableFontFace,ignoreErrors:pn.ignoreErrors,inspectFont:An});this.fontLoader.bind(xn).catch(_n=>ze.sendWithPromise("FontFallback",{id:gn})).finally(()=>{!pn.fontExtraProperties&&xn.data&&(xn.data=null),this.commonObjs.resolve(gn,xn)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(gn,Ue);break;default:throw new Error(`Got unknown common object type ${Me}`)}}),ze.on("obj",([gn,Me,Ue,en])=>{var An;if(this.destroyed)return;const pn=He(this,Ge).get(Me);if(!pn.objs.has(gn))switch(Ue){case"Image":if(pn.objs.resolve(gn,en),en){let xn;if(en.bitmap){const{width:_n,height:En}=en;xn=_n*En*4}else xn=((An=en.data)==null?void 0:An.length)||0;xn>_util.MAX_IMAGE_SIZE_TO_CACHE&&(pn._maybeCleanupAfterRender=!0)}break;case"Pattern":pn.objs.resolve(gn,en);break;default:throw new Error(`Got unknown object type ${Ue}`)}}),ze.on("DocProgress",gn=>{var Me;this.destroyed||(Me=Qe.onProgress)==null||Me.call(Qe,{loaded:gn.loaded,total:gn.total})}),ze.on("FetchBuiltInCMap",gn=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(gn):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),ze.on("FetchStandardFontData",gn=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(gn):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var gn;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:ze,transfers:Qe}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:ze,filename:((gn=this._fullReader)==null?void 0:gn.filename)??null},Qe).finally(()=>{this.annotationStorage.resetModified()})}getPage(ze){if(!Number.isInteger(ze)||ze<=0||ze>this._numPages)return Promise.reject(new Error("Invalid page request."));const Qe=ze-1,gn=He(this,Ce).get(Qe);if(gn)return gn;const Me=this.messageHandler.sendWithPromise("GetPage",{pageIndex:Qe}).then(Ue=>{if(this.destroyed)throw new Error("Transport destroyed");const en=new PDFPageProxy(Qe,Ue,this,this._params.pdfBug);return He(this,Ge).set(Qe,en),en});return He(this,Ce).set(Qe,Me),Me}getPageIndex(ze){return typeof ze!="object"||ze===null||!Number.isInteger(ze.num)||ze.num<0||!Number.isInteger(ze.gen)||ze.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:ze.num,gen:ze.gen})}getAnnotations(ze,Qe){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:ze,intent:Qe})}getFieldObjects(){return Vn(this,We,$o).call(this,"GetFieldObjects")}hasJSActions(){return Vn(this,We,$o).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(ze){return typeof ze!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:ze})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Vn(this,We,$o).call(this,"GetDocJSActions")}getPageJSActions(ze){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:ze})}getStructTree(ze){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:ze})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(ze=>new _optional_content_config.OptionalContentConfig(ze))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const ze="GetMetadata",Qe=He(this,qe).get(ze);if(Qe)return Qe;const gn=this.messageHandler.sendWithPromise(ze,null).then(Me=>{var Ue,en;return{info:Me[0],metadata:Me[1]?new _metadata.Metadata(Me[1]):null,contentDispositionFilename:((Ue=this._fullReader)==null?void 0:Ue.filename)??null,contentLength:((en=this._fullReader)==null?void 0:en.contentLength)??null}});return He(this,qe).set(ze,gn),gn}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(ze=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const Qe of He(this,Ge).values())if(!Qe.cleanup())throw new Error(`startCleanup: Page ${Qe.pageNumber} is currently rendering.`);this.commonObjs.clear(),ze||this.fontLoader.clear(),He(this,qe).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:ze,enableXfa:Qe}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:ze,enableXfa:Qe})}}qe=new WeakMap,Ge=new WeakMap,Ce=new WeakMap,Xe=new WeakMap,We=new WeakSet,$o=function(ze,Qe=null){const gn=He(this,qe).get(ze);if(gn)return gn;const Me=this.messageHandler.sendWithPromise(ze,Qe);return He(this,qe).set(ze,Me),Me};class PDFObjects{constructor(){Zn(this,Ye);Zn(this,Be,Object.create(null))}get(ze,Qe=null){if(Qe){const Me=Vn(this,Ye,tc).call(this,ze);return Me.capability.promise.then(()=>Qe(Me.data)),null}const gn=He(this,Be)[ze];if(!(gn!=null&&gn.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${ze}.`);return gn.data}has(ze){const Qe=He(this,Be)[ze];return(Qe==null?void 0:Qe.capability.settled)||!1}resolve(ze,Qe=null){const gn=Vn(this,Ye,tc).call(this,ze);gn.data=Qe,gn.capability.resolve()}clear(){var ze;for(const Qe in He(this,Be)){const{data:gn}=He(this,Be)[Qe];(ze=gn==null?void 0:gn.bitmap)==null||ze.close()}ei(this,Be,Object.create(null))}}Be=new WeakMap,Ye=new WeakSet,tc=function(ze){var Qe;return(Qe=He(this,Be))[ze]||(Qe[ze]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(ze){Zn(this,rn,null);ei(this,rn,ze),this.onContinue=null}get promise(){return He(this,rn).capability.promise}cancel(ze=0){He(this,rn).cancel(null,ze)}get separateAnnots(){const{separateAnnots:ze}=He(this,rn).operatorList;if(!ze)return!1;const{annotationCanvasMap:Qe}=He(this,rn);return ze.form||ze.canvas&&(Qe==null?void 0:Qe.size)>0}}rn=new WeakMap,exports$1.RenderTask=RenderTask;const tn=class tn{constructor({callback:ze,params:Qe,objs:gn,commonObjs:Me,annotationCanvasMap:Ue,operatorList:en,pageIndex:pn,canvasFactory:An,filterFactory:xn,useRequestAnimationFrame:_n=!1,pdfBug:En=!1,pageColors:hn=null}){this.callback=ze,this.params=Qe,this.objs=gn,this.commonObjs=Me,this.annotationCanvasMap=Ue,this.operatorListIdx=null,this.operatorList=en,this._pageIndex=pn,this.canvasFactory=An,this.filterFactory=xn,this._pdfBug=En,this.pageColors=hn,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=_n===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=Qe.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:ze=!1,optionalContentConfig:Qe}){var pn,An;if(this.cancelled)return;if(this._canvas){if(He(tn,$e).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");He(tn,$e).add(this._canvas)}this._pdfBug&&((pn=globalThis.StepperManager)!=null&&pn.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:gn,viewport:Me,transform:Ue,background:en}=this.params;this.gfx=new _canvas.CanvasGraphics(gn,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:Qe},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Ue,viewport:Me,transparency:ze,background:en}),this.operatorListIdx=0,this.graphicsReady=!0,(An=this.graphicsReadyCallback)==null||An.call(this)}cancel(ze=null,Qe=0){var gn;this.running=!1,this.cancelled=!0,(gn=this.gfx)==null||gn.endDrawing(),He(tn,$e).delete(this._canvas),this.callback(ze||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,Qe))}operatorListChanged(){var ze;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(ze=this.stepper)==null||ze.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),He(tn,$e).delete(this._canvas),this.callback())))}};$e=new WeakMap,Zn(tn,$e,new WeakSet);let InternalRenderTask=tn;const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build},(Ae,t,St)=>{var Re,Ie,qe,hh,Ce;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var e=St(1),_e=St(4),Se=St(8);const Pe=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=Pe;class Te{constructor(){Zn(this,qe);Zn(this,Re,!1);Zn(this,Ie,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(We,Ke){const Be=He(this,Ie).get(We);return Be===void 0?Ke:Object.assign(Ke,Be)}getRawValue(We){return He(this,Ie).get(We)}remove(We){if(He(this,Ie).delete(We),He(this,Ie).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const Ke of He(this,Ie).values())if(Ke instanceof _e.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(We,Ke){const Be=He(this,Ie).get(We);let Ye=!1;if(Be!==void 0)for(const[sn,rn]of Object.entries(Ke))Be[sn]!==rn&&(Ye=!0,Be[sn]=rn);else Ye=!0,He(this,Ie).set(We,Ke);Ye&&Vn(this,qe,hh).call(this),Ke instanceof _e.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(Ke.constructor._type)}has(We){return He(this,Ie).has(We)}getAll(){return He(this,Ie).size>0?(0,e.objectFromMap)(He(this,Ie)):null}setAll(We){for(const[Ke,Be]of Object.entries(We))this.setValue(Ke,Be)}get size(){return He(this,Ie).size}resetModified(){He(this,Re)&&(ei(this,Re,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ee(this)}get serializable(){if(He(this,Ie).size===0)return Pe;const We=new Map,Ke=new Se.MurmurHash3_64,Be=[],Ye=Object.create(null);let sn=!1;for(const[rn,$e]of He(this,Ie)){const tn=$e instanceof _e.AnnotationEditor?$e.serialize(!1,Ye):$e;tn&&(We.set(rn,tn),Ke.update(`${rn}:${JSON.stringify(tn)}`),sn||(sn=!!tn.bitmap))}if(sn)for(const rn of We.values())rn.bitmap&&Be.push(rn.bitmap);return We.size>0?{map:We,hash:Ke.hexdigest(),transfers:Be}:Pe}}Re=new WeakMap,Ie=new WeakMap,qe=new WeakSet,hh=function(){He(this,Re)||(ei(this,Re,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=Te;class Ee extends Te{constructor(Ke){super();Zn(this,Ce);const{map:Be,hash:Ye,transfers:sn}=Ke.serializable,rn=structuredClone(Be,sn?{transfer:sn}:null);ei(this,Ce,{map:rn,hash:Ye,transfers:sn})}get print(){(0,e.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return He(this,Ce)}}Ce=new WeakMap,t.PrintAnnotationStorage=Ee},(Ae,t,St)=>{var Ee,Re,Ie,qe,Ge,Ce,Xe,We,Ke,Be,Ye,sn,rn,$e,tn,nc,ic,Qe,rc,sc,uh,dh,fh,ac,ph;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var e=St(5),_e=St(1),Se=St(6);const _n=class _n{constructor(hn){Zn(this,tn);Zn(this,Ee,"");Zn(this,Re,!1);Zn(this,Ie,null);Zn(this,qe,null);Zn(this,Ge,null);Zn(this,Ce,!1);Zn(this,Xe,null);Zn(this,We,this.focusin.bind(this));Zn(this,Ke,this.focusout.bind(this));Zn(this,Be,!1);Zn(this,Ye,!1);Zn(this,sn,!1);cr(this,"_initialOptions",Object.create(null));cr(this,"_uiManager",null);cr(this,"_focusEventsAllowed",!0);cr(this,"_l10nPromise",null);Zn(this,rn,!1);Zn(this,$e,_n._zIndex++);this.constructor===_n&&(0,_e.unreachable)("Cannot initialize AnnotationEditor."),this.parent=hn.parent,this.id=hn.id,this.width=this.height=null,this.pageIndex=hn.parent.pageIndex,this.name=hn.name,this.div=null,this._uiManager=hn.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=hn.isCentered,this._structTreeParentId=null;const{rotation:Sn,rawDims:{pageWidth:In,pageHeight:je,pageX:Fe,pageY:De}}=this.parent.viewport;this.rotation=Sn,this.pageRotation=(360+Sn-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[In,je],this.pageTranslation=[Fe,De];const[Je,nn]=this.parentDimensions;this.x=hn.x/Je,this.y=hn.y/nn,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,_e.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(hn){const Sn=new Te({id:hn.parent.getNextId(),parent:hn.parent,uiManager:hn._uiManager});Sn.annotationElementId=hn.annotationElementId,Sn.deleted=!0,Sn._uiManager.addToAnnotationStorage(Sn)}static initialize(hn,Sn=null){if(_n._l10nPromise||(_n._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(je=>[je,hn.get(je)]))),Sn!=null&&Sn.strings)for(const je of Sn.strings)_n._l10nPromise.set(je,hn.get(je));if(_n._borderLineWidth!==-1)return;const In=getComputedStyle(document.documentElement);_n._borderLineWidth=parseFloat(In.getPropertyValue("--outline-width"))||0}static updateDefaultParams(hn,Sn){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(hn){return!1}static paste(hn,Sn){(0,_e.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return He(this,rn)}set _isDraggable(hn){var Sn;ei(this,rn,hn),(Sn=this.div)==null||Sn.classList.toggle("draggable",hn)}center(){const[hn,Sn]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Sn/(hn*2),this.y+=this.width*hn/(Sn*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Sn/(hn*2),this.y-=this.width*hn/(Sn*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(hn){this._uiManager.addCommands(hn)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=He(this,$e)}setParent(hn){hn!==null&&(this.pageIndex=hn.pageIndex,this.pageDimensions=hn.pageDimensions),this.parent=hn}focusin(hn){this._focusEventsAllowed&&(He(this,Be)?ei(this,Be,!1):this.parent.setSelected(this))}focusout(hn){var In;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const Sn=hn.relatedTarget;Sn!=null&&Sn.closest(`#${this.id}`)||(hn.preventDefault(),(In=this.parent)!=null&&In.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(hn,Sn,In,je){const[Fe,De]=this.parentDimensions;[In,je]=this.screenToPageTranslation(In,je),this.x=(hn+In)/Fe,this.y=(Sn+je)/De,this.fixAndSetPosition()}translate(hn,Sn){Vn(this,tn,nc).call(this,this.parentDimensions,hn,Sn)}translateInPage(hn,Sn){Vn(this,tn,nc).call(this,this.pageDimensions,hn,Sn),this.div.scrollIntoView({block:"nearest"})}drag(hn,Sn){const[In,je]=this.parentDimensions;if(this.x+=hn/In,this.y+=Sn/je,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:an,y:on}=this.div.getBoundingClientRect();this.parent.findNewParent(this,an,on)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Fe,y:De}=this;const[Je,nn]=Vn(this,tn,ic).call(this);Fe+=Je,De+=nn,this.div.style.left=`${(100*Fe).toFixed(2)}%`,this.div.style.top=`${(100*De).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[hn,Sn]=this.pageDimensions;let{x:In,y:je,width:Fe,height:De}=this;switch(Fe*=hn,De*=Sn,In*=hn,je*=Sn,this.rotation){case 0:In=Math.max(0,Math.min(hn-Fe,In)),je=Math.max(0,Math.min(Sn-De,je));break;case 90:In=Math.max(0,Math.min(hn-De,In)),je=Math.min(Sn,Math.max(Fe,je));break;case 180:In=Math.min(hn,Math.max(Fe,In)),je=Math.min(Sn,Math.max(De,je));break;case 270:In=Math.min(hn,Math.max(De,In)),je=Math.max(0,Math.min(Sn-Fe,je));break}this.x=In/=hn,this.y=je/=Sn;const[Je,nn]=Vn(this,tn,ic).call(this);In+=Je,je+=nn;const{style:an}=this.div;an.left=`${(100*In).toFixed(2)}%`,an.top=`${(100*je).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(hn,Sn){var In;return Vn(In=_n,Qe,rc).call(In,hn,Sn,this.parentRotation)}pageTranslationToScreen(hn,Sn){var In;return Vn(In=_n,Qe,rc).call(In,hn,Sn,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:hn,pageDimensions:[Sn,In]}=this,je=Sn*hn,Fe=In*hn;return _e.FeatureTest.isCSSRoundSupported?[Math.round(je),Math.round(Fe)]:[je,Fe]}setDims(hn,Sn){var Fe;const[In,je]=this.parentDimensions;this.div.style.width=`${(100*hn/In).toFixed(2)}%`,He(this,Ce)||(this.div.style.height=`${(100*Sn/je).toFixed(2)}%`),(Fe=He(this,Ie))==null||Fe.classList.toggle("small",hn<_n.SMALL_EDITOR_SIZE||Sn<_n.SMALL_EDITOR_SIZE)}fixDims(){const{style:hn}=this.div,{height:Sn,width:In}=hn,je=In.endsWith("%"),Fe=!He(this,Ce)&&Sn.endsWith("%");if(je&&Fe)return;const[De,Je]=this.parentDimensions;je||(hn.width=`${(100*parseFloat(In)/De).toFixed(2)}%`),!He(this,Ce)&&!Fe&&(hn.height=`${(100*parseFloat(Sn)/Je).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(He(this,Ie))return;const hn=ei(this,Ie,document.createElement("button"));hn.className="altText";const Sn=await _n._l10nPromise.get("editor_alt_text_button_label");hn.textContent=Sn,hn.setAttribute("aria-label",Sn),hn.tabIndex="0",hn.addEventListener("contextmenu",Se.noContextMenu),hn.addEventListener("pointerdown",In=>In.stopPropagation()),hn.addEventListener("click",In=>{In.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),hn.addEventListener("keydown",In=>{In.target===hn&&In.key==="Enter"&&(In.preventDefault(),this._uiManager.editAltText(this))}),Vn(this,tn,ac).call(this),this.div.append(hn),_n.SMALL_EDITOR_SIZE||(_n.SMALL_EDITOR_SIZE=Math.min(128,Math.round(hn.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:He(this,Ee),decorative:He(this,Re)}}set altTextData({altText:hn,decorative:Sn}){He(this,Ee)===hn&&He(this,Re)===Sn||(ei(this,Ee,hn),ei(this,Re,Sn),Vn(this,tn,ac).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",He(this,We)),this.div.addEventListener("focusout",He(this,Ke));const[hn,Sn]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Sn/hn).toFixed(2)}%`,this.div.style.maxHeight=`${(100*hn/Sn).toFixed(2)}%`);const[In,je]=this.getInitialTranslation();return this.translate(In,je),(0,e.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(hn){const{isMac:Sn}=_e.FeatureTest.platform;if(hn.button!==0||hn.ctrlKey&&Sn){hn.preventDefault();return}ei(this,Be,!0),Vn(this,tn,ph).call(this,hn)}moveInDOM(){var hn;(hn=this.parent)==null||hn.moveEditorInDOM(this)}_setParentAndPosition(hn,Sn,In){hn.changeParent(this),this.x=Sn,this.y=In,this.fixAndSetPosition()}getRect(hn,Sn){const In=this.parentScale,[je,Fe]=this.pageDimensions,[De,Je]=this.pageTranslation,nn=hn/In,an=Sn/In,on=this.x*je,yn=this.y*Fe,Fn=this.width*je,On=this.height*Fe;switch(this.rotation){case 0:return[on+nn+De,Fe-yn-an-On+Je,on+nn+Fn+De,Fe-yn-an+Je];case 90:return[on+an+De,Fe-yn+nn+Je,on+an+On+De,Fe-yn+nn+Fn+Je];case 180:return[on-nn-Fn+De,Fe-yn+an+Je,on-nn+De,Fe-yn+an+On+Je];case 270:return[on-an-On+De,Fe-yn-nn-Fn+Je,on-an+De,Fe-yn-nn+Je];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(hn,Sn){const[In,je,Fe,De]=hn,Je=Fe-In,nn=De-je;switch(this.rotation){case 0:return[In,Sn-De,Je,nn];case 90:return[In,Sn-je,nn,Je];case 180:return[Fe,Sn-je,Je,nn];case 270:return[Fe,Sn-De,nn,Je];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ei(this,sn,!0)}disableEditMode(){ei(this,sn,!1)}isInEditMode(){return He(this,sn)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var hn,Sn;(hn=this.div)==null||hn.addEventListener("focusin",He(this,We)),(Sn=this.div)==null||Sn.addEventListener("focusout",He(this,Ke))}serialize(hn=!1,Sn=null){(0,_e.unreachable)("An editor must be serializable")}static deserialize(hn,Sn,In){const je=new this.prototype.constructor({parent:Sn,id:Sn.getNextId(),uiManager:In});je.rotation=hn.rotation;const[Fe,De]=je.pageDimensions,[Je,nn,an,on]=je.getRectInCurrentCoords(hn.rect,De);return je.x=Je/Fe,je.y=nn/De,je.width=an/Fe,je.height=on/De,je}remove(){var hn;this.div.removeEventListener("focusin",He(this,We)),this.div.removeEventListener("focusout",He(this,Ke)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(hn=He(this,Ie))==null||hn.remove(),ei(this,Ie,null),ei(this,qe,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Vn(this,tn,uh).call(this),He(this,Xe).classList.remove("hidden"))}select(){var hn;this.makeResizable(),(hn=this.div)==null||hn.classList.add("selectedEditor")}unselect(){var hn,Sn,In;(hn=He(this,Xe))==null||hn.classList.add("hidden"),(Sn=this.div)==null||Sn.classList.remove("selectedEditor"),(In=this.div)!=null&&In.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(hn,Sn){}disableEditing(){He(this,Ie)&&(He(this,Ie).hidden=!0)}enableEditing(){He(this,Ie)&&(He(this,Ie).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return He(this,Ye)}set isEditing(hn){ei(this,Ye,hn),this.parent&&(hn?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(hn,Sn){ei(this,Ce,!0);const In=hn/Sn,{style:je}=this.div;je.aspectRatio=In,je.height="auto"}static get MIN_SIZE(){return 16}};Ee=new WeakMap,Re=new WeakMap,Ie=new WeakMap,qe=new WeakMap,Ge=new WeakMap,Ce=new WeakMap,Xe=new WeakMap,We=new WeakMap,Ke=new WeakMap,Be=new WeakMap,Ye=new WeakMap,sn=new WeakMap,rn=new WeakMap,$e=new WeakMap,tn=new WeakSet,nc=function([hn,Sn],In,je){[In,je]=this.screenToPageTranslation(In,je),this.x+=In/hn,this.y+=je/Sn,this.fixAndSetPosition()},ic=function(){const[hn,Sn]=this.parentDimensions,{_borderLineWidth:In}=_n,je=In/hn,Fe=In/Sn;switch(this.rotation){case 90:return[-je,Fe];case 180:return[je,Fe];case 270:return[je,-Fe];default:return[-je,-Fe]}},Qe=new WeakSet,rc=function(hn,Sn,In){switch(In){case 90:return[Sn,-hn];case 180:return[-hn,-Sn];case 270:return[-Sn,hn];default:return[hn,Sn]}},sc=function(hn){switch(hn){case 90:{const[Sn,In]=this.pageDimensions;return[0,-Sn/In,In/Sn,0]}case 180:return[-1,0,0,-1];case 270:{const[Sn,In]=this.pageDimensions;return[0,Sn/In,-In/Sn,0]}default:return[1,0,0,1]}},uh=function(){if(He(this,Xe))return;ei(this,Xe,document.createElement("div")),He(this,Xe).classList.add("resizers");const hn=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||hn.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Sn of hn){const In=document.createElement("div");He(this,Xe).append(In),In.classList.add("resizer",Sn),In.addEventListener("pointerdown",Vn(this,tn,dh).bind(this,Sn)),In.addEventListener("contextmenu",Se.noContextMenu)}this.div.prepend(He(this,Xe))},dh=function(hn,Sn){Sn.preventDefault();const{isMac:In}=_e.FeatureTest.platform;if(Sn.button!==0||Sn.ctrlKey&&In)return;const je=Vn(this,tn,fh).bind(this,hn),Fe=this._isDraggable;this._isDraggable=!1;const De={passive:!0,capture:!0};window.addEventListener("pointermove",je,De);const Je=this.x,nn=this.y,an=this.width,on=this.height,yn=this.parent.div.style.cursor,Fn=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Sn.target).cursor;const On=()=>{this._isDraggable=Fe,window.removeEventListener("pointerup",On),window.removeEventListener("blur",On),window.removeEventListener("pointermove",je,De),this.parent.div.style.cursor=yn,this.div.style.cursor=Fn;const Un=this.x,Wn=this.y,ni=this.width,Dn=this.height;Un===Je&&Wn===nn&&ni===an&&Dn===on||this.addCommands({cmd:()=>{this.width=ni,this.height=Dn,this.x=Un,this.y=Wn;const[cn,qn]=this.parentDimensions;this.setDims(cn*ni,qn*Dn),this.fixAndSetPosition()},undo:()=>{this.width=an,this.height=on,this.x=Je,this.y=nn;const[cn,qn]=this.parentDimensions;this.setDims(cn*an,qn*on),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",On),window.addEventListener("blur",On)},fh=function(hn,Sn){const[In,je]=this.parentDimensions,Fe=this.x,De=this.y,Je=this.width,nn=this.height,an=_n.MIN_SIZE/In,on=_n.MIN_SIZE/je,yn=hi=>Math.round(hi*1e4)/1e4,Fn=Vn(this,tn,sc).call(this,this.rotation),On=(hi,Fi)=>[Fn[0]*hi+Fn[2]*Fi,Fn[1]*hi+Fn[3]*Fi],Un=Vn(this,tn,sc).call(this,360-this.rotation),Wn=(hi,Fi)=>[Un[0]*hi+Un[2]*Fi,Un[1]*hi+Un[3]*Fi];let ni,Dn,cn=!1,qn=!1;switch(hn){case"topLeft":cn=!0,ni=(hi,Fi)=>[0,0],Dn=(hi,Fi)=>[hi,Fi];break;case"topMiddle":ni=(hi,Fi)=>[hi/2,0],Dn=(hi,Fi)=>[hi/2,Fi];break;case"topRight":cn=!0,ni=(hi,Fi)=>[hi,0],Dn=(hi,Fi)=>[0,Fi];break;case"middleRight":qn=!0,ni=(hi,Fi)=>[hi,Fi/2],Dn=(hi,Fi)=>[0,Fi/2];break;case"bottomRight":cn=!0,ni=(hi,Fi)=>[hi,Fi],Dn=(hi,Fi)=>[0,0];break;case"bottomMiddle":ni=(hi,Fi)=>[hi/2,Fi],Dn=(hi,Fi)=>[hi/2,0];break;case"bottomLeft":cn=!0,ni=(hi,Fi)=>[0,Fi],Dn=(hi,Fi)=>[hi,0];break;case"middleLeft":qn=!0,ni=(hi,Fi)=>[0,Fi/2],Dn=(hi,Fi)=>[hi,Fi/2];break}const fn=ni(Je,nn),vn=Dn(Je,nn);let kn=On(...vn);const Rn=yn(Fe+kn[0]),zn=yn(De+kn[1]);let Qn=1,ii=1,[jn,fi]=this.screenToPageTranslation(Sn.movementX,Sn.movementY);if([jn,fi]=Wn(jn/In,fi/je),cn){const hi=Math.hypot(Je,nn);Qn=ii=Math.max(Math.min(Math.hypot(vn[0]-fn[0]-jn,vn[1]-fn[1]-fi)/hi,1/Je,1/nn),an/Je,on/nn)}else qn?Qn=Math.max(an,Math.min(1,Math.abs(vn[0]-fn[0]-jn)))/Je:ii=Math.max(on,Math.min(1,Math.abs(vn[1]-fn[1]-fi)))/nn;const di=yn(Je*Qn),Ii=yn(nn*ii);kn=On(...Dn(di,Ii));const Si=Rn-kn[0],Ri=zn-kn[1];this.width=di,this.height=Ii,this.x=Si,this.y=Ri,this.setDims(In*di,je*Ii),this.fixAndSetPosition()},ac=async function(){var In;const hn=He(this,Ie);if(!hn)return;if(!He(this,Ee)&&!He(this,Re)){hn.classList.remove("done"),(In=He(this,qe))==null||In.remove();return}_n._l10nPromise.get("editor_alt_text_edit_button_label").then(je=>{hn.setAttribute("aria-label",je)});let Sn=He(this,qe);if(!Sn){ei(this,qe,Sn=document.createElement("span")),Sn.className="tooltip",Sn.setAttribute("role","tooltip");const je=Sn.id=`alt-text-tooltip-${this.id}`;hn.setAttribute("aria-describedby",je);const Fe=100;hn.addEventListener("mouseenter",()=>{ei(this,Ge,setTimeout(()=>{ei(this,Ge,null),He(this,qe).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},Fe))}),hn.addEventListener("mouseleave",()=>{var De;clearTimeout(He(this,Ge)),ei(this,Ge,null),(De=He(this,qe))==null||De.classList.remove("show")})}hn.classList.add("done"),Sn.innerText=He(this,Re)?await _n._l10nPromise.get("editor_alt_text_decorative_tooltip"):He(this,Ee),Sn.parentNode||hn.append(Sn)},ph=function(hn){if(!this._isDraggable)return;const Sn=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let In,je;Sn&&(In={passive:!0,capture:!0},je=De=>{const[Je,nn]=this.screenToPageTranslation(De.movementX,De.movementY);this._uiManager.dragSelectedEditors(Je,nn)},window.addEventListener("pointermove",je,In));const Fe=()=>{if(window.removeEventListener("pointerup",Fe),window.removeEventListener("blur",Fe),Sn&&window.removeEventListener("pointermove",je,In),ei(this,Be,!1),!this._uiManager.endDragSession()){const{isMac:De}=_e.FeatureTest.platform;hn.ctrlKey&&!De||hn.shiftKey||hn.metaKey&&De?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Fe),window.addEventListener("blur",Fe)},Zn(_n,Qe),cr(_n,"_borderLineWidth",-1),cr(_n,"_colorManager",new e.ColorManager),cr(_n,"_zIndex",1),cr(_n,"SMALL_EDITOR_SIZE",0);let Pe=_n;t.AnnotationEditor=Pe;class Te extends Pe{constructor(hn){super(hn),this.annotationElementId=hn.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(Ae,t,St)=>{var Ce,Xe,We,Ke,Be,oc,rn,$e,tn,Ve,ze,gh,Me,Ue,en,pn,An,xn,_n,En,hn,Sn,In,je,Fe,De,Je,nn,an,on,yn,Fn,On,Un,Wn,ni,Dn,cn,qn,fn,vn,kn,Rn,zn,Qn,ii,jn,mh,cc,hc,Zo,uc,dc,Qr,Za,bh,vh,fc,Qa,pc;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=Se,t.opacityToHex=Pe;var e=St(1),_e=St(6);function Se(Bi,Tn,ci){for(const bi of ci)Tn.addEventListener(bi,Bi[bi].bind(Bi))}function Pe(Bi){return Math.round(Math.min(255,Math.max(1,255*Bi))).toString(16).padStart(2,"0")}class Te{constructor(){Zn(this,Ce,0)}getId(){return`${e.AnnotationEditorPrefix}${$a(this,Ce)._++}`}}Ce=new WeakMap;const sn=class sn{constructor(){Zn(this,Be);Zn(this,Xe,(0,e.getUuid)());Zn(this,We,0);Zn(this,Ke,null)}static get _isSVGFittingCanvas(){const Tn='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',bi=new OffscreenCanvas(1,3).getContext("2d"),vi=new Image;vi.src=Tn;const Pi=vi.decode().then(()=>(bi.drawImage(vi,0,0,1,1,0,0,1,3),new Uint32Array(bi.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,e.shadow)(this,"_isSVGFittingCanvas",Pi)}async getFromFile(Tn){const{lastModified:ci,name:bi,size:vi,type:Pi}=Tn;return Vn(this,Be,oc).call(this,`${ci}_${bi}_${vi}_${Pi}`,Tn)}async getFromUrl(Tn){return Vn(this,Be,oc).call(this,Tn,Tn)}async getFromId(Tn){He(this,Ke)||ei(this,Ke,new Map);const ci=He(this,Ke).get(Tn);return ci?ci.bitmap?(ci.refCounter+=1,ci):ci.file?this.getFromFile(ci.file):this.getFromUrl(ci.url):null}getSvgUrl(Tn){const ci=He(this,Ke).get(Tn);return ci!=null&&ci.isSvg?ci.svgUrl:null}deleteId(Tn){He(this,Ke)||ei(this,Ke,new Map);const ci=He(this,Ke).get(Tn);ci&&(ci.refCounter-=1,ci.refCounter===0&&(ci.bitmap=null))}isValidId(Tn){return Tn.startsWith(`image_${He(this,Xe)}_`)}};Xe=new WeakMap,We=new WeakMap,Ke=new WeakMap,Be=new WeakSet,oc=async function(Tn,ci){He(this,Ke)||ei(this,Ke,new Map);let bi=He(this,Ke).get(Tn);if(bi===null)return null;if(bi!=null&&bi.bitmap)return bi.refCounter+=1,bi;try{bi||(bi={bitmap:null,id:`image_${He(this,Xe)}_${$a(this,We)._++}`,refCounter:0,isSvg:!1});let vi;if(typeof ci=="string"){bi.url=ci;const Pi=await fetch(ci);if(!Pi.ok)throw new Error(Pi.statusText);vi=await Pi.blob()}else vi=bi.file=ci;if(vi.type==="image/svg+xml"){const Pi=sn._isSVGFittingCanvas,Ni=new FileReader,Cn=new Image,Ln=new Promise((Bn,Hn)=>{Cn.onload=()=>{bi.bitmap=Cn,bi.isSvg=!0,Bn()},Ni.onload=async()=>{const ri=bi.svgUrl=Ni.result;Cn.src=await Pi?`${ri}#svgView(preserveAspectRatio(none))`:ri},Cn.onerror=Ni.onerror=Hn});Ni.readAsDataURL(vi),await Ln}else bi.bitmap=await createImageBitmap(vi);bi.refCounter=1}catch(vi){console.error(vi),bi=null}return He(this,Ke).set(Tn,bi),bi&&He(this,Ke).set(bi.id,bi),bi};let Ee=sn;class Re{constructor(Tn=128){Zn(this,rn,[]);Zn(this,$e,!1);Zn(this,tn);Zn(this,Ve,-1);ei(this,tn,Tn)}add({cmd:Tn,undo:ci,mustExec:bi,type:vi=NaN,overwriteIfSameType:Pi=!1,keepUndo:Ni=!1}){if(bi&&Tn(),He(this,$e))return;const Cn={cmd:Tn,undo:ci,type:vi};if(He(this,Ve)===-1){He(this,rn).length>0&&(He(this,rn).length=0),ei(this,Ve,0),He(this,rn).push(Cn);return}if(Pi&&He(this,rn)[He(this,Ve)].type===vi){Ni&&(Cn.undo=He(this,rn)[He(this,Ve)].undo),He(this,rn)[He(this,Ve)]=Cn;return}const Ln=He(this,Ve)+1;Ln===He(this,tn)?He(this,rn).splice(0,1):(ei(this,Ve,Ln),Ln<He(this,rn).length&&He(this,rn).splice(Ln)),He(this,rn).push(Cn)}undo(){He(this,Ve)!==-1&&(ei(this,$e,!0),He(this,rn)[He(this,Ve)].undo(),ei(this,$e,!1),ei(this,Ve,He(this,Ve)-1))}redo(){He(this,Ve)<He(this,rn).length-1&&(ei(this,Ve,He(this,Ve)+1),ei(this,$e,!0),He(this,rn)[He(this,Ve)].cmd(),ei(this,$e,!1))}hasSomethingToUndo(){return He(this,Ve)!==-1}hasSomethingToRedo(){return He(this,Ve)<He(this,rn).length-1}destroy(){ei(this,rn,null)}}rn=new WeakMap,$e=new WeakMap,tn=new WeakMap,Ve=new WeakMap,t.CommandManager=Re;class Ie{constructor(Tn){Zn(this,ze);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:ci}=e.FeatureTest.platform;for(const[bi,vi,Pi={}]of Tn)for(const Ni of bi){const Cn=Ni.startsWith("mac+");ci&&Cn?(this.callbacks.set(Ni.slice(4),{callback:vi,options:Pi}),this.allKeys.add(Ni.split("+").at(-1))):!ci&&!Cn&&(this.callbacks.set(Ni,{callback:vi,options:Pi}),this.allKeys.add(Ni.split("+").at(-1)))}}exec(Tn,ci){if(!this.allKeys.has(ci.key))return;const bi=this.callbacks.get(Vn(this,ze,gh).call(this,ci));if(!bi)return;const{callback:vi,options:{bubbles:Pi=!1,args:Ni=[],checker:Cn=null}}=bi;Cn&&!Cn(Tn,ci)||(vi.bind(Tn,...Ni)(),Pi||(ci.stopPropagation(),ci.preventDefault()))}}ze=new WeakSet,gh=function(Tn){Tn.altKey&&this.buffer.push("alt"),Tn.ctrlKey&&this.buffer.push("ctrl"),Tn.metaKey&&this.buffer.push("meta"),Tn.shiftKey&&this.buffer.push("shift"),this.buffer.push(Tn.key);const ci=this.buffer.join("+");return this.buffer.length=0,ci},t.KeyboardManager=Ie;const gn=class gn{get _colors(){const Tn=new Map([["CanvasText",null],["Canvas",null]]);return(0,_e.getColorValues)(Tn),(0,e.shadow)(this,"_colors",Tn)}convert(Tn){const ci=(0,_e.getRGB)(Tn);if(!window.matchMedia("(forced-colors: active)").matches)return ci;for(const[bi,vi]of this._colors)if(vi.every((Pi,Ni)=>Pi===ci[Ni]))return gn._colorsMapping.get(bi);return ci}getHexCode(Tn){const ci=this._colors.get(Tn);return ci?e.Util.makeHexColor(...ci):Tn}};cr(gn,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let qe=gn;t.ColorManager=qe;const Gi=class Gi{constructor(Tn,ci,bi,vi,Pi,Ni){Zn(this,jn);Zn(this,Me,null);Zn(this,Ue,new Map);Zn(this,en,new Map);Zn(this,pn,null);Zn(this,An,null);Zn(this,xn,new Re);Zn(this,_n,0);Zn(this,En,new Set);Zn(this,hn,null);Zn(this,Sn,null);Zn(this,In,new Set);Zn(this,je,null);Zn(this,Fe,new Te);Zn(this,De,!1);Zn(this,Je,!1);Zn(this,nn,null);Zn(this,an,e.AnnotationEditorType.NONE);Zn(this,on,new Set);Zn(this,yn,null);Zn(this,Fn,this.blur.bind(this));Zn(this,On,this.focus.bind(this));Zn(this,Un,this.copy.bind(this));Zn(this,Wn,this.cut.bind(this));Zn(this,ni,this.paste.bind(this));Zn(this,Dn,this.keydown.bind(this));Zn(this,cn,this.onEditingAction.bind(this));Zn(this,qn,this.onPageChanging.bind(this));Zn(this,fn,this.onScaleChanging.bind(this));Zn(this,vn,this.onRotationChanging.bind(this));Zn(this,kn,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Zn(this,Rn,[0,0]);Zn(this,zn,null);Zn(this,Qn,null);Zn(this,ii,null);ei(this,Qn,Tn),ei(this,ii,ci),ei(this,pn,bi),this._eventBus=vi,this._eventBus._on("editingaction",He(this,cn)),this._eventBus._on("pagechanging",He(this,qn)),this._eventBus._on("scalechanging",He(this,fn)),this._eventBus._on("rotationchanging",He(this,vn)),ei(this,An,Pi.annotationStorage),ei(this,je,Pi.filterFactory),ei(this,yn,Ni),this.viewParameters={realScale:_e.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Tn=Gi.prototype,ci=Pi=>{const{activeElement:Ni}=document;return Ni&&He(Pi,Qn).contains(Ni)&&Pi.hasSomethingToControl()},bi=this.TRANSLATE_SMALL,vi=this.TRANSLATE_BIG;return(0,e.shadow)(this,"_keyboardManager",new Ie([[["ctrl+a","mac+meta+a"],Tn.selectAll],[["ctrl+z","mac+meta+z"],Tn.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Tn.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Tn.delete],[["Escape","mac+Escape"],Tn.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Tn.translateSelectedEditors,{args:[-bi,0],checker:ci}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Tn.translateSelectedEditors,{args:[-vi,0],checker:ci}],[["ArrowRight","mac+ArrowRight"],Tn.translateSelectedEditors,{args:[bi,0],checker:ci}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Tn.translateSelectedEditors,{args:[vi,0],checker:ci}],[["ArrowUp","mac+ArrowUp"],Tn.translateSelectedEditors,{args:[0,-bi],checker:ci}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Tn.translateSelectedEditors,{args:[0,-vi],checker:ci}],[["ArrowDown","mac+ArrowDown"],Tn.translateSelectedEditors,{args:[0,bi],checker:ci}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Tn.translateSelectedEditors,{args:[0,vi],checker:ci}]]))}destroy(){Vn(this,jn,Zo).call(this),Vn(this,jn,cc).call(this),this._eventBus._off("editingaction",He(this,cn)),this._eventBus._off("pagechanging",He(this,qn)),this._eventBus._off("scalechanging",He(this,fn)),this._eventBus._off("rotationchanging",He(this,vn));for(const Tn of He(this,en).values())Tn.destroy();He(this,en).clear(),He(this,Ue).clear(),He(this,In).clear(),ei(this,Me,null),He(this,on).clear(),He(this,xn).destroy(),He(this,pn).destroy()}get hcmFilter(){return(0,e.shadow)(this,"hcmFilter",He(this,yn)?He(this,je).addHCMFilter(He(this,yn).foreground,He(this,yn).background):"none")}get direction(){return(0,e.shadow)(this,"direction",getComputedStyle(He(this,Qn)).direction)}editAltText(Tn){var ci;(ci=He(this,pn))==null||ci.editAltText(this,Tn)}onPageChanging({pageNumber:Tn}){ei(this,_n,Tn-1)}focusMainContainer(){He(this,Qn).focus()}findParent(Tn,ci){for(const bi of He(this,en).values()){const{x:vi,y:Pi,width:Ni,height:Cn}=bi.div.getBoundingClientRect();if(Tn>=vi&&Tn<=vi+Ni&&ci>=Pi&&ci<=Pi+Cn)return bi}return null}disableUserSelect(Tn=!1){He(this,ii).classList.toggle("noUserSelect",Tn)}addShouldRescale(Tn){He(this,In).add(Tn)}removeShouldRescale(Tn){He(this,In).delete(Tn)}onScaleChanging({scale:Tn}){this.commitOrRemove(),this.viewParameters.realScale=Tn*_e.PixelsPerInch.PDF_TO_CSS_UNITS;for(const ci of He(this,In))ci.onScaleChanging()}onRotationChanging({pagesRotation:Tn}){this.commitOrRemove(),this.viewParameters.rotation=Tn}addToAnnotationStorage(Tn){!Tn.isEmpty()&&He(this,An)&&!He(this,An).has(Tn.id)&&He(this,An).setValue(Tn.id,Tn)}blur(){if(!this.hasSelection)return;const{activeElement:Tn}=document;for(const ci of He(this,on))if(ci.div.contains(Tn)){ei(this,nn,[ci,Tn]),ci._focusEventsAllowed=!1;break}}focus(){if(!He(this,nn))return;const[Tn,ci]=He(this,nn);ei(this,nn,null),ci.addEventListener("focusin",()=>{Tn._focusEventsAllowed=!0},{once:!0}),ci.focus()}addEditListeners(){Vn(this,jn,hc).call(this),Vn(this,jn,uc).call(this)}removeEditListeners(){Vn(this,jn,Zo).call(this),Vn(this,jn,dc).call(this)}copy(Tn){var bi;if(Tn.preventDefault(),(bi=He(this,Me))==null||bi.commitOrRemove(),!this.hasSelection)return;const ci=[];for(const vi of He(this,on)){const Pi=vi.serialize(!0);Pi&&ci.push(Pi)}ci.length!==0&&Tn.clipboardData.setData("application/pdfjs",JSON.stringify(ci))}cut(Tn){this.copy(Tn),this.delete()}paste(Tn){Tn.preventDefault();const{clipboardData:ci}=Tn;for(const Pi of ci.items)for(const Ni of He(this,Sn))if(Ni.isHandlingMimeForPasting(Pi.type)){Ni.paste(Pi,this.currentLayer);return}let bi=ci.getData("application/pdfjs");if(!bi)return;try{bi=JSON.parse(bi)}catch(Pi){(0,e.warn)(`paste: "${Pi.message}".`);return}if(!Array.isArray(bi))return;this.unselectAll();const vi=this.currentLayer;try{const Pi=[];for(const Ln of bi){const Bn=vi.deserialize(Ln);if(!Bn)return;Pi.push(Bn)}const Ni=()=>{for(const Ln of Pi)Vn(this,jn,fc).call(this,Ln);Vn(this,jn,pc).call(this,Pi)},Cn=()=>{for(const Ln of Pi)Ln.remove()};this.addCommands({cmd:Ni,undo:Cn,mustExec:!0})}catch(Pi){(0,e.warn)(`paste: "${Pi.message}".`)}}keydown(Tn){var ci;(ci=this.getActive())!=null&&ci.shouldGetKeyboardEvents()||Gi._keyboardManager.exec(this,Tn)}onEditingAction(Tn){["undo","redo","delete","selectAll"].includes(Tn.name)&&this[Tn.name]()}setEditingState(Tn){Tn?(Vn(this,jn,mh).call(this),Vn(this,jn,hc).call(this),Vn(this,jn,uc).call(this),Vn(this,jn,Qr).call(this,{isEditing:He(this,an)!==e.AnnotationEditorType.NONE,isEmpty:Vn(this,jn,Qa).call(this),hasSomethingToUndo:He(this,xn).hasSomethingToUndo(),hasSomethingToRedo:He(this,xn).hasSomethingToRedo(),hasSelectedEditor:!1})):(Vn(this,jn,cc).call(this),Vn(this,jn,Zo).call(this),Vn(this,jn,dc).call(this),Vn(this,jn,Qr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Tn){if(!He(this,Sn)){ei(this,Sn,Tn);for(const ci of He(this,Sn))Vn(this,jn,Za).call(this,ci.defaultPropertiesToUpdate)}}getId(){return He(this,Fe).getId()}get currentLayer(){return He(this,en).get(He(this,_n))}getLayer(Tn){return He(this,en).get(Tn)}get currentPageIndex(){return He(this,_n)}addLayer(Tn){He(this,en).set(Tn.pageIndex,Tn),He(this,De)?Tn.enable():Tn.disable()}removeLayer(Tn){He(this,en).delete(Tn.pageIndex)}updateMode(Tn,ci=null){if(He(this,an)!==Tn){if(ei(this,an,Tn),Tn===e.AnnotationEditorType.NONE){this.setEditingState(!1),Vn(this,jn,vh).call(this);return}this.setEditingState(!0),Vn(this,jn,bh).call(this),this.unselectAll();for(const bi of He(this,en).values())bi.updateMode(Tn);if(ci){for(const bi of He(this,Ue).values())if(bi.annotationElementId===ci){this.setSelected(bi),bi.enterInEditMode();break}}}}updateToolbar(Tn){Tn!==He(this,an)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Tn})}updateParams(Tn,ci){if(He(this,Sn)){if(Tn===e.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Tn);return}for(const bi of He(this,on))bi.updateParams(Tn,ci);for(const bi of He(this,Sn))bi.updateDefaultParams(Tn,ci)}}enableWaiting(Tn=!1){if(He(this,Je)!==Tn){ei(this,Je,Tn);for(const ci of He(this,en).values())Tn?ci.disableClick():ci.enableClick(),ci.div.classList.toggle("waiting",Tn)}}getEditors(Tn){const ci=[];for(const bi of He(this,Ue).values())bi.pageIndex===Tn&&ci.push(bi);return ci}getEditor(Tn){return He(this,Ue).get(Tn)}addEditor(Tn){He(this,Ue).set(Tn.id,Tn)}removeEditor(Tn){var ci;He(this,Ue).delete(Tn.id),this.unselect(Tn),(!Tn.annotationElementId||!He(this,En).has(Tn.annotationElementId))&&((ci=He(this,An))==null||ci.remove(Tn.id))}addDeletedAnnotationElement(Tn){He(this,En).add(Tn.annotationElementId),Tn.deleted=!0}isDeletedAnnotationElement(Tn){return He(this,En).has(Tn)}removeDeletedAnnotationElement(Tn){He(this,En).delete(Tn.annotationElementId),Tn.deleted=!1}setActiveEditor(Tn){He(this,Me)!==Tn&&(ei(this,Me,Tn),Tn&&Vn(this,jn,Za).call(this,Tn.propertiesToUpdate))}toggleSelected(Tn){if(He(this,on).has(Tn)){He(this,on).delete(Tn),Tn.unselect(),Vn(this,jn,Qr).call(this,{hasSelectedEditor:this.hasSelection});return}He(this,on).add(Tn),Tn.select(),Vn(this,jn,Za).call(this,Tn.propertiesToUpdate),Vn(this,jn,Qr).call(this,{hasSelectedEditor:!0})}setSelected(Tn){for(const ci of He(this,on))ci!==Tn&&ci.unselect();He(this,on).clear(),He(this,on).add(Tn),Tn.select(),Vn(this,jn,Za).call(this,Tn.propertiesToUpdate),Vn(this,jn,Qr).call(this,{hasSelectedEditor:!0})}isSelected(Tn){return He(this,on).has(Tn)}unselect(Tn){Tn.unselect(),He(this,on).delete(Tn),Vn(this,jn,Qr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return He(this,on).size!==0}undo(){He(this,xn).undo(),Vn(this,jn,Qr).call(this,{hasSomethingToUndo:He(this,xn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Vn(this,jn,Qa).call(this)})}redo(){He(this,xn).redo(),Vn(this,jn,Qr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:He(this,xn).hasSomethingToRedo(),isEmpty:Vn(this,jn,Qa).call(this)})}addCommands(Tn){He(this,xn).add(Tn),Vn(this,jn,Qr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Vn(this,jn,Qa).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Tn=[...He(this,on)],ci=()=>{for(const vi of Tn)vi.remove()},bi=()=>{for(const vi of Tn)Vn(this,jn,fc).call(this,vi)};this.addCommands({cmd:ci,undo:bi,mustExec:!0})}commitOrRemove(){var Tn;(Tn=He(this,Me))==null||Tn.commitOrRemove()}hasSomethingToControl(){return He(this,Me)||this.hasSelection}selectAll(){for(const Tn of He(this,on))Tn.commit();Vn(this,jn,pc).call(this,He(this,Ue).values())}unselectAll(){if(He(this,Me)){He(this,Me).commitOrRemove();return}if(this.hasSelection){for(const Tn of He(this,on))Tn.unselect();He(this,on).clear(),Vn(this,jn,Qr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Tn,ci,bi=!1){if(bi||this.commitOrRemove(),!this.hasSelection)return;He(this,Rn)[0]+=Tn,He(this,Rn)[1]+=ci;const[vi,Pi]=He(this,Rn),Ni=[...He(this,on)],Cn=1e3;He(this,zn)&&clearTimeout(He(this,zn)),ei(this,zn,setTimeout(()=>{ei(this,zn,null),He(this,Rn)[0]=He(this,Rn)[1]=0,this.addCommands({cmd:()=>{for(const Ln of Ni)He(this,Ue).has(Ln.id)&&Ln.translateInPage(vi,Pi)},undo:()=>{for(const Ln of Ni)He(this,Ue).has(Ln.id)&&Ln.translateInPage(-vi,-Pi)},mustExec:!1})},Cn));for(const Ln of Ni)Ln.translateInPage(Tn,ci)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ei(this,hn,new Map);for(const Tn of He(this,on))He(this,hn).set(Tn,{savedX:Tn.x,savedY:Tn.y,savedPageIndex:Tn.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!He(this,hn))return!1;this.disableUserSelect(!1);const Tn=He(this,hn);ei(this,hn,null);let ci=!1;for(const[{x:vi,y:Pi,pageIndex:Ni},Cn]of Tn)Cn.newX=vi,Cn.newY=Pi,Cn.newPageIndex=Ni,ci||(ci=vi!==Cn.savedX||Pi!==Cn.savedY||Ni!==Cn.savedPageIndex);if(!ci)return!1;const bi=(vi,Pi,Ni,Cn)=>{if(He(this,Ue).has(vi.id)){const Ln=He(this,en).get(Cn);Ln?vi._setParentAndPosition(Ln,Pi,Ni):(vi.pageIndex=Cn,vi.x=Pi,vi.y=Ni)}};return this.addCommands({cmd:()=>{for(const[vi,{newX:Pi,newY:Ni,newPageIndex:Cn}]of Tn)bi(vi,Pi,Ni,Cn)},undo:()=>{for(const[vi,{savedX:Pi,savedY:Ni,savedPageIndex:Cn}]of Tn)bi(vi,Pi,Ni,Cn)},mustExec:!0}),!0}dragSelectedEditors(Tn,ci){if(He(this,hn))for(const bi of He(this,hn).keys())bi.drag(Tn,ci)}rebuild(Tn){if(Tn.parent===null){const ci=this.getLayer(Tn.pageIndex);ci?(ci.changeParent(Tn),ci.addOrRebuild(Tn)):(this.addEditor(Tn),this.addToAnnotationStorage(Tn),Tn.rebuild())}else Tn.parent.addOrRebuild(Tn)}isActive(Tn){return He(this,Me)===Tn}getActive(){return He(this,Me)}getMode(){return He(this,an)}get imageManager(){return(0,e.shadow)(this,"imageManager",new Ee)}};Me=new WeakMap,Ue=new WeakMap,en=new WeakMap,pn=new WeakMap,An=new WeakMap,xn=new WeakMap,_n=new WeakMap,En=new WeakMap,hn=new WeakMap,Sn=new WeakMap,In=new WeakMap,je=new WeakMap,Fe=new WeakMap,De=new WeakMap,Je=new WeakMap,nn=new WeakMap,an=new WeakMap,on=new WeakMap,yn=new WeakMap,Fn=new WeakMap,On=new WeakMap,Un=new WeakMap,Wn=new WeakMap,ni=new WeakMap,Dn=new WeakMap,cn=new WeakMap,qn=new WeakMap,fn=new WeakMap,vn=new WeakMap,kn=new WeakMap,Rn=new WeakMap,zn=new WeakMap,Qn=new WeakMap,ii=new WeakMap,jn=new WeakSet,mh=function(){window.addEventListener("focus",He(this,On)),window.addEventListener("blur",He(this,Fn))},cc=function(){window.removeEventListener("focus",He(this,On)),window.removeEventListener("blur",He(this,Fn))},hc=function(){window.addEventListener("keydown",He(this,Dn),{capture:!0})},Zo=function(){window.removeEventListener("keydown",He(this,Dn),{capture:!0})},uc=function(){document.addEventListener("copy",He(this,Un)),document.addEventListener("cut",He(this,Wn)),document.addEventListener("paste",He(this,ni))},dc=function(){document.removeEventListener("copy",He(this,Un)),document.removeEventListener("cut",He(this,Wn)),document.removeEventListener("paste",He(this,ni))},Qr=function(Tn){Object.entries(Tn).some(([bi,vi])=>He(this,kn)[bi]!==vi)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(He(this,kn),Tn)})},Za=function(Tn){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Tn})},bh=function(){if(!He(this,De)){ei(this,De,!0);for(const Tn of He(this,en).values())Tn.enable()}},vh=function(){if(this.unselectAll(),He(this,De)){ei(this,De,!1);for(const Tn of He(this,en).values())Tn.disable()}},fc=function(Tn){const ci=He(this,en).get(Tn.pageIndex);ci?ci.addOrRebuild(Tn):this.addEditor(Tn)},Qa=function(){if(He(this,Ue).size===0)return!0;if(He(this,Ue).size===1)for(const Tn of He(this,Ue).values())return Tn.isEmpty();return!1},pc=function(Tn){He(this,on).clear();for(const ci of Tn)ci.isEmpty()||(He(this,on).add(ci),ci.select());Vn(this,jn,Qr).call(this,{hasSelectedEditor:!0})},cr(Gi,"TRANSLATE_SMALL",1),cr(Gi,"TRANSLATE_BIG",10);let Ge=Gi;t.AnnotationEditorUIManager=Ge},(Ae,t,St)=>{var _n,En,hn,Sn,In,je,Fe,De,Je,nn,an,on,ma,ba,gc,Qo,tl,to,eo;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=Ve,t.getColorValues=Ue,t.getCurrentTransform=en,t.getCurrentTransformInverse=pn,t.getFilenameFromUrl=Be,t.getPdfFilenameFromUrl=Ye,t.getRGB=Me,t.getXfaPageViewport=gn,t.isDataScheme=We,t.isPdfFile=Ke,t.isValidFetchUrl=rn,t.loadScript=tn,t.noContextMenu=$e,t.setLayerDimensions=An;var e=St(7),_e=St(1);const Se="http://www.w3.org/2000/svg",xn=class xn{};cr(xn,"CSS",96),cr(xn,"PDF",72),cr(xn,"PDF_TO_CSS_UNITS",xn.CSS/xn.PDF);let Pe=xn;t.PixelsPerInch=Pe;class Te extends e.BaseFilterFactory{constructor({docId:fn,ownerDocument:vn=globalThis.document}={}){super();Zn(this,on);Zn(this,_n);Zn(this,En);Zn(this,hn);Zn(this,Sn);Zn(this,In);Zn(this,je);Zn(this,Fe);Zn(this,De);Zn(this,Je);Zn(this,nn);Zn(this,an,0);ei(this,hn,fn),ei(this,Sn,vn)}addFilter(fn){if(!fn)return"none";let vn=He(this,on,ma).get(fn);if(vn)return vn;let kn,Rn,zn,Qn;if(fn.length===1){const di=fn[0],Ii=new Array(256);for(let Si=0;Si<256;Si++)Ii[Si]=di[Si]/255;Qn=kn=Rn=zn=Ii.join(",")}else{const[di,Ii,Si]=fn,Ri=new Array(256),hi=new Array(256),Fi=new Array(256);for(let Oi=0;Oi<256;Oi++)Ri[Oi]=di[Oi]/255,hi[Oi]=Ii[Oi]/255,Fi[Oi]=Si[Oi]/255;kn=Ri.join(","),Rn=hi.join(","),zn=Fi.join(","),Qn=`${kn}${Rn}${zn}`}if(vn=He(this,on,ma).get(Qn),vn)return He(this,on,ma).set(fn,vn),vn;const ii=`g_${He(this,hn)}_transfer_map_${$a(this,an)._++}`,jn=`url(#${ii})`;He(this,on,ma).set(fn,jn),He(this,on,ma).set(Qn,jn);const fi=Vn(this,on,Qo).call(this,ii);return Vn(this,on,to).call(this,kn,Rn,zn,fi),jn}addHCMFilter(fn,vn){var Ii;const kn=`${fn}-${vn}`;if(He(this,je)===kn)return He(this,Fe);if(ei(this,je,kn),ei(this,Fe,"none"),(Ii=He(this,In))==null||Ii.remove(),!fn||!vn)return He(this,Fe);const Rn=Vn(this,on,eo).call(this,fn);fn=_e.Util.makeHexColor(...Rn);const zn=Vn(this,on,eo).call(this,vn);if(vn=_e.Util.makeHexColor(...zn),He(this,on,ba).style.color="",fn==="#000000"&&vn==="#ffffff"||fn===vn)return He(this,Fe);const Qn=new Array(256);for(let Si=0;Si<=255;Si++){const Ri=Si/255;Qn[Si]=Ri<=.03928?Ri/12.92:((Ri+.055)/1.055)**2.4}const ii=Qn.join(","),jn=`g_${He(this,hn)}_hcm_filter`,fi=ei(this,De,Vn(this,on,Qo).call(this,jn));Vn(this,on,to).call(this,ii,ii,ii,fi),Vn(this,on,gc).call(this,fi);const di=(Si,Ri)=>{const hi=Rn[Si]/255,Fi=zn[Si]/255,Oi=new Array(Ri+1);for(let Yi=0;Yi<=Ri;Yi++)Oi[Yi]=hi+Yi/Ri*(Fi-hi);return Oi.join(",")};return Vn(this,on,to).call(this,di(0,5),di(1,5),di(2,5),fi),ei(this,Fe,`url(#${jn})`),He(this,Fe)}addHighlightHCMFilter(fn,vn,kn,Rn){var Fi;const zn=`${fn}-${vn}-${kn}-${Rn}`;if(He(this,Je)===zn)return He(this,nn);if(ei(this,Je,zn),ei(this,nn,"none"),(Fi=He(this,De))==null||Fi.remove(),!fn||!vn)return He(this,nn);const[Qn,ii]=[fn,vn].map(Vn(this,on,eo).bind(this));let jn=Math.round(.2126*Qn[0]+.7152*Qn[1]+.0722*Qn[2]),fi=Math.round(.2126*ii[0]+.7152*ii[1]+.0722*ii[2]),[di,Ii]=[kn,Rn].map(Vn(this,on,eo).bind(this));fi<jn&&([jn,fi,di,Ii]=[fi,jn,Ii,di]),He(this,on,ba).style.color="";const Si=(Oi,Yi,ai)=>{const Xn=new Array(256),$n=(fi-jn)/ai,wi=Oi/255,Gi=(Yi-Oi)/(255*ai);let Bi=0;for(let Tn=0;Tn<=ai;Tn++){const ci=Math.round(jn+Tn*$n),bi=wi+Tn*Gi;for(let vi=Bi;vi<=ci;vi++)Xn[vi]=bi;Bi=ci+1}for(let Tn=Bi;Tn<256;Tn++)Xn[Tn]=Xn[Bi-1];return Xn.join(",")},Ri=`g_${He(this,hn)}_hcm_highlight_filter`,hi=ei(this,De,Vn(this,on,Qo).call(this,Ri));return Vn(this,on,gc).call(this,hi),Vn(this,on,to).call(this,Si(di[0],Ii[0],5),Si(di[1],Ii[1],5),Si(di[2],Ii[2],5),hi),ei(this,nn,`url(#${Ri})`),He(this,nn)}destroy(fn=!1){fn&&(He(this,Fe)||He(this,nn))||(He(this,En)&&(He(this,En).parentNode.parentNode.remove(),ei(this,En,null)),He(this,_n)&&(He(this,_n).clear(),ei(this,_n,null)),ei(this,an,0))}}_n=new WeakMap,En=new WeakMap,hn=new WeakMap,Sn=new WeakMap,In=new WeakMap,je=new WeakMap,Fe=new WeakMap,De=new WeakMap,Je=new WeakMap,nn=new WeakMap,an=new WeakMap,on=new WeakSet,ma=function(){return He(this,_n)||ei(this,_n,new Map)},ba=function(){if(!He(this,En)){const fn=He(this,Sn).createElement("div"),{style:vn}=fn;vn.visibility="hidden",vn.contain="strict",vn.width=vn.height=0,vn.position="absolute",vn.top=vn.left=0,vn.zIndex=-1;const kn=He(this,Sn).createElementNS(Se,"svg");kn.setAttribute("width",0),kn.setAttribute("height",0),ei(this,En,He(this,Sn).createElementNS(Se,"defs")),fn.append(kn),kn.append(He(this,En)),He(this,Sn).body.append(fn)}return He(this,En)},gc=function(fn){const vn=He(this,Sn).createElementNS(Se,"feColorMatrix");vn.setAttribute("type","matrix"),vn.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),fn.append(vn)},Qo=function(fn){const vn=He(this,Sn).createElementNS(Se,"filter");return vn.setAttribute("color-interpolation-filters","sRGB"),vn.setAttribute("id",fn),He(this,on,ba).append(vn),vn},tl=function(fn,vn,kn){const Rn=He(this,Sn).createElementNS(Se,vn);Rn.setAttribute("type","discrete"),Rn.setAttribute("tableValues",kn),fn.append(Rn)},to=function(fn,vn,kn,Rn){const zn=He(this,Sn).createElementNS(Se,"feComponentTransfer");Rn.append(zn),Vn(this,on,tl).call(this,zn,"feFuncR",fn),Vn(this,on,tl).call(this,zn,"feFuncG",vn),Vn(this,on,tl).call(this,zn,"feFuncB",kn)},eo=function(fn){return He(this,on,ba).style.color=fn,Me(getComputedStyle(He(this,on,ba)).getPropertyValue("color"))},t.DOMFilterFactory=Te;class Ee extends e.BaseCanvasFactory{constructor({ownerDocument:qn=globalThis.document}={}){super(),this._document=qn}_createCanvas(qn,fn){const vn=this._document.createElement("canvas");return vn.width=qn,vn.height=fn,vn}}t.DOMCanvasFactory=Ee;async function Re(cn,qn=!1){if(rn(cn,document.baseURI)){const fn=await fetch(cn);if(!fn.ok)throw new Error(fn.statusText);return qn?new Uint8Array(await fn.arrayBuffer()):(0,_e.stringToBytes)(await fn.text())}return new Promise((fn,vn)=>{const kn=new XMLHttpRequest;kn.open("GET",cn,!0),qn&&(kn.responseType="arraybuffer"),kn.onreadystatechange=()=>{if(kn.readyState===XMLHttpRequest.DONE){if(kn.status===200||kn.status===0){let Rn;if(qn&&kn.response?Rn=new Uint8Array(kn.response):!qn&&kn.responseText&&(Rn=(0,_e.stringToBytes)(kn.responseText)),Rn){fn(Rn);return}}vn(new Error(kn.statusText))}},kn.send(null)})}class Ie extends e.BaseCMapReaderFactory{_fetchData(qn,fn){return Re(qn,this.isCompressed).then(vn=>({cMapData:vn,compressionType:fn}))}}t.DOMCMapReaderFactory=Ie;class qe extends e.BaseStandardFontDataFactory{_fetchData(qn){return Re(qn,!0)}}t.DOMStandardFontDataFactory=qe;class Ge extends e.BaseSVGFactory{_createSVG(qn){return document.createElementNS(Se,qn)}}t.DOMSVGFactory=Ge;class Ce{constructor({viewBox:qn,scale:fn,rotation:vn,offsetX:kn=0,offsetY:Rn=0,dontFlip:zn=!1}){this.viewBox=qn,this.scale=fn,this.rotation=vn,this.offsetX=kn,this.offsetY=Rn;const Qn=(qn[2]+qn[0])/2,ii=(qn[3]+qn[1])/2;let jn,fi,di,Ii;switch(vn%=360,vn<0&&(vn+=360),vn){case 180:jn=-1,fi=0,di=0,Ii=1;break;case 90:jn=0,fi=1,di=1,Ii=0;break;case 270:jn=0,fi=-1,di=-1,Ii=0;break;case 0:jn=1,fi=0,di=0,Ii=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}zn&&(di=-di,Ii=-Ii);let Si,Ri,hi,Fi;jn===0?(Si=Math.abs(ii-qn[1])*fn+kn,Ri=Math.abs(Qn-qn[0])*fn+Rn,hi=(qn[3]-qn[1])*fn,Fi=(qn[2]-qn[0])*fn):(Si=Math.abs(Qn-qn[0])*fn+kn,Ri=Math.abs(ii-qn[1])*fn+Rn,hi=(qn[2]-qn[0])*fn,Fi=(qn[3]-qn[1])*fn),this.transform=[jn*fn,fi*fn,di*fn,Ii*fn,Si-jn*fn*Qn-di*fn*ii,Ri-fi*fn*Qn-Ii*fn*ii],this.width=hi,this.height=Fi}get rawDims(){const{viewBox:qn}=this;return(0,_e.shadow)(this,"rawDims",{pageWidth:qn[2]-qn[0],pageHeight:qn[3]-qn[1],pageX:qn[0],pageY:qn[1]})}clone({scale:qn=this.scale,rotation:fn=this.rotation,offsetX:vn=this.offsetX,offsetY:kn=this.offsetY,dontFlip:Rn=!1}={}){return new Ce({viewBox:this.viewBox.slice(),scale:qn,rotation:fn,offsetX:vn,offsetY:kn,dontFlip:Rn})}convertToViewportPoint(qn,fn){return _e.Util.applyTransform([qn,fn],this.transform)}convertToViewportRectangle(qn){const fn=_e.Util.applyTransform([qn[0],qn[1]],this.transform),vn=_e.Util.applyTransform([qn[2],qn[3]],this.transform);return[fn[0],fn[1],vn[0],vn[1]]}convertToPdfPoint(qn,fn){return _e.Util.applyInverseTransform([qn,fn],this.transform)}}t.PageViewport=Ce;class Xe extends _e.BaseException{constructor(qn,fn=0){super(qn,"RenderingCancelledException"),this.extraDelay=fn}}t.RenderingCancelledException=Xe;function We(cn){const qn=cn.length;let fn=0;for(;fn<qn&&cn[fn].trim()==="";)fn++;return cn.substring(fn,fn+5).toLowerCase()==="data:"}function Ke(cn){return typeof cn=="string"&&/\.pdf$/i.test(cn)}function Be(cn,qn=!1){return qn||([cn]=cn.split(/[#?]/,1)),cn.substring(cn.lastIndexOf("/")+1)}function Ye(cn,qn="document.pdf"){if(typeof cn!="string")return qn;if(We(cn))return(0,_e.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),qn;const fn=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,vn=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,kn=fn.exec(cn);let Rn=vn.exec(kn[1])||vn.exec(kn[2])||vn.exec(kn[3]);if(Rn&&(Rn=Rn[0],Rn.includes("%")))try{Rn=vn.exec(decodeURIComponent(Rn))[0]}catch{}return Rn||qn}class sn{constructor(){cr(this,"started",Object.create(null));cr(this,"times",[])}time(qn){qn in this.started&&(0,_e.warn)(`Timer is already running for ${qn}`),this.started[qn]=Date.now()}timeEnd(qn){qn in this.started||(0,_e.warn)(`Timer has not been started for ${qn}`),this.times.push({name:qn,start:this.started[qn],end:Date.now()}),delete this.started[qn]}toString(){const qn=[];let fn=0;for(const{name:vn}of this.times)fn=Math.max(vn.length,fn);for(const{name:vn,start:kn,end:Rn}of this.times)qn.push(`${vn.padEnd(fn)} ${Rn-kn}ms
`);return qn.join("")}}t.StatTimer=sn;function rn(cn,qn){try{const{protocol:fn}=qn?new URL(cn,qn):new URL(cn);return fn==="http:"||fn==="https:"}catch{return!1}}function $e(cn){cn.preventDefault()}function tn(cn,qn=!1){return new Promise((fn,vn)=>{const kn=document.createElement("script");kn.src=cn,kn.onload=function(Rn){qn&&kn.remove(),fn(Rn)},kn.onerror=function(){vn(new Error(`Cannot load script at: ${kn.src}`))},(document.head||document.documentElement).append(kn)})}function Ve(cn){console.log("Deprecated API usage: "+cn)}let ze;class Qe{static toDateObject(qn){if(!qn||typeof qn!="string")return null;ze||(ze=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const fn=ze.exec(qn);if(!fn)return null;const vn=parseInt(fn[1],10);let kn=parseInt(fn[2],10);kn=kn>=1&&kn<=12?kn-1:0;let Rn=parseInt(fn[3],10);Rn=Rn>=1&&Rn<=31?Rn:1;let zn=parseInt(fn[4],10);zn=zn>=0&&zn<=23?zn:0;let Qn=parseInt(fn[5],10);Qn=Qn>=0&&Qn<=59?Qn:0;let ii=parseInt(fn[6],10);ii=ii>=0&&ii<=59?ii:0;const jn=fn[7]||"Z";let fi=parseInt(fn[8],10);fi=fi>=0&&fi<=23?fi:0;let di=parseInt(fn[9],10)||0;return di=di>=0&&di<=59?di:0,jn==="-"?(zn+=fi,Qn+=di):jn==="+"&&(zn-=fi,Qn-=di),new Date(Date.UTC(vn,kn,Rn,zn,Qn,ii))}}t.PDFDateString=Qe;function gn(cn,{scale:qn=1,rotation:fn=0}){const{width:vn,height:kn}=cn.attributes.style,Rn=[0,0,parseInt(vn),parseInt(kn)];return new Ce({viewBox:Rn,scale:qn,rotation:fn})}function Me(cn){if(cn.startsWith("#")){const qn=parseInt(cn.slice(1),16);return[(qn&16711680)>>16,(qn&65280)>>8,qn&255]}return cn.startsWith("rgb(")?cn.slice(4,-1).split(",").map(qn=>parseInt(qn)):cn.startsWith("rgba(")?cn.slice(5,-1).split(",").map(qn=>parseInt(qn)).slice(0,3):((0,_e.warn)(`Not a valid color format: "${cn}"`),[0,0,0])}function Ue(cn){const qn=document.createElement("span");qn.style.visibility="hidden",document.body.append(qn);for(const fn of cn.keys()){qn.style.color=fn;const vn=window.getComputedStyle(qn).color;cn.set(fn,Me(vn))}qn.remove()}function en(cn){const{a:qn,b:fn,c:vn,d:kn,e:Rn,f:zn}=cn.getTransform();return[qn,fn,vn,kn,Rn,zn]}function pn(cn){const{a:qn,b:fn,c:vn,d:kn,e:Rn,f:zn}=cn.getTransform().invertSelf();return[qn,fn,vn,kn,Rn,zn]}function An(cn,qn,fn=!1,vn=!0){if(qn instanceof Ce){const{pageWidth:kn,pageHeight:Rn}=qn.rawDims,{style:zn}=cn,Qn=_e.FeatureTest.isCSSRoundSupported,ii=`var(--scale-factor) * ${kn}px`,jn=`var(--scale-factor) * ${Rn}px`,fi=Qn?`round(${ii}, 1px)`:`calc(${ii})`,di=Qn?`round(${jn}, 1px)`:`calc(${jn})`;!fn||qn.rotation%180===0?(zn.width=fi,zn.height=di):(zn.width=di,zn.height=fi)}vn&&cn.setAttribute("data-main-rotation",qn.rotation)}},(Ae,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var e=St(1);class _e{constructor(){this.constructor===_e&&(0,e.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(Ie){return"none"}addHCMFilter(Ie,qe){return"none"}addHighlightHCMFilter(Ie,qe,Ge,Ce){return"none"}destroy(Ie=!1){}}t.BaseFilterFactory=_e;class Se{constructor(){this.constructor===Se&&(0,e.unreachable)("Cannot initialize BaseCanvasFactory.")}create(Ie,qe){if(Ie<=0||qe<=0)throw new Error("Invalid canvas size");const Ge=this._createCanvas(Ie,qe);return{canvas:Ge,context:Ge.getContext("2d")}}reset(Ie,qe,Ge){if(!Ie.canvas)throw new Error("Canvas is not specified");if(qe<=0||Ge<=0)throw new Error("Invalid canvas size");Ie.canvas.width=qe,Ie.canvas.height=Ge}destroy(Ie){if(!Ie.canvas)throw new Error("Canvas is not specified");Ie.canvas.width=0,Ie.canvas.height=0,Ie.canvas=null,Ie.context=null}_createCanvas(Ie,qe){(0,e.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=Se;class Pe{constructor({baseUrl:Ie=null,isCompressed:qe=!0}){this.constructor===Pe&&(0,e.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=Ie,this.isCompressed=qe}async fetch({name:Ie}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!Ie)throw new Error("CMap name must be specified.");const qe=this.baseUrl+Ie+(this.isCompressed?".bcmap":""),Ge=this.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE;return this._fetchData(qe,Ge).catch(Ce=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${qe}`)})}_fetchData(Ie,qe){(0,e.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=Pe;class Te{constructor({baseUrl:Ie=null}){this.constructor===Te&&(0,e.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=Ie}async fetch({filename:Ie}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!Ie)throw new Error("Font filename must be specified.");const qe=`${this.baseUrl}${Ie}`;return this._fetchData(qe).catch(Ge=>{throw new Error(`Unable to load font data at: ${qe}`)})}_fetchData(Ie){(0,e.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=Te;class Ee{constructor(){this.constructor===Ee&&(0,e.unreachable)("Cannot initialize BaseSVGFactory.")}create(Ie,qe,Ge=!1){if(Ie<=0||qe<=0)throw new Error("Invalid SVG dimensions");const Ce=this._createSVG("svg:svg");return Ce.setAttribute("version","1.1"),Ge||(Ce.setAttribute("width",`${Ie}px`),Ce.setAttribute("height",`${qe}px`)),Ce.setAttribute("preserveAspectRatio","none"),Ce.setAttribute("viewBox",`0 0 ${Ie} ${qe}`),Ce}createElement(Ie){if(typeof Ie!="string")throw new Error("Invalid SVG element type");return this._createSVG(Ie)}_createSVG(Ie){(0,e.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=Ee},(Ae,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var e=St(1);const _e=3285377520,Se=4294901760,Pe=65535;class Te{constructor(Re){this.h1=Re?Re&4294967295:_e,this.h2=Re?Re&4294967295:_e}update(Re){let Ie,qe;if(typeof Re=="string"){Ie=new Uint8Array(Re.length*2),qe=0;for(let Ve=0,ze=Re.length;Ve<ze;Ve++){const Qe=Re.charCodeAt(Ve);Qe<=255?Ie[qe++]=Qe:(Ie[qe++]=Qe>>>8,Ie[qe++]=Qe&255)}}else if((0,e.isArrayBuffer)(Re))Ie=Re.slice(),qe=Ie.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const Ge=qe>>2,Ce=qe-Ge*4,Xe=new Uint32Array(Ie.buffer,0,Ge);let We=0,Ke=0,Be=this.h1,Ye=this.h2;const sn=3432918353,rn=461845907,$e=sn&Pe,tn=rn&Pe;for(let Ve=0;Ve<Ge;Ve++)Ve&1?(We=Xe[Ve],We=We*sn&Se|We*$e&Pe,We=We<<15|We>>>17,We=We*rn&Se|We*tn&Pe,Be^=We,Be=Be<<13|Be>>>19,Be=Be*5+3864292196):(Ke=Xe[Ve],Ke=Ke*sn&Se|Ke*$e&Pe,Ke=Ke<<15|Ke>>>17,Ke=Ke*rn&Se|Ke*tn&Pe,Ye^=Ke,Ye=Ye<<13|Ye>>>19,Ye=Ye*5+3864292196);switch(We=0,Ce){case 3:We^=Ie[Ge*4+2]<<16;case 2:We^=Ie[Ge*4+1]<<8;case 1:We^=Ie[Ge*4],We=We*sn&Se|We*$e&Pe,We=We<<15|We>>>17,We=We*rn&Se|We*tn&Pe,Ge&1?Be^=We:Ye^=We}this.h1=Be,this.h2=Ye}hexdigest(){let Re=this.h1,Ie=this.h2;return Re^=Ie>>>1,Re=Re*3981806797&Se|Re*36045&Pe,Ie=Ie*4283543511&Se|((Ie<<16|Re>>>16)*2950163797&Se)>>>16,Re^=Ie>>>1,Re=Re*444984403&Se|Re*60499&Pe,Ie=Ie*3301882366&Se|((Ie<<16|Re>>>16)*3120437893&Se)>>>16,Re^=Ie>>>1,(Re>>>0).toString(16).padStart(8,"0")+(Ie>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=Te},(Ae,t,St)=>{var Pe;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var e=St(1);class _e{constructor({ownerDocument:Ee=globalThis.document,styleElement:Re=null}){Zn(this,Pe,new Set);this._document=Ee,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(Ee){this.nativeFontFaces.add(Ee),this._document.fonts.add(Ee)}removeNativeFontFace(Ee){this.nativeFontFaces.delete(Ee),this._document.fonts.delete(Ee)}insertRule(Ee){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const Re=this.styleElement.sheet;Re.insertRule(Ee,Re.cssRules.length)}clear(){for(const Ee of this.nativeFontFaces)this._document.fonts.delete(Ee);this.nativeFontFaces.clear(),He(this,Pe).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(Ee){if(!(!Ee||He(this,Pe).has(Ee.loadedName))){if((0,e.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:Re,src:Ie,style:qe}=Ee,Ge=new FontFace(Re,Ie,qe);this.addNativeFontFace(Ge);try{await Ge.load(),He(this,Pe).add(Re)}catch{(0,e.warn)(`Cannot load system font: ${Ee.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(Ge)}return}(0,e.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(Ee){if(Ee.attached||Ee.missingFile&&!Ee.systemFontInfo)return;if(Ee.attached=!0,Ee.systemFontInfo){await this.loadSystemFont(Ee.systemFontInfo);return}if(this.isFontLoadingAPISupported){const Ie=Ee.createNativeFontFace();if(Ie){this.addNativeFontFace(Ie);try{await Ie.loaded}catch(qe){throw(0,e.warn)(`Failed to load font '${Ie.family}': '${qe}'.`),Ee.disableFontFace=!0,qe}}return}const Re=Ee.createFontFaceRule();if(Re){if(this.insertRule(Re),this.isSyncFontLoadingSupported)return;await new Promise(Ie=>{const qe=this._queueLoadingCallback(Ie);this._prepareFontLoadEvent(Ee,qe)})}}get isFontLoadingAPISupported(){var Re;const Ee=!!((Re=this._document)!=null&&Re.fonts);return(0,e.shadow)(this,"isFontLoadingAPISupported",Ee)}get isSyncFontLoadingSupported(){let Ee=!1;return(e.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(Ee=!0),(0,e.shadow)(this,"isSyncFontLoadingSupported",Ee)}_queueLoadingCallback(Ee){function Re(){for((0,e.assert)(!qe.done,"completeRequest() cannot be called twice."),qe.done=!0;Ie.length>0&&Ie[0].done;){const Ge=Ie.shift();setTimeout(Ge.callback,0)}}const{loadingRequests:Ie}=this,qe={done:!1,complete:Re,callback:Ee};return Ie.push(qe),qe}get _loadTestFont(){const Ee=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,e.shadow)(this,"_loadTestFont",Ee)}_prepareFontLoadEvent(Ee,Re){function Ie(Me,Ue){return Me.charCodeAt(Ue)<<24|Me.charCodeAt(Ue+1)<<16|Me.charCodeAt(Ue+2)<<8|Me.charCodeAt(Ue+3)&255}function qe(Me,Ue,en,pn){const An=Me.substring(0,Ue),xn=Me.substring(Ue+en);return An+pn+xn}let Ge,Ce;const Xe=this._document.createElement("canvas");Xe.width=1,Xe.height=1;const We=Xe.getContext("2d");let Ke=0;function Be(Me,Ue){if(++Ke>30){(0,e.warn)("Load test font never loaded."),Ue();return}if(We.font="30px "+Me,We.fillText(".",0,20),We.getImageData(0,0,1,1).data[3]>0){Ue();return}setTimeout(Be.bind(null,Me,Ue))}const Ye=`lt${Date.now()}${this.loadTestFontId++}`;let sn=this._loadTestFont;sn=qe(sn,976,Ye.length,Ye);const $e=16,tn=1482184792;let Ve=Ie(sn,$e);for(Ge=0,Ce=Ye.length-3;Ge<Ce;Ge+=4)Ve=Ve-tn+Ie(Ye,Ge)|0;Ge<Ye.length&&(Ve=Ve-tn+Ie(Ye+"XXX",Ge)|0),sn=qe(sn,$e,4,(0,e.string32)(Ve));const ze=`url(data:font/opentype;base64,${btoa(sn)});`,Qe=`@font-face {font-family:"${Ye}";src:${ze}}`;this.insertRule(Qe);const gn=this._document.createElement("div");gn.style.visibility="hidden",gn.style.width=gn.style.height="10px",gn.style.position="absolute",gn.style.top=gn.style.left="0px";for(const Me of[Ee.loadedName,Ye]){const Ue=this._document.createElement("span");Ue.textContent="Hi",Ue.style.fontFamily=Me,gn.append(Ue)}this._document.body.append(gn),Be(Ye,()=>{gn.remove(),Re.complete()})}}Pe=new WeakMap,t.FontLoader=_e;class Se{constructor(Ee,{isEvalSupported:Re=!0,disableFontFace:Ie=!1,ignoreErrors:qe=!1,inspectFont:Ge=null}){this.compiledGlyphs=Object.create(null);for(const Ce in Ee)this[Ce]=Ee[Ce];this.isEvalSupported=Re!==!1,this.disableFontFace=Ie===!0,this.ignoreErrors=qe===!0,this._inspectFont=Ge}createNativeFontFace(){var Re;if(!this.data||this.disableFontFace)return null;let Ee;if(!this.cssFontInfo)Ee=new FontFace(this.loadedName,this.data,{});else{const Ie={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(Ie.style=`oblique ${this.cssFontInfo.italicAngle}deg`),Ee=new FontFace(this.cssFontInfo.fontFamily,this.data,Ie)}return(Re=this._inspectFont)==null||Re.call(this,this),Ee}createFontFaceRule(){var qe;if(!this.data||this.disableFontFace)return null;const Ee=(0,e.bytesToString)(this.data),Re=`url(data:${this.mimetype};base64,${btoa(Ee)});`;let Ie;if(!this.cssFontInfo)Ie=`@font-face {font-family:"${this.loadedName}";src:${Re}}`;else{let Ge=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(Ge+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),Ie=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${Ge}src:${Re}}`}return(qe=this._inspectFont)==null||qe.call(this,this,Re),Ie}getPathGenerator(Ee,Re){if(this.compiledGlyphs[Re]!==void 0)return this.compiledGlyphs[Re];let Ie;try{Ie=Ee.get(this.loadedName+"_path_"+Re)}catch(qe){if(!this.ignoreErrors)throw qe;return(0,e.warn)(`getPathGenerator - ignoring character: "${qe}".`),this.compiledGlyphs[Re]=function(Ge,Ce){}}if(this.isEvalSupported&&e.FeatureTest.isEvalSupported){const qe=[];for(const Ge of Ie){const Ce=Ge.args!==void 0?Ge.args.join(","):"";qe.push("c.",Ge.cmd,"(",Ce,`);
`)}return this.compiledGlyphs[Re]=new Function("c","size",qe.join(""))}return this.compiledGlyphs[Re]=function(qe,Ge){for(const Ce of Ie)Ce.cmd==="scale"&&(Ce.args=[Ge,-Ge]),qe[Ce.cmd].apply(qe,Ce.args)}}}t.FontFaceObject=Se},(Ae,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var e=St(7);St(1);const _e=function(Re){return new Promise((Ie,qe)=>{require$$5.readFile(Re,(Ce,Xe)=>{if(Ce||!Xe){qe(new Error(Ce));return}Ie(new Uint8Array(Xe))})})};class Se extends e.BaseFilterFactory{}t.NodeFilterFactory=Se;class Pe extends e.BaseCanvasFactory{_createCanvas(Ie,qe){return require$$5.createCanvas(Ie,qe)}}t.NodeCanvasFactory=Pe;class Te extends e.BaseCMapReaderFactory{_fetchData(Ie,qe){return _e(Ie).then(Ge=>({cMapData:Ge,compressionType:qe}))}}t.NodeCMapReaderFactory=Te;class Ee extends e.BaseStandardFontDataFactory{_fetchData(Ie){return _e(Ie)}}t.NodeStandardFontDataFactory=Ee},(Ae,t,St)=>{var En,mc,bc;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var e=St(1),_e=St(6),Se=St(12),Pe=St(13);const Te=16,Ee=100,Re=4096,Ie=15,qe=10,Ge=1e3,Ce=16;function Xe(je,Fe){if(je._removeMirroring)throw new Error("Context is already forwarding operations.");je.__originalSave=je.save,je.__originalRestore=je.restore,je.__originalRotate=je.rotate,je.__originalScale=je.scale,je.__originalTranslate=je.translate,je.__originalTransform=je.transform,je.__originalSetTransform=je.setTransform,je.__originalResetTransform=je.resetTransform,je.__originalClip=je.clip,je.__originalMoveTo=je.moveTo,je.__originalLineTo=je.lineTo,je.__originalBezierCurveTo=je.bezierCurveTo,je.__originalRect=je.rect,je.__originalClosePath=je.closePath,je.__originalBeginPath=je.beginPath,je._removeMirroring=()=>{je.save=je.__originalSave,je.restore=je.__originalRestore,je.rotate=je.__originalRotate,je.scale=je.__originalScale,je.translate=je.__originalTranslate,je.transform=je.__originalTransform,je.setTransform=je.__originalSetTransform,je.resetTransform=je.__originalResetTransform,je.clip=je.__originalClip,je.moveTo=je.__originalMoveTo,je.lineTo=je.__originalLineTo,je.bezierCurveTo=je.__originalBezierCurveTo,je.rect=je.__originalRect,je.closePath=je.__originalClosePath,je.beginPath=je.__originalBeginPath,delete je._removeMirroring},je.save=function(){Fe.save(),this.__originalSave()},je.restore=function(){Fe.restore(),this.__originalRestore()},je.translate=function(Je,nn){Fe.translate(Je,nn),this.__originalTranslate(Je,nn)},je.scale=function(Je,nn){Fe.scale(Je,nn),this.__originalScale(Je,nn)},je.transform=function(Je,nn,an,on,yn,Fn){Fe.transform(Je,nn,an,on,yn,Fn),this.__originalTransform(Je,nn,an,on,yn,Fn)},je.setTransform=function(Je,nn,an,on,yn,Fn){Fe.setTransform(Je,nn,an,on,yn,Fn),this.__originalSetTransform(Je,nn,an,on,yn,Fn)},je.resetTransform=function(){Fe.resetTransform(),this.__originalResetTransform()},je.rotate=function(Je){Fe.rotate(Je),this.__originalRotate(Je)},je.clip=function(Je){Fe.clip(Je),this.__originalClip(Je)},je.moveTo=function(De,Je){Fe.moveTo(De,Je),this.__originalMoveTo(De,Je)},je.lineTo=function(De,Je){Fe.lineTo(De,Je),this.__originalLineTo(De,Je)},je.bezierCurveTo=function(De,Je,nn,an,on,yn){Fe.bezierCurveTo(De,Je,nn,an,on,yn),this.__originalBezierCurveTo(De,Je,nn,an,on,yn)},je.rect=function(De,Je,nn,an){Fe.rect(De,Je,nn,an),this.__originalRect(De,Je,nn,an)},je.closePath=function(){Fe.closePath(),this.__originalClosePath()},je.beginPath=function(){Fe.beginPath(),this.__originalBeginPath()}}class We{constructor(Fe){this.canvasFactory=Fe,this.cache=Object.create(null)}getCanvas(Fe,De,Je){let nn;return this.cache[Fe]!==void 0?(nn=this.cache[Fe],this.canvasFactory.reset(nn,De,Je)):(nn=this.canvasFactory.create(De,Je),this.cache[Fe]=nn),nn}delete(Fe){delete this.cache[Fe]}clear(){for(const Fe in this.cache){const De=this.cache[Fe];this.canvasFactory.destroy(De),delete this.cache[Fe]}}}function Ke(je,Fe,De,Je,nn,an,on,yn,Fn,On){const[Un,Wn,ni,Dn,cn,qn]=(0,_e.getCurrentTransform)(je);if(Wn===0&&ni===0){const kn=on*Un+cn,Rn=Math.round(kn),zn=yn*Dn+qn,Qn=Math.round(zn),ii=(on+Fn)*Un+cn,jn=Math.abs(Math.round(ii)-Rn)||1,fi=(yn+On)*Dn+qn,di=Math.abs(Math.round(fi)-Qn)||1;return je.setTransform(Math.sign(Un),0,0,Math.sign(Dn),Rn,Qn),je.drawImage(Fe,De,Je,nn,an,0,0,jn,di),je.setTransform(Un,Wn,ni,Dn,cn,qn),[jn,di]}if(Un===0&&Dn===0){const kn=yn*ni+cn,Rn=Math.round(kn),zn=on*Wn+qn,Qn=Math.round(zn),ii=(yn+On)*ni+cn,jn=Math.abs(Math.round(ii)-Rn)||1,fi=(on+Fn)*Wn+qn,di=Math.abs(Math.round(fi)-Qn)||1;return je.setTransform(0,Math.sign(Wn),Math.sign(ni),0,Rn,Qn),je.drawImage(Fe,De,Je,nn,an,0,0,di,jn),je.setTransform(Un,Wn,ni,Dn,cn,qn),[di,jn]}je.drawImage(Fe,De,Je,nn,an,on,yn,Fn,On);const fn=Math.hypot(Un,Wn),vn=Math.hypot(ni,Dn);return[fn*Fn,vn*On]}function Be(je){const{width:Fe,height:De}=je;if(Fe>Ge||De>Ge)return null;const Je=1e3,nn=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),an=Fe+1;let on=new Uint8Array(an*(De+1)),yn,Fn,On;const Un=Fe+7&-8;let Wn=new Uint8Array(Un*De),ni=0;for(const vn of je.data){let kn=128;for(;kn>0;)Wn[ni++]=vn&kn?0:255,kn>>=1}let Dn=0;for(ni=0,Wn[ni]!==0&&(on[0]=1,++Dn),Fn=1;Fn<Fe;Fn++)Wn[ni]!==Wn[ni+1]&&(on[Fn]=Wn[ni]?2:1,++Dn),ni++;for(Wn[ni]!==0&&(on[Fn]=2,++Dn),yn=1;yn<De;yn++){ni=yn*Un,On=yn*an,Wn[ni-Un]!==Wn[ni]&&(on[On]=Wn[ni]?1:8,++Dn);let vn=(Wn[ni]?4:0)+(Wn[ni-Un]?8:0);for(Fn=1;Fn<Fe;Fn++)vn=(vn>>2)+(Wn[ni+1]?4:0)+(Wn[ni-Un+1]?8:0),nn[vn]&&(on[On+Fn]=nn[vn],++Dn),ni++;if(Wn[ni-Un]!==Wn[ni]&&(on[On+Fn]=Wn[ni]?2:4,++Dn),Dn>Je)return null}for(ni=Un*(De-1),On=yn*an,Wn[ni]!==0&&(on[On]=8,++Dn),Fn=1;Fn<Fe;Fn++)Wn[ni]!==Wn[ni+1]&&(on[On+Fn]=Wn[ni]?4:8,++Dn),ni++;if(Wn[ni]!==0&&(on[On+Fn]=4,++Dn),Dn>Je)return null;const cn=new Int32Array([0,an,-1,0,-an,0,0,0,1]),qn=new Path2D;for(yn=0;Dn&&yn<=De;yn++){let vn=yn*an;const kn=vn+Fe;for(;vn<kn&&!on[vn];)vn++;if(vn===kn)continue;qn.moveTo(vn%an,yn);const Rn=vn;let zn=on[vn];do{const Qn=cn[zn];do vn+=Qn;while(!on[vn]);const ii=on[vn];ii!==5&&ii!==10?(zn=ii,on[vn]=0):(zn=ii&51*zn>>4,on[vn]&=zn>>2|zn<<2),qn.lineTo(vn%an,vn/an|0),on[vn]||--Dn}while(Rn!==vn);--yn}return Wn=null,on=null,function(vn){vn.save(),vn.scale(1/Fe,-1/De),vn.translate(0,-De),vn.fill(qn),vn.beginPath(),vn.restore()}}class Ye{constructor(Fe,De){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=e.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=e.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,Fe,De])}clone(){const Fe=Object.create(this);return Fe.clipBox=this.clipBox.slice(),Fe}setCurrentPoint(Fe,De){this.x=Fe,this.y=De}updatePathMinMax(Fe,De,Je){[De,Je]=e.Util.applyTransform([De,Je],Fe),this.minX=Math.min(this.minX,De),this.minY=Math.min(this.minY,Je),this.maxX=Math.max(this.maxX,De),this.maxY=Math.max(this.maxY,Je)}updateRectMinMax(Fe,De){const Je=e.Util.applyTransform(De,Fe),nn=e.Util.applyTransform(De.slice(2),Fe);this.minX=Math.min(this.minX,Je[0],nn[0]),this.minY=Math.min(this.minY,Je[1],nn[1]),this.maxX=Math.max(this.maxX,Je[0],nn[0]),this.maxY=Math.max(this.maxY,Je[1],nn[1])}updateScalingPathMinMax(Fe,De){e.Util.scaleMinMax(Fe,De),this.minX=Math.min(this.minX,De[0]),this.maxX=Math.max(this.maxX,De[1]),this.minY=Math.min(this.minY,De[2]),this.maxY=Math.max(this.maxY,De[3])}updateCurvePathMinMax(Fe,De,Je,nn,an,on,yn,Fn,On,Un){const Wn=e.Util.bezierBoundingBox(De,Je,nn,an,on,yn,Fn,On);if(Un){Un[0]=Math.min(Un[0],Wn[0],Wn[2]),Un[1]=Math.max(Un[1],Wn[0],Wn[2]),Un[2]=Math.min(Un[2],Wn[1],Wn[3]),Un[3]=Math.max(Un[3],Wn[1],Wn[3]);return}this.updateRectMinMax(Fe,Wn)}getPathBoundingBox(Fe=Se.PathType.FILL,De=null){const Je=[this.minX,this.minY,this.maxX,this.maxY];if(Fe===Se.PathType.STROKE){De||(0,e.unreachable)("Stroke bounding box must include transform.");const nn=e.Util.singularValueDecompose2dScale(De),an=nn[0]*this.lineWidth/2,on=nn[1]*this.lineWidth/2;Je[0]-=an,Je[1]-=on,Je[2]+=an,Je[3]+=on}return Je}updateClipFromPath(){const Fe=e.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Fe||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Fe){this.clipBox=Fe,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Fe=Se.PathType.FILL,De=null){return e.Util.intersect(this.clipBox,this.getPathBoundingBox(Fe,De))}}function sn(je,Fe){if(typeof ImageData<"u"&&Fe instanceof ImageData){je.putImageData(Fe,0,0);return}const De=Fe.height,Je=Fe.width,nn=De%Ce,an=(De-nn)/Ce,on=nn===0?an:an+1,yn=je.createImageData(Je,Ce);let Fn=0,On;const Un=Fe.data,Wn=yn.data;let ni,Dn,cn,qn;if(Fe.kind===e.ImageKind.GRAYSCALE_1BPP){const fn=Un.byteLength,vn=new Uint32Array(Wn.buffer,0,Wn.byteLength>>2),kn=vn.length,Rn=Je+7>>3,zn=4294967295,Qn=e.FeatureTest.isLittleEndian?4278190080:255;for(ni=0;ni<on;ni++){for(cn=ni<an?Ce:nn,On=0,Dn=0;Dn<cn;Dn++){const ii=fn-Fn;let jn=0;const fi=ii>Rn?Je:ii*8-7,di=fi&-8;let Ii=0,Si=0;for(;jn<di;jn+=8)Si=Un[Fn++],vn[On++]=Si&128?zn:Qn,vn[On++]=Si&64?zn:Qn,vn[On++]=Si&32?zn:Qn,vn[On++]=Si&16?zn:Qn,vn[On++]=Si&8?zn:Qn,vn[On++]=Si&4?zn:Qn,vn[On++]=Si&2?zn:Qn,vn[On++]=Si&1?zn:Qn;for(;jn<fi;jn++)Ii===0&&(Si=Un[Fn++],Ii=128),vn[On++]=Si&Ii?zn:Qn,Ii>>=1}for(;On<kn;)vn[On++]=0;je.putImageData(yn,0,ni*Ce)}}else if(Fe.kind===e.ImageKind.RGBA_32BPP){for(Dn=0,qn=Je*Ce*4,ni=0;ni<an;ni++)Wn.set(Un.subarray(Fn,Fn+qn)),Fn+=qn,je.putImageData(yn,0,Dn),Dn+=Ce;ni<on&&(qn=Je*nn*4,Wn.set(Un.subarray(Fn,Fn+qn)),je.putImageData(yn,0,Dn))}else if(Fe.kind===e.ImageKind.RGB_24BPP)for(cn=Ce,qn=Je*cn,ni=0;ni<on;ni++){for(ni>=an&&(cn=nn,qn=Je*cn),On=0,Dn=qn;Dn--;)Wn[On++]=Un[Fn++],Wn[On++]=Un[Fn++],Wn[On++]=Un[Fn++],Wn[On++]=255;je.putImageData(yn,0,ni*Ce)}else throw new Error(`bad image kind: ${Fe.kind}`)}function rn(je,Fe){if(Fe.bitmap){je.drawImage(Fe.bitmap,0,0);return}const De=Fe.height,Je=Fe.width,nn=De%Ce,an=(De-nn)/Ce,on=nn===0?an:an+1,yn=je.createImageData(Je,Ce);let Fn=0;const On=Fe.data,Un=yn.data;for(let Wn=0;Wn<on;Wn++){const ni=Wn<an?Ce:nn;({srcPos:Fn}=(0,Pe.convertBlackAndWhiteToRGBA)({src:On,srcPos:Fn,dest:Un,width:Je,height:ni,nonBlackColor:0})),je.putImageData(yn,0,Wn*Ce)}}function $e(je,Fe){const De=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const Je of De)je[Je]!==void 0&&(Fe[Je]=je[Je]);je.setLineDash!==void 0&&(Fe.setLineDash(je.getLineDash()),Fe.lineDashOffset=je.lineDashOffset)}function tn(je){if(je.strokeStyle=je.fillStyle="#000000",je.fillRule="nonzero",je.globalAlpha=1,je.lineWidth=1,je.lineCap="butt",je.lineJoin="miter",je.miterLimit=10,je.globalCompositeOperation="source-over",je.font="10px sans-serif",je.setLineDash!==void 0&&(je.setLineDash([]),je.lineDashOffset=0),!e.isNodeJS){const{filter:Fe}=je;Fe!=="none"&&Fe!==""&&(je.filter="none")}}function Ve(je,Fe,De,Je){const nn=je.length;for(let an=3;an<nn;an+=4){const on=je[an];if(on===0)je[an-3]=Fe,je[an-2]=De,je[an-1]=Je;else if(on<255){const yn=255-on;je[an-3]=je[an-3]*on+Fe*yn>>8,je[an-2]=je[an-2]*on+De*yn>>8,je[an-1]=je[an-1]*on+Je*yn>>8}}}function ze(je,Fe,De){const Je=je.length,nn=1/255;for(let an=3;an<Je;an+=4){const on=De?De[je[an]]:je[an];Fe[an]=Fe[an]*on*nn|0}}function Qe(je,Fe,De){const Je=je.length;for(let nn=3;nn<Je;nn+=4){const an=je[nn-3]*77+je[nn-2]*152+je[nn-1]*28;Fe[nn]=De?Fe[nn]*De[an>>8]>>8:Fe[nn]*an>>16}}function gn(je,Fe,De,Je,nn,an,on,yn,Fn,On,Un){const Wn=!!an,ni=Wn?an[0]:0,Dn=Wn?an[1]:0,cn=Wn?an[2]:0,qn=nn==="Luminosity"?Qe:ze,vn=Math.min(Je,Math.ceil(1048576/De));for(let kn=0;kn<Je;kn+=vn){const Rn=Math.min(vn,Je-kn),zn=je.getImageData(yn-On,kn+(Fn-Un),De,Rn),Qn=Fe.getImageData(yn,kn+Fn,De,Rn);Wn&&Ve(zn.data,ni,Dn,cn),qn(zn.data,Qn.data,on),Fe.putImageData(Qn,yn,kn+Fn)}}function Me(je,Fe,De,Je){const nn=Je[0],an=Je[1],on=Je[2]-nn,yn=Je[3]-an;on===0||yn===0||(gn(Fe.context,De,on,yn,Fe.subtype,Fe.backdrop,Fe.transferMap,nn,an,Fe.offsetX,Fe.offsetY),je.save(),je.globalAlpha=1,je.globalCompositeOperation="source-over",je.setTransform(1,0,0,1,0,0),je.drawImage(De.canvas,0,0),je.restore())}function Ue(je,Fe){const De=e.Util.singularValueDecompose2dScale(je);De[0]=Math.fround(De[0]),De[1]=Math.fround(De[1]);const Je=Math.fround((globalThis.devicePixelRatio||1)*_e.PixelsPerInch.PDF_TO_CSS_UNITS);return Fe!==void 0?Fe:De[0]<=Je||De[1]<=Je}const en=["butt","round","square"],pn=["miter","round","bevel"],An={},xn={},In=class In{constructor(Fe,De,Je,nn,an,{optionalContentConfig:on,markedContentStack:yn=null},Fn,On){Zn(this,En);this.ctx=Fe,this.current=new Ye(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=De,this.objs=Je,this.canvasFactory=nn,this.filterFactory=an,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=yn||[],this.optionalContentConfig=on,this.cachedCanvases=new We(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Fn,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=On,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Fe,De=null){return typeof Fe=="string"?Fe.startsWith("g_")?this.commonObjs.get(Fe):this.objs.get(Fe):De}beginDrawing({transform:Fe,viewport:De,transparency:Je=!1,background:nn=null}){const an=this.ctx.canvas.width,on=this.ctx.canvas.height,yn=this.ctx.fillStyle;if(this.ctx.fillStyle=nn||"#ffffff",this.ctx.fillRect(0,0,an,on),this.ctx.fillStyle=yn,Je){const Fn=this.cachedCanvases.getCanvas("transparent",an,on);this.compositeCtx=this.ctx,this.transparentCanvas=Fn.canvas,this.ctx=Fn.context,this.ctx.save(),this.ctx.transform(...(0,_e.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),tn(this.ctx),Fe&&(this.ctx.transform(...Fe),this.outputScaleX=Fe[0],this.outputScaleY=Fe[0]),this.ctx.transform(...De.transform),this.viewportScale=De.scale,this.baseTransform=(0,_e.getCurrentTransform)(this.ctx)}executeOperatorList(Fe,De,Je,nn){const an=Fe.argsArray,on=Fe.fnArray;let yn=De||0;const Fn=an.length;if(Fn===yn)return yn;const On=Fn-yn>qe&&typeof Je=="function",Un=On?Date.now()+Ie:0;let Wn=0;const ni=this.commonObjs,Dn=this.objs;let cn;for(;;){if(nn!==void 0&&yn===nn.nextBreakPoint)return nn.breakIt(yn,Je),yn;if(cn=on[yn],cn!==e.OPS.dependency)this[cn].apply(this,an[yn]);else for(const qn of an[yn]){const fn=qn.startsWith("g_")?ni:Dn;if(!fn.has(qn))return fn.get(qn,Je),yn}if(yn++,yn===Fn)return yn;if(On&&++Wn>qe){if(Date.now()>Un)return Je(),yn;Wn=0}}}endDrawing(){Vn(this,En,mc).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Fe of this._cachedBitmapsMap.values()){for(const De of Fe.values())typeof HTMLCanvasElement<"u"&&De instanceof HTMLCanvasElement&&(De.width=De.height=0);Fe.clear()}this._cachedBitmapsMap.clear(),Vn(this,En,bc).call(this)}_scaleImage(Fe,De){const Je=Fe.width,nn=Fe.height;let an=Math.max(Math.hypot(De[0],De[1]),1),on=Math.max(Math.hypot(De[2],De[3]),1),yn=Je,Fn=nn,On="prescale1",Un,Wn;for(;an>2&&yn>1||on>2&&Fn>1;){let ni=yn,Dn=Fn;an>2&&yn>1&&(ni=yn>=16384?Math.floor(yn/2)-1||1:Math.ceil(yn/2),an/=yn/ni),on>2&&Fn>1&&(Dn=Fn>=16384?Math.floor(Fn/2)-1||1:Math.ceil(Fn)/2,on/=Fn/Dn),Un=this.cachedCanvases.getCanvas(On,ni,Dn),Wn=Un.context,Wn.clearRect(0,0,ni,Dn),Wn.drawImage(Fe,0,0,yn,Fn,0,0,ni,Dn),Fe=Un.canvas,yn=ni,Fn=Dn,On=On==="prescale1"?"prescale2":"prescale1"}return{img:Fe,paintWidth:yn,paintHeight:Fn}}_createMaskCanvas(Fe){const De=this.ctx,{width:Je,height:nn}=Fe,an=this.current.fillColor,on=this.current.patternFill,yn=(0,_e.getCurrentTransform)(De);let Fn,On,Un,Wn;if((Fe.bitmap||Fe.data)&&Fe.count>1){const jn=Fe.bitmap||Fe.data.buffer;On=JSON.stringify(on?yn:[yn.slice(0,4),an]),Fn=this._cachedBitmapsMap.get(jn),Fn||(Fn=new Map,this._cachedBitmapsMap.set(jn,Fn));const fi=Fn.get(On);if(fi&&!on){const di=Math.round(Math.min(yn[0],yn[2])+yn[4]),Ii=Math.round(Math.min(yn[1],yn[3])+yn[5]);return{canvas:fi,offsetX:di,offsetY:Ii}}Un=fi}Un||(Wn=this.cachedCanvases.getCanvas("maskCanvas",Je,nn),rn(Wn.context,Fe));let ni=e.Util.transform(yn,[1/Je,0,0,-1/nn,0,0]);ni=e.Util.transform(ni,[1,0,0,1,0,-nn]);const Dn=e.Util.applyTransform([0,0],ni),cn=e.Util.applyTransform([Je,nn],ni),qn=e.Util.normalizeRect([Dn[0],Dn[1],cn[0],cn[1]]),fn=Math.round(qn[2]-qn[0])||1,vn=Math.round(qn[3]-qn[1])||1,kn=this.cachedCanvases.getCanvas("fillCanvas",fn,vn),Rn=kn.context,zn=Math.min(Dn[0],cn[0]),Qn=Math.min(Dn[1],cn[1]);Rn.translate(-zn,-Qn),Rn.transform(...ni),Un||(Un=this._scaleImage(Wn.canvas,(0,_e.getCurrentTransformInverse)(Rn)),Un=Un.img,Fn&&on&&Fn.set(On,Un)),Rn.imageSmoothingEnabled=Ue((0,_e.getCurrentTransform)(Rn),Fe.interpolate),Ke(Rn,Un,0,0,Un.width,Un.height,0,0,Je,nn),Rn.globalCompositeOperation="source-in";const ii=e.Util.transform((0,_e.getCurrentTransformInverse)(Rn),[1,0,0,1,-zn,-Qn]);return Rn.fillStyle=on?an.getPattern(De,this,ii,Se.PathType.FILL):an,Rn.fillRect(0,0,Je,nn),Fn&&!on&&(this.cachedCanvases.delete("fillCanvas"),Fn.set(On,kn.canvas)),{canvas:kn.canvas,offsetX:Math.round(zn),offsetY:Math.round(Qn)}}setLineWidth(Fe){Fe!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=Fe,this.ctx.lineWidth=Fe}setLineCap(Fe){this.ctx.lineCap=en[Fe]}setLineJoin(Fe){this.ctx.lineJoin=pn[Fe]}setMiterLimit(Fe){this.ctx.miterLimit=Fe}setDash(Fe,De){const Je=this.ctx;Je.setLineDash!==void 0&&(Je.setLineDash(Fe),Je.lineDashOffset=De)}setRenderingIntent(Fe){}setFlatness(Fe){}setGState(Fe){for(const[De,Je]of Fe)switch(De){case"LW":this.setLineWidth(Je);break;case"LC":this.setLineCap(Je);break;case"LJ":this.setLineJoin(Je);break;case"ML":this.setMiterLimit(Je);break;case"D":this.setDash(Je[0],Je[1]);break;case"RI":this.setRenderingIntent(Je);break;case"FL":this.setFlatness(Je);break;case"Font":this.setFont(Je[0],Je[1]);break;case"CA":this.current.strokeAlpha=Je;break;case"ca":this.current.fillAlpha=Je,this.ctx.globalAlpha=Je;break;case"BM":this.ctx.globalCompositeOperation=Je;break;case"SMask":this.current.activeSMask=Je?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Je);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Fe=this.inSMaskMode;this.current.activeSMask&&!Fe?this.beginSMaskMode():!this.current.activeSMask&&Fe&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Fe=this.ctx.canvas.width,De=this.ctx.canvas.height,Je="smaskGroupAt"+this.groupLevel,nn=this.cachedCanvases.getCanvas(Je,Fe,De);this.suspendedCtx=this.ctx,this.ctx=nn.context;const an=this.ctx;an.setTransform(...(0,_e.getCurrentTransform)(this.suspendedCtx)),$e(this.suspendedCtx,an),Xe(an,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),$e(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Fe){if(!this.current.activeSMask)return;Fe?(Fe[0]=Math.floor(Fe[0]),Fe[1]=Math.floor(Fe[1]),Fe[2]=Math.ceil(Fe[2]),Fe[3]=Math.ceil(Fe[3])):Fe=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const De=this.current.activeSMask,Je=this.suspendedCtx;Me(Je,De,this.ctx,Fe),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?($e(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Fe=this.current;this.stateStack.push(Fe),this.current=Fe.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),$e(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(Fe,De,Je,nn,an,on){this.ctx.transform(Fe,De,Je,nn,an,on),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(Fe,De,Je){const nn=this.ctx,an=this.current;let on=an.x,yn=an.y,Fn,On;const Un=(0,_e.getCurrentTransform)(nn),Wn=Un[0]===0&&Un[3]===0||Un[1]===0&&Un[2]===0,ni=Wn?Je.slice(0):null;for(let Dn=0,cn=0,qn=Fe.length;Dn<qn;Dn++)switch(Fe[Dn]|0){case e.OPS.rectangle:on=De[cn++],yn=De[cn++];const fn=De[cn++],vn=De[cn++],kn=on+fn,Rn=yn+vn;nn.moveTo(on,yn),fn===0||vn===0?nn.lineTo(kn,Rn):(nn.lineTo(kn,yn),nn.lineTo(kn,Rn),nn.lineTo(on,Rn)),Wn||an.updateRectMinMax(Un,[on,yn,kn,Rn]),nn.closePath();break;case e.OPS.moveTo:on=De[cn++],yn=De[cn++],nn.moveTo(on,yn),Wn||an.updatePathMinMax(Un,on,yn);break;case e.OPS.lineTo:on=De[cn++],yn=De[cn++],nn.lineTo(on,yn),Wn||an.updatePathMinMax(Un,on,yn);break;case e.OPS.curveTo:Fn=on,On=yn,on=De[cn+4],yn=De[cn+5],nn.bezierCurveTo(De[cn],De[cn+1],De[cn+2],De[cn+3],on,yn),an.updateCurvePathMinMax(Un,Fn,On,De[cn],De[cn+1],De[cn+2],De[cn+3],on,yn,ni),cn+=6;break;case e.OPS.curveTo2:Fn=on,On=yn,nn.bezierCurveTo(on,yn,De[cn],De[cn+1],De[cn+2],De[cn+3]),an.updateCurvePathMinMax(Un,Fn,On,on,yn,De[cn],De[cn+1],De[cn+2],De[cn+3],ni),on=De[cn+2],yn=De[cn+3],cn+=4;break;case e.OPS.curveTo3:Fn=on,On=yn,on=De[cn+2],yn=De[cn+3],nn.bezierCurveTo(De[cn],De[cn+1],on,yn,on,yn),an.updateCurvePathMinMax(Un,Fn,On,De[cn],De[cn+1],on,yn,on,yn,ni),cn+=4;break;case e.OPS.closePath:nn.closePath();break}Wn&&an.updateScalingPathMinMax(Un,ni),an.setCurrentPoint(on,yn)}closePath(){this.ctx.closePath()}stroke(Fe=!0){const De=this.ctx,Je=this.current.strokeColor;De.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Je=="object"&&(Je!=null&&Je.getPattern)?(De.save(),De.strokeStyle=Je.getPattern(De,this,(0,_e.getCurrentTransformInverse)(De),Se.PathType.STROKE),this.rescaleAndStroke(!1),De.restore()):this.rescaleAndStroke(!0)),Fe&&this.consumePath(this.current.getClippedPathBoundingBox()),De.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Fe=!0){const De=this.ctx,Je=this.current.fillColor,nn=this.current.patternFill;let an=!1;nn&&(De.save(),De.fillStyle=Je.getPattern(De,this,(0,_e.getCurrentTransformInverse)(De),Se.PathType.FILL),an=!0);const on=this.current.getClippedPathBoundingBox();this.contentVisible&&on!==null&&(this.pendingEOFill?(De.fill("evenodd"),this.pendingEOFill=!1):De.fill()),an&&De.restore(),Fe&&this.consumePath(on)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=An}eoClip(){this.pendingClip=xn}beginText(){this.current.textMatrix=e.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Fe=this.pendingTextPaths,De=this.ctx;if(Fe===void 0){De.beginPath();return}De.save(),De.beginPath();for(const Je of Fe)De.setTransform(...Je.transform),De.translate(Je.x,Je.y),Je.addToPath(De,Je.fontSize);De.restore(),De.clip(),De.beginPath(),delete this.pendingTextPaths}setCharSpacing(Fe){this.current.charSpacing=Fe}setWordSpacing(Fe){this.current.wordSpacing=Fe}setHScale(Fe){this.current.textHScale=Fe/100}setLeading(Fe){this.current.leading=-Fe}setFont(Fe,De){var Un;const Je=this.commonObjs.get(Fe),nn=this.current;if(!Je)throw new Error(`Can't find font for ${Fe}`);if(nn.fontMatrix=Je.fontMatrix||e.FONT_IDENTITY_MATRIX,(nn.fontMatrix[0]===0||nn.fontMatrix[3]===0)&&(0,e.warn)("Invalid font matrix for font "+Fe),De<0?(De=-De,nn.fontDirection=-1):nn.fontDirection=1,this.current.font=Je,this.current.fontSize=De,Je.isType3Font)return;const an=Je.loadedName||"sans-serif",on=((Un=Je.systemFontInfo)==null?void 0:Un.css)||`"${an}", ${Je.fallbackName}`;let yn="normal";Je.black?yn="900":Je.bold&&(yn="bold");const Fn=Je.italic?"italic":"normal";let On=De;De<Te?On=Te:De>Ee&&(On=Ee),this.current.fontSizeScale=De/On,this.ctx.font=`${Fn} ${yn} ${On}px ${on}`}setTextRenderingMode(Fe){this.current.textRenderingMode=Fe}setTextRise(Fe){this.current.textRise=Fe}moveText(Fe,De){this.current.x=this.current.lineX+=Fe,this.current.y=this.current.lineY+=De}setLeadingMoveText(Fe,De){this.setLeading(-De),this.moveText(Fe,De)}setTextMatrix(Fe,De,Je,nn,an,on){this.current.textMatrix=[Fe,De,Je,nn,an,on],this.current.textMatrixScale=Math.hypot(Fe,De),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Fe,De,Je,nn){const an=this.ctx,on=this.current,yn=on.font,Fn=on.textRenderingMode,On=on.fontSize/on.fontSizeScale,Un=Fn&e.TextRenderingMode.FILL_STROKE_MASK,Wn=!!(Fn&e.TextRenderingMode.ADD_TO_PATH_FLAG),ni=on.patternFill&&!yn.missingFile;let Dn;(yn.disableFontFace||Wn||ni)&&(Dn=yn.getPathGenerator(this.commonObjs,Fe)),yn.disableFontFace||ni?(an.save(),an.translate(De,Je),an.beginPath(),Dn(an,On),nn&&an.setTransform(...nn),(Un===e.TextRenderingMode.FILL||Un===e.TextRenderingMode.FILL_STROKE)&&an.fill(),(Un===e.TextRenderingMode.STROKE||Un===e.TextRenderingMode.FILL_STROKE)&&an.stroke(),an.restore()):((Un===e.TextRenderingMode.FILL||Un===e.TextRenderingMode.FILL_STROKE)&&an.fillText(Fe,De,Je),(Un===e.TextRenderingMode.STROKE||Un===e.TextRenderingMode.FILL_STROKE)&&an.strokeText(Fe,De,Je)),Wn&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,_e.getCurrentTransform)(an),x:De,y:Je,fontSize:On,addToPath:Dn})}get isFontSubpixelAAEnabled(){const{context:Fe}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Fe.scale(1.5,1),Fe.fillText("I",0,10);const De=Fe.getImageData(0,0,10,10).data;let Je=!1;for(let nn=3;nn<De.length;nn+=4)if(De[nn]>0&&De[nn]<255){Je=!0;break}return(0,e.shadow)(this,"isFontSubpixelAAEnabled",Je)}showText(Fe){const De=this.current,Je=De.font;if(Je.isType3Font)return this.showType3Text(Fe);const nn=De.fontSize;if(nn===0)return;const an=this.ctx,on=De.fontSizeScale,yn=De.charSpacing,Fn=De.wordSpacing,On=De.fontDirection,Un=De.textHScale*On,Wn=Fe.length,ni=Je.vertical,Dn=ni?1:-1,cn=Je.defaultVMetrics,qn=nn*De.fontMatrix[0],fn=De.textRenderingMode===e.TextRenderingMode.FILL&&!Je.disableFontFace&&!De.patternFill;an.save(),an.transform(...De.textMatrix),an.translate(De.x,De.y+De.textRise),On>0?an.scale(Un,-1):an.scale(Un,1);let vn;if(De.patternFill){an.save();const ii=De.fillColor.getPattern(an,this,(0,_e.getCurrentTransformInverse)(an),Se.PathType.FILL);vn=(0,_e.getCurrentTransform)(an),an.restore(),an.fillStyle=ii}let kn=De.lineWidth;const Rn=De.textMatrixScale;if(Rn===0||kn===0){const ii=De.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;(ii===e.TextRenderingMode.STROKE||ii===e.TextRenderingMode.FILL_STROKE)&&(kn=this.getSinglePixelWidth())}else kn/=Rn;if(on!==1&&(an.scale(on,on),kn/=on),an.lineWidth=kn,Je.isInvalidPDFjsFont){const ii=[];let jn=0;for(const fi of Fe)ii.push(fi.unicode),jn+=fi.width;an.fillText(ii.join(""),0,0),De.x+=jn*qn*Un,an.restore(),this.compose();return}let zn=0,Qn;for(Qn=0;Qn<Wn;++Qn){const ii=Fe[Qn];if(typeof ii=="number"){zn+=Dn*ii*nn/1e3;continue}let jn=!1;const fi=(ii.isSpace?Fn:0)+yn,di=ii.fontChar,Ii=ii.accent;let Si,Ri,hi=ii.width;if(ni){const Oi=ii.vmetric||cn,Yi=-(ii.vmetric?Oi[1]:hi*.5)*qn,ai=Oi[2]*qn;hi=Oi?-Oi[0]:hi,Si=Yi/on,Ri=(zn+ai)/on}else Si=zn/on,Ri=0;if(Je.remeasure&&hi>0){const Oi=an.measureText(di).width*1e3/nn*on;if(hi<Oi&&this.isFontSubpixelAAEnabled){const Yi=hi/Oi;jn=!0,an.save(),an.scale(Yi,1),Si/=Yi}else hi!==Oi&&(Si+=(hi-Oi)/2e3*nn/on)}if(this.contentVisible&&(ii.isInFont||Je.missingFile)){if(fn&&!Ii)an.fillText(di,Si,Ri);else if(this.paintChar(di,Si,Ri,vn),Ii){const Oi=Si+nn*Ii.offset.x/on,Yi=Ri-nn*Ii.offset.y/on;this.paintChar(Ii.fontChar,Oi,Yi,vn)}}const Fi=ni?hi*qn-fi*On:hi*qn+fi*On;zn+=Fi,jn&&an.restore()}ni?De.y-=zn:De.x+=zn*Un,an.restore(),this.compose()}showType3Text(Fe){const De=this.ctx,Je=this.current,nn=Je.font,an=Je.fontSize,on=Je.fontDirection,yn=nn.vertical?1:-1,Fn=Je.charSpacing,On=Je.wordSpacing,Un=Je.textHScale*on,Wn=Je.fontMatrix||e.FONT_IDENTITY_MATRIX,ni=Fe.length,Dn=Je.textRenderingMode===e.TextRenderingMode.INVISIBLE;let cn,qn,fn,vn;if(!(Dn||an===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,De.save(),De.transform(...Je.textMatrix),De.translate(Je.x,Je.y),De.scale(Un,on),cn=0;cn<ni;++cn){if(qn=Fe[cn],typeof qn=="number"){vn=yn*qn*an/1e3,this.ctx.translate(vn,0),Je.x+=vn*Un;continue}const kn=(qn.isSpace?On:0)+Fn,Rn=nn.charProcOperatorList[qn.operatorListId];if(!Rn){(0,e.warn)(`Type3 character "${qn.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=qn,this.save(),De.scale(an,an),De.transform(...Wn),this.executeOperatorList(Rn),this.restore()),fn=e.Util.applyTransform([qn.width,0],Wn)[0]*an+kn,De.translate(fn,0),Je.x+=fn*Un}De.restore(),this.processingType3=null}}setCharWidth(Fe,De){}setCharWidthAndBounds(Fe,De,Je,nn,an,on){this.ctx.rect(Je,nn,an-Je,on-nn),this.ctx.clip(),this.endPath()}getColorN_Pattern(Fe){let De;if(Fe[0]==="TilingPattern"){const Je=Fe[1],nn=this.baseTransform||(0,_e.getCurrentTransform)(this.ctx),an={createCanvasGraphics:on=>new In(on,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};De=new Se.TilingPattern(Fe,Je,this.ctx,an,nn)}else De=this._getPattern(Fe[1],Fe[2]);return De}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Fe,De,Je){const nn=e.Util.makeHexColor(Fe,De,Je);this.ctx.strokeStyle=nn,this.current.strokeColor=nn}setFillRGBColor(Fe,De,Je){const nn=e.Util.makeHexColor(Fe,De,Je);this.ctx.fillStyle=nn,this.current.fillColor=nn,this.current.patternFill=!1}_getPattern(Fe,De=null){let Je;return this.cachedPatterns.has(Fe)?Je=this.cachedPatterns.get(Fe):(Je=(0,Se.getShadingPattern)(this.getObject(Fe)),this.cachedPatterns.set(Fe,Je)),De&&(Je.matrix=De),Je}shadingFill(Fe){if(!this.contentVisible)return;const De=this.ctx;this.save();const Je=this._getPattern(Fe);De.fillStyle=Je.getPattern(De,this,(0,_e.getCurrentTransformInverse)(De),Se.PathType.SHADING);const nn=(0,_e.getCurrentTransformInverse)(De);if(nn){const{width:an,height:on}=De.canvas,[yn,Fn,On,Un]=e.Util.getAxialAlignedBoundingBox([0,0,an,on],nn);this.ctx.fillRect(yn,Fn,On-yn,Un-Fn)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,e.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,e.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Fe,De){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Fe)&&Fe.length===6&&this.transform(...Fe),this.baseTransform=(0,_e.getCurrentTransform)(this.ctx),De)){const Je=De[2]-De[0],nn=De[3]-De[1];this.ctx.rect(De[0],De[1],Je,nn),this.current.updateRectMinMax((0,_e.getCurrentTransform)(this.ctx),De),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Fe){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const De=this.ctx;Fe.isolated||(0,e.info)("TODO: Support non-isolated groups."),Fe.knockout&&(0,e.warn)("Knockout groups not supported.");const Je=(0,_e.getCurrentTransform)(De);if(Fe.matrix&&De.transform(...Fe.matrix),!Fe.bbox)throw new Error("Bounding box is required.");let nn=e.Util.getAxialAlignedBoundingBox(Fe.bbox,(0,_e.getCurrentTransform)(De));const an=[0,0,De.canvas.width,De.canvas.height];nn=e.Util.intersect(nn,an)||[0,0,0,0];const on=Math.floor(nn[0]),yn=Math.floor(nn[1]);let Fn=Math.max(Math.ceil(nn[2])-on,1),On=Math.max(Math.ceil(nn[3])-yn,1),Un=1,Wn=1;Fn>Re&&(Un=Fn/Re,Fn=Re),On>Re&&(Wn=On/Re,On=Re),this.current.startNewPathAndClipBox([0,0,Fn,On]);let ni="groupAt"+this.groupLevel;Fe.smask&&(ni+="_smask_"+this.smaskCounter++%2);const Dn=this.cachedCanvases.getCanvas(ni,Fn,On),cn=Dn.context;cn.scale(1/Un,1/Wn),cn.translate(-on,-yn),cn.transform(...Je),Fe.smask?this.smaskStack.push({canvas:Dn.canvas,context:cn,offsetX:on,offsetY:yn,scaleX:Un,scaleY:Wn,subtype:Fe.smask.subtype,backdrop:Fe.smask.backdrop,transferMap:Fe.smask.transferMap||null,startTransformInverse:null}):(De.setTransform(1,0,0,1,0,0),De.translate(on,yn),De.scale(Un,Wn),De.save()),$e(De,cn),this.ctx=cn,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(De),this.groupLevel++}endGroup(Fe){if(!this.contentVisible)return;this.groupLevel--;const De=this.ctx,Je=this.groupStack.pop();if(this.ctx=Je,this.ctx.imageSmoothingEnabled=!1,Fe.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const nn=(0,_e.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...nn);const an=e.Util.getAxialAlignedBoundingBox([0,0,De.canvas.width,De.canvas.height],nn);this.ctx.drawImage(De.canvas,0,0),this.ctx.restore(),this.compose(an)}}beginAnnotation(Fe,De,Je,nn,an){if(Vn(this,En,mc).call(this),tn(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(De)&&De.length===4){const on=De[2]-De[0],yn=De[3]-De[1];if(an&&this.annotationCanvasMap){Je=Je.slice(),Je[4]-=De[0],Je[5]-=De[1],De=De.slice(),De[0]=De[1]=0,De[2]=on,De[3]=yn;const[Fn,On]=e.Util.singularValueDecompose2dScale((0,_e.getCurrentTransform)(this.ctx)),{viewportScale:Un}=this,Wn=Math.ceil(on*this.outputScaleX*Un),ni=Math.ceil(yn*this.outputScaleY*Un);this.annotationCanvas=this.canvasFactory.create(Wn,ni);const{canvas:Dn,context:cn}=this.annotationCanvas;this.annotationCanvasMap.set(Fe,Dn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=cn,this.ctx.save(),this.ctx.setTransform(Fn,0,0,-On,0,yn*On),tn(this.ctx)}else tn(this.ctx),this.ctx.rect(De[0],De[1],on,yn),this.ctx.clip(),this.endPath()}this.current=new Ye(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...Je),this.transform(...nn)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Vn(this,En,bc).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Fe){if(!this.contentVisible)return;const De=Fe.count;Fe=this.getObject(Fe.data,Fe),Fe.count=De;const Je=this.ctx,nn=this.processingType3;if(nn&&(nn.compiled===void 0&&(nn.compiled=Be(Fe)),nn.compiled)){nn.compiled(Je);return}const an=this._createMaskCanvas(Fe),on=an.canvas;Je.save(),Je.setTransform(1,0,0,1,0,0),Je.drawImage(on,an.offsetX,an.offsetY),Je.restore(),this.compose()}paintImageMaskXObjectRepeat(Fe,De,Je=0,nn=0,an,on){if(!this.contentVisible)return;Fe=this.getObject(Fe.data,Fe);const yn=this.ctx;yn.save();const Fn=(0,_e.getCurrentTransform)(yn);yn.transform(De,Je,nn,an,0,0);const On=this._createMaskCanvas(Fe);yn.setTransform(1,0,0,1,On.offsetX-Fn[4],On.offsetY-Fn[5]);for(let Un=0,Wn=on.length;Un<Wn;Un+=2){const ni=e.Util.transform(Fn,[De,Je,nn,an,on[Un],on[Un+1]]),[Dn,cn]=e.Util.applyTransform([0,0],ni);yn.drawImage(On.canvas,Dn,cn)}yn.restore(),this.compose()}paintImageMaskXObjectGroup(Fe){if(!this.contentVisible)return;const De=this.ctx,Je=this.current.fillColor,nn=this.current.patternFill;for(const an of Fe){const{data:on,width:yn,height:Fn,transform:On}=an,Un=this.cachedCanvases.getCanvas("maskCanvas",yn,Fn),Wn=Un.context;Wn.save();const ni=this.getObject(on,an);rn(Wn,ni),Wn.globalCompositeOperation="source-in",Wn.fillStyle=nn?Je.getPattern(Wn,this,(0,_e.getCurrentTransformInverse)(De),Se.PathType.FILL):Je,Wn.fillRect(0,0,yn,Fn),Wn.restore(),De.save(),De.transform(...On),De.scale(1,-1),Ke(De,Un.canvas,0,0,yn,Fn,0,-1,1,1),De.restore()}this.compose()}paintImageXObject(Fe){if(!this.contentVisible)return;const De=this.getObject(Fe);if(!De){(0,e.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(De)}paintImageXObjectRepeat(Fe,De,Je,nn){if(!this.contentVisible)return;const an=this.getObject(Fe);if(!an){(0,e.warn)("Dependent image isn't ready yet");return}const on=an.width,yn=an.height,Fn=[];for(let On=0,Un=nn.length;On<Un;On+=2)Fn.push({transform:[De,0,0,Je,nn[On],nn[On+1]],x:0,y:0,w:on,h:yn});this.paintInlineImageXObjectGroup(an,Fn)}applyTransferMapsToCanvas(Fe){return this.current.transferMaps!=="none"&&(Fe.filter=this.current.transferMaps,Fe.drawImage(Fe.canvas,0,0),Fe.filter="none"),Fe.canvas}applyTransferMapsToBitmap(Fe){if(this.current.transferMaps==="none")return Fe.bitmap;const{bitmap:De,width:Je,height:nn}=Fe,an=this.cachedCanvases.getCanvas("inlineImage",Je,nn),on=an.context;return on.filter=this.current.transferMaps,on.drawImage(De,0,0),on.filter="none",an.canvas}paintInlineImageXObject(Fe){if(!this.contentVisible)return;const De=Fe.width,Je=Fe.height,nn=this.ctx;if(this.save(),!e.isNodeJS){const{filter:yn}=nn;yn!=="none"&&yn!==""&&(nn.filter="none")}nn.scale(1/De,-1/Je);let an;if(Fe.bitmap)an=this.applyTransferMapsToBitmap(Fe);else if(typeof HTMLElement=="function"&&Fe instanceof HTMLElement||!Fe.data)an=Fe;else{const Fn=this.cachedCanvases.getCanvas("inlineImage",De,Je).context;sn(Fn,Fe),an=this.applyTransferMapsToCanvas(Fn)}const on=this._scaleImage(an,(0,_e.getCurrentTransformInverse)(nn));nn.imageSmoothingEnabled=Ue((0,_e.getCurrentTransform)(nn),Fe.interpolate),Ke(nn,on.img,0,0,on.paintWidth,on.paintHeight,0,-Je,De,Je),this.compose(),this.restore()}paintInlineImageXObjectGroup(Fe,De){if(!this.contentVisible)return;const Je=this.ctx;let nn;if(Fe.bitmap)nn=Fe.bitmap;else{const an=Fe.width,on=Fe.height,Fn=this.cachedCanvases.getCanvas("inlineImage",an,on).context;sn(Fn,Fe),nn=this.applyTransferMapsToCanvas(Fn)}for(const an of De)Je.save(),Je.transform(...an.transform),Je.scale(1,-1),Ke(Je,nn,an.x,an.y,an.w,an.h,0,-1,1,1),Je.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Fe){}markPointProps(Fe,De){}beginMarkedContent(Fe){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Fe,De){Fe==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(De)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Fe){const De=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Fe);const Je=this.ctx;this.pendingClip&&(De||(this.pendingClip===xn?Je.clip("evenodd"):Je.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Je.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Fe=(0,_e.getCurrentTransform)(this.ctx);if(Fe[1]===0&&Fe[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Fe[0]),Math.abs(Fe[3]));else{const De=Math.abs(Fe[0]*Fe[3]-Fe[2]*Fe[1]),Je=Math.hypot(Fe[0],Fe[2]),nn=Math.hypot(Fe[1],Fe[3]);this._cachedGetSinglePixelWidth=Math.max(Je,nn)/De}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:Fe}=this.current,{a:De,b:Je,c:nn,d:an}=this.ctx.getTransform();let on,yn;if(Je===0&&nn===0){const Fn=Math.abs(De),On=Math.abs(an);if(Fn===On)if(Fe===0)on=yn=1/Fn;else{const Un=Fn*Fe;on=yn=Un<1?1/Un:1}else if(Fe===0)on=1/Fn,yn=1/On;else{const Un=Fn*Fe,Wn=On*Fe;on=Un<1?1/Un:1,yn=Wn<1?1/Wn:1}}else{const Fn=Math.abs(De*an-Je*nn),On=Math.hypot(De,Je),Un=Math.hypot(nn,an);if(Fe===0)on=Un/Fn,yn=On/Fn;else{const Wn=Fe*Fn;on=Un>Wn?Un/Wn:1,yn=On>Wn?On/Wn:1}}this._cachedScaleForStroking[0]=on,this._cachedScaleForStroking[1]=yn}return this._cachedScaleForStroking}rescaleAndStroke(Fe){const{ctx:De}=this,{lineWidth:Je}=this.current,[nn,an]=this.getScaleForStroking();if(De.lineWidth=Je||1,nn===1&&an===1){De.stroke();return}const on=De.getLineDash();if(Fe&&De.save(),De.scale(nn,an),on.length>0){const yn=Math.max(nn,an);De.setLineDash(on.map(Fn=>Fn/yn)),De.lineDashOffset/=yn}De.stroke(),Fe&&De.restore()}isContentVisible(){for(let Fe=this.markedContentStack.length-1;Fe>=0;Fe--)if(!this.markedContentStack[Fe].visible)return!1;return!0}};En=new WeakSet,mc=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},bc=function(){if(this.pageColors){const Fe=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(Fe!=="none"){const De=this.ctx.filter;this.ctx.filter=Fe,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=De}}};let _n=In;t.CanvasGraphics=_n;for(const je in e.OPS)_n.prototype[je]!==void 0&&(_n.prototype[e.OPS[je]]=_n.prototype[je])},(Ae,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=Ce;var e=St(1),_e=St(6);const Se={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=Se;function Pe(Be,Ye){if(!Ye)return;const sn=Ye[2]-Ye[0],rn=Ye[3]-Ye[1],$e=new Path2D;$e.rect(Ye[0],Ye[1],sn,rn),Be.clip($e)}class Te{constructor(){this.constructor===Te&&(0,e.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,e.unreachable)("Abstract method `getPattern` called.")}}class Ee extends Te{constructor(Ye){super(),this._type=Ye[1],this._bbox=Ye[2],this._colorStops=Ye[3],this._p0=Ye[4],this._p1=Ye[5],this._r0=Ye[6],this._r1=Ye[7],this.matrix=null}_createGradient(Ye){let sn;this._type==="axial"?sn=Ye.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(sn=Ye.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const rn of this._colorStops)sn.addColorStop(rn[0],rn[1]);return sn}getPattern(Ye,sn,rn,$e){let tn;if($e===Se.STROKE||$e===Se.FILL){const Ve=sn.current.getClippedPathBoundingBox($e,(0,_e.getCurrentTransform)(Ye))||[0,0,0,0],ze=Math.ceil(Ve[2]-Ve[0])||1,Qe=Math.ceil(Ve[3]-Ve[1])||1,gn=sn.cachedCanvases.getCanvas("pattern",ze,Qe,!0),Me=gn.context;Me.clearRect(0,0,Me.canvas.width,Me.canvas.height),Me.beginPath(),Me.rect(0,0,Me.canvas.width,Me.canvas.height),Me.translate(-Ve[0],-Ve[1]),rn=e.Util.transform(rn,[1,0,0,1,Ve[0],Ve[1]]),Me.transform(...sn.baseTransform),this.matrix&&Me.transform(...this.matrix),Pe(Me,this._bbox),Me.fillStyle=this._createGradient(Me),Me.fill(),tn=Ye.createPattern(gn.canvas,"no-repeat");const Ue=new DOMMatrix(rn);tn.setTransform(Ue)}else Pe(Ye,this._bbox),tn=this._createGradient(Ye);return tn}}function Re(Be,Ye,sn,rn,$e,tn,Ve,ze){const Qe=Ye.coords,gn=Ye.colors,Me=Be.data,Ue=Be.width*4;let en;Qe[sn+1]>Qe[rn+1]&&(en=sn,sn=rn,rn=en,en=tn,tn=Ve,Ve=en),Qe[rn+1]>Qe[$e+1]&&(en=rn,rn=$e,$e=en,en=Ve,Ve=ze,ze=en),Qe[sn+1]>Qe[rn+1]&&(en=sn,sn=rn,rn=en,en=tn,tn=Ve,Ve=en);const pn=(Qe[sn]+Ye.offsetX)*Ye.scaleX,An=(Qe[sn+1]+Ye.offsetY)*Ye.scaleY,xn=(Qe[rn]+Ye.offsetX)*Ye.scaleX,_n=(Qe[rn+1]+Ye.offsetY)*Ye.scaleY,En=(Qe[$e]+Ye.offsetX)*Ye.scaleX,hn=(Qe[$e+1]+Ye.offsetY)*Ye.scaleY;if(An>=hn)return;const Sn=gn[tn],In=gn[tn+1],je=gn[tn+2],Fe=gn[Ve],De=gn[Ve+1],Je=gn[Ve+2],nn=gn[ze],an=gn[ze+1],on=gn[ze+2],yn=Math.round(An),Fn=Math.round(hn);let On,Un,Wn,ni,Dn,cn,qn,fn;for(let vn=yn;vn<=Fn;vn++){if(vn<_n){const ii=vn<An?0:(An-vn)/(An-_n);On=pn-(pn-xn)*ii,Un=Sn-(Sn-Fe)*ii,Wn=In-(In-De)*ii,ni=je-(je-Je)*ii}else{let ii;vn>hn?ii=1:_n===hn?ii=0:ii=(_n-vn)/(_n-hn),On=xn-(xn-En)*ii,Un=Fe-(Fe-nn)*ii,Wn=De-(De-an)*ii,ni=Je-(Je-on)*ii}let kn;vn<An?kn=0:vn>hn?kn=1:kn=(An-vn)/(An-hn),Dn=pn-(pn-En)*kn,cn=Sn-(Sn-nn)*kn,qn=In-(In-an)*kn,fn=je-(je-on)*kn;const Rn=Math.round(Math.min(On,Dn)),zn=Math.round(Math.max(On,Dn));let Qn=Ue*vn+Rn*4;for(let ii=Rn;ii<=zn;ii++)kn=(On-ii)/(On-Dn),kn<0?kn=0:kn>1&&(kn=1),Me[Qn++]=Un-(Un-cn)*kn|0,Me[Qn++]=Wn-(Wn-qn)*kn|0,Me[Qn++]=ni-(ni-fn)*kn|0,Me[Qn++]=255}}function Ie(Be,Ye,sn){const rn=Ye.coords,$e=Ye.colors;let tn,Ve;switch(Ye.type){case"lattice":const ze=Ye.verticesPerRow,Qe=Math.floor(rn.length/ze)-1,gn=ze-1;for(tn=0;tn<Qe;tn++){let Me=tn*ze;for(let Ue=0;Ue<gn;Ue++,Me++)Re(Be,sn,rn[Me],rn[Me+1],rn[Me+ze],$e[Me],$e[Me+1],$e[Me+ze]),Re(Be,sn,rn[Me+ze+1],rn[Me+1],rn[Me+ze],$e[Me+ze+1],$e[Me+1],$e[Me+ze])}break;case"triangles":for(tn=0,Ve=rn.length;tn<Ve;tn+=3)Re(Be,sn,rn[tn],rn[tn+1],rn[tn+2],$e[tn],$e[tn+1],$e[tn+2]);break;default:throw new Error("illegal figure")}}class qe extends Te{constructor(Ye){super(),this._coords=Ye[2],this._colors=Ye[3],this._figures=Ye[4],this._bounds=Ye[5],this._bbox=Ye[7],this._background=Ye[8],this.matrix=null}_createMeshCanvas(Ye,sn,rn){const ze=Math.floor(this._bounds[0]),Qe=Math.floor(this._bounds[1]),gn=Math.ceil(this._bounds[2])-ze,Me=Math.ceil(this._bounds[3])-Qe,Ue=Math.min(Math.ceil(Math.abs(gn*Ye[0]*1.1)),3e3),en=Math.min(Math.ceil(Math.abs(Me*Ye[1]*1.1)),3e3),pn=gn/Ue,An=Me/en,xn={coords:this._coords,colors:this._colors,offsetX:-ze,offsetY:-Qe,scaleX:1/pn,scaleY:1/An},_n=Ue+2*2,En=en+2*2,hn=rn.getCanvas("mesh",_n,En,!1),Sn=hn.context,In=Sn.createImageData(Ue,en);if(sn){const Fe=In.data;for(let De=0,Je=Fe.length;De<Je;De+=4)Fe[De]=sn[0],Fe[De+1]=sn[1],Fe[De+2]=sn[2],Fe[De+3]=255}for(const Fe of this._figures)Ie(In,Fe,xn);return Sn.putImageData(In,2,2),{canvas:hn.canvas,offsetX:ze-2*pn,offsetY:Qe-2*An,scaleX:pn,scaleY:An}}getPattern(Ye,sn,rn,$e){Pe(Ye,this._bbox);let tn;if($e===Se.SHADING)tn=e.Util.singularValueDecompose2dScale((0,_e.getCurrentTransform)(Ye));else if(tn=e.Util.singularValueDecompose2dScale(sn.baseTransform),this.matrix){const ze=e.Util.singularValueDecompose2dScale(this.matrix);tn=[tn[0]*ze[0],tn[1]*ze[1]]}const Ve=this._createMeshCanvas(tn,$e===Se.SHADING?null:this._background,sn.cachedCanvases);return $e!==Se.SHADING&&(Ye.setTransform(...sn.baseTransform),this.matrix&&Ye.transform(...this.matrix)),Ye.translate(Ve.offsetX,Ve.offsetY),Ye.scale(Ve.scaleX,Ve.scaleY),Ye.createPattern(Ve.canvas,"no-repeat")}}class Ge extends Te{getPattern(){return"hotpink"}}function Ce(Be){switch(Be[0]){case"RadialAxial":return new Ee(Be);case"Mesh":return new qe(Be);case"Dummy":return new Ge}throw new Error(`Unknown IR type: ${Be[0]}`)}const Xe={COLORED:1,UNCOLORED:2},Ke=class Ke{constructor(Ye,sn,rn,$e,tn){this.operatorList=Ye[2],this.matrix=Ye[3]||[1,0,0,1,0,0],this.bbox=Ye[4],this.xstep=Ye[5],this.ystep=Ye[6],this.paintType=Ye[7],this.tilingType=Ye[8],this.color=sn,this.ctx=rn,this.canvasGraphicsFactory=$e,this.baseTransform=tn}createPatternCanvas(Ye){const sn=this.operatorList,rn=this.bbox,$e=this.xstep,tn=this.ystep,Ve=this.paintType,ze=this.tilingType,Qe=this.color,gn=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+ze);const Me=rn[0],Ue=rn[1],en=rn[2],pn=rn[3],An=e.Util.singularValueDecompose2dScale(this.matrix),xn=e.Util.singularValueDecompose2dScale(this.baseTransform),_n=[An[0]*xn[0],An[1]*xn[1]],En=this.getSizeAndScale($e,this.ctx.canvas.width,_n[0]),hn=this.getSizeAndScale(tn,this.ctx.canvas.height,_n[1]),Sn=Ye.cachedCanvases.getCanvas("pattern",En.size,hn.size,!0),In=Sn.context,je=gn.createCanvasGraphics(In);je.groupLevel=Ye.groupLevel,this.setFillAndStrokeStyleToContext(je,Ve,Qe);let Fe=Me,De=Ue,Je=en,nn=pn;return Me<0&&(Fe=0,Je+=Math.abs(Me)),Ue<0&&(De=0,nn+=Math.abs(Ue)),In.translate(-(En.scale*Fe),-(hn.scale*De)),je.transform(En.scale,0,0,hn.scale,0,0),In.save(),this.clipBbox(je,Fe,De,Je,nn),je.baseTransform=(0,_e.getCurrentTransform)(je.ctx),je.executeOperatorList(sn),je.endDrawing(),{canvas:Sn.canvas,scaleX:En.scale,scaleY:hn.scale,offsetX:Fe,offsetY:De}}getSizeAndScale(Ye,sn,rn){Ye=Math.abs(Ye);const $e=Math.max(Ke.MAX_PATTERN_SIZE,sn);let tn=Math.ceil(Ye*rn);return tn>=$e?tn=$e:rn=tn/Ye,{scale:rn,size:tn}}clipBbox(Ye,sn,rn,$e,tn){const Ve=$e-sn,ze=tn-rn;Ye.ctx.rect(sn,rn,Ve,ze),Ye.current.updateRectMinMax((0,_e.getCurrentTransform)(Ye.ctx),[sn,rn,$e,tn]),Ye.clip(),Ye.endPath()}setFillAndStrokeStyleToContext(Ye,sn,rn){const $e=Ye.ctx,tn=Ye.current;switch(sn){case Xe.COLORED:const Ve=this.ctx;$e.fillStyle=Ve.fillStyle,$e.strokeStyle=Ve.strokeStyle,tn.fillColor=Ve.fillStyle,tn.strokeColor=Ve.strokeStyle;break;case Xe.UNCOLORED:const ze=e.Util.makeHexColor(rn[0],rn[1],rn[2]);$e.fillStyle=ze,$e.strokeStyle=ze,tn.fillColor=ze,tn.strokeColor=ze;break;default:throw new e.FormatError(`Unsupported paint type: ${sn}`)}}getPattern(Ye,sn,rn,$e){let tn=rn;$e!==Se.SHADING&&(tn=e.Util.transform(tn,sn.baseTransform),this.matrix&&(tn=e.Util.transform(tn,this.matrix)));const Ve=this.createPatternCanvas(sn);let ze=new DOMMatrix(tn);ze=ze.translate(Ve.offsetX,Ve.offsetY),ze=ze.scale(1/Ve.scaleX,1/Ve.scaleY);const Qe=Ye.createPattern(Ve.canvas,"repeat");return Qe.setTransform(ze),Qe}};cr(Ke,"MAX_PATTERN_SIZE",3e3);let We=Ke;t.TilingPattern=We},(Ae,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=Se,t.convertToRGBA=_e,t.grayToRGBA=Te;var e=St(1);function _e(Ee){switch(Ee.kind){case e.ImageKind.GRAYSCALE_1BPP:return Se(Ee);case e.ImageKind.RGB_24BPP:return Pe(Ee)}return null}function Se({src:Ee,srcPos:Re=0,dest:Ie,width:qe,height:Ge,nonBlackColor:Ce=4294967295,inverseDecode:Xe=!1}){const We=e.FeatureTest.isLittleEndian?4278190080:255,[Ke,Be]=Xe?[Ce,We]:[We,Ce],Ye=qe>>3,sn=qe&7,rn=Ee.length;Ie=new Uint32Array(Ie.buffer);let $e=0;for(let tn=0;tn<Ge;tn++){for(const ze=Re+Ye;Re<ze;Re++){const Qe=Re<rn?Ee[Re]:255;Ie[$e++]=Qe&128?Be:Ke,Ie[$e++]=Qe&64?Be:Ke,Ie[$e++]=Qe&32?Be:Ke,Ie[$e++]=Qe&16?Be:Ke,Ie[$e++]=Qe&8?Be:Ke,Ie[$e++]=Qe&4?Be:Ke,Ie[$e++]=Qe&2?Be:Ke,Ie[$e++]=Qe&1?Be:Ke}if(sn===0)continue;const Ve=Re<rn?Ee[Re++]:255;for(let ze=0;ze<sn;ze++)Ie[$e++]=Ve&1<<7-ze?Be:Ke}return{srcPos:Re,destPos:$e}}function Pe({src:Ee,srcPos:Re=0,dest:Ie,destPos:qe=0,width:Ge,height:Ce}){let Xe=0;const We=Ee.length>>2,Ke=new Uint32Array(Ee.buffer,Re,We);if(e.FeatureTest.isLittleEndian){for(;Xe<We-2;Xe+=3,qe+=4){const Be=Ke[Xe],Ye=Ke[Xe+1],sn=Ke[Xe+2];Ie[qe]=Be|4278190080,Ie[qe+1]=Be>>>24|Ye<<8|4278190080,Ie[qe+2]=Ye>>>16|sn<<16|4278190080,Ie[qe+3]=sn>>>8|4278190080}for(let Be=Xe*4,Ye=Ee.length;Be<Ye;Be+=3)Ie[qe++]=Ee[Be]|Ee[Be+1]<<8|Ee[Be+2]<<16|4278190080}else{for(;Xe<We-2;Xe+=3,qe+=4){const Be=Ke[Xe],Ye=Ke[Xe+1],sn=Ke[Xe+2];Ie[qe]=Be|255,Ie[qe+1]=Be<<24|Ye>>>8|255,Ie[qe+2]=Ye<<16|sn>>>16|255,Ie[qe+3]=sn<<8|255}for(let Be=Xe*4,Ye=Ee.length;Be<Ye;Be+=3)Ie[qe++]=Ee[Be]<<24|Ee[Be+1]<<16|Ee[Be+2]<<8|255}return{srcPos:Re,destPos:qe}}function Te(Ee,Re){if(e.FeatureTest.isLittleEndian)for(let Ie=0,qe=Ee.length;Ie<qe;Ie++)Re[Ie]=Ee[Ie]*65793|4278190080;else for(let Ie=0,qe=Ee.length;Ie<qe;Ie++)Re[Ie]=Ee[Ie]*16843008|255}},(Ae,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const St=Object.create(null);t.GlobalWorkerOptions=St,St.workerPort=null,St.workerSrc=""},(Ae,t,St)=>{var Ee,yh,Ah,el;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var e=St(1);const _e={DATA:1,ERROR:2},Se={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Pe(Ge){switch(Ge instanceof Error||typeof Ge=="object"&&Ge!==null||(0,e.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),Ge.name){case"AbortException":return new e.AbortException(Ge.message);case"MissingPDFException":return new e.MissingPDFException(Ge.message);case"PasswordException":return new e.PasswordException(Ge.message,Ge.code);case"UnexpectedResponseException":return new e.UnexpectedResponseException(Ge.message,Ge.status);case"UnknownErrorException":return new e.UnknownErrorException(Ge.message,Ge.details);default:return new e.UnknownErrorException(Ge.message,Ge.toString())}}class Te{constructor(Ce,Xe,We){Zn(this,Ee);this.sourceName=Ce,this.targetName=Xe,this.comObj=We,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=Ke=>{const Be=Ke.data;if(Be.targetName!==this.sourceName)return;if(Be.stream){Vn(this,Ee,Ah).call(this,Be);return}if(Be.callback){const sn=Be.callbackId,rn=this.callbackCapabilities[sn];if(!rn)throw new Error(`Cannot resolve callback ${sn}`);if(delete this.callbackCapabilities[sn],Be.callback===_e.DATA)rn.resolve(Be.data);else if(Be.callback===_e.ERROR)rn.reject(Pe(Be.reason));else throw new Error("Unexpected callback case");return}const Ye=this.actionHandler[Be.action];if(!Ye)throw new Error(`Unknown action from worker: ${Be.action}`);if(Be.callbackId){const sn=this.sourceName,rn=Be.sourceName;new Promise(function($e){$e(Ye(Be.data))}).then(function($e){We.postMessage({sourceName:sn,targetName:rn,callback:_e.DATA,callbackId:Be.callbackId,data:$e})},function($e){We.postMessage({sourceName:sn,targetName:rn,callback:_e.ERROR,callbackId:Be.callbackId,reason:Pe($e)})});return}if(Be.streamId){Vn(this,Ee,yh).call(this,Be);return}Ye(Be.data)},We.addEventListener("message",this._onComObjOnMessage)}on(Ce,Xe){const We=this.actionHandler;if(We[Ce])throw new Error(`There is already an actionName called "${Ce}"`);We[Ce]=Xe}send(Ce,Xe,We){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:Ce,data:Xe},We)}sendWithPromise(Ce,Xe,We){const Ke=this.callbackId++,Be=new e.PromiseCapability;this.callbackCapabilities[Ke]=Be;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:Ce,callbackId:Ke,data:Xe},We)}catch(Ye){Be.reject(Ye)}return Be.promise}sendWithStream(Ce,Xe,We,Ke){const Be=this.streamId++,Ye=this.sourceName,sn=this.targetName,rn=this.comObj;return new ReadableStream({start:$e=>{const tn=new e.PromiseCapability;return this.streamControllers[Be]={controller:$e,startCall:tn,pullCall:null,cancelCall:null,isClosed:!1},rn.postMessage({sourceName:Ye,targetName:sn,action:Ce,streamId:Be,data:Xe,desiredSize:$e.desiredSize},Ke),tn.promise},pull:$e=>{const tn=new e.PromiseCapability;return this.streamControllers[Be].pullCall=tn,rn.postMessage({sourceName:Ye,targetName:sn,stream:Se.PULL,streamId:Be,desiredSize:$e.desiredSize}),tn.promise},cancel:$e=>{(0,e.assert)($e instanceof Error,"cancel must have a valid reason");const tn=new e.PromiseCapability;return this.streamControllers[Be].cancelCall=tn,this.streamControllers[Be].isClosed=!0,rn.postMessage({sourceName:Ye,targetName:sn,stream:Se.CANCEL,streamId:Be,reason:Pe($e)}),tn.promise}},We)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Ee=new WeakSet,yh=function(Ce){const Xe=Ce.streamId,We=this.sourceName,Ke=Ce.sourceName,Be=this.comObj,Ye=this,sn=this.actionHandler[Ce.action],rn={enqueue($e,tn=1,Ve){if(this.isCancelled)return;const ze=this.desiredSize;this.desiredSize-=tn,ze>0&&this.desiredSize<=0&&(this.sinkCapability=new e.PromiseCapability,this.ready=this.sinkCapability.promise),Be.postMessage({sourceName:We,targetName:Ke,stream:Se.ENQUEUE,streamId:Xe,chunk:$e},Ve)},close(){this.isCancelled||(this.isCancelled=!0,Be.postMessage({sourceName:We,targetName:Ke,stream:Se.CLOSE,streamId:Xe}),delete Ye.streamSinks[Xe])},error($e){(0,e.assert)($e instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,Be.postMessage({sourceName:We,targetName:Ke,stream:Se.ERROR,streamId:Xe,reason:Pe($e)}))},sinkCapability:new e.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:Ce.desiredSize,ready:null};rn.sinkCapability.resolve(),rn.ready=rn.sinkCapability.promise,this.streamSinks[Xe]=rn,new Promise(function($e){$e(sn(Ce.data,rn))}).then(function(){Be.postMessage({sourceName:We,targetName:Ke,stream:Se.START_COMPLETE,streamId:Xe,success:!0})},function($e){Be.postMessage({sourceName:We,targetName:Ke,stream:Se.START_COMPLETE,streamId:Xe,reason:Pe($e)})})},Ah=function(Ce){const Xe=Ce.streamId,We=this.sourceName,Ke=Ce.sourceName,Be=this.comObj,Ye=this.streamControllers[Xe],sn=this.streamSinks[Xe];switch(Ce.stream){case Se.START_COMPLETE:Ce.success?Ye.startCall.resolve():Ye.startCall.reject(Pe(Ce.reason));break;case Se.PULL_COMPLETE:Ce.success?Ye.pullCall.resolve():Ye.pullCall.reject(Pe(Ce.reason));break;case Se.PULL:if(!sn){Be.postMessage({sourceName:We,targetName:Ke,stream:Se.PULL_COMPLETE,streamId:Xe,success:!0});break}sn.desiredSize<=0&&Ce.desiredSize>0&&sn.sinkCapability.resolve(),sn.desiredSize=Ce.desiredSize,new Promise(function(rn){var $e;rn(($e=sn.onPull)==null?void 0:$e.call(sn))}).then(function(){Be.postMessage({sourceName:We,targetName:Ke,stream:Se.PULL_COMPLETE,streamId:Xe,success:!0})},function(rn){Be.postMessage({sourceName:We,targetName:Ke,stream:Se.PULL_COMPLETE,streamId:Xe,reason:Pe(rn)})});break;case Se.ENQUEUE:if((0,e.assert)(Ye,"enqueue should have stream controller"),Ye.isClosed)break;Ye.controller.enqueue(Ce.chunk);break;case Se.CLOSE:if((0,e.assert)(Ye,"close should have stream controller"),Ye.isClosed)break;Ye.isClosed=!0,Ye.controller.close(),Vn(this,Ee,el).call(this,Ye,Xe);break;case Se.ERROR:(0,e.assert)(Ye,"error should have stream controller"),Ye.controller.error(Pe(Ce.reason)),Vn(this,Ee,el).call(this,Ye,Xe);break;case Se.CANCEL_COMPLETE:Ce.success?Ye.cancelCall.resolve():Ye.cancelCall.reject(Pe(Ce.reason)),Vn(this,Ee,el).call(this,Ye,Xe);break;case Se.CANCEL:if(!sn)break;new Promise(function(rn){var $e;rn(($e=sn.onCancel)==null?void 0:$e.call(sn,Pe(Ce.reason)))}).then(function(){Be.postMessage({sourceName:We,targetName:Ke,stream:Se.CANCEL_COMPLETE,streamId:Xe,success:!0})},function(rn){Be.postMessage({sourceName:We,targetName:Ke,stream:Se.CANCEL_COMPLETE,streamId:Xe,reason:Pe(rn)})}),sn.sinkCapability.reject(Pe(Ce.reason)),sn.isCancelled=!0,delete this.streamSinks[Xe];break;default:throw new Error("Unexpected stream case")}},el=async function(Ce,Xe){var We,Ke,Be;await Promise.allSettled([(We=Ce.startCall)==null?void 0:We.promise,(Ke=Ce.pullCall)==null?void 0:Ke.promise,(Be=Ce.cancelCall)==null?void 0:Be.promise]),delete this.streamControllers[Xe]},t.MessageHandler=Te},(Ae,t,St)=>{var Se,Pe;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var e=St(1);class _e{constructor({parsedData:Ee,rawData:Re}){Zn(this,Se);Zn(this,Pe);ei(this,Se,Ee),ei(this,Pe,Re)}getRaw(){return He(this,Pe)}get(Ee){return He(this,Se).get(Ee)??null}getAll(){return(0,e.objectFromMap)(He(this,Se))}has(Ee){return He(this,Se).has(Ee)}}Se=new WeakMap,Pe=new WeakMap,t.Metadata=_e},(Ae,t,St)=>{var Ee,Re,Ie,qe,Ge,Ce,vc;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var e=St(1),_e=St(8);const Se=Symbol("INTERNAL");class Pe{constructor(Ke,Be){Zn(this,Ee,!0);this.name=Ke,this.intent=Be}get visible(){return He(this,Ee)}_setVisible(Ke,Be){Ke!==Se&&(0,e.unreachable)("Internal method `_setVisible` called."),ei(this,Ee,Be)}}Ee=new WeakMap;class Te{constructor(Ke){Zn(this,Ce);Zn(this,Re,null);Zn(this,Ie,new Map);Zn(this,qe,null);Zn(this,Ge,null);if(this.name=null,this.creator=null,Ke!==null){this.name=Ke.name,this.creator=Ke.creator,ei(this,Ge,Ke.order);for(const Be of Ke.groups)He(this,Ie).set(Be.id,new Pe(Be.name,Be.intent));if(Ke.baseState==="OFF")for(const Be of He(this,Ie).values())Be._setVisible(Se,!1);for(const Be of Ke.on)He(this,Ie).get(Be)._setVisible(Se,!0);for(const Be of Ke.off)He(this,Ie).get(Be)._setVisible(Se,!1);ei(this,qe,this.getHash())}}isVisible(Ke){if(He(this,Ie).size===0)return!0;if(!Ke)return(0,e.warn)("Optional content group not defined."),!0;if(Ke.type==="OCG")return He(this,Ie).has(Ke.id)?He(this,Ie).get(Ke.id).visible:((0,e.warn)(`Optional content group not found: ${Ke.id}`),!0);if(Ke.type==="OCMD"){if(Ke.expression)return Vn(this,Ce,vc).call(this,Ke.expression);if(!Ke.policy||Ke.policy==="AnyOn"){for(const Be of Ke.ids){if(!He(this,Ie).has(Be))return(0,e.warn)(`Optional content group not found: ${Be}`),!0;if(He(this,Ie).get(Be).visible)return!0}return!1}else if(Ke.policy==="AllOn"){for(const Be of Ke.ids){if(!He(this,Ie).has(Be))return(0,e.warn)(`Optional content group not found: ${Be}`),!0;if(!He(this,Ie).get(Be).visible)return!1}return!0}else if(Ke.policy==="AnyOff"){for(const Be of Ke.ids){if(!He(this,Ie).has(Be))return(0,e.warn)(`Optional content group not found: ${Be}`),!0;if(!He(this,Ie).get(Be).visible)return!0}return!1}else if(Ke.policy==="AllOff"){for(const Be of Ke.ids){if(!He(this,Ie).has(Be))return(0,e.warn)(`Optional content group not found: ${Be}`),!0;if(He(this,Ie).get(Be).visible)return!1}return!0}return(0,e.warn)(`Unknown optional content policy ${Ke.policy}.`),!0}return(0,e.warn)(`Unknown group type ${Ke.type}.`),!0}setVisibility(Ke,Be=!0){if(!He(this,Ie).has(Ke)){(0,e.warn)(`Optional content group not found: ${Ke}`);return}He(this,Ie).get(Ke)._setVisible(Se,!!Be),ei(this,Re,null)}get hasInitialVisibility(){return He(this,qe)===null||this.getHash()===He(this,qe)}getOrder(){return He(this,Ie).size?He(this,Ge)?He(this,Ge).slice():[...He(this,Ie).keys()]:null}getGroups(){return He(this,Ie).size>0?(0,e.objectFromMap)(He(this,Ie)):null}getGroup(Ke){return He(this,Ie).get(Ke)||null}getHash(){if(He(this,Re)!==null)return He(this,Re);const Ke=new _e.MurmurHash3_64;for(const[Be,Ye]of He(this,Ie))Ke.update(`${Be}:${Ye.visible}`);return ei(this,Re,Ke.hexdigest())}}Re=new WeakMap,Ie=new WeakMap,qe=new WeakMap,Ge=new WeakMap,Ce=new WeakSet,vc=function(Ke){const Be=Ke.length;if(Be<2)return!0;const Ye=Ke[0];for(let sn=1;sn<Be;sn++){const rn=Ke[sn];let $e;if(Array.isArray(rn))$e=Vn(this,Ce,vc).call(this,rn);else if(He(this,Ie).has(rn))$e=He(this,Ie).get(rn).visible;else return(0,e.warn)(`Optional content group not found: ${rn}`),!0;switch(Ye){case"And":if(!$e)return!1;break;case"Or":if($e)return!0;break;case"Not":return!$e;default:return!0}}return Ye==="And"},t.OptionalContentConfig=Te},(Ae,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var e=St(1),_e=St(6);class Se{constructor({length:Re,initialData:Ie,progressiveDone:qe=!1,contentDispositionFilename:Ge=null,disableRange:Ce=!1,disableStream:Xe=!1},We){if((0,e.assert)(We,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=qe,this._contentDispositionFilename=Ge,(Ie==null?void 0:Ie.length)>0){const Ke=Ie instanceof Uint8Array&&Ie.byteLength===Ie.buffer.byteLength?Ie.buffer:new Uint8Array(Ie).buffer;this._queuedChunks.push(Ke)}this._pdfDataRangeTransport=We,this._isStreamingSupported=!Xe,this._isRangeSupported=!Ce,this._contentLength=Re,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((Ke,Be)=>{this._onReceiveData({begin:Ke,chunk:Be})}),this._pdfDataRangeTransport.addProgressListener((Ke,Be)=>{this._onProgress({loaded:Ke,total:Be})}),this._pdfDataRangeTransport.addProgressiveReadListener(Ke=>{this._onReceiveData({chunk:Ke})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:Re,chunk:Ie}){const qe=Ie instanceof Uint8Array&&Ie.byteLength===Ie.buffer.byteLength?Ie.buffer:new Uint8Array(Ie).buffer;if(Re===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(qe):this._queuedChunks.push(qe);else{const Ge=this._rangeReaders.some(function(Ce){return Ce._begin!==Re?!1:(Ce._enqueue(qe),!0)});(0,e.assert)(Ge,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var Re;return((Re=this._fullRequestReader)==null?void 0:Re._loaded)??0}_onProgress(Re){var Ie,qe,Ge,Ce;Re.total===void 0?(qe=(Ie=this._rangeReaders[0])==null?void 0:Ie.onProgress)==null||qe.call(Ie,{loaded:Re.loaded}):(Ce=(Ge=this._fullRequestReader)==null?void 0:Ge.onProgress)==null||Ce.call(Ge,{loaded:Re.loaded,total:Re.total})}_onProgressiveDone(){var Re;(Re=this._fullRequestReader)==null||Re.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(Re){const Ie=this._rangeReaders.indexOf(Re);Ie>=0&&this._rangeReaders.splice(Ie,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const Re=this._queuedChunks;return this._queuedChunks=null,new Pe(this,Re,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(Re,Ie){if(Ie<=this._progressiveDataLength)return null;const qe=new Te(this,Re,Ie);return this._pdfDataRangeTransport.requestDataRange(Re,Ie),this._rangeReaders.push(qe),qe}cancelAllRequests(Re){var Ie;(Ie=this._fullRequestReader)==null||Ie.cancel(Re);for(const qe of this._rangeReaders.slice(0))qe.cancel(Re);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=Se;class Pe{constructor(Re,Ie,qe=!1,Ge=null){this._stream=Re,this._done=qe||!1,this._filename=(0,_e.isPdfFile)(Ge)?Ge:null,this._queuedChunks=Ie||[],this._loaded=0;for(const Ce of this._queuedChunks)this._loaded+=Ce.byteLength;this._requests=[],this._headersReady=Promise.resolve(),Re._fullRequestReader=this,this.onProgress=null}_enqueue(Re){this._done||(this._requests.length>0?this._requests.shift().resolve({value:Re,done:!1}):this._queuedChunks.push(Re),this._loaded+=Re.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const Re=new e.PromiseCapability;return this._requests.push(Re),Re.promise}cancel(Re){this._done=!0;for(const Ie of this._requests)Ie.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Te{constructor(Re,Ie,qe){this._stream=Re,this._begin=Ie,this._end=qe,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(Re){if(!this._done){if(this._requests.length===0)this._queuedChunk=Re;else{this._requests.shift().resolve({value:Re,done:!1});for(const qe of this._requests)qe.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const Ie=this._queuedChunk;return this._queuedChunk=null,{value:Ie,done:!1}}if(this._done)return{value:void 0,done:!0};const Re=new e.PromiseCapability;return this._requests.push(Re),Re.promise}cancel(Re){this._done=!0;for(const Ie of this._requests)Ie.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(Ae,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var e=St(1),_e=St(20);function Se(qe,Ge,Ce){return{method:"GET",headers:qe,signal:Ce.signal,mode:"cors",credentials:Ge?"include":"same-origin",redirect:"follow"}}function Pe(qe){const Ge=new Headers;for(const Ce in qe){const Xe=qe[Ce];Xe!==void 0&&Ge.append(Ce,Xe)}return Ge}function Te(qe){return qe instanceof Uint8Array?qe.buffer:qe instanceof ArrayBuffer?qe:((0,e.warn)(`getArrayBuffer - unexpected data format: ${qe}`),new Uint8Array(qe).buffer)}class Ee{constructor(Ge){this.source=Ge,this.isHttp=/^https?:/i.test(Ge.url),this.httpHeaders=this.isHttp&&Ge.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Ge;return((Ge=this._fullRequestReader)==null?void 0:Ge._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Re(this),this._fullRequestReader}getRangeReader(Ge,Ce){if(Ce<=this._progressiveDataLength)return null;const Xe=new Ie(this,Ge,Ce);return this._rangeRequestReaders.push(Xe),Xe}cancelAllRequests(Ge){var Ce;(Ce=this._fullRequestReader)==null||Ce.cancel(Ge);for(const Xe of this._rangeRequestReaders.slice(0))Xe.cancel(Ge)}}t.PDFFetchStream=Ee;class Re{constructor(Ge){this._stream=Ge,this._reader=null,this._loaded=0,this._filename=null;const Ce=Ge.source;this._withCredentials=Ce.withCredentials||!1,this._contentLength=Ce.length,this._headersCapability=new e.PromiseCapability,this._disableRange=Ce.disableRange||!1,this._rangeChunkSize=Ce.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!Ce.disableStream,this._isRangeSupported=!Ce.disableRange,this._headers=Pe(this._stream.httpHeaders);const Xe=Ce.url;fetch(Xe,Se(this._headers,this._withCredentials,this._abortController)).then(We=>{if(!(0,_e.validateResponseStatus)(We.status))throw(0,_e.createResponseStatusError)(We.status,Xe);this._reader=We.body.getReader(),this._headersCapability.resolve();const Ke=sn=>We.headers.get(sn),{allowRangeRequests:Be,suggestedLength:Ye}=(0,_e.validateRangeRequestCapabilities)({getResponseHeader:Ke,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Be,this._contentLength=Ye||this._contentLength,this._filename=(0,_e.extractFilenameFromHeader)(Ke),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Xe;await this._headersCapability.promise;const{value:Ge,done:Ce}=await this._reader.read();return Ce?{value:Ge,done:Ce}:(this._loaded+=Ge.byteLength,(Xe=this.onProgress)==null||Xe.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Te(Ge),done:!1})}cancel(Ge){var Ce;(Ce=this._reader)==null||Ce.cancel(Ge),this._abortController.abort()}}class Ie{constructor(Ge,Ce,Xe){this._stream=Ge,this._reader=null,this._loaded=0;const We=Ge.source;this._withCredentials=We.withCredentials||!1,this._readCapability=new e.PromiseCapability,this._isStreamingSupported=!We.disableStream,this._abortController=new AbortController,this._headers=Pe(this._stream.httpHeaders),this._headers.append("Range",`bytes=${Ce}-${Xe-1}`);const Ke=We.url;fetch(Ke,Se(this._headers,this._withCredentials,this._abortController)).then(Be=>{if(!(0,_e.validateResponseStatus)(Be.status))throw(0,_e.createResponseStatusError)(Be.status,Ke);this._readCapability.resolve(),this._reader=Be.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Xe;await this._readCapability.promise;const{value:Ge,done:Ce}=await this._reader.read();return Ce?{value:Ge,done:Ce}:(this._loaded+=Ge.byteLength,(Xe=this.onProgress)==null||Xe.call(this,{loaded:this._loaded}),{value:Te(Ge),done:!1})}cancel(Ge){var Ce;(Ce=this._reader)==null||Ce.cancel(Ge),this._abortController.abort()}}},(Ae,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=Ee,t.extractFilenameFromHeader=Te,t.validateRangeRequestCapabilities=Pe,t.validateResponseStatus=Re;var e=St(1),_e=St(21),Se=St(6);function Pe({getResponseHeader:Ie,isHttp:qe,rangeChunkSize:Ge,disableRange:Ce}){const Xe={allowRangeRequests:!1,suggestedLength:void 0},We=parseInt(Ie("Content-Length"),10);return!Number.isInteger(We)||(Xe.suggestedLength=We,We<=2*Ge)||Ce||!qe||Ie("Accept-Ranges")!=="bytes"||(Ie("Content-Encoding")||"identity")!=="identity"||(Xe.allowRangeRequests=!0),Xe}function Te(Ie){const qe=Ie("Content-Disposition");if(qe){let Ge=(0,_e.getFilenameFromContentDispositionHeader)(qe);if(Ge.includes("%"))try{Ge=decodeURIComponent(Ge)}catch{}if((0,Se.isPdfFile)(Ge))return Ge}return null}function Ee(Ie,qe){return Ie===404||Ie===0&&qe.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+qe+'".'):new e.UnexpectedResponseException(`Unexpected server response (${Ie}) while retrieving PDF "${qe}".`,Ie)}function Re(Ie){return Ie===200||Ie===206}},(Ae,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=_e;var e=St(1);function _e(Se){let Pe=!0,Te=Ee("filename\\*","i").exec(Se);if(Te){Te=Te[1];let We=Ge(Te);return We=unescape(We),We=Ce(We),We=Xe(We),Ie(We)}if(Te=qe(Se),Te){const We=Xe(Te);return Ie(We)}if(Te=Ee("filename","i").exec(Se),Te){Te=Te[1];let We=Ge(Te);return We=Xe(We),Ie(We)}function Ee(We,Ke){return new RegExp("(?:^|;)\\s*"+We+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Ke)}function Re(We,Ke){if(We){if(!/^[\x00-\xFF]+$/.test(Ke))return Ke;try{const Be=new TextDecoder(We,{fatal:!0}),Ye=(0,e.stringToBytes)(Ke);Ke=Be.decode(Ye),Pe=!1}catch{}}return Ke}function Ie(We){return Pe&&/[\x80-\xff]/.test(We)&&(We=Re("utf-8",We),Pe&&(We=Re("iso-8859-1",We))),We}function qe(We){const Ke=[];let Be;const Ye=Ee("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(Be=Ye.exec(We))!==null;){let[,rn,$e,tn]=Be;if(rn=parseInt(rn,10),rn in Ke){if(rn===0)break;continue}Ke[rn]=[$e,tn]}const sn=[];for(let rn=0;rn<Ke.length&&rn in Ke;++rn){let[$e,tn]=Ke[rn];tn=Ge(tn),$e&&(tn=unescape(tn),rn===0&&(tn=Ce(tn))),sn.push(tn)}return sn.join("")}function Ge(We){if(We.startsWith('"')){const Ke=We.slice(1).split('\\"');for(let Be=0;Be<Ke.length;++Be){const Ye=Ke[Be].indexOf('"');Ye!==-1&&(Ke[Be]=Ke[Be].slice(0,Ye),Ke.length=Be+1),Ke[Be]=Ke[Be].replaceAll(/\\(.)/g,"$1")}We=Ke.join('"')}return We}function Ce(We){const Ke=We.indexOf("'");if(Ke===-1)return We;const Be=We.slice(0,Ke),sn=We.slice(Ke+1).replace(/^[^']*'/,"");return Re(Be,sn)}function Xe(We){return!We.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(We)?We:We.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Ke,Be,Ye,sn){if(Ye==="q"||Ye==="Q")return sn=sn.replaceAll("_"," "),sn=sn.replaceAll(/=([0-9a-fA-F]{2})/g,function(rn,$e){return String.fromCharCode(parseInt($e,16))}),Re(Be,sn);try{sn=atob(sn)}catch{}return Re(Be,sn)})}return""}},(Ae,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var e=St(1),_e=St(20);const Se=200,Pe=206;function Te(Ge){const Ce=Ge.response;return typeof Ce!="string"?Ce:(0,e.stringToBytes)(Ce).buffer}class Ee{constructor(Ce,Xe={}){this.url=Ce,this.isHttp=/^https?:/i.test(Ce),this.httpHeaders=this.isHttp&&Xe.httpHeaders||Object.create(null),this.withCredentials=Xe.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(Ce,Xe,We){const Ke={begin:Ce,end:Xe};for(const Be in We)Ke[Be]=We[Be];return this.request(Ke)}requestFull(Ce){return this.request(Ce)}request(Ce){const Xe=new XMLHttpRequest,We=this.currXhrId++,Ke=this.pendingRequests[We]={xhr:Xe};Xe.open("GET",this.url),Xe.withCredentials=this.withCredentials;for(const Be in this.httpHeaders){const Ye=this.httpHeaders[Be];Ye!==void 0&&Xe.setRequestHeader(Be,Ye)}return this.isHttp&&"begin"in Ce&&"end"in Ce?(Xe.setRequestHeader("Range",`bytes=${Ce.begin}-${Ce.end-1}`),Ke.expectedStatus=Pe):Ke.expectedStatus=Se,Xe.responseType="arraybuffer",Ce.onError&&(Xe.onerror=function(Be){Ce.onError(Xe.status)}),Xe.onreadystatechange=this.onStateChange.bind(this,We),Xe.onprogress=this.onProgress.bind(this,We),Ke.onHeadersReceived=Ce.onHeadersReceived,Ke.onDone=Ce.onDone,Ke.onError=Ce.onError,Ke.onProgress=Ce.onProgress,Xe.send(null),We}onProgress(Ce,Xe){var Ke;const We=this.pendingRequests[Ce];We&&((Ke=We.onProgress)==null||Ke.call(We,Xe))}onStateChange(Ce,Xe){var rn,$e,tn;const We=this.pendingRequests[Ce];if(!We)return;const Ke=We.xhr;if(Ke.readyState>=2&&We.onHeadersReceived&&(We.onHeadersReceived(),delete We.onHeadersReceived),Ke.readyState!==4||!(Ce in this.pendingRequests))return;if(delete this.pendingRequests[Ce],Ke.status===0&&this.isHttp){(rn=We.onError)==null||rn.call(We,Ke.status);return}const Be=Ke.status||Se;if(!(Be===Se&&We.expectedStatus===Pe)&&Be!==We.expectedStatus){($e=We.onError)==null||$e.call(We,Ke.status);return}const sn=Te(Ke);if(Be===Pe){const Ve=Ke.getResponseHeader("Content-Range"),ze=/bytes (\d+)-(\d+)\/(\d+)/.exec(Ve);We.onDone({begin:parseInt(ze[1],10),chunk:sn})}else sn?We.onDone({begin:0,chunk:sn}):(tn=We.onError)==null||tn.call(We,Ke.status)}getRequestXhr(Ce){return this.pendingRequests[Ce].xhr}isPendingRequest(Ce){return Ce in this.pendingRequests}abortRequest(Ce){const Xe=this.pendingRequests[Ce].xhr;delete this.pendingRequests[Ce],Xe.abort()}}class Re{constructor(Ce){this._source=Ce,this._manager=new Ee(Ce.url,{httpHeaders:Ce.httpHeaders,withCredentials:Ce.withCredentials}),this._rangeChunkSize=Ce.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(Ce){const Xe=this._rangeRequestReaders.indexOf(Ce);Xe>=0&&this._rangeRequestReaders.splice(Xe,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Ie(this._manager,this._source),this._fullRequestReader}getRangeReader(Ce,Xe){const We=new qe(this._manager,Ce,Xe);return We.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(We),We}cancelAllRequests(Ce){var Xe;(Xe=this._fullRequestReader)==null||Xe.cancel(Ce);for(const We of this._rangeRequestReaders.slice(0))We.cancel(Ce)}}t.PDFNetworkStream=Re;class Ie{constructor(Ce,Xe){this._manager=Ce;const We={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Xe.url,this._fullRequestId=Ce.requestFull(We),this._headersReceivedCapability=new e.PromiseCapability,this._disableRange=Xe.disableRange||!1,this._contentLength=Xe.length,this._rangeChunkSize=Xe.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const Ce=this._fullRequestId,Xe=this._manager.getRequestXhr(Ce),We=Ye=>Xe.getResponseHeader(Ye),{allowRangeRequests:Ke,suggestedLength:Be}=(0,_e.validateRangeRequestCapabilities)({getResponseHeader:We,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});Ke&&(this._isRangeSupported=!0),this._contentLength=Be||this._contentLength,this._filename=(0,_e.extractFilenameFromHeader)(We),this._isRangeSupported&&this._manager.abortRequest(Ce),this._headersReceivedCapability.resolve()}_onDone(Ce){if(Ce&&(this._requests.length>0?this._requests.shift().resolve({value:Ce.chunk,done:!1}):this._cachedChunks.push(Ce.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const Xe of this._requests)Xe.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(Ce){this._storedError=(0,_e.createResponseStatusError)(Ce,this._url),this._headersReceivedCapability.reject(this._storedError);for(const Xe of this._requests)Xe.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(Ce){var Xe;(Xe=this.onProgress)==null||Xe.call(this,{loaded:Ce.loaded,total:Ce.lengthComputable?Ce.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const Ce=new e.PromiseCapability;return this._requests.push(Ce),Ce.promise}cancel(Ce){this._done=!0,this._headersReceivedCapability.reject(Ce);for(const Xe of this._requests)Xe.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class qe{constructor(Ce,Xe,We){this._manager=Ce;const Ke={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Ce.url,this._requestId=Ce.requestRange(Xe,We,Ke),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var Ce;(Ce=this.onClosed)==null||Ce.call(this,this)}_onDone(Ce){const Xe=Ce.chunk;this._requests.length>0?this._requests.shift().resolve({value:Xe,done:!1}):this._queuedChunk=Xe,this._done=!0;for(const We of this._requests)We.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(Ce){this._storedError=(0,_e.createResponseStatusError)(Ce,this._url);for(const Xe of this._requests)Xe.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(Ce){var Xe;this.isStreamingSupported||(Xe=this.onProgress)==null||Xe.call(this,{loaded:Ce.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const Xe=this._queuedChunk;return this._queuedChunk=null,{value:Xe,done:!1}}if(this._done)return{value:void 0,done:!0};const Ce=new e.PromiseCapability;return this._requests.push(Ce),Ce.promise}cancel(Ce){this._done=!0;for(const Xe of this._requests)Xe.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(Ae,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var e=St(1),_e=St(20);const Se=/^file:\/\/\/[a-zA-Z]:\//;function Pe(We){const Ke=require$$5,Be=Ke.parse(We);return Be.protocol==="file:"||Be.host?Be:/^[a-z]:[/\\]/i.test(We)?Ke.parse(`file:///${We}`):(Be.host||(Be.protocol="file:"),Be)}class Te{constructor(Ke){this.source=Ke,this.url=Pe(Ke.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&Ke.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Ke;return((Ke=this._fullRequestReader)==null?void 0:Ke._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Ce(this):new qe(this),this._fullRequestReader}getRangeReader(Ke,Be){if(Be<=this._progressiveDataLength)return null;const Ye=this.isFsUrl?new Xe(this,Ke,Be):new Ge(this,Ke,Be);return this._rangeRequestReaders.push(Ye),Ye}cancelAllRequests(Ke){var Be;(Be=this._fullRequestReader)==null||Be.cancel(Ke);for(const Ye of this._rangeRequestReaders.slice(0))Ye.cancel(Ke)}}t.PDFNodeStream=Te;class Ee{constructor(Ke){this._url=Ke.url,this._done=!1,this._storedError=null,this.onProgress=null;const Be=Ke.source;this._contentLength=Be.length,this._loaded=0,this._filename=null,this._disableRange=Be.disableRange||!1,this._rangeChunkSize=Be.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!Be.disableStream,this._isRangeSupported=!Be.disableRange,this._readableStream=null,this._readCapability=new e.PromiseCapability,this._headersCapability=new e.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Ye;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Ke=this._readableStream.read();return Ke===null?(this._readCapability=new e.PromiseCapability,this.read()):(this._loaded+=Ke.length,(Ye=this.onProgress)==null||Ye.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(Ke).buffer,done:!1})}cancel(Ke){if(!this._readableStream){this._error(Ke);return}this._readableStream.destroy(Ke)}_error(Ke){this._storedError=Ke,this._readCapability.resolve()}_setReadableStream(Ke){this._readableStream=Ke,Ke.on("readable",()=>{this._readCapability.resolve()}),Ke.on("end",()=>{Ke.destroy(),this._done=!0,this._readCapability.resolve()}),Ke.on("error",Be=>{this._error(Be)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Re{constructor(Ke){this._url=Ke.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new e.PromiseCapability;const Be=Ke.source;this._isStreamingSupported=!Be.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Ye;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Ke=this._readableStream.read();return Ke===null?(this._readCapability=new e.PromiseCapability,this.read()):(this._loaded+=Ke.length,(Ye=this.onProgress)==null||Ye.call(this,{loaded:this._loaded}),{value:new Uint8Array(Ke).buffer,done:!1})}cancel(Ke){if(!this._readableStream){this._error(Ke);return}this._readableStream.destroy(Ke)}_error(Ke){this._storedError=Ke,this._readCapability.resolve()}_setReadableStream(Ke){this._readableStream=Ke,Ke.on("readable",()=>{this._readCapability.resolve()}),Ke.on("end",()=>{Ke.destroy(),this._done=!0,this._readCapability.resolve()}),Ke.on("error",Be=>{this._error(Be)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Ie(We,Ke){return{protocol:We.protocol,auth:We.auth,host:We.hostname,port:We.port,path:We.path,method:"GET",headers:Ke}}class qe extends Ee{constructor(Ke){super(Ke);const Be=Ye=>{if(Ye.statusCode===404){const tn=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=tn,this._headersCapability.reject(tn);return}this._headersCapability.resolve(),this._setReadableStream(Ye);const sn=tn=>this._readableStream.headers[tn.toLowerCase()],{allowRangeRequests:rn,suggestedLength:$e}=(0,_e.validateRangeRequestCapabilities)({getResponseHeader:sn,isHttp:Ke.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=rn,this._contentLength=$e||this._contentLength,this._filename=(0,_e.extractFilenameFromHeader)(sn)};if(this._request=null,this._url.protocol==="http:"){const Ye=require$$5;this._request=Ye.request(Ie(this._url,Ke.httpHeaders),Be)}else{const Ye=require$$5;this._request=Ye.request(Ie(this._url,Ke.httpHeaders),Be)}this._request.on("error",Ye=>{this._storedError=Ye,this._headersCapability.reject(Ye)}),this._request.end()}}class Ge extends Re{constructor(Ke,Be,Ye){super(Ke),this._httpHeaders={};for(const rn in Ke.httpHeaders){const $e=Ke.httpHeaders[rn];$e!==void 0&&(this._httpHeaders[rn]=$e)}this._httpHeaders.Range=`bytes=${Be}-${Ye-1}`;const sn=rn=>{if(rn.statusCode===404){const $e=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=$e;return}this._setReadableStream(rn)};if(this._request=null,this._url.protocol==="http:"){const rn=require$$5;this._request=rn.request(Ie(this._url,this._httpHeaders),sn)}else{const rn=require$$5;this._request=rn.request(Ie(this._url,this._httpHeaders),sn)}this._request.on("error",rn=>{this._storedError=rn}),this._request.end()}}class Ce extends Ee{constructor(Ke){super(Ke);let Be=decodeURIComponent(this._url.path);Se.test(this._url.href)&&(Be=Be.replace(/^\//,""));const Ye=require$$5;Ye.lstat(Be,(sn,rn)=>{if(sn){sn.code==="ENOENT"&&(sn=new e.MissingPDFException(`Missing PDF "${Be}".`)),this._storedError=sn,this._headersCapability.reject(sn);return}this._contentLength=rn.size,this._setReadableStream(Ye.createReadStream(Be)),this._headersCapability.resolve()})}}class Xe extends Re{constructor(Ke,Be,Ye){super(Ke);let sn=decodeURIComponent(this._url.path);Se.test(this._url.href)&&(sn=sn.replace(/^\//,""));const rn=require$$5;this._setReadableStream(rn.createReadStream(sn,{start:Be,end:Ye-1}))}}},(Ae,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var e=St(6),_e=St(1);const Se={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},Pe="http://www.w3.org/XML/1998/namespace",Te="http://www.w3.org/1999/xlink",Ee=["butt","round","square"],Re=["miter","round","bevel"],Ie=function(rn,$e="",tn=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!tn)return URL.createObjectURL(new Blob([rn],{type:$e}));const Ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let ze=`data:${$e};base64,`;for(let Qe=0,gn=rn.length;Qe<gn;Qe+=3){const Me=rn[Qe]&255,Ue=rn[Qe+1]&255,en=rn[Qe+2]&255,pn=Me>>2,An=(Me&3)<<4|Ue>>4,xn=Qe+1<gn?(Ue&15)<<2|en>>6:64,_n=Qe+2<gn?en&63:64;ze+=Ve[pn]+Ve[An]+Ve[xn]+Ve[_n]}return ze},qe=function(){const rn=new Uint8Array([137,80,78,71,13,10,26,10]),$e=12,tn=new Int32Array(256);for(let en=0;en<256;en++){let pn=en;for(let An=0;An<8;An++)pn=pn&1?3988292384^pn>>1&2147483647:pn>>1&2147483647;tn[en]=pn}function Ve(en,pn,An){let xn=-1;for(let _n=pn;_n<An;_n++){const En=(xn^en[_n])&255,hn=tn[En];xn=xn>>>8^hn}return xn^-1}function ze(en,pn,An,xn){let _n=xn;const En=pn.length;An[_n]=En>>24&255,An[_n+1]=En>>16&255,An[_n+2]=En>>8&255,An[_n+3]=En&255,_n+=4,An[_n]=en.charCodeAt(0)&255,An[_n+1]=en.charCodeAt(1)&255,An[_n+2]=en.charCodeAt(2)&255,An[_n+3]=en.charCodeAt(3)&255,_n+=4,An.set(pn,_n),_n+=pn.length;const hn=Ve(An,xn+4,_n);An[_n]=hn>>24&255,An[_n+1]=hn>>16&255,An[_n+2]=hn>>8&255,An[_n+3]=hn&255}function Qe(en,pn,An){let xn=1,_n=0;for(let En=pn;En<An;++En)xn=(xn+(en[En]&255))%65521,_n=(_n+xn)%65521;return _n<<16|xn}function gn(en){if(!_e.isNodeJS)return Me(en);try{const pn=parseInt(process.versions.node)>=8?en:Buffer.from(en),An=require$$5.deflateSync(pn,{level:9});return An instanceof Uint8Array?An:new Uint8Array(An)}catch(pn){(0,_e.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+pn)}return Me(en)}function Me(en){let pn=en.length;const An=65535,xn=Math.ceil(pn/An),_n=new Uint8Array(2+pn+xn*5+4);let En=0;_n[En++]=120,_n[En++]=156;let hn=0;for(;pn>An;)_n[En++]=0,_n[En++]=255,_n[En++]=255,_n[En++]=0,_n[En++]=0,_n.set(en.subarray(hn,hn+An),En),En+=An,hn+=An,pn-=An;_n[En++]=1,_n[En++]=pn&255,_n[En++]=pn>>8&255,_n[En++]=~pn&65535&255,_n[En++]=(~pn&65535)>>8&255,_n.set(en.subarray(hn),En),En+=en.length-hn;const Sn=Qe(en,0,en.length);return _n[En++]=Sn>>24&255,_n[En++]=Sn>>16&255,_n[En++]=Sn>>8&255,_n[En++]=Sn&255,_n}function Ue(en,pn,An,xn){const _n=en.width,En=en.height;let hn,Sn,In;const je=en.data;switch(pn){case _e.ImageKind.GRAYSCALE_1BPP:Sn=0,hn=1,In=_n+7>>3;break;case _e.ImageKind.RGB_24BPP:Sn=2,hn=8,In=_n*3;break;case _e.ImageKind.RGBA_32BPP:Sn=6,hn=8,In=_n*4;break;default:throw new Error("invalid format")}const Fe=new Uint8Array((1+In)*En);let De=0,Je=0;for(let On=0;On<En;++On)Fe[De++]=0,Fe.set(je.subarray(Je,Je+In),De),Je+=In,De+=In;if(pn===_e.ImageKind.GRAYSCALE_1BPP&&xn){De=0;for(let On=0;On<En;On++){De++;for(let Un=0;Un<In;Un++)Fe[De++]^=255}}const nn=new Uint8Array([_n>>24&255,_n>>16&255,_n>>8&255,_n&255,En>>24&255,En>>16&255,En>>8&255,En&255,hn,Sn,0,0,0]),an=gn(Fe),on=rn.length+$e*3+nn.length+an.length,yn=new Uint8Array(on);let Fn=0;return yn.set(rn,Fn),Fn+=rn.length,ze("IHDR",nn,yn,Fn),Fn+=$e+nn.length,ze("IDATA",an,yn,Fn),Fn+=$e+an.length,ze("IEND",new Uint8Array(0),yn,Fn),Ie(yn,"image/png",An)}return function(pn,An,xn){const _n=pn.kind===void 0?_e.ImageKind.GRAYSCALE_1BPP:pn.kind;return Ue(pn,_n,An,xn)}}();class Ge{constructor(){this.fontSizeScale=1,this.fontWeight=Se.fontWeight,this.fontSize=0,this.textMatrix=_e.IDENTITY_MATRIX,this.fontMatrix=_e.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=_e.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Se.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint($e,tn){this.x=$e,this.y=tn}}function Ce(rn){let $e=[];const tn=[];for(const Ve of rn){if(Ve.fn==="save"){$e.push({fnId:92,fn:"group",items:[]}),tn.push($e),$e=$e.at(-1).items;continue}Ve.fn==="restore"?$e=tn.pop():$e.push(Ve)}return $e}function Xe(rn){if(Number.isInteger(rn))return rn.toString();const $e=rn.toFixed(10);let tn=$e.length-1;if($e[tn]!=="0")return $e;do tn--;while($e[tn]==="0");return $e.substring(0,$e[tn]==="."?tn:tn+1)}function We(rn){if(rn[4]===0&&rn[5]===0){if(rn[1]===0&&rn[2]===0)return rn[0]===1&&rn[3]===1?"":`scale(${Xe(rn[0])} ${Xe(rn[3])})`;if(rn[0]===rn[3]&&rn[1]===-rn[2]){const $e=Math.acos(rn[0])*180/Math.PI;return`rotate(${Xe($e)})`}}else if(rn[0]===1&&rn[1]===0&&rn[2]===0&&rn[3]===1)return`translate(${Xe(rn[4])} ${Xe(rn[5])})`;return`matrix(${Xe(rn[0])} ${Xe(rn[1])} ${Xe(rn[2])} ${Xe(rn[3])} ${Xe(rn[4])} ${Xe(rn[5])})`}let Ke=0,Be=0,Ye=0;class sn{constructor($e,tn,Ve=!1){(0,e.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new e.DOMSVGFactory,this.current=new Ge,this.transformMatrix=_e.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=$e,this.objs=tn,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Ve,this._operatorIdMapping=[];for(const ze in _e.OPS)this._operatorIdMapping[_e.OPS[ze]]=ze}getObject($e,tn=null){return typeof $e=="string"?$e.startsWith("g_")?this.commonObjs.get($e):this.objs.get($e):tn}save(){this.transformStack.push(this.transformMatrix);const $e=this.current;this.extraStack.push($e),this.current=$e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group($e){this.save(),this.executeOpTree($e),this.restore()}loadDependencies($e){const tn=$e.fnArray,Ve=$e.argsArray;for(let ze=0,Qe=tn.length;ze<Qe;ze++)if(tn[ze]===_e.OPS.dependency)for(const gn of Ve[ze]){const Me=gn.startsWith("g_")?this.commonObjs:this.objs,Ue=new Promise(en=>{Me.get(gn,en)});this.current.dependencies.push(Ue)}return Promise.all(this.current.dependencies)}transform($e,tn,Ve,ze,Qe,gn){const Me=[$e,tn,Ve,ze,Qe,gn];this.transformMatrix=_e.Util.transform(this.transformMatrix,Me),this.tgrp=null}getSVG($e,tn){this.viewport=tn;const Ve=this._initialize(tn);return this.loadDependencies($e).then(()=>(this.transformMatrix=_e.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList($e)),Ve))}convertOpList($e){const tn=this._operatorIdMapping,Ve=$e.argsArray,ze=$e.fnArray,Qe=[];for(let gn=0,Me=ze.length;gn<Me;gn++){const Ue=ze[gn];Qe.push({fnId:Ue,fn:tn[Ue],args:Ve[gn]})}return Ce(Qe)}executeOpTree($e){for(const tn of $e){const Ve=tn.fn,ze=tn.fnId,Qe=tn.args;switch(ze|0){case _e.OPS.beginText:this.beginText();break;case _e.OPS.dependency:break;case _e.OPS.setLeading:this.setLeading(Qe);break;case _e.OPS.setLeadingMoveText:this.setLeadingMoveText(Qe[0],Qe[1]);break;case _e.OPS.setFont:this.setFont(Qe);break;case _e.OPS.showText:this.showText(Qe[0]);break;case _e.OPS.showSpacedText:this.showText(Qe[0]);break;case _e.OPS.endText:this.endText();break;case _e.OPS.moveText:this.moveText(Qe[0],Qe[1]);break;case _e.OPS.setCharSpacing:this.setCharSpacing(Qe[0]);break;case _e.OPS.setWordSpacing:this.setWordSpacing(Qe[0]);break;case _e.OPS.setHScale:this.setHScale(Qe[0]);break;case _e.OPS.setTextMatrix:this.setTextMatrix(Qe[0],Qe[1],Qe[2],Qe[3],Qe[4],Qe[5]);break;case _e.OPS.setTextRise:this.setTextRise(Qe[0]);break;case _e.OPS.setTextRenderingMode:this.setTextRenderingMode(Qe[0]);break;case _e.OPS.setLineWidth:this.setLineWidth(Qe[0]);break;case _e.OPS.setLineJoin:this.setLineJoin(Qe[0]);break;case _e.OPS.setLineCap:this.setLineCap(Qe[0]);break;case _e.OPS.setMiterLimit:this.setMiterLimit(Qe[0]);break;case _e.OPS.setFillRGBColor:this.setFillRGBColor(Qe[0],Qe[1],Qe[2]);break;case _e.OPS.setStrokeRGBColor:this.setStrokeRGBColor(Qe[0],Qe[1],Qe[2]);break;case _e.OPS.setStrokeColorN:this.setStrokeColorN(Qe);break;case _e.OPS.setFillColorN:this.setFillColorN(Qe);break;case _e.OPS.shadingFill:this.shadingFill(Qe[0]);break;case _e.OPS.setDash:this.setDash(Qe[0],Qe[1]);break;case _e.OPS.setRenderingIntent:this.setRenderingIntent(Qe[0]);break;case _e.OPS.setFlatness:this.setFlatness(Qe[0]);break;case _e.OPS.setGState:this.setGState(Qe[0]);break;case _e.OPS.fill:this.fill();break;case _e.OPS.eoFill:this.eoFill();break;case _e.OPS.stroke:this.stroke();break;case _e.OPS.fillStroke:this.fillStroke();break;case _e.OPS.eoFillStroke:this.eoFillStroke();break;case _e.OPS.clip:this.clip("nonzero");break;case _e.OPS.eoClip:this.clip("evenodd");break;case _e.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _e.OPS.paintImageXObject:this.paintImageXObject(Qe[0]);break;case _e.OPS.paintInlineImageXObject:this.paintInlineImageXObject(Qe[0]);break;case _e.OPS.paintImageMaskXObject:this.paintImageMaskXObject(Qe[0]);break;case _e.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(Qe[0],Qe[1]);break;case _e.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _e.OPS.closePath:this.closePath();break;case _e.OPS.closeStroke:this.closeStroke();break;case _e.OPS.closeFillStroke:this.closeFillStroke();break;case _e.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _e.OPS.nextLine:this.nextLine();break;case _e.OPS.transform:this.transform(Qe[0],Qe[1],Qe[2],Qe[3],Qe[4],Qe[5]);break;case _e.OPS.constructPath:this.constructPath(Qe[0],Qe[1]);break;case _e.OPS.endPath:this.endPath();break;case 92:this.group(tn.items);break;default:(0,_e.warn)(`Unimplemented operator ${Ve}`);break}}}setWordSpacing($e){this.current.wordSpacing=$e}setCharSpacing($e){this.current.charSpacing=$e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix($e,tn,Ve,ze,Qe,gn){const Me=this.current;Me.textMatrix=Me.lineMatrix=[$e,tn,Ve,ze,Qe,gn],Me.textMatrixScale=Math.hypot($e,tn),Me.x=Me.lineX=0,Me.y=Me.lineY=0,Me.xcoords=[],Me.ycoords=[],Me.tspan=this.svgFactory.createElement("svg:tspan"),Me.tspan.setAttributeNS(null,"font-family",Me.fontFamily),Me.tspan.setAttributeNS(null,"font-size",`${Xe(Me.fontSize)}px`),Me.tspan.setAttributeNS(null,"y",Xe(-Me.y)),Me.txtElement=this.svgFactory.createElement("svg:text"),Me.txtElement.append(Me.tspan)}beginText(){const $e=this.current;$e.x=$e.lineX=0,$e.y=$e.lineY=0,$e.textMatrix=_e.IDENTITY_MATRIX,$e.lineMatrix=_e.IDENTITY_MATRIX,$e.textMatrixScale=1,$e.tspan=this.svgFactory.createElement("svg:tspan"),$e.txtElement=this.svgFactory.createElement("svg:text"),$e.txtgrp=this.svgFactory.createElement("svg:g"),$e.xcoords=[],$e.ycoords=[]}moveText($e,tn){const Ve=this.current;Ve.x=Ve.lineX+=$e,Ve.y=Ve.lineY+=tn,Ve.xcoords=[],Ve.ycoords=[],Ve.tspan=this.svgFactory.createElement("svg:tspan"),Ve.tspan.setAttributeNS(null,"font-family",Ve.fontFamily),Ve.tspan.setAttributeNS(null,"font-size",`${Xe(Ve.fontSize)}px`),Ve.tspan.setAttributeNS(null,"y",Xe(-Ve.y))}showText($e){const tn=this.current,Ve=tn.font,ze=tn.fontSize;if(ze===0)return;const Qe=tn.fontSizeScale,gn=tn.charSpacing,Me=tn.wordSpacing,Ue=tn.fontDirection,en=tn.textHScale*Ue,pn=Ve.vertical,An=pn?1:-1,xn=Ve.defaultVMetrics,_n=ze*tn.fontMatrix[0];let En=0;for(const In of $e){if(In===null){En+=Ue*Me;continue}else if(typeof In=="number"){En+=An*In*ze/1e3;continue}const je=(In.isSpace?Me:0)+gn,Fe=In.fontChar;let De,Je,nn=In.width;if(pn){let on;const yn=In.vmetric||xn;on=In.vmetric?yn[1]:nn*.5,on=-on*_n;const Fn=yn[2]*_n;nn=yn?-yn[0]:nn,De=on/Qe,Je=(En+Fn)/Qe}else De=En/Qe,Je=0;(In.isInFont||Ve.missingFile)&&(tn.xcoords.push(tn.x+De),pn&&tn.ycoords.push(-tn.y+Je),tn.tspan.textContent+=Fe);const an=pn?nn*_n-je*Ue:nn*_n+je*Ue;En+=an}tn.tspan.setAttributeNS(null,"x",tn.xcoords.map(Xe).join(" ")),pn?tn.tspan.setAttributeNS(null,"y",tn.ycoords.map(Xe).join(" ")):tn.tspan.setAttributeNS(null,"y",Xe(-tn.y)),pn?tn.y-=En:tn.x+=En*en,tn.tspan.setAttributeNS(null,"font-family",tn.fontFamily),tn.tspan.setAttributeNS(null,"font-size",`${Xe(tn.fontSize)}px`),tn.fontStyle!==Se.fontStyle&&tn.tspan.setAttributeNS(null,"font-style",tn.fontStyle),tn.fontWeight!==Se.fontWeight&&tn.tspan.setAttributeNS(null,"font-weight",tn.fontWeight);const hn=tn.textRenderingMode&_e.TextRenderingMode.FILL_STROKE_MASK;if(hn===_e.TextRenderingMode.FILL||hn===_e.TextRenderingMode.FILL_STROKE?(tn.fillColor!==Se.fillColor&&tn.tspan.setAttributeNS(null,"fill",tn.fillColor),tn.fillAlpha<1&&tn.tspan.setAttributeNS(null,"fill-opacity",tn.fillAlpha)):tn.textRenderingMode===_e.TextRenderingMode.ADD_TO_PATH?tn.tspan.setAttributeNS(null,"fill","transparent"):tn.tspan.setAttributeNS(null,"fill","none"),hn===_e.TextRenderingMode.STROKE||hn===_e.TextRenderingMode.FILL_STROKE){const In=1/(tn.textMatrixScale||1);this._setStrokeAttributes(tn.tspan,In)}let Sn=tn.textMatrix;tn.textRise!==0&&(Sn=Sn.slice(),Sn[5]+=tn.textRise),tn.txtElement.setAttributeNS(null,"transform",`${We(Sn)} scale(${Xe(en)}, -1)`),tn.txtElement.setAttributeNS(Pe,"xml:space","preserve"),tn.txtElement.append(tn.tspan),tn.txtgrp.append(tn.txtElement),this._ensureTransformGroup().append(tn.txtElement)}setLeadingMoveText($e,tn){this.setLeading(-tn),this.moveText($e,tn)}addFontStyle($e){if(!$e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const tn=Ie($e.data,$e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${$e.loadedName}"; src: url(${tn}); }
`}setFont($e){const tn=this.current,Ve=this.commonObjs.get($e[0]);let ze=$e[1];tn.font=Ve,this.embedFonts&&!Ve.missingFile&&!this.embeddedFonts[Ve.loadedName]&&(this.addFontStyle(Ve),this.embeddedFonts[Ve.loadedName]=Ve),tn.fontMatrix=Ve.fontMatrix||_e.FONT_IDENTITY_MATRIX;let Qe="normal";Ve.black?Qe="900":Ve.bold&&(Qe="bold");const gn=Ve.italic?"italic":"normal";ze<0?(ze=-ze,tn.fontDirection=-1):tn.fontDirection=1,tn.fontSize=ze,tn.fontFamily=Ve.loadedName,tn.fontWeight=Qe,tn.fontStyle=gn,tn.tspan=this.svgFactory.createElement("svg:tspan"),tn.tspan.setAttributeNS(null,"y",Xe(-tn.y)),tn.xcoords=[],tn.ycoords=[]}endText(){var tn;const $e=this.current;$e.textRenderingMode&_e.TextRenderingMode.ADD_TO_PATH_FLAG&&((tn=$e.txtElement)!=null&&tn.hasChildNodes())&&($e.element=$e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth($e){$e>0&&(this.current.lineWidth=$e)}setLineCap($e){this.current.lineCap=Ee[$e]}setLineJoin($e){this.current.lineJoin=Re[$e]}setMiterLimit($e){this.current.miterLimit=$e}setStrokeAlpha($e){this.current.strokeAlpha=$e}setStrokeRGBColor($e,tn,Ve){this.current.strokeColor=_e.Util.makeHexColor($e,tn,Ve)}setFillAlpha($e){this.current.fillAlpha=$e}setFillRGBColor($e,tn,Ve){this.current.fillColor=_e.Util.makeHexColor($e,tn,Ve),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN($e){this.current.strokeColor=this._makeColorN_Pattern($e)}setFillColorN($e){this.current.fillColor=this._makeColorN_Pattern($e)}shadingFill($e){const{width:tn,height:Ve}=this.viewport,ze=_e.Util.inverseTransform(this.transformMatrix),[Qe,gn,Me,Ue]=_e.Util.getAxialAlignedBoundingBox([0,0,tn,Ve],ze),en=this.svgFactory.createElement("svg:rect");en.setAttributeNS(null,"x",Qe),en.setAttributeNS(null,"y",gn),en.setAttributeNS(null,"width",Me-Qe),en.setAttributeNS(null,"height",Ue-gn),en.setAttributeNS(null,"fill",this._makeShadingPattern($e)),this.current.fillAlpha<1&&en.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(en)}_makeColorN_Pattern($e){return $e[0]==="TilingPattern"?this._makeTilingPattern($e):this._makeShadingPattern($e)}_makeTilingPattern($e){const tn=$e[1],Ve=$e[2],ze=$e[3]||_e.IDENTITY_MATRIX,[Qe,gn,Me,Ue]=$e[4],en=$e[5],pn=$e[6],An=$e[7],xn=`shading${Ye++}`,[_n,En,hn,Sn]=_e.Util.normalizeRect([..._e.Util.applyTransform([Qe,gn],ze),..._e.Util.applyTransform([Me,Ue],ze)]),[In,je]=_e.Util.singularValueDecompose2dScale(ze),Fe=en*In,De=pn*je,Je=this.svgFactory.createElement("svg:pattern");Je.setAttributeNS(null,"id",xn),Je.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Je.setAttributeNS(null,"width",Fe),Je.setAttributeNS(null,"height",De),Je.setAttributeNS(null,"x",`${_n}`),Je.setAttributeNS(null,"y",`${En}`);const nn=this.svg,an=this.transformMatrix,on=this.current.fillColor,yn=this.current.strokeColor,Fn=this.svgFactory.create(hn-_n,Sn-En);if(this.svg=Fn,this.transformMatrix=ze,An===2){const On=_e.Util.makeHexColor(...tn);this.current.fillColor=On,this.current.strokeColor=On}return this.executeOpTree(this.convertOpList(Ve)),this.svg=nn,this.transformMatrix=an,this.current.fillColor=on,this.current.strokeColor=yn,Je.append(Fn.childNodes[0]),this.defs.append(Je),`url(#${xn})`}_makeShadingPattern($e){switch(typeof $e=="string"&&($e=this.objs.get($e)),$e[0]){case"RadialAxial":const tn=`shading${Ye++}`,Ve=$e[3];let ze;switch($e[1]){case"axial":const Qe=$e[4],gn=$e[5];ze=this.svgFactory.createElement("svg:linearGradient"),ze.setAttributeNS(null,"id",tn),ze.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ze.setAttributeNS(null,"x1",Qe[0]),ze.setAttributeNS(null,"y1",Qe[1]),ze.setAttributeNS(null,"x2",gn[0]),ze.setAttributeNS(null,"y2",gn[1]);break;case"radial":const Me=$e[4],Ue=$e[5],en=$e[6],pn=$e[7];ze=this.svgFactory.createElement("svg:radialGradient"),ze.setAttributeNS(null,"id",tn),ze.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ze.setAttributeNS(null,"cx",Ue[0]),ze.setAttributeNS(null,"cy",Ue[1]),ze.setAttributeNS(null,"r",pn),ze.setAttributeNS(null,"fx",Me[0]),ze.setAttributeNS(null,"fy",Me[1]),ze.setAttributeNS(null,"fr",en);break;default:throw new Error(`Unknown RadialAxial type: ${$e[1]}`)}for(const Qe of Ve){const gn=this.svgFactory.createElement("svg:stop");gn.setAttributeNS(null,"offset",Qe[0]),gn.setAttributeNS(null,"stop-color",Qe[1]),ze.append(gn)}return this.defs.append(ze),`url(#${tn})`;case"Mesh":return(0,_e.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${$e[0]}`)}}setDash($e,tn){this.current.dashArray=$e,this.current.dashPhase=tn}constructPath($e,tn){const Ve=this.current;let ze=Ve.x,Qe=Ve.y,gn=[],Me=0;for(const Ue of $e)switch(Ue|0){case _e.OPS.rectangle:ze=tn[Me++],Qe=tn[Me++];const en=tn[Me++],pn=tn[Me++],An=ze+en,xn=Qe+pn;gn.push("M",Xe(ze),Xe(Qe),"L",Xe(An),Xe(Qe),"L",Xe(An),Xe(xn),"L",Xe(ze),Xe(xn),"Z");break;case _e.OPS.moveTo:ze=tn[Me++],Qe=tn[Me++],gn.push("M",Xe(ze),Xe(Qe));break;case _e.OPS.lineTo:ze=tn[Me++],Qe=tn[Me++],gn.push("L",Xe(ze),Xe(Qe));break;case _e.OPS.curveTo:ze=tn[Me+4],Qe=tn[Me+5],gn.push("C",Xe(tn[Me]),Xe(tn[Me+1]),Xe(tn[Me+2]),Xe(tn[Me+3]),Xe(ze),Xe(Qe)),Me+=6;break;case _e.OPS.curveTo2:gn.push("C",Xe(ze),Xe(Qe),Xe(tn[Me]),Xe(tn[Me+1]),Xe(tn[Me+2]),Xe(tn[Me+3])),ze=tn[Me+2],Qe=tn[Me+3],Me+=4;break;case _e.OPS.curveTo3:ze=tn[Me+2],Qe=tn[Me+3],gn.push("C",Xe(tn[Me]),Xe(tn[Me+1]),Xe(ze),Xe(Qe),Xe(ze),Xe(Qe)),Me+=4;break;case _e.OPS.closePath:gn.push("Z");break}gn=gn.join(" "),Ve.path&&$e.length>0&&$e[0]!==_e.OPS.rectangle&&$e[0]!==_e.OPS.moveTo?gn=Ve.path.getAttributeNS(null,"d")+gn:(Ve.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(Ve.path)),Ve.path.setAttributeNS(null,"d",gn),Ve.path.setAttributeNS(null,"fill","none"),Ve.element=Ve.path,Ve.setCurrentPoint(ze,Qe)}endPath(){const $e=this.current;if($e.path=null,!this.pendingClip)return;if(!$e.element){this.pendingClip=null;return}const tn=`clippath${Ke++}`,Ve=this.svgFactory.createElement("svg:clipPath");Ve.setAttributeNS(null,"id",tn),Ve.setAttributeNS(null,"transform",We(this.transformMatrix));const ze=$e.element.cloneNode(!0);if(this.pendingClip==="evenodd"?ze.setAttributeNS(null,"clip-rule","evenodd"):ze.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Ve.append(ze),this.defs.append(Ve),$e.activeClipUrl){$e.clipGroup=null;for(const Qe of this.extraStack)Qe.clipGroup=null;Ve.setAttributeNS(null,"clip-path",$e.activeClipUrl)}$e.activeClipUrl=`url(#${tn})`,this.tgrp=null}clip($e){this.pendingClip=$e}closePath(){const $e=this.current;if($e.path){const tn=`${$e.path.getAttributeNS(null,"d")}Z`;$e.path.setAttributeNS(null,"d",tn)}}setLeading($e){this.current.leading=-$e}setTextRise($e){this.current.textRise=$e}setTextRenderingMode($e){this.current.textRenderingMode=$e}setHScale($e){this.current.textHScale=$e/100}setRenderingIntent($e){}setFlatness($e){}setGState($e){for(const[tn,Ve]of $e)switch(tn){case"LW":this.setLineWidth(Ve);break;case"LC":this.setLineCap(Ve);break;case"LJ":this.setLineJoin(Ve);break;case"ML":this.setMiterLimit(Ve);break;case"D":this.setDash(Ve[0],Ve[1]);break;case"RI":this.setRenderingIntent(Ve);break;case"FL":this.setFlatness(Ve);break;case"Font":this.setFont(Ve);break;case"CA":this.setStrokeAlpha(Ve);break;case"ca":this.setFillAlpha(Ve);break;default:(0,_e.warn)(`Unimplemented graphic state operator ${tn}`);break}}fill(){const $e=this.current;$e.element&&($e.element.setAttributeNS(null,"fill",$e.fillColor),$e.element.setAttributeNS(null,"fill-opacity",$e.fillAlpha),this.endPath())}stroke(){const $e=this.current;$e.element&&(this._setStrokeAttributes($e.element),$e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes($e,tn=1){const Ve=this.current;let ze=Ve.dashArray;tn!==1&&ze.length>0&&(ze=ze.map(function(Qe){return tn*Qe})),$e.setAttributeNS(null,"stroke",Ve.strokeColor),$e.setAttributeNS(null,"stroke-opacity",Ve.strokeAlpha),$e.setAttributeNS(null,"stroke-miterlimit",Xe(Ve.miterLimit)),$e.setAttributeNS(null,"stroke-linecap",Ve.lineCap),$e.setAttributeNS(null,"stroke-linejoin",Ve.lineJoin),$e.setAttributeNS(null,"stroke-width",Xe(tn*Ve.lineWidth)+"px"),$e.setAttributeNS(null,"stroke-dasharray",ze.map(Xe).join(" ")),$e.setAttributeNS(null,"stroke-dashoffset",Xe(tn*Ve.dashPhase)+"px")}eoFill(){var $e;($e=this.current.element)==null||$e.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var $e;($e=this.current.element)==null||$e.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const $e=this.svgFactory.createElement("svg:rect");$e.setAttributeNS(null,"x","0"),$e.setAttributeNS(null,"y","0"),$e.setAttributeNS(null,"width","1px"),$e.setAttributeNS(null,"height","1px"),$e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append($e)}paintImageXObject($e){const tn=this.getObject($e);if(!tn){(0,_e.warn)(`Dependent image with object ID ${$e} is not ready yet`);return}this.paintInlineImageXObject(tn)}paintInlineImageXObject($e,tn){const Ve=$e.width,ze=$e.height,Qe=qe($e,this.forceDataSchema,!!tn),gn=this.svgFactory.createElement("svg:rect");gn.setAttributeNS(null,"x","0"),gn.setAttributeNS(null,"y","0"),gn.setAttributeNS(null,"width",Xe(Ve)),gn.setAttributeNS(null,"height",Xe(ze)),this.current.element=gn,this.clip("nonzero");const Me=this.svgFactory.createElement("svg:image");Me.setAttributeNS(Te,"xlink:href",Qe),Me.setAttributeNS(null,"x","0"),Me.setAttributeNS(null,"y",Xe(-ze)),Me.setAttributeNS(null,"width",Xe(Ve)+"px"),Me.setAttributeNS(null,"height",Xe(ze)+"px"),Me.setAttributeNS(null,"transform",`scale(${Xe(1/Ve)} ${Xe(-1/ze)})`),tn?tn.append(Me):this._ensureTransformGroup().append(Me)}paintImageMaskXObject($e){const tn=this.getObject($e.data,$e);if(tn.bitmap){(0,_e.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const Ve=this.current,ze=tn.width,Qe=tn.height,gn=Ve.fillColor;Ve.maskId=`mask${Be++}`;const Me=this.svgFactory.createElement("svg:mask");Me.setAttributeNS(null,"id",Ve.maskId);const Ue=this.svgFactory.createElement("svg:rect");Ue.setAttributeNS(null,"x","0"),Ue.setAttributeNS(null,"y","0"),Ue.setAttributeNS(null,"width",Xe(ze)),Ue.setAttributeNS(null,"height",Xe(Qe)),Ue.setAttributeNS(null,"fill",gn),Ue.setAttributeNS(null,"mask",`url(#${Ve.maskId})`),this.defs.append(Me),this._ensureTransformGroup().append(Ue),this.paintInlineImageXObject(tn,Me)}paintFormXObjectBegin($e,tn){if(Array.isArray($e)&&$e.length===6&&this.transform($e[0],$e[1],$e[2],$e[3],$e[4],$e[5]),tn){const Ve=tn[2]-tn[0],ze=tn[3]-tn[1],Qe=this.svgFactory.createElement("svg:rect");Qe.setAttributeNS(null,"x",tn[0]),Qe.setAttributeNS(null,"y",tn[1]),Qe.setAttributeNS(null,"width",Xe(Ve)),Qe.setAttributeNS(null,"height",Xe(ze)),this.current.element=Qe,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize($e){const tn=this.svgFactory.create($e.width,$e.height),Ve=this.svgFactory.createElement("svg:defs");tn.append(Ve),this.defs=Ve;const ze=this.svgFactory.createElement("svg:g");return ze.setAttributeNS(null,"transform",We($e.transform)),tn.append(ze),this.svg=ze,tn}_ensureClipGroup(){if(!this.current.clipGroup){const $e=this.svgFactory.createElement("svg:g");$e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append($e),this.current.clipGroup=$e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",We(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=sn},(Ae,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class St{static textContent(_e){const Se=[],Pe={items:Se,styles:Object.create(null)};function Te(Ee){var qe;if(!Ee)return;let Re=null;const Ie=Ee.name;if(Ie==="#text")Re=Ee.value;else if(St.shouldBuildText(Ie))(qe=Ee==null?void 0:Ee.attributes)!=null&&qe.textContent?Re=Ee.attributes.textContent:Ee.value&&(Re=Ee.value);else return;if(Re!==null&&Se.push({str:Re}),!!Ee.children)for(const Ge of Ee.children)Te(Ge)}return Te(_e),Pe}static shouldBuildText(_e){return!(_e==="textarea"||_e==="input"||_e==="option"||_e==="select")}}t.XfaText=St},(Ae,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=We,t.updateTextLayer=Ke;var e=St(1),_e=St(6);const Se=1e5,Pe=30,Te=.8,Ee=new Map;function Re(Be,Ye){let sn;if(Ye&&e.FeatureTest.isOffscreenCanvasSupported)sn=new OffscreenCanvas(Be,Be).getContext("2d",{alpha:!1});else{const rn=document.createElement("canvas");rn.width=rn.height=Be,sn=rn.getContext("2d",{alpha:!1})}return sn}function Ie(Be,Ye){const sn=Ee.get(Be);if(sn)return sn;const rn=Re(Pe,Ye);rn.font=`${Pe}px ${Be}`;const $e=rn.measureText("");let tn=$e.fontBoundingBoxAscent,Ve=Math.abs($e.fontBoundingBoxDescent);if(tn){const Qe=tn/(tn+Ve);return Ee.set(Be,Qe),rn.canvas.width=rn.canvas.height=0,Qe}rn.strokeStyle="red",rn.clearRect(0,0,Pe,Pe),rn.strokeText("g",0,0);let ze=rn.getImageData(0,0,Pe,Pe).data;Ve=0;for(let Qe=ze.length-1-3;Qe>=0;Qe-=4)if(ze[Qe]>0){Ve=Math.ceil(Qe/4/Pe);break}rn.clearRect(0,0,Pe,Pe),rn.strokeText("A",0,Pe),ze=rn.getImageData(0,0,Pe,Pe).data,tn=0;for(let Qe=0,gn=ze.length;Qe<gn;Qe+=4)if(ze[Qe]>0){tn=Pe-Math.floor(Qe/4/Pe);break}if(rn.canvas.width=rn.canvas.height=0,tn){const Qe=tn/(tn+Ve);return Ee.set(Be,Qe),Qe}return Ee.set(Be,Te),Te}function qe(Be,Ye,sn){const rn=document.createElement("span"),$e={angle:0,canvasWidth:0,hasText:Ye.str!=="",hasEOL:Ye.hasEOL,fontSize:0};Be._textDivs.push(rn);const tn=e.Util.transform(Be._transform,Ye.transform);let Ve=Math.atan2(tn[1],tn[0]);const ze=sn[Ye.fontName];ze.vertical&&(Ve+=Math.PI/2);const Qe=Math.hypot(tn[2],tn[3]),gn=Qe*Ie(ze.fontFamily,Be._isOffscreenCanvasSupported);let Me,Ue;Ve===0?(Me=tn[4],Ue=tn[5]-gn):(Me=tn[4]+gn*Math.sin(Ve),Ue=tn[5]-gn*Math.cos(Ve));const en="calc(var(--scale-factor)*",pn=rn.style;Be._container===Be._rootContainer?(pn.left=`${(100*Me/Be._pageWidth).toFixed(2)}%`,pn.top=`${(100*Ue/Be._pageHeight).toFixed(2)}%`):(pn.left=`${en}${Me.toFixed(2)}px)`,pn.top=`${en}${Ue.toFixed(2)}px)`),pn.fontSize=`${en}${Qe.toFixed(2)}px)`,pn.fontFamily=ze.fontFamily,$e.fontSize=Qe,rn.setAttribute("role","presentation"),rn.textContent=Ye.str,rn.dir=Ye.dir,Be._fontInspectorEnabled&&(rn.dataset.fontName=Ye.fontName),Ve!==0&&($e.angle=Ve*(180/Math.PI));let An=!1;if(Ye.str.length>1)An=!0;else if(Ye.str!==" "&&Ye.transform[0]!==Ye.transform[3]){const xn=Math.abs(Ye.transform[0]),_n=Math.abs(Ye.transform[3]);xn!==_n&&Math.max(xn,_n)/Math.min(xn,_n)>1.5&&(An=!0)}An&&($e.canvasWidth=ze.vertical?Ye.height:Ye.width),Be._textDivProperties.set(rn,$e),Be._isReadableStream&&Be._layoutText(rn)}function Ge(Be){const{div:Ye,scale:sn,properties:rn,ctx:$e,prevFontSize:tn,prevFontFamily:Ve}=Be,{style:ze}=Ye;let Qe="";if(rn.canvasWidth!==0&&rn.hasText){const{fontFamily:gn}=ze,{canvasWidth:Me,fontSize:Ue}=rn;(tn!==Ue||Ve!==gn)&&($e.font=`${Ue*sn}px ${gn}`,Be.prevFontSize=Ue,Be.prevFontFamily=gn);const{width:en}=$e.measureText(Ye.textContent);en>0&&(Qe=`scaleX(${Me*sn/en})`)}rn.angle!==0&&(Qe=`rotate(${rn.angle}deg) ${Qe}`),Qe.length>0&&(ze.transform=Qe)}function Ce(Be){if(Be._canceled)return;const Ye=Be._textDivs,sn=Be._capability;if(Ye.length>Se){sn.resolve();return}if(!Be._isReadableStream)for(const $e of Ye)Be._layoutText($e);sn.resolve()}class Xe{constructor({textContentSource:Ye,container:sn,viewport:rn,textDivs:$e,textDivProperties:tn,textContentItemsStr:Ve,isOffscreenCanvasSupported:ze}){var en;this._textContentSource=Ye,this._isReadableStream=Ye instanceof ReadableStream,this._container=this._rootContainer=sn,this._textDivs=$e||[],this._textContentItemsStr=Ve||[],this._isOffscreenCanvasSupported=ze,this._fontInspectorEnabled=!!((en=globalThis.FontInspector)!=null&&en.enabled),this._reader=null,this._textDivProperties=tn||new WeakMap,this._canceled=!1,this._capability=new e.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:rn.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Re(0,ze)};const{pageWidth:Qe,pageHeight:gn,pageX:Me,pageY:Ue}=rn.rawDims;this._transform=[1,0,0,-1,-Me,Ue+gn],this._pageWidth=Qe,this._pageHeight=gn,(0,_e.setLayerDimensions)(sn,rn),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new e.AbortException("TextLayer task cancelled."))}_processItems(Ye,sn){for(const rn of Ye){if(rn.str===void 0){if(rn.type==="beginMarkedContentProps"||rn.type==="beginMarkedContent"){const $e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),rn.id!==null&&this._container.setAttribute("id",`${rn.id}`),$e.append(this._container)}else rn.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(rn.str),qe(this,rn,sn)}}_layoutText(Ye){const sn=this._layoutTextParams.properties=this._textDivProperties.get(Ye);if(this._layoutTextParams.div=Ye,Ge(this._layoutTextParams),sn.hasText&&this._container.append(Ye),sn.hasEOL){const rn=document.createElement("br");rn.setAttribute("role","presentation"),this._container.append(rn)}}_render(){const Ye=new e.PromiseCapability;let sn=Object.create(null);if(this._isReadableStream){const rn=()=>{this._reader.read().then(({value:$e,done:tn})=>{if(tn){Ye.resolve();return}Object.assign(sn,$e.styles),this._processItems($e.items,sn),rn()},Ye.reject)};this._reader=this._textContentSource.getReader(),rn()}else if(this._textContentSource){const{items:rn,styles:$e}=this._textContentSource;this._processItems(rn,$e),Ye.resolve()}else throw new Error('No "textContentSource" parameter specified.');Ye.promise.then(()=>{sn=null,Ce(this)},this._capability.reject)}}t.TextLayerRenderTask=Xe;function We(Be){!Be.textContentSource&&(Be.textContent||Be.textContentStream)&&((0,_e.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),Be.textContentSource=Be.textContent||Be.textContentStream);const{container:Ye,viewport:sn}=Be,rn=getComputedStyle(Ye),$e=rn.getPropertyValue("visibility"),tn=parseFloat(rn.getPropertyValue("--scale-factor"));$e==="visible"&&(!tn||Math.abs(tn-sn.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const Ve=new Xe(Be);return Ve._render(),Ve}function Ke({container:Be,viewport:Ye,textDivs:sn,textDivProperties:rn,isOffscreenCanvasSupported:$e,mustRotate:tn=!0,mustRescale:Ve=!0}){if(tn&&(0,_e.setLayerDimensions)(Be,{rotation:Ye.rotation}),Ve){const ze=Re(0,$e),gn={prevFontSize:null,prevFontFamily:null,div:null,scale:Ye.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:ze};for(const Me of sn)gn.properties=rn.get(Me),gn.div=Me,Ge(gn)}}},(Ae,t,St)=>{var Ie,qe,Ge,Ce,Xe,We,Ke,Be,Ye,sn,rn,yc,nl,Ac,_c;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var e=St(1),_e=St(4),Se=St(28),Pe=St(33),Te=St(6),Ee=St(34);const Qe=class Qe{constructor({uiManager:Me,pageIndex:Ue,div:en,accessibilityManager:pn,annotationLayer:An,viewport:xn,l10n:_n}){Zn(this,rn);Zn(this,Ie);Zn(this,qe,!1);Zn(this,Ge,null);Zn(this,Ce,this.pointerup.bind(this));Zn(this,Xe,this.pointerdown.bind(this));Zn(this,We,new Map);Zn(this,Ke,!1);Zn(this,Be,!1);Zn(this,Ye,!1);Zn(this,sn);const En=[Se.FreeTextEditor,Pe.InkEditor,Ee.StampEditor];if(!Qe._initialized){Qe._initialized=!0;for(const hn of En)hn.initialize(_n)}Me.registerEditorTypes(En),ei(this,sn,Me),this.pageIndex=Ue,this.div=en,ei(this,Ie,pn),ei(this,Ge,An),this.viewport=xn,He(this,sn).addLayer(this)}get isEmpty(){return He(this,We).size===0}updateToolbar(Me){He(this,sn).updateToolbar(Me)}updateMode(Me=He(this,sn).getMode()){Vn(this,rn,_c).call(this),Me===e.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),Me!==e.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",Me===e.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Me===e.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",Me===e.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(Me){if(!Me&&He(this,sn).getMode()!==e.AnnotationEditorType.INK)return;if(!Me){for(const en of He(this,We).values())if(en.isEmpty()){en.setInBackground();return}}Vn(this,rn,nl).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(Me){He(this,sn).setEditingState(Me)}addCommands(Me){He(this,sn).addCommands(Me)}enable(){this.div.style.pointerEvents="auto";const Me=new Set;for(const en of He(this,We).values())en.enableEditing(),en.annotationElementId&&Me.add(en.annotationElementId);if(!He(this,Ge))return;const Ue=He(this,Ge).getEditableAnnotations();for(const en of Ue){if(en.hide(),He(this,sn).isDeletedAnnotationElement(en.data.id)||Me.has(en.data.id))continue;const pn=this.deserialize(en);pn&&(this.addOrRebuild(pn),pn.enableEditing())}}disable(){var Ue;ei(this,Ye,!0),this.div.style.pointerEvents="none";const Me=new Set;for(const en of He(this,We).values()){if(en.disableEditing(),!en.annotationElementId||en.serialize()!==null){Me.add(en.annotationElementId);continue}(Ue=this.getEditableAnnotation(en.annotationElementId))==null||Ue.show(),en.remove()}if(He(this,Ge)){const en=He(this,Ge).getEditableAnnotations();for(const pn of en){const{id:An}=pn.data;Me.has(An)||He(this,sn).isDeletedAnnotationElement(An)||pn.show()}}Vn(this,rn,_c).call(this),this.isEmpty&&(this.div.hidden=!0),ei(this,Ye,!1)}getEditableAnnotation(Me){var Ue;return((Ue=He(this,Ge))==null?void 0:Ue.getEditableAnnotation(Me))||null}setActiveEditor(Me){He(this,sn).getActive()!==Me&&He(this,sn).setActiveEditor(Me)}enableClick(){this.div.addEventListener("pointerdown",He(this,Xe)),this.div.addEventListener("pointerup",He(this,Ce))}disableClick(){this.div.removeEventListener("pointerdown",He(this,Xe)),this.div.removeEventListener("pointerup",He(this,Ce))}attach(Me){He(this,We).set(Me.id,Me);const{annotationElementId:Ue}=Me;Ue&&He(this,sn).isDeletedAnnotationElement(Ue)&&He(this,sn).removeDeletedAnnotationElement(Me)}detach(Me){var Ue;He(this,We).delete(Me.id),(Ue=He(this,Ie))==null||Ue.removePointerInTextLayer(Me.contentDiv),!He(this,Ye)&&Me.annotationElementId&&He(this,sn).addDeletedAnnotationElement(Me)}remove(Me){this.detach(Me),He(this,sn).removeEditor(Me),Me.div.contains(document.activeElement)&&setTimeout(()=>{He(this,sn).focusMainContainer()},0),Me.div.remove(),Me.isAttachedToDOM=!1,He(this,Be)||this.addInkEditorIfNeeded(!1)}changeParent(Me){var Ue;Me.parent!==this&&(Me.annotationElementId&&(He(this,sn).addDeletedAnnotationElement(Me.annotationElementId),_e.AnnotationEditor.deleteAnnotationElement(Me),Me.annotationElementId=null),this.attach(Me),(Ue=Me.parent)==null||Ue.detach(Me),Me.setParent(this),Me.div&&Me.isAttachedToDOM&&(Me.div.remove(),this.div.append(Me.div)))}add(Me){if(this.changeParent(Me),He(this,sn).addEditor(Me),this.attach(Me),!Me.isAttachedToDOM){const Ue=Me.render();this.div.append(Ue),Me.isAttachedToDOM=!0}Me.fixAndSetPosition(),Me.onceAdded(),He(this,sn).addToAnnotationStorage(Me)}moveEditorInDOM(Me){var en;if(!Me.isAttachedToDOM)return;const{activeElement:Ue}=document;Me.div.contains(Ue)&&(Me._focusEventsAllowed=!1,setTimeout(()=>{Me.div.contains(document.activeElement)?Me._focusEventsAllowed=!0:(Me.div.addEventListener("focusin",()=>{Me._focusEventsAllowed=!0},{once:!0}),Ue.focus())},0)),Me._structTreeParentId=(en=He(this,Ie))==null?void 0:en.moveElementInDOM(this.div,Me.div,Me.contentDiv,!0)}addOrRebuild(Me){Me.needsToBeRebuilt()?Me.rebuild():this.add(Me)}addUndoableEditor(Me){const Ue=()=>Me._uiManager.rebuild(Me),en=()=>{Me.remove()};this.addCommands({cmd:Ue,undo:en,mustExec:!1})}getNextId(){return He(this,sn).getId()}pasteEditor(Me,Ue){He(this,sn).updateToolbar(Me),He(this,sn).updateMode(Me);const{offsetX:en,offsetY:pn}=Vn(this,rn,Ac).call(this),An=this.getNextId(),xn=Vn(this,rn,yc).call(this,{parent:this,id:An,x:en,y:pn,uiManager:He(this,sn),isCentered:!0,...Ue});xn&&this.add(xn)}deserialize(Me){switch(Me.annotationType??Me.annotationEditorType){case e.AnnotationEditorType.FREETEXT:return Se.FreeTextEditor.deserialize(Me,this,He(this,sn));case e.AnnotationEditorType.INK:return Pe.InkEditor.deserialize(Me,this,He(this,sn));case e.AnnotationEditorType.STAMP:return Ee.StampEditor.deserialize(Me,this,He(this,sn))}return null}addNewEditor(){Vn(this,rn,nl).call(this,Vn(this,rn,Ac).call(this),!0)}setSelected(Me){He(this,sn).setSelected(Me)}toggleSelected(Me){He(this,sn).toggleSelected(Me)}isSelected(Me){return He(this,sn).isSelected(Me)}unselect(Me){He(this,sn).unselect(Me)}pointerup(Me){const{isMac:Ue}=e.FeatureTest.platform;if(!(Me.button!==0||Me.ctrlKey&&Ue)&&Me.target===this.div&&He(this,Ke)){if(ei(this,Ke,!1),!He(this,qe)){ei(this,qe,!0);return}if(He(this,sn).getMode()===e.AnnotationEditorType.STAMP){He(this,sn).unselectAll();return}Vn(this,rn,nl).call(this,Me,!1)}}pointerdown(Me){if(He(this,Ke)){ei(this,Ke,!1);return}const{isMac:Ue}=e.FeatureTest.platform;if(Me.button!==0||Me.ctrlKey&&Ue||Me.target!==this.div)return;ei(this,Ke,!0);const en=He(this,sn).getActive();ei(this,qe,!en||en.isEmpty())}findNewParent(Me,Ue,en){const pn=He(this,sn).findParent(Ue,en);return pn===null||pn===this?!1:(pn.changeParent(Me),!0)}destroy(){var Me,Ue;((Me=He(this,sn).getActive())==null?void 0:Me.parent)===this&&(He(this,sn).commitOrRemove(),He(this,sn).setActiveEditor(null));for(const en of He(this,We).values())(Ue=He(this,Ie))==null||Ue.removePointerInTextLayer(en.contentDiv),en.setParent(null),en.isAttachedToDOM=!1,en.div.remove();this.div=null,He(this,We).clear(),He(this,sn).removeLayer(this)}render({viewport:Me}){this.viewport=Me,(0,Te.setLayerDimensions)(this.div,Me);for(const Ue of He(this,sn).getEditors(this.pageIndex))this.add(Ue);this.updateMode()}update({viewport:Me}){He(this,sn).commitOrRemove(),this.viewport=Me,(0,Te.setLayerDimensions)(this.div,{rotation:Me.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:Me,pageHeight:Ue}=this.viewport.rawDims;return[Me,Ue]}};Ie=new WeakMap,qe=new WeakMap,Ge=new WeakMap,Ce=new WeakMap,Xe=new WeakMap,We=new WeakMap,Ke=new WeakMap,Be=new WeakMap,Ye=new WeakMap,sn=new WeakMap,rn=new WeakSet,yc=function(Me){switch(He(this,sn).getMode()){case e.AnnotationEditorType.FREETEXT:return new Se.FreeTextEditor(Me);case e.AnnotationEditorType.INK:return new Pe.InkEditor(Me);case e.AnnotationEditorType.STAMP:return new Ee.StampEditor(Me)}return null},nl=function(Me,Ue){const en=this.getNextId(),pn=Vn(this,rn,yc).call(this,{parent:this,id:en,x:Me.offsetX,y:Me.offsetY,uiManager:He(this,sn),isCentered:Ue});return pn&&this.add(pn),pn},Ac=function(){const{x:Me,y:Ue,width:en,height:pn}=this.div.getBoundingClientRect(),An=Math.max(0,Me),xn=Math.max(0,Ue),_n=Math.min(window.innerWidth,Me+en),En=Math.min(window.innerHeight,Ue+pn),hn=(An+_n)/2-Me,Sn=(xn+En)/2-Ue,[In,je]=this.viewport.rotation%180===0?[hn,Sn]:[Sn,hn];return{offsetX:In,offsetY:je}},_c=function(){ei(this,Be,!0);for(const Me of He(this,We).values())Me.isEmpty()&&Me.remove();ei(this,Be,!1)},cr(Qe,"_initialized",!1);let Re=Qe;t.AnnotationEditorLayer=Re},(Ae,t,St)=>{var Ee,Re,Ie,qe,Ge,Ce,Xe,We,Ke,Be,_h,wh,Sh,no,wc,xh,Sc;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var e=St(1),_e=St(5),Se=St(4),Pe=St(29);const Qe=class Qe extends Se.AnnotationEditor{constructor(Ue){super({...Ue,name:"freeTextEditor"});Zn(this,Be);Zn(this,Ee,this.editorDivBlur.bind(this));Zn(this,Re,this.editorDivFocus.bind(this));Zn(this,Ie,this.editorDivInput.bind(this));Zn(this,qe,this.editorDivKeydown.bind(this));Zn(this,Ge);Zn(this,Ce,"");Zn(this,Xe,`${this.id}-editor`);Zn(this,We);Zn(this,Ke,null);ei(this,Ge,Ue.color||Qe._defaultColor||Se.AnnotationEditor._defaultLineColor),ei(this,We,Ue.fontSize||Qe._defaultFontSize)}static get _keyboardManager(){const Ue=Qe.prototype,en=xn=>xn.isEmpty(),pn=_e.AnnotationEditorUIManager.TRANSLATE_SMALL,An=_e.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,e.shadow)(this,"_keyboardManager",new _e.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Ue.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Ue.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Ue._translateEmpty,{args:[-pn,0],checker:en}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Ue._translateEmpty,{args:[-An,0],checker:en}],[["ArrowRight","mac+ArrowRight"],Ue._translateEmpty,{args:[pn,0],checker:en}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Ue._translateEmpty,{args:[An,0],checker:en}],[["ArrowUp","mac+ArrowUp"],Ue._translateEmpty,{args:[0,-pn],checker:en}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Ue._translateEmpty,{args:[0,-An],checker:en}],[["ArrowDown","mac+ArrowDown"],Ue._translateEmpty,{args:[0,pn],checker:en}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Ue._translateEmpty,{args:[0,An],checker:en}]]))}static initialize(Ue){Se.AnnotationEditor.initialize(Ue,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const en=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(en.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Ue,en){switch(Ue){case e.AnnotationEditorParamsType.FREETEXT_SIZE:Qe._defaultFontSize=en;break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:Qe._defaultColor=en;break}}updateParams(Ue,en){switch(Ue){case e.AnnotationEditorParamsType.FREETEXT_SIZE:Vn(this,Be,_h).call(this,en);break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:Vn(this,Be,wh).call(this,en);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,Qe._defaultFontSize],[e.AnnotationEditorParamsType.FREETEXT_COLOR,Qe._defaultColor||Se.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,He(this,We)],[e.AnnotationEditorParamsType.FREETEXT_COLOR,He(this,Ge)]]}_translateEmpty(Ue,en){this._uiManager.translateSelectedEditors(Ue,en,!0)}getInitialTranslation(){const Ue=this.parentScale;return[-Qe._internalPadding*Ue,-(Qe._internalPadding+He(this,We))*Ue]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(e.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",He(this,qe)),this.editorDiv.addEventListener("focus",He(this,Re)),this.editorDiv.addEventListener("blur",He(this,Ee)),this.editorDiv.addEventListener("input",He(this,Ie)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",He(this,Xe)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",He(this,qe)),this.editorDiv.removeEventListener("focus",He(this,Re)),this.editorDiv.removeEventListener("blur",He(this,Ee)),this.editorDiv.removeEventListener("input",He(this,Ie)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Ue){this._focusEventsAllowed&&(super.focusin(Ue),Ue.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Ue;if(this.width){Vn(this,Be,Sc).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Ue=this._initialOptions)!=null&&Ue.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Ue=He(this,Ce),en=ei(this,Ce,Vn(this,Be,Sh).call(this).trimEnd());if(Ue===en)return;const pn=An=>{if(ei(this,Ce,An),!An){this.remove();return}Vn(this,Be,wc).call(this),this._uiManager.rebuild(this),Vn(this,Be,no).call(this)};this.addCommands({cmd:()=>{pn(en)},undo:()=>{pn(Ue)},mustExec:!1}),Vn(this,Be,no).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Ue){this.enterInEditMode()}keydown(Ue){Ue.target===this.div&&Ue.key==="Enter"&&(this.enterInEditMode(),Ue.preventDefault())}editorDivKeydown(Ue){Qe._keyboardManager.exec(this,Ue)}editorDivFocus(Ue){this.isEditing=!0}editorDivBlur(Ue){this.isEditing=!1}editorDivInput(Ue){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Ue,en;this.width&&(Ue=this.x,en=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",He(this,Xe)),this.enableEditing(),Se.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(An=>{var xn;return(xn=this.editorDiv)==null?void 0:xn.setAttribute("aria-label",An)}),Se.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(An=>{var xn;return(xn=this.editorDiv)==null?void 0:xn.setAttribute("default-content",An)}),this.editorDiv.contentEditable=!0;const{style:pn}=this.editorDiv;if(pn.fontSize=`calc(${He(this,We)}px * var(--scale-factor))`,pn.color=He(this,Ge),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,_e.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[An,xn]=this.parentDimensions;if(this.annotationElementId){const{position:_n}=He(this,Ke);let[En,hn]=this.getInitialTranslation();[En,hn]=this.pageTranslationToScreen(En,hn);const[Sn,In]=this.pageDimensions,[je,Fe]=this.pageTranslation;let De,Je;switch(this.rotation){case 0:De=Ue+(_n[0]-je)/Sn,Je=en+this.height-(_n[1]-Fe)/In;break;case 90:De=Ue+(_n[0]-je)/Sn,Je=en-(_n[1]-Fe)/In,[En,hn]=[hn,-En];break;case 180:De=Ue-this.width+(_n[0]-je)/Sn,Je=en-(_n[1]-Fe)/In,[En,hn]=[-En,-hn];break;case 270:De=Ue+(_n[0]-je-this.height*In)/Sn,Je=en+(_n[1]-Fe-this.width*Sn)/In,[En,hn]=[-hn,En];break}this.setAt(De*An,Je*xn,En,hn)}else this.setAt(Ue*An,en*xn,this.width*An,this.height*xn);Vn(this,Be,wc).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Ue,en,pn){let An=null;if(Ue instanceof Pe.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:_n,fontColor:En},rect:hn,rotation:Sn,id:In},textContent:je,textPosition:Fe,parent:{page:{pageNumber:De}}}=Ue;if(!je||je.length===0)return null;An=Ue={annotationType:e.AnnotationEditorType.FREETEXT,color:Array.from(En),fontSize:_n,value:je.join(`
`),position:Fe,pageIndex:De-1,rect:hn,rotation:Sn,id:In,deleted:!1}}const xn=super.deserialize(Ue,en,pn);return ei(xn,We,Ue.fontSize),ei(xn,Ge,e.Util.makeHexColor(...Ue.color)),ei(xn,Ce,Ue.value),xn.annotationElementId=Ue.id||null,ei(xn,Ke,An),xn}serialize(Ue=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const en=Qe._internalPadding*this.parentScale,pn=this.getRect(en,en),An=Se.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:He(this,Ge)),xn={annotationType:e.AnnotationEditorType.FREETEXT,color:An,fontSize:He(this,We),value:He(this,Ce),pageIndex:this.pageIndex,rect:pn,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Ue?xn:this.annotationElementId&&!Vn(this,Be,xh).call(this,xn)?null:(xn.id=this.annotationElementId,xn)}};Ee=new WeakMap,Re=new WeakMap,Ie=new WeakMap,qe=new WeakMap,Ge=new WeakMap,Ce=new WeakMap,Xe=new WeakMap,We=new WeakMap,Ke=new WeakMap,Be=new WeakSet,_h=function(Ue){const en=An=>{this.editorDiv.style.fontSize=`calc(${An}px * var(--scale-factor))`,this.translate(0,-(An-He(this,We))*this.parentScale),ei(this,We,An),Vn(this,Be,no).call(this)},pn=He(this,We);this.addCommands({cmd:()=>{en(Ue)},undo:()=>{en(pn)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},wh=function(Ue){const en=He(this,Ge);this.addCommands({cmd:()=>{ei(this,Ge,this.editorDiv.style.color=Ue)},undo:()=>{ei(this,Ge,this.editorDiv.style.color=en)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Sh=function(){const Ue=this.editorDiv.getElementsByTagName("div");if(Ue.length===0)return this.editorDiv.innerText;const en=[];for(const pn of Ue)en.push(pn.innerText.replace(/\r\n?|\n/,""));return en.join(`
`)},no=function(){const[Ue,en]=this.parentDimensions;let pn;if(this.isAttachedToDOM)pn=this.div.getBoundingClientRect();else{const{currentLayer:An,div:xn}=this,_n=xn.style.display;xn.style.display="hidden",An.div.append(this.div),pn=xn.getBoundingClientRect(),xn.remove(),xn.style.display=_n}this.rotation%180===this.parentRotation%180?(this.width=pn.width/Ue,this.height=pn.height/en):(this.width=pn.height/Ue,this.height=pn.width/en),this.fixAndSetPosition()},wc=function(){if(this.editorDiv.replaceChildren(),!!He(this,Ce))for(const Ue of He(this,Ce).split(`
`)){const en=document.createElement("div");en.append(Ue?document.createTextNode(Ue):document.createElement("br")),this.editorDiv.append(en)}},xh=function(Ue){const{value:en,fontSize:pn,color:An,rect:xn,pageIndex:_n}=He(this,Ke);return Ue.value!==en||Ue.fontSize!==pn||Ue.rect.some((En,hn)=>Math.abs(En-xn[hn])>=1)||Ue.color.some((En,hn)=>En!==An[hn])||Ue.pageIndex!==_n},Sc=function(Ue=!1){if(!this.annotationElementId)return;if(Vn(this,Be,no).call(this),!Ue&&(this.width===0||this.height===0)){setTimeout(()=>Vn(this,Be,Sc).call(this,!0),0);return}const en=Qe._internalPadding*this.parentScale;He(this,Ke).rect=this.getRect(en,en)},cr(Qe,"_freeTextDefaultContent",""),cr(Qe,"_internalPadding",0),cr(Qe,"_defaultColor",null),cr(Qe,"_defaultFontSize",10),cr(Qe,"_type","freetext");let Te=Qe;t.FreeTextEditor=Te},(Ae,t,St)=>{var Je,an,Ws,Lh,Fn,On,Un,Wn,ni,Dn,cn,qn,fn,vn,kn,Rn,zn,Qn,ii,jn,fi,di,Ph,il,xc,Lc,Fi,Oi,Yi,ai,Xn,$n,wi,Pc,Bi,Tn,ci,bi,Eh,Ec;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var e=St(1),_e=St(6),Se=St(3),Pe=St(30),Te=St(31),Ee=St(32);const Re=1e3,Ie=9,qe=new WeakSet;function Ge(Ni){return{width:Ni[2]-Ni[0],height:Ni[3]-Ni[1]}}class Ce{static create(Cn){switch(Cn.data.annotationType){case e.AnnotationType.LINK:return new We(Cn);case e.AnnotationType.TEXT:return new Ke(Cn);case e.AnnotationType.WIDGET:switch(Cn.data.fieldType){case"Tx":return new Ye(Cn);case"Btn":return Cn.data.radioButton?new $e(Cn):Cn.data.checkBox?new rn(Cn):new tn(Cn);case"Ch":return new Ve(Cn);case"Sig":return new sn(Cn)}return new Be(Cn);case e.AnnotationType.POPUP:return new ze(Cn);case e.AnnotationType.FREETEXT:return new gn(Cn);case e.AnnotationType.LINE:return new Me(Cn);case e.AnnotationType.SQUARE:return new Ue(Cn);case e.AnnotationType.CIRCLE:return new en(Cn);case e.AnnotationType.POLYLINE:return new pn(Cn);case e.AnnotationType.CARET:return new xn(Cn);case e.AnnotationType.INK:return new _n(Cn);case e.AnnotationType.POLYGON:return new An(Cn);case e.AnnotationType.HIGHLIGHT:return new En(Cn);case e.AnnotationType.UNDERLINE:return new hn(Cn);case e.AnnotationType.SQUIGGLY:return new Sn(Cn);case e.AnnotationType.STRIKEOUT:return new In(Cn);case e.AnnotationType.STAMP:return new je(Cn);case e.AnnotationType.FILEATTACHMENT:return new Fe(Cn);default:return new Xe(Cn)}}}const nn=class nn{constructor(Cn,{isRenderable:Ln=!1,ignoreBorder:Bn=!1,createQuadrilaterals:Hn=!1}={}){Zn(this,Je,!1);this.isRenderable=Ln,this.data=Cn.data,this.layer=Cn.layer,this.linkService=Cn.linkService,this.downloadManager=Cn.downloadManager,this.imageResourcesPath=Cn.imageResourcesPath,this.renderForms=Cn.renderForms,this.svgFactory=Cn.svgFactory,this.annotationStorage=Cn.annotationStorage,this.enableScripting=Cn.enableScripting,this.hasJSActions=Cn.hasJSActions,this._fieldObjects=Cn.fieldObjects,this.parent=Cn.parent,Ln&&(this.container=this._createContainer(Bn)),Hn&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Cn,contentsObj:Ln,richText:Bn}){return!!(Cn!=null&&Cn.str||Ln!=null&&Ln.str||Bn!=null&&Bn.str)}get hasPopupData(){return nn._hasPopupData(this.data)}_createContainer(Cn){const{data:Ln,parent:{page:Bn,viewport:Hn}}=this,ri=document.createElement("section");ri.setAttribute("data-annotation-id",Ln.id),this instanceof Be||(ri.tabIndex=Re),ri.style.zIndex=this.parent.zIndex++,this.data.popupRef&&ri.setAttribute("aria-haspopup","dialog"),Ln.noRotate&&ri.classList.add("norotate");const{pageWidth:ui,pageHeight:pi,pageX:ki,pageY:Ci}=Hn.rawDims;if(!Ln.rect||this instanceof ze){const{rotation:qi}=Ln;return!Ln.hasOwnCanvas&&qi!==0&&this.setRotation(qi,ri),ri}const{width:xi,height:Hi}=Ge(Ln.rect),Ti=e.Util.normalizeRect([Ln.rect[0],Bn.view[3]-Ln.rect[1]+Bn.view[1],Ln.rect[2],Bn.view[3]-Ln.rect[3]+Bn.view[1]]);if(!Cn&&Ln.borderStyle.width>0){ri.style.borderWidth=`${Ln.borderStyle.width}px`;const qi=Ln.borderStyle.horizontalCornerRadius,Wi=Ln.borderStyle.verticalCornerRadius;if(qi>0||Wi>0){const $i=`calc(${qi}px * var(--scale-factor)) / calc(${Wi}px * var(--scale-factor))`;ri.style.borderRadius=$i}else if(this instanceof $e){const $i=`calc(${xi}px * var(--scale-factor)) / calc(${Hi}px * var(--scale-factor))`;ri.style.borderRadius=$i}switch(Ln.borderStyle.style){case e.AnnotationBorderStyleType.SOLID:ri.style.borderStyle="solid";break;case e.AnnotationBorderStyleType.DASHED:ri.style.borderStyle="dashed";break;case e.AnnotationBorderStyleType.BEVELED:(0,e.warn)("Unimplemented border style: beveled");break;case e.AnnotationBorderStyleType.INSET:(0,e.warn)("Unimplemented border style: inset");break;case e.AnnotationBorderStyleType.UNDERLINE:ri.style.borderBottomStyle="solid";break}const Ki=Ln.borderColor||null;Ki?(ei(this,Je,!0),ri.style.borderColor=e.Util.makeHexColor(Ki[0]|0,Ki[1]|0,Ki[2]|0)):ri.style.borderWidth=0}ri.style.left=`${100*(Ti[0]-ki)/ui}%`,ri.style.top=`${100*(Ti[1]-Ci)/pi}%`;const{rotation:Mi}=Ln;return Ln.hasOwnCanvas||Mi===0?(ri.style.width=`${100*xi/ui}%`,ri.style.height=`${100*Hi/pi}%`):this.setRotation(Mi,ri),ri}setRotation(Cn,Ln=this.container){if(!this.data.rect)return;const{pageWidth:Bn,pageHeight:Hn}=this.parent.viewport.rawDims,{width:ri,height:ui}=Ge(this.data.rect);let pi,ki;Cn%180===0?(pi=100*ri/Bn,ki=100*ui/Hn):(pi=100*ui/Bn,ki=100*ri/Hn),Ln.style.width=`${pi}%`,Ln.style.height=`${ki}%`,Ln.setAttribute("data-main-rotation",(360-Cn)%360)}get _commonActions(){const Cn=(Ln,Bn,Hn)=>{const ri=Hn.detail[Ln],ui=ri[0],pi=ri.slice(1);Hn.target.style[Bn]=Pe.ColorConverters[`${ui}_HTML`](pi),this.annotationStorage.setValue(this.data.id,{[Bn]:Pe.ColorConverters[`${ui}_rgb`](pi)})};return(0,e.shadow)(this,"_commonActions",{display:Ln=>{const{display:Bn}=Ln.detail,Hn=Bn%2===1;this.container.style.visibility=Hn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Hn,noPrint:Bn===1||Bn===2})},print:Ln=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Ln.detail.print})},hidden:Ln=>{const{hidden:Bn}=Ln.detail;this.container.style.visibility=Bn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Bn,noView:Bn})},focus:Ln=>{setTimeout(()=>Ln.target.focus({preventScroll:!1}),0)},userName:Ln=>{Ln.target.title=Ln.detail.userName},readonly:Ln=>{Ln.target.disabled=Ln.detail.readonly},required:Ln=>{this._setRequired(Ln.target,Ln.detail.required)},bgColor:Ln=>{Cn("bgColor","backgroundColor",Ln)},fillColor:Ln=>{Cn("fillColor","backgroundColor",Ln)},fgColor:Ln=>{Cn("fgColor","color",Ln)},textColor:Ln=>{Cn("textColor","color",Ln)},borderColor:Ln=>{Cn("borderColor","borderColor",Ln)},strokeColor:Ln=>{Cn("strokeColor","borderColor",Ln)},rotation:Ln=>{const Bn=Ln.detail.rotation;this.setRotation(Bn),this.annotationStorage.setValue(this.data.id,{rotation:Bn})}})}_dispatchEventFromSandbox(Cn,Ln){const Bn=this._commonActions;for(const Hn of Object.keys(Ln.detail)){const ri=Cn[Hn]||Bn[Hn];ri==null||ri(Ln)}}_setDefaultPropertiesFromJS(Cn){if(!this.enableScripting)return;const Ln=this.annotationStorage.getRawValue(this.data.id);if(!Ln)return;const Bn=this._commonActions;for(const[Hn,ri]of Object.entries(Ln)){const ui=Bn[Hn];if(ui){const pi={detail:{[Hn]:ri},target:Cn};ui(pi),delete Ln[Hn]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Cn}=this.data;if(!Cn)return;const[Ln,Bn,Hn,ri]=this.data.rect;if(Cn.length===1){const[,{x:Wi,y:Ki},{x:$i,y:ar}]=Cn[0];if(Hn===Wi&&ri===Ki&&Ln===$i&&Bn===ar)return}const{style:ui}=this.container;let pi;if(He(this,Je)){const{borderColor:Wi,borderWidth:Ki}=ui;ui.borderWidth=0,pi=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Wi}" stroke-width="${Ki}">`],this.container.classList.add("hasBorder")}const ki=Hn-Ln,Ci=ri-Bn,{svgFactory:xi}=this,Hi=xi.createElement("svg");Hi.classList.add("quadrilateralsContainer"),Hi.setAttribute("width",0),Hi.setAttribute("height",0);const Ti=xi.createElement("defs");Hi.append(Ti);const Mi=xi.createElement("clipPath"),qi=`clippath_${this.data.id}`;Mi.setAttribute("id",qi),Mi.setAttribute("clipPathUnits","objectBoundingBox"),Ti.append(Mi);for(const[,{x:Wi,y:Ki},{x:$i,y:ar}]of Cn){const rr=xi.createElement("rect"),kr=($i-Ln)/ki,Fr=(ri-Ki)/Ci,Mr=(Wi-$i)/ki,cs=(Ki-ar)/Ci;rr.setAttribute("x",kr),rr.setAttribute("y",Fr),rr.setAttribute("width",Mr),rr.setAttribute("height",cs),Mi.append(rr),pi==null||pi.push(`<rect vector-effect="non-scaling-stroke" x="${kr}" y="${Fr}" width="${Mr}" height="${cs}"/>`)}He(this,Je)&&(pi.push("</g></svg>')"),ui.backgroundImage=pi.join("")),this.container.append(Hi),this.container.style.clipPath=`url(#${qi})`}_createPopup(){const{container:Cn,data:Ln}=this;Cn.setAttribute("aria-haspopup","dialog");const Bn=new ze({data:{color:Ln.color,titleObj:Ln.titleObj,modificationDate:Ln.modificationDate,contentsObj:Ln.contentsObj,richText:Ln.richText,parentRect:Ln.rect,borderStyle:0,id:`popup_${Ln.id}`,rotation:Ln.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Bn.render())}render(){(0,e.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Cn,Ln=null){const Bn=[];if(this._fieldObjects){const Hn=this._fieldObjects[Cn];if(Hn)for(const{page:ri,id:ui,exportValues:pi}of Hn){if(ri===-1||ui===Ln)continue;const ki=typeof pi=="string"?pi:null,Ci=document.querySelector(`[data-element-id="${ui}"]`);if(Ci&&!qe.has(Ci)){(0,e.warn)(`_getElementsByName - element not allowed: ${ui}`);continue}Bn.push({id:ui,exportValue:ki,domElement:Ci})}return Bn}for(const Hn of document.getElementsByName(Cn)){const{exportValue:ri}=Hn,ui=Hn.getAttribute("data-element-id");ui!==Ln&&qe.has(Hn)&&Bn.push({id:ui,exportValue:ri,domElement:Hn})}return Bn}show(){var Cn;this.container&&(this.container.hidden=!1),(Cn=this.popup)==null||Cn.maybeShow()}hide(){var Cn;this.container&&(this.container.hidden=!0),(Cn=this.popup)==null||Cn.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Cn=this.getElementsToTriggerPopup();if(Array.isArray(Cn))for(const Ln of Cn)Ln.classList.add("highlightArea");else Cn.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Cn,data:{id:Ln}}=this;this.container.addEventListener("dblclick",()=>{var Bn;(Bn=this.linkService.eventBus)==null||Bn.dispatch("switchannotationeditormode",{source:this,mode:Cn,editId:Ln})})}};Je=new WeakMap;let Xe=nn;class We extends Xe{constructor(Ln,Bn=null){super(Ln,{isRenderable:!0,ignoreBorder:!!(Bn!=null&&Bn.ignoreBorder),createQuadrilaterals:!0});Zn(this,an);this.isTooltipOnly=Ln.data.isTooltipOnly}render(){const{data:Ln,linkService:Bn}=this,Hn=document.createElement("a");Hn.setAttribute("data-element-id",Ln.id);let ri=!1;return Ln.url?(Bn.addLinkAttributes(Hn,Ln.url,Ln.newWindow),ri=!0):Ln.action?(this._bindNamedAction(Hn,Ln.action),ri=!0):Ln.attachment?(this._bindAttachment(Hn,Ln.attachment),ri=!0):Ln.setOCGState?(Vn(this,an,Lh).call(this,Hn,Ln.setOCGState),ri=!0):Ln.dest?(this._bindLink(Hn,Ln.dest),ri=!0):(Ln.actions&&(Ln.actions.Action||Ln.actions["Mouse Up"]||Ln.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Hn,Ln),ri=!0),Ln.resetForm?(this._bindResetFormAction(Hn,Ln.resetForm),ri=!0):this.isTooltipOnly&&!ri&&(this._bindLink(Hn,""),ri=!0)),this.container.classList.add("linkAnnotation"),ri&&this.container.append(Hn),this.container}_bindLink(Ln,Bn){Ln.href=this.linkService.getDestinationHash(Bn),Ln.onclick=()=>(Bn&&this.linkService.goToDestination(Bn),!1),(Bn||Bn==="")&&Vn(this,an,Ws).call(this)}_bindNamedAction(Ln,Bn){Ln.href=this.linkService.getAnchorUrl(""),Ln.onclick=()=>(this.linkService.executeNamedAction(Bn),!1),Vn(this,an,Ws).call(this)}_bindAttachment(Ln,Bn){Ln.href=this.linkService.getAnchorUrl(""),Ln.onclick=()=>{var Hn;return(Hn=this.downloadManager)==null||Hn.openOrDownloadData(this.container,Bn.content,Bn.filename),!1},Vn(this,an,Ws).call(this)}_bindJSAction(Ln,Bn){Ln.href=this.linkService.getAnchorUrl("");const Hn=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ri of Object.keys(Bn.actions)){const ui=Hn.get(ri);ui&&(Ln[ui]=()=>{var pi;return(pi=this.linkService.eventBus)==null||pi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Bn.id,name:ri}}),!1})}Ln.onclick||(Ln.onclick=()=>!1),Vn(this,an,Ws).call(this)}_bindResetFormAction(Ln,Bn){const Hn=Ln.onclick;if(Hn||(Ln.href=this.linkService.getAnchorUrl("")),Vn(this,an,Ws).call(this),!this._fieldObjects){(0,e.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Hn||(Ln.onclick=()=>!1);return}Ln.onclick=()=>{var Hi;Hn==null||Hn();const{fields:ri,refs:ui,include:pi}=Bn,ki=[];if(ri.length!==0||ui.length!==0){const Ti=new Set(ui);for(const Mi of ri){const qi=this._fieldObjects[Mi]||[];for(const{id:Wi}of qi)Ti.add(Wi)}for(const Mi of Object.values(this._fieldObjects))for(const qi of Mi)Ti.has(qi.id)===pi&&ki.push(qi)}else for(const Ti of Object.values(this._fieldObjects))ki.push(...Ti);const Ci=this.annotationStorage,xi=[];for(const Ti of ki){const{id:Mi}=Ti;switch(xi.push(Mi),Ti.type){case"text":{const Wi=Ti.defaultValue||"";Ci.setValue(Mi,{value:Wi});break}case"checkbox":case"radiobutton":{const Wi=Ti.defaultValue===Ti.exportValues;Ci.setValue(Mi,{value:Wi});break}case"combobox":case"listbox":{const Wi=Ti.defaultValue||"";Ci.setValue(Mi,{value:Wi});break}default:continue}const qi=document.querySelector(`[data-element-id="${Mi}"]`);if(qi){if(!qe.has(qi)){(0,e.warn)(`_bindResetFormAction - element not allowed: ${Mi}`);continue}}else continue;qi.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Hi=this.linkService.eventBus)==null||Hi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:xi,name:"ResetForm"}})),!1}}}an=new WeakSet,Ws=function(){this.container.setAttribute("data-internal-link","")},Lh=function(Ln,Bn){Ln.href=this.linkService.getAnchorUrl(""),Ln.onclick=()=>(this.linkService.executeSetOCGState(Bn),!1),Vn(this,an,Ws).call(this)};class Ke extends Xe{constructor(Cn){super(Cn,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Cn=document.createElement("img");return Cn.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Cn.alt="[{{type}} Annotation]",Cn.dataset.l10nId="text_annotation_type",Cn.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Cn),this.container}}class Be extends Xe{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Cn){var Ln;this.data.hasOwnCanvas&&(((Ln=Cn.previousSibling)==null?void 0:Ln.nodeName)==="CANVAS"&&(Cn.previousSibling.hidden=!0),Cn.hidden=!1)}_getKeyModifier(Cn){const{isWin:Ln,isMac:Bn}=e.FeatureTest.platform;return Ln&&Cn.ctrlKey||Bn&&Cn.metaKey}_setEventListener(Cn,Ln,Bn,Hn,ri){Bn.includes("mouse")?Cn.addEventListener(Bn,ui=>{var pi;(pi=this.linkService.eventBus)==null||pi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Hn,value:ri(ui),shift:ui.shiftKey,modifier:this._getKeyModifier(ui)}})}):Cn.addEventListener(Bn,ui=>{var pi;if(Bn==="blur"){if(!Ln.focused||!ui.relatedTarget)return;Ln.focused=!1}else if(Bn==="focus"){if(Ln.focused)return;Ln.focused=!0}ri&&((pi=this.linkService.eventBus)==null||pi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Hn,value:ri(ui)}}))})}_setEventListeners(Cn,Ln,Bn,Hn){var ri,ui,pi;for(const[ki,Ci]of Bn)(Ci==="Action"||(ri=this.data.actions)!=null&&ri[Ci])&&((Ci==="Focus"||Ci==="Blur")&&(Ln||(Ln={focused:!1})),this._setEventListener(Cn,Ln,ki,Ci,Hn),Ci==="Focus"&&!((ui=this.data.actions)!=null&&ui.Blur)?this._setEventListener(Cn,Ln,"blur","Blur",null):Ci==="Blur"&&!((pi=this.data.actions)!=null&&pi.Focus)&&this._setEventListener(Cn,Ln,"focus","Focus",null))}_setBackgroundColor(Cn){const Ln=this.data.backgroundColor||null;Cn.style.backgroundColor=Ln===null?"transparent":e.Util.makeHexColor(Ln[0],Ln[1],Ln[2])}_setTextStyle(Cn){const Ln=["left","center","right"],{fontColor:Bn}=this.data.defaultAppearanceData,Hn=this.data.defaultAppearanceData.fontSize||Ie,ri=Cn.style;let ui;const pi=2,ki=Ci=>Math.round(10*Ci)/10;if(this.data.multiLine){const Ci=Math.abs(this.data.rect[3]-this.data.rect[1]-pi),xi=Math.round(Ci/(e.LINE_FACTOR*Hn))||1,Hi=Ci/xi;ui=Math.min(Hn,ki(Hi/e.LINE_FACTOR))}else{const Ci=Math.abs(this.data.rect[3]-this.data.rect[1]-pi);ui=Math.min(Hn,ki(Ci/e.LINE_FACTOR))}ri.fontSize=`calc(${ui}px * var(--scale-factor))`,ri.color=e.Util.makeHexColor(Bn[0],Bn[1],Bn[2]),this.data.textAlignment!==null&&(ri.textAlign=Ln[this.data.textAlignment])}_setRequired(Cn,Ln){Ln?Cn.setAttribute("required",!0):Cn.removeAttribute("required"),Cn.setAttribute("aria-required",Ln)}}class Ye extends Be{constructor(Cn){const Ln=Cn.renderForms||!Cn.data.hasAppearance&&!!Cn.data.fieldValue;super(Cn,{isRenderable:Ln})}setPropertyOnSiblings(Cn,Ln,Bn,Hn){const ri=this.annotationStorage;for(const ui of this._getElementsByName(Cn.name,Cn.id))ui.domElement&&(ui.domElement[Ln]=Bn),ri.setValue(ui.id,{[Hn]:Bn})}render(){var Hn,ri;const Cn=this.annotationStorage,Ln=this.data.id;this.container.classList.add("textWidgetAnnotation");let Bn=null;if(this.renderForms){const ui=Cn.getValue(Ln,{value:this.data.fieldValue});let pi=ui.value||"";const ki=Cn.getValue(Ln,{charLimit:this.data.maxLen}).charLimit;ki&&pi.length>ki&&(pi=pi.slice(0,ki));let Ci=ui.formattedValue||((Hn=this.data.textContent)==null?void 0:Hn.join(`
`))||null;Ci&&this.data.comb&&(Ci=Ci.replaceAll(/\s+/g,""));const xi={userValue:pi,formattedValue:Ci,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Bn=document.createElement("textarea"),Bn.textContent=Ci??pi,this.data.doNotScroll&&(Bn.style.overflowY="hidden")):(Bn=document.createElement("input"),Bn.type="text",Bn.setAttribute("value",Ci??pi),this.data.doNotScroll&&(Bn.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Bn.hidden=!0),qe.add(Bn),Bn.setAttribute("data-element-id",Ln),Bn.disabled=this.data.readOnly,Bn.name=this.data.fieldName,Bn.tabIndex=Re,this._setRequired(Bn,this.data.required),ki&&(Bn.maxLength=ki),Bn.addEventListener("input",Ti=>{Cn.setValue(Ln,{value:Ti.target.value}),this.setPropertyOnSiblings(Bn,"value",Ti.target.value,"value"),xi.formattedValue=null}),Bn.addEventListener("resetform",Ti=>{const Mi=this.data.defaultFieldValue??"";Bn.value=xi.userValue=Mi,xi.formattedValue=null});let Hi=Ti=>{const{formattedValue:Mi}=xi;Mi!=null&&(Ti.target.value=Mi),Ti.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Bn.addEventListener("focus",Mi=>{if(xi.focused)return;const{target:qi}=Mi;xi.userValue&&(qi.value=xi.userValue),xi.lastCommittedValue=qi.value,xi.commitKey=1,xi.focused=!0}),Bn.addEventListener("updatefromsandbox",Mi=>{this.showElementAndHideCanvas(Mi.target);const qi={value(Wi){xi.userValue=Wi.detail.value??"",Cn.setValue(Ln,{value:xi.userValue.toString()}),Wi.target.value=xi.userValue},formattedValue(Wi){const{formattedValue:Ki}=Wi.detail;xi.formattedValue=Ki,Ki!=null&&Wi.target!==document.activeElement&&(Wi.target.value=Ki),Cn.setValue(Ln,{formattedValue:Ki})},selRange(Wi){Wi.target.setSelectionRange(...Wi.detail.selRange)},charLimit:Wi=>{var rr;const{charLimit:Ki}=Wi.detail,{target:$i}=Wi;if(Ki===0){$i.removeAttribute("maxLength");return}$i.setAttribute("maxLength",Ki);let ar=xi.userValue;!ar||ar.length<=Ki||(ar=ar.slice(0,Ki),$i.value=xi.userValue=ar,Cn.setValue(Ln,{value:ar}),(rr=this.linkService.eventBus)==null||rr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ln,name:"Keystroke",value:ar,willCommit:!0,commitKey:1,selStart:$i.selectionStart,selEnd:$i.selectionEnd}}))}};this._dispatchEventFromSandbox(qi,Mi)}),Bn.addEventListener("keydown",Mi=>{var Ki;xi.commitKey=1;let qi=-1;if(Mi.key==="Escape"?qi=0:Mi.key==="Enter"&&!this.data.multiLine?qi=2:Mi.key==="Tab"&&(xi.commitKey=3),qi===-1)return;const{value:Wi}=Mi.target;xi.lastCommittedValue!==Wi&&(xi.lastCommittedValue=Wi,xi.userValue=Wi,(Ki=this.linkService.eventBus)==null||Ki.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ln,name:"Keystroke",value:Wi,willCommit:!0,commitKey:qi,selStart:Mi.target.selectionStart,selEnd:Mi.target.selectionEnd}}))});const Ti=Hi;Hi=null,Bn.addEventListener("blur",Mi=>{var Wi;if(!xi.focused||!Mi.relatedTarget)return;xi.focused=!1;const{value:qi}=Mi.target;xi.userValue=qi,xi.lastCommittedValue!==qi&&((Wi=this.linkService.eventBus)==null||Wi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ln,name:"Keystroke",value:qi,willCommit:!0,commitKey:xi.commitKey,selStart:Mi.target.selectionStart,selEnd:Mi.target.selectionEnd}})),Ti(Mi)}),(ri=this.data.actions)!=null&&ri.Keystroke&&Bn.addEventListener("beforeinput",Mi=>{var Fr;xi.lastCommittedValue=null;const{data:qi,target:Wi}=Mi,{value:Ki,selectionStart:$i,selectionEnd:ar}=Wi;let rr=$i,kr=ar;switch(Mi.inputType){case"deleteWordBackward":{const Mr=Ki.substring(0,$i).match(/\w*[^\w]*$/);Mr&&(rr-=Mr[0].length);break}case"deleteWordForward":{const Mr=Ki.substring($i).match(/^[^\w]*\w*/);Mr&&(kr+=Mr[0].length);break}case"deleteContentBackward":$i===ar&&(rr-=1);break;case"deleteContentForward":$i===ar&&(kr+=1);break}Mi.preventDefault(),(Fr=this.linkService.eventBus)==null||Fr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ln,name:"Keystroke",value:Ki,change:qi||"",willCommit:!1,selStart:rr,selEnd:kr}})}),this._setEventListeners(Bn,xi,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Mi=>Mi.target.value)}if(Hi&&Bn.addEventListener("blur",Hi),this.data.comb){const Mi=(this.data.rect[2]-this.data.rect[0])/ki;Bn.classList.add("comb"),Bn.style.letterSpacing=`calc(${Mi}px * var(--scale-factor) - 1ch)`}}else Bn=document.createElement("div"),Bn.textContent=this.data.fieldValue,Bn.style.verticalAlign="middle",Bn.style.display="table-cell";return this._setTextStyle(Bn),this._setBackgroundColor(Bn),this._setDefaultPropertiesFromJS(Bn),this.container.append(Bn),this.container}}class sn extends Be{constructor(Cn){super(Cn,{isRenderable:!!Cn.data.hasOwnCanvas})}}class rn extends Be{constructor(Cn){super(Cn,{isRenderable:Cn.renderForms})}render(){const Cn=this.annotationStorage,Ln=this.data,Bn=Ln.id;let Hn=Cn.getValue(Bn,{value:Ln.exportValue===Ln.fieldValue}).value;typeof Hn=="string"&&(Hn=Hn!=="Off",Cn.setValue(Bn,{value:Hn})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ri=document.createElement("input");return qe.add(ri),ri.setAttribute("data-element-id",Bn),ri.disabled=Ln.readOnly,this._setRequired(ri,this.data.required),ri.type="checkbox",ri.name=Ln.fieldName,Hn&&ri.setAttribute("checked",!0),ri.setAttribute("exportValue",Ln.exportValue),ri.tabIndex=Re,ri.addEventListener("change",ui=>{const{name:pi,checked:ki}=ui.target;for(const Ci of this._getElementsByName(pi,Bn)){const xi=ki&&Ci.exportValue===Ln.exportValue;Ci.domElement&&(Ci.domElement.checked=xi),Cn.setValue(Ci.id,{value:xi})}Cn.setValue(Bn,{value:ki})}),ri.addEventListener("resetform",ui=>{const pi=Ln.defaultFieldValue||"Off";ui.target.checked=pi===Ln.exportValue}),this.enableScripting&&this.hasJSActions&&(ri.addEventListener("updatefromsandbox",ui=>{const pi={value(ki){ki.target.checked=ki.detail.value!=="Off",Cn.setValue(Bn,{value:ki.target.checked})}};this._dispatchEventFromSandbox(pi,ui)}),this._setEventListeners(ri,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ui=>ui.target.checked)),this._setBackgroundColor(ri),this._setDefaultPropertiesFromJS(ri),this.container.append(ri),this.container}}class $e extends Be{constructor(Cn){super(Cn,{isRenderable:Cn.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Cn=this.annotationStorage,Ln=this.data,Bn=Ln.id;let Hn=Cn.getValue(Bn,{value:Ln.fieldValue===Ln.buttonValue}).value;typeof Hn=="string"&&(Hn=Hn!==Ln.buttonValue,Cn.setValue(Bn,{value:Hn}));const ri=document.createElement("input");if(qe.add(ri),ri.setAttribute("data-element-id",Bn),ri.disabled=Ln.readOnly,this._setRequired(ri,this.data.required),ri.type="radio",ri.name=Ln.fieldName,Hn&&ri.setAttribute("checked",!0),ri.tabIndex=Re,ri.addEventListener("change",ui=>{const{name:pi,checked:ki}=ui.target;for(const Ci of this._getElementsByName(pi,Bn))Cn.setValue(Ci.id,{value:!1});Cn.setValue(Bn,{value:ki})}),ri.addEventListener("resetform",ui=>{const pi=Ln.defaultFieldValue;ui.target.checked=pi!=null&&pi===Ln.buttonValue}),this.enableScripting&&this.hasJSActions){const ui=Ln.buttonValue;ri.addEventListener("updatefromsandbox",pi=>{const ki={value:Ci=>{const xi=ui===Ci.detail.value;for(const Hi of this._getElementsByName(Ci.target.name)){const Ti=xi&&Hi.id===Bn;Hi.domElement&&(Hi.domElement.checked=Ti),Cn.setValue(Hi.id,{value:Ti})}}};this._dispatchEventFromSandbox(ki,pi)}),this._setEventListeners(ri,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],pi=>pi.target.checked)}return this._setBackgroundColor(ri),this._setDefaultPropertiesFromJS(ri),this.container.append(ri),this.container}}class tn extends We{constructor(Cn){super(Cn,{ignoreBorder:Cn.data.hasAppearance})}render(){const Cn=super.render();Cn.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Cn.title=this.data.alternativeText);const Ln=Cn.lastChild;return this.enableScripting&&this.hasJSActions&&Ln&&(this._setDefaultPropertiesFromJS(Ln),Ln.addEventListener("updatefromsandbox",Bn=>{this._dispatchEventFromSandbox({},Bn)})),Cn}}class Ve extends Be{constructor(Cn){super(Cn,{isRenderable:Cn.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Cn=this.annotationStorage,Ln=this.data.id,Bn=Cn.getValue(Ln,{value:this.data.fieldValue}),Hn=document.createElement("select");qe.add(Hn),Hn.setAttribute("data-element-id",Ln),Hn.disabled=this.data.readOnly,this._setRequired(Hn,this.data.required),Hn.name=this.data.fieldName,Hn.tabIndex=Re;let ri=this.data.combo&&this.data.options.length>0;this.data.combo||(Hn.size=this.data.options.length,this.data.multiSelect&&(Hn.multiple=!0)),Hn.addEventListener("resetform",xi=>{const Hi=this.data.defaultFieldValue;for(const Ti of Hn.options)Ti.selected=Ti.value===Hi});for(const xi of this.data.options){const Hi=document.createElement("option");Hi.textContent=xi.displayValue,Hi.value=xi.exportValue,Bn.value.includes(xi.exportValue)&&(Hi.setAttribute("selected",!0),ri=!1),Hn.append(Hi)}let ui=null;if(ri){const xi=document.createElement("option");xi.value=" ",xi.setAttribute("hidden",!0),xi.setAttribute("selected",!0),Hn.prepend(xi),ui=()=>{xi.remove(),Hn.removeEventListener("input",ui),ui=null},Hn.addEventListener("input",ui)}const pi=xi=>{const Hi=xi?"value":"textContent",{options:Ti,multiple:Mi}=Hn;return Mi?Array.prototype.filter.call(Ti,qi=>qi.selected).map(qi=>qi[Hi]):Ti.selectedIndex===-1?null:Ti[Ti.selectedIndex][Hi]};let ki=pi(!1);const Ci=xi=>{const Hi=xi.target.options;return Array.prototype.map.call(Hi,Ti=>({displayValue:Ti.textContent,exportValue:Ti.value}))};return this.enableScripting&&this.hasJSActions?(Hn.addEventListener("updatefromsandbox",xi=>{const Hi={value(Ti){ui==null||ui();const Mi=Ti.detail.value,qi=new Set(Array.isArray(Mi)?Mi:[Mi]);for(const Wi of Hn.options)Wi.selected=qi.has(Wi.value);Cn.setValue(Ln,{value:pi(!0)}),ki=pi(!1)},multipleSelection(Ti){Hn.multiple=!0},remove(Ti){const Mi=Hn.options,qi=Ti.detail.remove;Mi[qi].selected=!1,Hn.remove(qi),Mi.length>0&&Array.prototype.findIndex.call(Mi,Ki=>Ki.selected)===-1&&(Mi[0].selected=!0),Cn.setValue(Ln,{value:pi(!0),items:Ci(Ti)}),ki=pi(!1)},clear(Ti){for(;Hn.length!==0;)Hn.remove(0);Cn.setValue(Ln,{value:null,items:[]}),ki=pi(!1)},insert(Ti){const{index:Mi,displayValue:qi,exportValue:Wi}=Ti.detail.insert,Ki=Hn.children[Mi],$i=document.createElement("option");$i.textContent=qi,$i.value=Wi,Ki?Ki.before($i):Hn.append($i),Cn.setValue(Ln,{value:pi(!0),items:Ci(Ti)}),ki=pi(!1)},items(Ti){const{items:Mi}=Ti.detail;for(;Hn.length!==0;)Hn.remove(0);for(const qi of Mi){const{displayValue:Wi,exportValue:Ki}=qi,$i=document.createElement("option");$i.textContent=Wi,$i.value=Ki,Hn.append($i)}Hn.options.length>0&&(Hn.options[0].selected=!0),Cn.setValue(Ln,{value:pi(!0),items:Ci(Ti)}),ki=pi(!1)},indices(Ti){const Mi=new Set(Ti.detail.indices);for(const qi of Ti.target.options)qi.selected=Mi.has(qi.index);Cn.setValue(Ln,{value:pi(!0)}),ki=pi(!1)},editable(Ti){Ti.target.disabled=!Ti.detail.editable}};this._dispatchEventFromSandbox(Hi,xi)}),Hn.addEventListener("input",xi=>{var Ti;const Hi=pi(!0);Cn.setValue(Ln,{value:Hi}),xi.preventDefault(),(Ti=this.linkService.eventBus)==null||Ti.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ln,name:"Keystroke",value:ki,changeEx:Hi,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Hn,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],xi=>xi.target.value)):Hn.addEventListener("input",function(xi){Cn.setValue(Ln,{value:pi(!0)})}),this.data.combo&&this._setTextStyle(Hn),this._setBackgroundColor(Hn),this._setDefaultPropertiesFromJS(Hn),this.container.append(Hn),this.container}}class ze extends Xe{constructor(Cn){const{data:Ln,elements:Bn}=Cn;super(Cn,{isRenderable:Xe._hasPopupData(Ln)}),this.elements=Bn}render(){this.container.classList.add("popupAnnotation");const Cn=new Qe({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Ln=[];for(const Bn of this.elements)Bn.popup=Cn,Ln.push(Bn.data.id),Bn.addHighlightArea();return this.container.setAttribute("aria-controls",Ln.map(Bn=>`${e.AnnotationPrefix}${Bn}`).join(",")),this.container}}class Qe{constructor({container:Cn,color:Ln,elements:Bn,titleObj:Hn,modificationDate:ri,contentsObj:ui,richText:pi,parent:ki,rect:Ci,parentRect:xi,open:Hi}){Zn(this,di);Zn(this,Fn,null);Zn(this,On,Vn(this,di,Ph).bind(this));Zn(this,Un,Vn(this,di,Lc).bind(this));Zn(this,Wn,Vn(this,di,xc).bind(this));Zn(this,ni,Vn(this,di,il).bind(this));Zn(this,Dn,null);Zn(this,cn,null);Zn(this,qn,null);Zn(this,fn,null);Zn(this,vn,null);Zn(this,kn,null);Zn(this,Rn,!1);Zn(this,zn,null);Zn(this,Qn,null);Zn(this,ii,null);Zn(this,jn,null);Zn(this,fi,!1);var Mi;ei(this,cn,Cn),ei(this,jn,Hn),ei(this,qn,ui),ei(this,ii,pi),ei(this,vn,ki),ei(this,Dn,Ln),ei(this,Qn,Ci),ei(this,kn,xi),ei(this,fn,Bn);const Ti=_e.PDFDateString.toDateObject(ri);Ti&&ei(this,Fn,ki.l10n.get("annotation_date_string",{date:Ti.toLocaleDateString(),time:Ti.toLocaleTimeString()})),this.trigger=Bn.flatMap(qi=>qi.getElementsToTriggerPopup());for(const qi of this.trigger)qi.addEventListener("click",He(this,ni)),qi.addEventListener("mouseenter",He(this,Wn)),qi.addEventListener("mouseleave",He(this,Un)),qi.classList.add("popupTriggerArea");for(const qi of Bn)(Mi=qi.container)==null||Mi.addEventListener("keydown",He(this,On));He(this,cn).hidden=!0,Hi&&Vn(this,di,il).call(this)}render(){if(He(this,zn))return;const{page:{view:Cn},viewport:{rawDims:{pageWidth:Ln,pageHeight:Bn,pageX:Hn,pageY:ri}}}=He(this,vn),ui=ei(this,zn,document.createElement("div"));if(ui.className="popup",He(this,Dn)){const rr=ui.style.outlineColor=e.Util.makeHexColor(...He(this,Dn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?ui.style.backgroundColor=`color-mix(in srgb, ${rr} 30%, white)`:ui.style.backgroundColor=e.Util.makeHexColor(...He(this,Dn).map(Fr=>Math.floor(.7*(255-Fr)+Fr)))}const pi=document.createElement("span");pi.className="header";const ki=document.createElement("h1");if(pi.append(ki),{dir:ki.dir,str:ki.textContent}=He(this,jn),ui.append(pi),He(this,Fn)){const rr=document.createElement("span");rr.classList.add("popupDate"),He(this,Fn).then(kr=>{rr.textContent=kr}),pi.append(rr)}const Ci=He(this,qn),xi=He(this,ii);if(xi!=null&&xi.str&&(!(Ci!=null&&Ci.str)||Ci.str===xi.str))Ee.XfaLayer.render({xfaHtml:xi.html,intent:"richText",div:ui}),ui.lastChild.classList.add("richText","popupContent");else{const rr=this._formatContents(Ci);ui.append(rr)}let Hi=!!He(this,kn),Ti=Hi?He(this,kn):He(this,Qn);for(const rr of He(this,fn))if(!Ti||e.Util.intersect(rr.data.rect,Ti)!==null){Ti=rr.data.rect,Hi=!0;break}const Mi=e.Util.normalizeRect([Ti[0],Cn[3]-Ti[1]+Cn[1],Ti[2],Cn[3]-Ti[3]+Cn[1]]),Wi=Hi?Ti[2]-Ti[0]+5:0,Ki=Mi[0]+Wi,$i=Mi[1],{style:ar}=He(this,cn);ar.left=`${100*(Ki-Hn)/Ln}%`,ar.top=`${100*($i-ri)/Bn}%`,He(this,cn).append(ui)}_formatContents({str:Cn,dir:Ln}){const Bn=document.createElement("p");Bn.classList.add("popupContent"),Bn.dir=Ln;const Hn=Cn.split(/(?:\r\n?|\n)/);for(let ri=0,ui=Hn.length;ri<ui;++ri){const pi=Hn[ri];Bn.append(document.createTextNode(pi)),ri<ui-1&&Bn.append(document.createElement("br"))}return Bn}forceHide(){ei(this,fi,this.isVisible),He(this,fi)&&(He(this,cn).hidden=!0)}maybeShow(){He(this,fi)&&(ei(this,fi,!1),He(this,cn).hidden=!1)}get isVisible(){return He(this,cn).hidden===!1}}Fn=new WeakMap,On=new WeakMap,Un=new WeakMap,Wn=new WeakMap,ni=new WeakMap,Dn=new WeakMap,cn=new WeakMap,qn=new WeakMap,fn=new WeakMap,vn=new WeakMap,kn=new WeakMap,Rn=new WeakMap,zn=new WeakMap,Qn=new WeakMap,ii=new WeakMap,jn=new WeakMap,fi=new WeakMap,di=new WeakSet,Ph=function(Cn){Cn.altKey||Cn.shiftKey||Cn.ctrlKey||Cn.metaKey||(Cn.key==="Enter"||Cn.key==="Escape"&&He(this,Rn))&&Vn(this,di,il).call(this)},il=function(){ei(this,Rn,!He(this,Rn)),He(this,Rn)?(Vn(this,di,xc).call(this),He(this,cn).addEventListener("click",He(this,ni)),He(this,cn).addEventListener("keydown",He(this,On))):(Vn(this,di,Lc).call(this),He(this,cn).removeEventListener("click",He(this,ni)),He(this,cn).removeEventListener("keydown",He(this,On)))},xc=function(){He(this,zn)||this.render(),this.isVisible?He(this,Rn)&&He(this,cn).classList.add("focused"):(He(this,cn).hidden=!1,He(this,cn).style.zIndex=parseInt(He(this,cn).style.zIndex)+1e3)},Lc=function(){He(this,cn).classList.remove("focused"),!(He(this,Rn)||!this.isVisible)&&(He(this,cn).hidden=!0,He(this,cn).style.zIndex=parseInt(He(this,cn).style.zIndex)-1e3)};class gn extends Xe{constructor(Cn){super(Cn,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Cn.data.textContent,this.textPosition=Cn.data.textPosition,this.annotationEditorType=e.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Cn=document.createElement("div");Cn.classList.add("annotationTextContent"),Cn.setAttribute("role","comment");for(const Ln of this.textContent){const Bn=document.createElement("span");Bn.textContent=Ln,Cn.append(Bn)}this.container.append(Cn)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=gn;class Me extends Xe{constructor(Ln){super(Ln,{isRenderable:!0,ignoreBorder:!0});Zn(this,Fi,null)}render(){this.container.classList.add("lineAnnotation");const Ln=this.data,{width:Bn,height:Hn}=Ge(Ln.rect),ri=this.svgFactory.create(Bn,Hn,!0),ui=ei(this,Fi,this.svgFactory.createElement("svg:line"));return ui.setAttribute("x1",Ln.rect[2]-Ln.lineCoordinates[0]),ui.setAttribute("y1",Ln.rect[3]-Ln.lineCoordinates[1]),ui.setAttribute("x2",Ln.rect[2]-Ln.lineCoordinates[2]),ui.setAttribute("y2",Ln.rect[3]-Ln.lineCoordinates[3]),ui.setAttribute("stroke-width",Ln.borderStyle.width||1),ui.setAttribute("stroke","transparent"),ui.setAttribute("fill","transparent"),ri.append(ui),this.container.append(ri),!Ln.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return He(this,Fi)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fi=new WeakMap;class Ue extends Xe{constructor(Ln){super(Ln,{isRenderable:!0,ignoreBorder:!0});Zn(this,Oi,null)}render(){this.container.classList.add("squareAnnotation");const Ln=this.data,{width:Bn,height:Hn}=Ge(Ln.rect),ri=this.svgFactory.create(Bn,Hn,!0),ui=Ln.borderStyle.width,pi=ei(this,Oi,this.svgFactory.createElement("svg:rect"));return pi.setAttribute("x",ui/2),pi.setAttribute("y",ui/2),pi.setAttribute("width",Bn-ui),pi.setAttribute("height",Hn-ui),pi.setAttribute("stroke-width",ui||1),pi.setAttribute("stroke","transparent"),pi.setAttribute("fill","transparent"),ri.append(pi),this.container.append(ri),!Ln.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return He(this,Oi)}addHighlightArea(){this.container.classList.add("highlightArea")}}Oi=new WeakMap;class en extends Xe{constructor(Ln){super(Ln,{isRenderable:!0,ignoreBorder:!0});Zn(this,Yi,null)}render(){this.container.classList.add("circleAnnotation");const Ln=this.data,{width:Bn,height:Hn}=Ge(Ln.rect),ri=this.svgFactory.create(Bn,Hn,!0),ui=Ln.borderStyle.width,pi=ei(this,Yi,this.svgFactory.createElement("svg:ellipse"));return pi.setAttribute("cx",Bn/2),pi.setAttribute("cy",Hn/2),pi.setAttribute("rx",Bn/2-ui/2),pi.setAttribute("ry",Hn/2-ui/2),pi.setAttribute("stroke-width",ui||1),pi.setAttribute("stroke","transparent"),pi.setAttribute("fill","transparent"),ri.append(pi),this.container.append(ri),!Ln.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return He(this,Yi)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yi=new WeakMap;class pn extends Xe{constructor(Ln){super(Ln,{isRenderable:!0,ignoreBorder:!0});Zn(this,ai,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Ln=this.data,{width:Bn,height:Hn}=Ge(Ln.rect),ri=this.svgFactory.create(Bn,Hn,!0);let ui=[];for(const ki of Ln.vertices){const Ci=ki.x-Ln.rect[0],xi=Ln.rect[3]-ki.y;ui.push(Ci+","+xi)}ui=ui.join(" ");const pi=ei(this,ai,this.svgFactory.createElement(this.svgElementName));return pi.setAttribute("points",ui),pi.setAttribute("stroke-width",Ln.borderStyle.width||1),pi.setAttribute("stroke","transparent"),pi.setAttribute("fill","transparent"),ri.append(pi),this.container.append(ri),!Ln.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return He(this,ai)}addHighlightArea(){this.container.classList.add("highlightArea")}}ai=new WeakMap;class An extends pn{constructor(Cn){super(Cn),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class xn extends Xe{constructor(Cn){super(Cn,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class _n extends Xe{constructor(Ln){super(Ln,{isRenderable:!0,ignoreBorder:!0});Zn(this,Xn,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=e.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Ln=this.data,{width:Bn,height:Hn}=Ge(Ln.rect),ri=this.svgFactory.create(Bn,Hn,!0);for(const ui of Ln.inkLists){let pi=[];for(const Ci of ui){const xi=Ci.x-Ln.rect[0],Hi=Ln.rect[3]-Ci.y;pi.push(`${xi},${Hi}`)}pi=pi.join(" ");const ki=this.svgFactory.createElement(this.svgElementName);He(this,Xn).push(ki),ki.setAttribute("points",pi),ki.setAttribute("stroke-width",Ln.borderStyle.width||1),ki.setAttribute("stroke","transparent"),ki.setAttribute("fill","transparent"),!Ln.popupRef&&this.hasPopupData&&this._createPopup(),ri.append(ki)}return this.container.append(ri),this.container}getElementsToTriggerPopup(){return He(this,Xn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xn=new WeakMap,t.InkAnnotationElement=_n;class En extends Xe{constructor(Cn){super(Cn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class hn extends Xe{constructor(Cn){super(Cn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Sn extends Xe{constructor(Cn){super(Cn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class In extends Xe{constructor(Cn){super(Cn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class je extends Xe{constructor(Cn){super(Cn,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=je;class Fe extends Xe{constructor(Ln){var ri;super(Ln,{isRenderable:!0});Zn(this,wi);Zn(this,$n,null);const{filename:Bn,content:Hn}=this.data.file;this.filename=(0,_e.getFilenameFromUrl)(Bn,!0),this.content=Hn,(ri=this.linkService.eventBus)==null||ri.dispatch("fileattachmentannotation",{source:this,filename:Bn,content:Hn})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Ln,data:Bn}=this;let Hn;Bn.hasAppearance||Bn.fillAlpha===0?Hn=document.createElement("div"):(Hn=document.createElement("img"),Hn.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Bn.name)?"paperclip":"pushpin"}.svg`,Bn.fillAlpha&&Bn.fillAlpha<1&&(Hn.style=`filter: opacity(${Math.round(Bn.fillAlpha*100)}%);`)),Hn.addEventListener("dblclick",Vn(this,wi,Pc).bind(this)),ei(this,$n,Hn);const{isMac:ri}=e.FeatureTest.platform;return Ln.addEventListener("keydown",ui=>{ui.key==="Enter"&&(ri?ui.metaKey:ui.ctrlKey)&&Vn(this,wi,Pc).call(this)}),!Bn.popupRef&&this.hasPopupData?this._createPopup():Hn.classList.add("popupTriggerArea"),Ln.append(Hn),Ln}getElementsToTriggerPopup(){return He(this,$n)}addHighlightArea(){this.container.classList.add("highlightArea")}}$n=new WeakMap,wi=new WeakSet,Pc=function(){var Ln;(Ln=this.downloadManager)==null||Ln.openOrDownloadData(this.container,this.content,this.filename)};class De{constructor({div:Cn,accessibilityManager:Ln,annotationCanvasMap:Bn,l10n:Hn,page:ri,viewport:ui}){Zn(this,bi);Zn(this,Bi,null);Zn(this,Tn,null);Zn(this,ci,new Map);this.div=Cn,ei(this,Bi,Ln),ei(this,Tn,Bn),this.l10n=Hn,this.page=ri,this.viewport=ui,this.zIndex=0,this.l10n||(this.l10n=Te.NullL10n)}async render(Cn){const{annotations:Ln}=Cn,Bn=this.div;(0,_e.setLayerDimensions)(Bn,this.viewport);const Hn=new Map,ri={data:null,layer:Bn,linkService:Cn.linkService,downloadManager:Cn.downloadManager,imageResourcesPath:Cn.imageResourcesPath||"",renderForms:Cn.renderForms!==!1,svgFactory:new _e.DOMSVGFactory,annotationStorage:Cn.annotationStorage||new Se.AnnotationStorage,enableScripting:Cn.enableScripting===!0,hasJSActions:Cn.hasJSActions,fieldObjects:Cn.fieldObjects,parent:this,elements:null};for(const ui of Ln){if(ui.noHTML)continue;const pi=ui.annotationType===e.AnnotationType.POPUP;if(pi){const xi=Hn.get(ui.id);if(!xi)continue;ri.elements=xi}else{const{width:xi,height:Hi}=Ge(ui.rect);if(xi<=0||Hi<=0)continue}ri.data=ui;const ki=Ce.create(ri);if(!ki.isRenderable)continue;if(!pi&&ui.popupRef){const xi=Hn.get(ui.popupRef);xi?xi.push(ki):Hn.set(ui.popupRef,[ki])}ki.annotationEditorType>0&&He(this,ci).set(ki.data.id,ki);const Ci=ki.render();ui.hidden&&(Ci.style.visibility="hidden"),Vn(this,bi,Eh).call(this,Ci,ui.id)}Vn(this,bi,Ec).call(this),await this.l10n.translate(Bn)}update({viewport:Cn}){const Ln=this.div;this.viewport=Cn,(0,_e.setLayerDimensions)(Ln,{rotation:Cn.rotation}),Vn(this,bi,Ec).call(this),Ln.hidden=!1}getEditableAnnotations(){return Array.from(He(this,ci).values())}getEditableAnnotation(Cn){return He(this,ci).get(Cn)}}Bi=new WeakMap,Tn=new WeakMap,ci=new WeakMap,bi=new WeakSet,Eh=function(Cn,Ln){var Hn;const Bn=Cn.firstChild||Cn;Bn.id=`${e.AnnotationPrefix}${Ln}`,this.div.append(Cn),(Hn=He(this,Bi))==null||Hn.moveElementInDOM(this.div,Cn,Bn,!1)},Ec=function(){if(!He(this,Tn))return;const Cn=this.div;for(const[Ln,Bn]of He(this,Tn)){const Hn=Cn.querySelector(`[data-annotation-id="${Ln}"]`);if(!Hn)continue;const{firstChild:ri}=Hn;ri?ri.nodeName==="CANVAS"?ri.replaceWith(Bn):ri.before(Bn):Hn.append(Bn)}He(this,Tn).clear()},t.AnnotationLayer=De},(Ae,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function St(Se){return Math.floor(Math.max(0,Math.min(1,Se))*255).toString(16).padStart(2,"0")}function e(Se){return Math.max(0,Math.min(255,255*Se))}class _e{static CMYK_G([Pe,Te,Ee,Re]){return["G",1-Math.min(1,.3*Pe+.59*Ee+.11*Te+Re)]}static G_CMYK([Pe]){return["CMYK",0,0,0,1-Pe]}static G_RGB([Pe]){return["RGB",Pe,Pe,Pe]}static G_rgb([Pe]){return Pe=e(Pe),[Pe,Pe,Pe]}static G_HTML([Pe]){const Te=St(Pe);return`#${Te}${Te}${Te}`}static RGB_G([Pe,Te,Ee]){return["G",.3*Pe+.59*Te+.11*Ee]}static RGB_rgb(Pe){return Pe.map(e)}static RGB_HTML(Pe){return`#${Pe.map(St).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([Pe,Te,Ee,Re]){return["RGB",1-Math.min(1,Pe+Re),1-Math.min(1,Ee+Re),1-Math.min(1,Te+Re)]}static CMYK_rgb([Pe,Te,Ee,Re]){return[e(1-Math.min(1,Pe+Re)),e(1-Math.min(1,Ee+Re)),e(1-Math.min(1,Te+Re))]}static CMYK_HTML(Pe){const Te=this.CMYK_RGB(Pe).slice(1);return this.RGB_HTML(Te)}static RGB_CMYK([Pe,Te,Ee]){const Re=1-Pe,Ie=1-Te,qe=1-Ee,Ge=Math.min(Re,Ie,qe);return["CMYK",Re,Ie,qe,Ge]}}t.ColorConverters=_e},(Ae,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=e;const St={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};St.print_progress_percent="{{progress}}%";function e(Pe,Te){switch(Pe){case"find_match_count":Pe=`find_match_count[${Te.total===1?"one":"other"}]`;break;case"find_match_count_limit":Pe=`find_match_count_limit[${Te.limit===1?"one":"other"}]`;break}return St[Pe]||""}function _e(Pe,Te){return Te?Pe.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(Ee,Re)=>Re in Te?Te[Re]:"{{"+Re+"}}"):Pe}const Se={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(Pe,Te=null,Ee=e(Pe,Te)){return _e(Ee,Te)},async translate(Pe){}};t.NullL10n=Se},(Ae,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var e=St(25);class _e{static setupStorage(Pe,Te,Ee,Re,Ie){const qe=Re.getValue(Te,{value:null});switch(Ee.name){case"textarea":if(qe.value!==null&&(Pe.textContent=qe.value),Ie==="print")break;Pe.addEventListener("input",Ge=>{Re.setValue(Te,{value:Ge.target.value})});break;case"input":if(Ee.attributes.type==="radio"||Ee.attributes.type==="checkbox"){if(qe.value===Ee.attributes.xfaOn?Pe.setAttribute("checked",!0):qe.value===Ee.attributes.xfaOff&&Pe.removeAttribute("checked"),Ie==="print")break;Pe.addEventListener("change",Ge=>{Re.setValue(Te,{value:Ge.target.checked?Ge.target.getAttribute("xfaOn"):Ge.target.getAttribute("xfaOff")})})}else{if(qe.value!==null&&Pe.setAttribute("value",qe.value),Ie==="print")break;Pe.addEventListener("input",Ge=>{Re.setValue(Te,{value:Ge.target.value})})}break;case"select":if(qe.value!==null){Pe.setAttribute("value",qe.value);for(const Ge of Ee.children)Ge.attributes.value===qe.value?Ge.attributes.selected=!0:Ge.attributes.hasOwnProperty("selected")&&delete Ge.attributes.selected}Pe.addEventListener("input",Ge=>{const Ce=Ge.target.options,Xe=Ce.selectedIndex===-1?"":Ce[Ce.selectedIndex].value;Re.setValue(Te,{value:Xe})});break}}static setAttributes({html:Pe,element:Te,storage:Ee=null,intent:Re,linkService:Ie}){const{attributes:qe}=Te,Ge=Pe instanceof HTMLAnchorElement;qe.type==="radio"&&(qe.name=`${qe.name}-${Re}`);for(const[Ce,Xe]of Object.entries(qe))if(Xe!=null)switch(Ce){case"class":Xe.length&&Pe.setAttribute(Ce,Xe.join(" "));break;case"dataId":break;case"id":Pe.setAttribute("data-element-id",Xe);break;case"style":Object.assign(Pe.style,Xe);break;case"textContent":Pe.textContent=Xe;break;default:(!Ge||Ce!=="href"&&Ce!=="newWindow")&&Pe.setAttribute(Ce,Xe)}Ge&&Ie.addLinkAttributes(Pe,qe.href,qe.newWindow),Ee&&qe.dataId&&this.setupStorage(Pe,qe.dataId,Te,Ee)}static render(Pe){var We;const Te=Pe.annotationStorage,Ee=Pe.linkService,Re=Pe.xfaHtml,Ie=Pe.intent||"display",qe=document.createElement(Re.name);Re.attributes&&this.setAttributes({html:qe,element:Re,intent:Ie,linkService:Ee});const Ge=[[Re,-1,qe]],Ce=Pe.div;if(Ce.append(qe),Pe.viewport){const Ke=`matrix(${Pe.viewport.transform.join(",")})`;Ce.style.transform=Ke}Ie!=="richText"&&Ce.setAttribute("class","xfaLayer xfaFont");const Xe=[];for(;Ge.length>0;){const[Ke,Be,Ye]=Ge.at(-1);if(Be+1===Ke.children.length){Ge.pop();continue}const sn=Ke.children[++Ge.at(-1)[1]];if(sn===null)continue;const{name:rn}=sn;if(rn==="#text"){const tn=document.createTextNode(sn.value);Xe.push(tn),Ye.append(tn);continue}const $e=(We=sn==null?void 0:sn.attributes)!=null&&We.xmlns?document.createElementNS(sn.attributes.xmlns,rn):document.createElement(rn);if(Ye.append($e),sn.attributes&&this.setAttributes({html:$e,element:sn,storage:Te,intent:Ie,linkService:Ee}),sn.children&&sn.children.length>0)Ge.push([sn,-1,$e]);else if(sn.value){const tn=document.createTextNode(sn.value);e.XfaText.shouldBuildText(rn)&&Xe.push(tn),$e.append(tn)}}for(const Ke of Ce.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))Ke.setAttribute("readOnly",!0);return{textDivs:Xe}}static update(Pe){const Te=`matrix(${Pe.viewport.transform.join(",")})`;Pe.div.style.transform=Te,Pe.div.hidden=!1}}t.XfaLayer=_e},(Ae,t,St)=>{var Re,Ie,qe,Ge,Ce,Xe,We,Ke,Be,Ye,sn,rn,$e,tn,Ve,Ch,kh,Nh,Th,Cc,Fh,kc,Mh,Ih,Rh,Dh,Oh,ys,Nc,rl,sl,va,Tc,al,an,jh,Fc,Bh,qh,Mc,ol,ya;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var e=St(1),_e=St(4),Se=St(29),Pe=St(6),Te=St(5);const Dn=class Dn extends _e.AnnotationEditor{constructor(fn){super({...fn,name:"inkEditor"});Zn(this,Ve);Zn(this,Re,0);Zn(this,Ie,0);Zn(this,qe,this.canvasPointermove.bind(this));Zn(this,Ge,this.canvasPointerleave.bind(this));Zn(this,Ce,this.canvasPointerup.bind(this));Zn(this,Xe,this.canvasPointerdown.bind(this));Zn(this,We,new Path2D);Zn(this,Ke,!1);Zn(this,Be,!1);Zn(this,Ye,!1);Zn(this,sn,null);Zn(this,rn,0);Zn(this,$e,0);Zn(this,tn,null);this.color=fn.color||null,this.thickness=fn.thickness||null,this.opacity=fn.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(fn){_e.AnnotationEditor.initialize(fn,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(fn,vn){switch(fn){case e.AnnotationEditorParamsType.INK_THICKNESS:Dn._defaultThickness=vn;break;case e.AnnotationEditorParamsType.INK_COLOR:Dn._defaultColor=vn;break;case e.AnnotationEditorParamsType.INK_OPACITY:Dn._defaultOpacity=vn/100;break}}updateParams(fn,vn){switch(fn){case e.AnnotationEditorParamsType.INK_THICKNESS:Vn(this,Ve,Ch).call(this,vn);break;case e.AnnotationEditorParamsType.INK_COLOR:Vn(this,Ve,kh).call(this,vn);break;case e.AnnotationEditorParamsType.INK_OPACITY:Vn(this,Ve,Nh).call(this,vn);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,Dn._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,Dn._defaultColor||_e.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(Dn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Dn._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,this.color||Dn._defaultColor||_e.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Dn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Vn(this,Ve,rl).call(this),Vn(this,Ve,sl).call(this)),this.isAttachedToDOM||(this.parent.add(this),Vn(this,Ve,va).call(this)),Vn(this,Ve,ya).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,He(this,sn).disconnect(),ei(this,sn,null),super.remove())}setParent(fn){!this.parent&&fn?this._uiManager.removeShouldRescale(this):this.parent&&fn===null&&this._uiManager.addShouldRescale(this),super.setParent(fn)}onScaleChanging(){const[fn,vn]=this.parentDimensions,kn=this.width*fn,Rn=this.height*vn;this.setDimensions(kn,Rn)}enableEditMode(){He(this,Ke)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",He(this,Xe)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",He(this,Xe)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){He(this,Ke)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ei(this,Ke,!0),this.div.classList.add("disabled"),Vn(this,Ve,ya).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(fn){this._focusEventsAllowed&&(super.focusin(fn),this.enableEditMode())}canvasPointerdown(fn){fn.button!==0||!this.isInEditMode()||He(this,Ke)||(this.setInForeground(),fn.preventDefault(),fn.type!=="mouse"&&this.div.focus(),Vn(this,Ve,Fh).call(this,fn.offsetX,fn.offsetY))}canvasPointermove(fn){fn.preventDefault(),Vn(this,Ve,kc).call(this,fn.offsetX,fn.offsetY)}canvasPointerup(fn){fn.preventDefault(),Vn(this,Ve,Nc).call(this,fn)}canvasPointerleave(fn){Vn(this,Ve,Nc).call(this,fn)}get isResizable(){return!this.isEmpty()&&He(this,Ke)}render(){if(this.div)return this.div;let fn,vn;this.width&&(fn=this.x,vn=this.y),super.render(),_e.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(ii=>{var jn;return(jn=this.div)==null?void 0:jn.setAttribute("aria-label",ii)});const[kn,Rn,zn,Qn]=Vn(this,Ve,Th).call(this);if(this.setAt(kn,Rn,0,0),this.setDims(zn,Qn),Vn(this,Ve,rl).call(this),this.width){const[ii,jn]=this.parentDimensions;this.setAspectRatio(this.width*ii,this.height*jn),this.setAt(fn*ii,vn*jn,this.width*ii,this.height*jn),ei(this,Ye,!0),Vn(this,Ve,va).call(this),this.setDims(this.width*ii,this.height*jn),Vn(this,Ve,ys).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Vn(this,Ve,sl).call(this),this.div}setDimensions(fn,vn){const kn=Math.round(fn),Rn=Math.round(vn);if(He(this,rn)===kn&&He(this,$e)===Rn)return;ei(this,rn,kn),ei(this,$e,Rn),this.canvas.style.visibility="hidden";const[zn,Qn]=this.parentDimensions;this.width=fn/zn,this.height=vn/Qn,this.fixAndSetPosition(),He(this,Ke)&&Vn(this,Ve,Tc).call(this,fn,vn),Vn(this,Ve,va).call(this),Vn(this,Ve,ys).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(fn,vn,kn){var Fi,Oi,Yi;if(fn instanceof Se.InkAnnotationElement)return null;const Rn=super.deserialize(fn,vn,kn);Rn.thickness=fn.thickness,Rn.color=e.Util.makeHexColor(...fn.color),Rn.opacity=fn.opacity;const[zn,Qn]=Rn.pageDimensions,ii=Rn.width*zn,jn=Rn.height*Qn,fi=Rn.parentScale,di=fn.thickness/2;ei(Rn,Ke,!0),ei(Rn,rn,Math.round(ii)),ei(Rn,$e,Math.round(jn));const{paths:Ii,rect:Si,rotation:Ri}=fn;for(let{bezier:ai}of Ii){ai=Vn(Fi=Dn,an,Bh).call(Fi,ai,Si,Ri);const Xn=[];Rn.paths.push(Xn);let $n=fi*(ai[0]-di),wi=fi*(ai[1]-di);for(let Bi=2,Tn=ai.length;Bi<Tn;Bi+=6){const ci=fi*(ai[Bi]-di),bi=fi*(ai[Bi+1]-di),vi=fi*(ai[Bi+2]-di),Pi=fi*(ai[Bi+3]-di),Ni=fi*(ai[Bi+4]-di),Cn=fi*(ai[Bi+5]-di);Xn.push([[$n,wi],[ci,bi],[vi,Pi],[Ni,Cn]]),$n=Ni,wi=Cn}const Gi=Vn(this,an,jh).call(this,Xn);Rn.bezierPath2D.push(Gi)}const hi=Vn(Oi=Rn,Ve,Mc).call(Oi);return ei(Rn,Ie,Math.max(_e.AnnotationEditor.MIN_SIZE,hi[2]-hi[0])),ei(Rn,Re,Math.max(_e.AnnotationEditor.MIN_SIZE,hi[3]-hi[1])),Vn(Yi=Rn,Ve,Tc).call(Yi,ii,jn),Rn}serialize(){if(this.isEmpty())return null;const fn=this.getRect(0,0),vn=_e.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:e.AnnotationEditorType.INK,color:vn,thickness:this.thickness,opacity:this.opacity,paths:Vn(this,Ve,qh).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,fn),pageIndex:this.pageIndex,rect:fn,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Re=new WeakMap,Ie=new WeakMap,qe=new WeakMap,Ge=new WeakMap,Ce=new WeakMap,Xe=new WeakMap,We=new WeakMap,Ke=new WeakMap,Be=new WeakMap,Ye=new WeakMap,sn=new WeakMap,rn=new WeakMap,$e=new WeakMap,tn=new WeakMap,Ve=new WeakSet,Ch=function(fn){const vn=this.thickness;this.addCommands({cmd:()=>{this.thickness=fn,Vn(this,Ve,ya).call(this)},undo:()=>{this.thickness=vn,Vn(this,Ve,ya).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},kh=function(fn){const vn=this.color;this.addCommands({cmd:()=>{this.color=fn,Vn(this,Ve,ys).call(this)},undo:()=>{this.color=vn,Vn(this,Ve,ys).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Nh=function(fn){fn/=100;const vn=this.opacity;this.addCommands({cmd:()=>{this.opacity=fn,Vn(this,Ve,ys).call(this)},undo:()=>{this.opacity=vn,Vn(this,Ve,ys).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Th=function(){const{parentRotation:fn,parentDimensions:[vn,kn]}=this;switch(fn){case 90:return[0,kn,kn,vn];case 180:return[vn,kn,vn,kn];case 270:return[vn,0,kn,vn];default:return[0,0,vn,kn]}},Cc=function(){const{ctx:fn,color:vn,opacity:kn,thickness:Rn,parentScale:zn,scaleFactor:Qn}=this;fn.lineWidth=Rn*zn/Qn,fn.lineCap="round",fn.lineJoin="round",fn.miterLimit=10,fn.strokeStyle=`${vn}${(0,Te.opacityToHex)(kn)}`},Fh=function(fn,vn){this.canvas.addEventListener("contextmenu",Pe.noContextMenu),this.canvas.addEventListener("pointerleave",He(this,Ge)),this.canvas.addEventListener("pointermove",He(this,qe)),this.canvas.addEventListener("pointerup",He(this,Ce)),this.canvas.removeEventListener("pointerdown",He(this,Xe)),this.isEditing=!0,He(this,Ye)||(ei(this,Ye,!0),Vn(this,Ve,va).call(this),this.thickness||(this.thickness=Dn._defaultThickness),this.color||(this.color=Dn._defaultColor||_e.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Dn._defaultOpacity)),this.currentPath.push([fn,vn]),ei(this,Be,!1),Vn(this,Ve,Cc).call(this),ei(this,tn,()=>{Vn(this,Ve,Rh).call(this),He(this,tn)&&window.requestAnimationFrame(He(this,tn))}),window.requestAnimationFrame(He(this,tn))},kc=function(fn,vn){const[kn,Rn]=this.currentPath.at(-1);if(this.currentPath.length>1&&fn===kn&&vn===Rn)return;const zn=this.currentPath;let Qn=He(this,We);if(zn.push([fn,vn]),ei(this,Be,!0),zn.length<=2){Qn.moveTo(...zn[0]),Qn.lineTo(fn,vn);return}zn.length===3&&(ei(this,We,Qn=new Path2D),Qn.moveTo(...zn[0])),Vn(this,Ve,Dh).call(this,Qn,...zn.at(-3),...zn.at(-2),fn,vn)},Mh=function(){if(this.currentPath.length===0)return;const fn=this.currentPath.at(-1);He(this,We).lineTo(...fn)},Ih=function(fn,vn){ei(this,tn,null),fn=Math.min(Math.max(fn,0),this.canvas.width),vn=Math.min(Math.max(vn,0),this.canvas.height),Vn(this,Ve,kc).call(this,fn,vn),Vn(this,Ve,Mh).call(this);let kn;if(this.currentPath.length!==1)kn=Vn(this,Ve,Oh).call(this);else{const jn=[fn,vn];kn=[[jn,jn.slice(),jn.slice(),jn]]}const Rn=He(this,We),zn=this.currentPath;this.currentPath=[],ei(this,We,new Path2D);const Qn=()=>{this.allRawPaths.push(zn),this.paths.push(kn),this.bezierPath2D.push(Rn),this.rebuild()},ii=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Vn(this,Ve,rl).call(this),Vn(this,Ve,sl).call(this)),Vn(this,Ve,ya).call(this))};this.addCommands({cmd:Qn,undo:ii,mustExec:!0})},Rh=function(){if(!He(this,Be))return;ei(this,Be,!1);const fn=Math.ceil(this.thickness*this.parentScale),vn=this.currentPath.slice(-3),kn=vn.map(Qn=>Qn[0]),Rn=vn.map(Qn=>Qn[1]);Math.min(...kn)-fn,Math.max(...kn)+fn,Math.min(...Rn)-fn,Math.max(...Rn)+fn;const{ctx:zn}=this;zn.save(),zn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Qn of this.bezierPath2D)zn.stroke(Qn);zn.stroke(He(this,We)),zn.restore()},Dh=function(fn,vn,kn,Rn,zn,Qn,ii){const jn=(vn+Rn)/2,fi=(kn+zn)/2,di=(Rn+Qn)/2,Ii=(zn+ii)/2;fn.bezierCurveTo(jn+2*(Rn-jn)/3,fi+2*(zn-fi)/3,di+2*(Rn-di)/3,Ii+2*(zn-Ii)/3,di,Ii)},Oh=function(){const fn=this.currentPath;if(fn.length<=2)return[[fn[0],fn[0],fn.at(-1),fn.at(-1)]];const vn=[];let kn,[Rn,zn]=fn[0];for(kn=1;kn<fn.length-2;kn++){const[Si,Ri]=fn[kn],[hi,Fi]=fn[kn+1],Oi=(Si+hi)/2,Yi=(Ri+Fi)/2,ai=[Rn+2*(Si-Rn)/3,zn+2*(Ri-zn)/3],Xn=[Oi+2*(Si-Oi)/3,Yi+2*(Ri-Yi)/3];vn.push([[Rn,zn],ai,Xn,[Oi,Yi]]),[Rn,zn]=[Oi,Yi]}const[Qn,ii]=fn[kn],[jn,fi]=fn[kn+1],di=[Rn+2*(Qn-Rn)/3,zn+2*(ii-zn)/3],Ii=[jn+2*(Qn-jn)/3,fi+2*(ii-fi)/3];return vn.push([[Rn,zn],di,Ii,[jn,fi]]),vn},ys=function(){if(this.isEmpty()){Vn(this,Ve,al).call(this);return}Vn(this,Ve,Cc).call(this);const{canvas:fn,ctx:vn}=this;vn.setTransform(1,0,0,1,0,0),vn.clearRect(0,0,fn.width,fn.height),Vn(this,Ve,al).call(this);for(const kn of this.bezierPath2D)vn.stroke(kn)},Nc=function(fn){this.canvas.removeEventListener("pointerleave",He(this,Ge)),this.canvas.removeEventListener("pointermove",He(this,qe)),this.canvas.removeEventListener("pointerup",He(this,Ce)),this.canvas.addEventListener("pointerdown",He(this,Xe)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",Pe.noContextMenu)},10),Vn(this,Ve,Ih).call(this,fn.offsetX,fn.offsetY),this.addToAnnotationStorage(),this.setInBackground()},rl=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",_e.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(fn=>{var vn;return(vn=this.canvas)==null?void 0:vn.setAttribute("aria-label",fn)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},sl=function(){ei(this,sn,new ResizeObserver(fn=>{const vn=fn[0].contentRect;vn.width&&vn.height&&this.setDimensions(vn.width,vn.height)})),He(this,sn).observe(this.div)},va=function(){if(!He(this,Ye))return;const[fn,vn]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*fn),this.canvas.height=Math.ceil(this.height*vn),Vn(this,Ve,al).call(this)},Tc=function(fn,vn){const kn=Vn(this,Ve,ol).call(this),Rn=(fn-kn)/He(this,Ie),zn=(vn-kn)/He(this,Re);this.scaleFactor=Math.min(Rn,zn)},al=function(){const fn=Vn(this,Ve,ol).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+fn,this.translationY*this.scaleFactor+fn)},an=new WeakSet,jh=function(fn){const vn=new Path2D;for(let kn=0,Rn=fn.length;kn<Rn;kn++){const[zn,Qn,ii,jn]=fn[kn];kn===0&&vn.moveTo(...zn),vn.bezierCurveTo(Qn[0],Qn[1],ii[0],ii[1],jn[0],jn[1])}return vn},Fc=function(fn,vn,kn){const[Rn,zn,Qn,ii]=vn;switch(kn){case 0:for(let jn=0,fi=fn.length;jn<fi;jn+=2)fn[jn]+=Rn,fn[jn+1]=ii-fn[jn+1];break;case 90:for(let jn=0,fi=fn.length;jn<fi;jn+=2){const di=fn[jn];fn[jn]=fn[jn+1]+Rn,fn[jn+1]=di+zn}break;case 180:for(let jn=0,fi=fn.length;jn<fi;jn+=2)fn[jn]=Qn-fn[jn],fn[jn+1]+=zn;break;case 270:for(let jn=0,fi=fn.length;jn<fi;jn+=2){const di=fn[jn];fn[jn]=Qn-fn[jn+1],fn[jn+1]=ii-di}break;default:throw new Error("Invalid rotation")}return fn},Bh=function(fn,vn,kn){const[Rn,zn,Qn,ii]=vn;switch(kn){case 0:for(let jn=0,fi=fn.length;jn<fi;jn+=2)fn[jn]-=Rn,fn[jn+1]=ii-fn[jn+1];break;case 90:for(let jn=0,fi=fn.length;jn<fi;jn+=2){const di=fn[jn];fn[jn]=fn[jn+1]-zn,fn[jn+1]=di-Rn}break;case 180:for(let jn=0,fi=fn.length;jn<fi;jn+=2)fn[jn]=Qn-fn[jn],fn[jn+1]-=zn;break;case 270:for(let jn=0,fi=fn.length;jn<fi;jn+=2){const di=fn[jn];fn[jn]=ii-fn[jn+1],fn[jn+1]=Qn-di}break;default:throw new Error("Invalid rotation")}return fn},qh=function(fn,vn,kn,Rn){var fi,di;const zn=[],Qn=this.thickness/2,ii=fn*vn+Qn,jn=fn*kn+Qn;for(const Ii of this.paths){const Si=[],Ri=[];for(let hi=0,Fi=Ii.length;hi<Fi;hi++){const[Oi,Yi,ai,Xn]=Ii[hi],$n=fn*Oi[0]+ii,wi=fn*Oi[1]+jn,Gi=fn*Yi[0]+ii,Bi=fn*Yi[1]+jn,Tn=fn*ai[0]+ii,ci=fn*ai[1]+jn,bi=fn*Xn[0]+ii,vi=fn*Xn[1]+jn;hi===0&&(Si.push($n,wi),Ri.push($n,wi)),Si.push(Gi,Bi,Tn,ci,bi,vi),Ri.push(Gi,Bi),hi===Fi-1&&Ri.push(bi,vi)}zn.push({bezier:Vn(fi=Dn,an,Fc).call(fi,Si,Rn,this.rotation),points:Vn(di=Dn,an,Fc).call(di,Ri,Rn,this.rotation)})}return zn},Mc=function(){let fn=1/0,vn=-1/0,kn=1/0,Rn=-1/0;for(const zn of this.paths)for(const[Qn,ii,jn,fi]of zn){const di=e.Util.bezierBoundingBox(...Qn,...ii,...jn,...fi);fn=Math.min(fn,di[0]),kn=Math.min(kn,di[1]),vn=Math.max(vn,di[2]),Rn=Math.max(Rn,di[3])}return[fn,kn,vn,Rn]},ol=function(){return He(this,Ke)?Math.ceil(this.thickness*this.parentScale):0},ya=function(fn=!1){if(this.isEmpty())return;if(!He(this,Ke)){Vn(this,Ve,ys).call(this);return}const vn=Vn(this,Ve,Mc).call(this),kn=Vn(this,Ve,ol).call(this);ei(this,Ie,Math.max(_e.AnnotationEditor.MIN_SIZE,vn[2]-vn[0])),ei(this,Re,Math.max(_e.AnnotationEditor.MIN_SIZE,vn[3]-vn[1]));const Rn=Math.ceil(kn+He(this,Ie)*this.scaleFactor),zn=Math.ceil(kn+He(this,Re)*this.scaleFactor),[Qn,ii]=this.parentDimensions;this.width=Rn/Qn,this.height=zn/ii,this.setAspectRatio(Rn,zn);const jn=this.translationX,fi=this.translationY;this.translationX=-vn[0],this.translationY=-vn[1],Vn(this,Ve,va).call(this),Vn(this,Ve,ys).call(this),ei(this,rn,Rn),ei(this,$e,zn),this.setDims(Rn,zn);const di=fn?kn/this.scaleFactor/2:0;this.translate(jn-this.translationX-di,fi-this.translationY-di)},Zn(Dn,an),cr(Dn,"_defaultColor",null),cr(Dn,"_defaultOpacity",1),cr(Dn,"_defaultThickness",1),cr(Dn,"_type","ink");let Ee=Dn;t.InkEditor=Ee},(Ae,t,St)=>{var Ee,Re,Ie,qe,Ge,Ce,Xe,We,Ke,Be,Ye,io,ro,ll,Ic,Uh,zh,Rc,cl,Hh;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var e=St(1),_e=St(4),Se=St(6),Pe=St(29);const Ue=class Ue extends _e.AnnotationEditor{constructor(An){super({...An,name:"stampEditor"});Zn(this,Ye);Zn(this,Ee,null);Zn(this,Re,null);Zn(this,Ie,null);Zn(this,qe,null);Zn(this,Ge,null);Zn(this,Ce,null);Zn(this,Xe,null);Zn(this,We,null);Zn(this,Ke,!1);Zn(this,Be,!1);ei(this,qe,An.bitmapUrl),ei(this,Ge,An.bitmapFile)}static initialize(An){_e.AnnotationEditor.initialize(An)}static get supportedTypes(){const An=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,e.shadow)(this,"supportedTypes",An.map(xn=>`image/${xn}`))}static get supportedTypesStr(){return(0,e.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(An){return this.supportedTypes.includes(An)}static paste(An,xn){xn.pasteEditor(e.AnnotationEditorType.STAMP,{bitmapFile:An.getAsFile()})}remove(){var An,xn;He(this,Re)&&(ei(this,Ee,null),this._uiManager.imageManager.deleteId(He(this,Re)),(An=He(this,Ce))==null||An.remove(),ei(this,Ce,null),(xn=He(this,Xe))==null||xn.disconnect(),ei(this,Xe,null)),super.remove()}rebuild(){if(!this.parent){He(this,Re)&&Vn(this,Ye,ll).call(this);return}super.rebuild(),this.div!==null&&(He(this,Re)&&Vn(this,Ye,ll).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(He(this,Ie)||He(this,Ee)||He(this,qe)||He(this,Ge))}get isResizable(){return!0}render(){if(this.div)return this.div;let An,xn;if(this.width&&(An=this.x,xn=this.y),super.render(),this.div.hidden=!0,He(this,Ee)?Vn(this,Ye,Ic).call(this):Vn(this,Ye,ll).call(this),this.width){const[_n,En]=this.parentDimensions;this.setAt(An*_n,xn*En,this.width*_n,this.height*En)}return this.div}static deserialize(An,xn,_n){if(An instanceof Pe.StampAnnotationElement)return null;const En=super.deserialize(An,xn,_n),{rect:hn,bitmapUrl:Sn,bitmapId:In,isSvg:je,accessibilityData:Fe}=An;In&&_n.imageManager.isValidId(In)?ei(En,Re,In):ei(En,qe,Sn),ei(En,Ke,je);const[De,Je]=En.pageDimensions;return En.width=(hn[2]-hn[0])/De,En.height=(hn[3]-hn[1])/Je,Fe&&(En.altTextData=Fe),En}serialize(An=!1,xn=null){if(this.isEmpty())return null;const _n={annotationType:e.AnnotationEditorType.STAMP,bitmapId:He(this,Re),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:He(this,Ke),structTreeParentId:this._structTreeParentId};if(An)return _n.bitmapUrl=Vn(this,Ye,cl).call(this,!0),_n.accessibilityData=this.altTextData,_n;const{decorative:En,altText:hn}=this.altTextData;if(!En&&hn&&(_n.accessibilityData={type:"Figure",alt:hn}),xn===null)return _n;xn.stamps||(xn.stamps=new Map);const Sn=He(this,Ke)?(_n.rect[2]-_n.rect[0])*(_n.rect[3]-_n.rect[1]):null;if(!xn.stamps.has(He(this,Re)))xn.stamps.set(He(this,Re),{area:Sn,serialized:_n}),_n.bitmap=Vn(this,Ye,cl).call(this,!1);else if(He(this,Ke)){const In=xn.stamps.get(He(this,Re));Sn>In.area&&(In.area=Sn,In.serialized.bitmap.close(),In.serialized.bitmap=Vn(this,Ye,cl).call(this,!1))}return _n}};Ee=new WeakMap,Re=new WeakMap,Ie=new WeakMap,qe=new WeakMap,Ge=new WeakMap,Ce=new WeakMap,Xe=new WeakMap,We=new WeakMap,Ke=new WeakMap,Be=new WeakMap,Ye=new WeakSet,io=function(An,xn=!1){if(!An){this.remove();return}ei(this,Ee,An.bitmap),xn||(ei(this,Re,An.id),ei(this,Ke,An.isSvg)),Vn(this,Ye,Ic).call(this)},ro=function(){ei(this,Ie,null),this._uiManager.enableWaiting(!1),He(this,Ce)&&this.div.focus()},ll=function(){if(He(this,Re)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(He(this,Re)).then(xn=>Vn(this,Ye,io).call(this,xn,!0)).finally(()=>Vn(this,Ye,ro).call(this));return}if(He(this,qe)){const xn=He(this,qe);ei(this,qe,null),this._uiManager.enableWaiting(!0),ei(this,Ie,this._uiManager.imageManager.getFromUrl(xn).then(_n=>Vn(this,Ye,io).call(this,_n)).finally(()=>Vn(this,Ye,ro).call(this)));return}if(He(this,Ge)){const xn=He(this,Ge);ei(this,Ge,null),this._uiManager.enableWaiting(!0),ei(this,Ie,this._uiManager.imageManager.getFromFile(xn).then(_n=>Vn(this,Ye,io).call(this,_n)).finally(()=>Vn(this,Ye,ro).call(this)));return}const An=document.createElement("input");An.type="file",An.accept=Ue.supportedTypesStr,ei(this,Ie,new Promise(xn=>{An.addEventListener("change",async()=>{if(!An.files||An.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const _n=await this._uiManager.imageManager.getFromFile(An.files[0]);Vn(this,Ye,io).call(this,_n)}xn()}),An.addEventListener("cancel",()=>{this.remove(),xn()})}).finally(()=>Vn(this,Ye,ro).call(this))),An.click()},Ic=function(){const{div:An}=this;let{width:xn,height:_n}=He(this,Ee);const[En,hn]=this.pageDimensions,Sn=.75;if(this.width)xn=this.width*En,_n=this.height*hn;else if(xn>Sn*En||_n>Sn*hn){const De=Math.min(Sn*En/xn,Sn*hn/_n);xn*=De,_n*=De}const[In,je]=this.parentDimensions;this.setDims(xn*In/En,_n*je/hn),this._uiManager.enableWaiting(!1);const Fe=ei(this,Ce,document.createElement("canvas"));An.append(Fe),An.hidden=!1,Vn(this,Ye,Rc).call(this,xn,_n),Vn(this,Ye,Hh).call(this),He(this,Be)||(this.parent.addUndoableEditor(this),ei(this,Be,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Uh=function(An,xn){var Sn;const[_n,En]=this.parentDimensions;this.width=An/_n,this.height=xn/En,this.setDims(An,xn),(Sn=this._initialOptions)!=null&&Sn.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,He(this,We)!==null&&clearTimeout(He(this,We)),ei(this,We,setTimeout(()=>{ei(this,We,null),Vn(this,Ye,Rc).call(this,An,xn)},200))},zh=function(An,xn){const{width:_n,height:En}=He(this,Ee);let hn=_n,Sn=En,In=He(this,Ee);for(;hn>2*An||Sn>2*xn;){const je=hn,Fe=Sn;hn>2*An&&(hn=hn>=16384?Math.floor(hn/2)-1:Math.ceil(hn/2)),Sn>2*xn&&(Sn=Sn>=16384?Math.floor(Sn/2)-1:Math.ceil(Sn/2));const De=new OffscreenCanvas(hn,Sn);De.getContext("2d").drawImage(In,0,0,je,Fe,0,0,hn,Sn),In=De.transferToImageBitmap()}return In},Rc=function(An,xn){An=Math.ceil(An),xn=Math.ceil(xn);const _n=He(this,Ce);if(!_n||_n.width===An&&_n.height===xn)return;_n.width=An,_n.height=xn;const En=He(this,Ke)?He(this,Ee):Vn(this,Ye,zh).call(this,An,xn),hn=_n.getContext("2d");hn.filter=this._uiManager.hcmFilter,hn.drawImage(En,0,0,En.width,En.height,0,0,An,xn)},cl=function(An){if(An){if(He(this,Ke)){const En=this._uiManager.imageManager.getSvgUrl(He(this,Re));if(En)return En}const xn=document.createElement("canvas");return{width:xn.width,height:xn.height}=He(this,Ee),xn.getContext("2d").drawImage(He(this,Ee),0,0),xn.toDataURL()}if(He(this,Ke)){const[xn,_n]=this.pageDimensions,En=Math.round(this.width*xn*Se.PixelsPerInch.PDF_TO_CSS_UNITS),hn=Math.round(this.height*_n*Se.PixelsPerInch.PDF_TO_CSS_UNITS),Sn=new OffscreenCanvas(En,hn);return Sn.getContext("2d").drawImage(He(this,Ee),0,0,He(this,Ee).width,He(this,Ee).height,0,0,En,hn),Sn.transferToImageBitmap()}return structuredClone(He(this,Ee))},Hh=function(){ei(this,Xe,new ResizeObserver(An=>{const xn=An[0].contentRect;xn.width&&xn.height&&Vn(this,Ye,Uh).call(this,xn.width,xn.height)})),He(this,Xe).observe(this.div)},cr(Ue,"_type","stamp");let Te=Ue;t.StampEditor=Te}],__webpack_module_cache__={};function __w_pdfjs_require__(Ae){var t=__webpack_module_cache__[Ae];if(t!==void 0)return t.exports;var St=__webpack_module_cache__[Ae]={exports:{}};return __webpack_modules__[Ae](St,St.exports,__w_pdfjs_require__),St.exports}var __webpack_exports__={};return(()=>{var Ae=__webpack_exports__;Object.defineProperty(Ae,"__esModule",{value:!0}),Object.defineProperty(Ae,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(Ae,"AnnotationEditorLayer",{enumerable:!0,get:function(){return Se.AnnotationEditorLayer}}),Object.defineProperty(Ae,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(Ae,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(Ae,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return Pe.AnnotationEditorUIManager}}),Object.defineProperty(Ae,"AnnotationLayer",{enumerable:!0,get:function(){return Te.AnnotationLayer}}),Object.defineProperty(Ae,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(Ae,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(Ae,"DOMSVGFactory",{enumerable:!0,get:function(){return e.DOMSVGFactory}}),Object.defineProperty(Ae,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(Ae,"GlobalWorkerOptions",{enumerable:!0,get:function(){return Ee.GlobalWorkerOptions}}),Object.defineProperty(Ae,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(Ae,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(Ae,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(Ae,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(Ae,"PDFDataRangeTransport",{enumerable:!0,get:function(){return St.PDFDataRangeTransport}}),Object.defineProperty(Ae,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(Ae,"PDFWorker",{enumerable:!0,get:function(){return St.PDFWorker}}),Object.defineProperty(Ae,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(Ae,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(Ae,"PixelsPerInch",{enumerable:!0,get:function(){return e.PixelsPerInch}}),Object.defineProperty(Ae,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(Ae,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(Ae,"SVGGraphics",{enumerable:!0,get:function(){return St.SVGGraphics}}),Object.defineProperty(Ae,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(Ae,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(Ae,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(Ae,"XfaLayer",{enumerable:!0,get:function(){return Re.XfaLayer}}),Object.defineProperty(Ae,"build",{enumerable:!0,get:function(){return St.build}}),Object.defineProperty(Ae,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(Ae,"getDocument",{enumerable:!0,get:function(){return St.getDocument}}),Object.defineProperty(Ae,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(Ae,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return e.getPdfFilenameFromUrl}}),Object.defineProperty(Ae,"getXfaPageViewport",{enumerable:!0,get:function(){return e.getXfaPageViewport}}),Object.defineProperty(Ae,"isDataScheme",{enumerable:!0,get:function(){return e.isDataScheme}}),Object.defineProperty(Ae,"isPdfFile",{enumerable:!0,get:function(){return e.isPdfFile}}),Object.defineProperty(Ae,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(Ae,"noContextMenu",{enumerable:!0,get:function(){return e.noContextMenu}}),Object.defineProperty(Ae,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(Ae,"renderTextLayer",{enumerable:!0,get:function(){return _e.renderTextLayer}}),Object.defineProperty(Ae,"setLayerDimensions",{enumerable:!0,get:function(){return e.setLayerDimensions}}),Object.defineProperty(Ae,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(Ae,"updateTextLayer",{enumerable:!0,get:function(){return _e.updateTextLayer}}),Object.defineProperty(Ae,"version",{enumerable:!0,get:function(){return St.version}});var t=__w_pdfjs_require__(1),St=__w_pdfjs_require__(2),e=__w_pdfjs_require__(6),_e=__w_pdfjs_require__(26),Se=__w_pdfjs_require__(27),Pe=__w_pdfjs_require__(5),Te=__w_pdfjs_require__(29),Ee=__w_pdfjs_require__(14),Re=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;export{E,__vitePreload as _,_typeof as a,commonjsRequire as c,pdfExports as p};
