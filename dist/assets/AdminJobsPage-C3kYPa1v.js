import{j as e}from"./vendor-motion-_XdJ9pBm.js";import{u as $,r as s}from"./vendor-react-B4msnGgW.js";import{s as y,i as F,q as M,U as B,C as N,a as m,B as w,L as I,O as P,n as z,E as O,l as R,m as U}from"./index-BbSeE-q4.js";import{P as _}from"./plus-C66eGFjH.js";import{S as Q}from"./search-DiwtcWwp.js";import{B as H}from"./building-2-B7dH_DvY.js";import{I as V}from"./indian-rupee-CtMJjFIv.js";import{T as G,a as K}from"./toggle-right-x2PKfQV-.js";import"./vendor-pdf-B1igRwBP.js";import"./vendor-supabase-B_87WqdG.js";import"./vendor-forms-BxTF4-4_.js";const ne=()=>{const t=$(),[l,g]=s.useState([]),[C,k]=s.useState(!0),[n,S]=s.useState(""),[i,J]=s.useState(""),[c,D]=s.useState("all"),[L,h]=s.useState(!1),[b,u]=s.useState(null),[x,j]=s.useState(null);s.useEffect(()=>{A()},[c,i]);const A=async()=>{k(!0);try{let r=y.from("job_listings").select("*").order("created_at",{ascending:!1});c==="active"?r=r.eq("is_active",!0):c==="inactive"&&(r=r.eq("is_active",!1)),i&&(r=r.eq("domain",i));const{data:a,error:d}=await r;if(d)throw d;g(a||[])}catch(r){console.error("Error fetching jobs:",r),o("error","Failed to fetch jobs")}finally{k(!1)}},o=(r,a)=>{j({type:r,message:a}),setTimeout(()=>j(null),3e3)},T=async(r,a)=>{try{const{error:d}=await y.from("job_listings").update({is_active:!a}).eq("id",r);if(d)throw d;g(l.map(f=>f.id===r?{...f,is_active:!a}:f)),o("success",`Job ${a?"deactivated":"activated"} successfully`)}catch(d){console.error("Error toggling job status:",d),o("error","Failed to update job status")}},E=async()=>{if(b)try{const{error:r}=await y.from("job_listings").delete().eq("id",b);if(r)throw r;g(l.filter(a=>a.id!==b)),o("success","Job deleted successfully"),h(!1),u(null)}catch(r){console.error("Error deleting job:",r),o("error","Failed to delete job")}},v=l.filter(r=>r.company_name.toLowerCase().includes(n.toLowerCase())||r.role_title.toLowerCase().includes(n.toLowerCase())||r.domain.toLowerCase().includes(n.toLowerCase())),p={total:l.length,active:l.filter(r=>r.is_active).length,inactive:l.filter(r=>!r.is_active).length},q=[...new Set(l.map(r=>r.domain))];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-dark-50 dark:to-dark-200 lg:pl-16",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40 dark:bg-dark-50 dark:border-dark-300",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between h-16 py-3",children:[e.jsxs("button",{onClick:()=>t("/"),className:"lg:hidden bg-gradient-to-r from-neon-cyan-500 to-neon-blue-500 text-white hover:from-neon-cyan-400 hover:to-neon-blue-400 py-3 px-5 rounded-xl inline-flex items-center space-x-2 transition-all duration-200",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:block",children:"Back to Home"})]}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Admin - Manage Jobs"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>t("/admin/email-testing"),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white py-3 px-5 rounded-xl inline-flex items-center space-x-2 transition-all duration-200 shadow-lg",children:[e.jsx(M,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:block",children:"Email Testing"})]}),e.jsxs("button",{onClick:()=>t("/admin/users"),className:"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white py-3 px-5 rounded-xl inline-flex items-center space-x-2 transition-all duration-200 shadow-lg",children:[e.jsx(B,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:block",children:"Manage Users"})]}),e.jsxs("button",{onClick:()=>t("/admin/jobs/new"),className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white py-3 px-5 rounded-xl inline-flex items-center space-x-2 transition-all duration-200 shadow-lg",children:[e.jsx(_,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:block",children:"Create Job"})]})]})]})})}),x&&e.jsx("div",{className:"fixed top-20 right-4 z-50 animate-fade-in-down",children:e.jsx("div",{className:`p-4 rounded-xl shadow-lg border ${x.type==="success"?"bg-green-50 border-green-200 text-green-800 dark:bg-neon-cyan-500/10 dark:border-neon-cyan-400/50 dark:text-neon-cyan-300":"bg-red-50 border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-500/50 dark:text-red-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[x.type==="success"?e.jsx(N,{className:"w-5 h-5"}):e.jsx(m,{className:"w-5 h-5"}),e.jsx("p",{className:"font-medium",children:x.message})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-dark-100 rounded-xl shadow-md p-6 border border-gray-200 dark:border-dark-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Total Jobs"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:p.total})]}),e.jsx("div",{className:"bg-blue-100 dark:bg-neon-cyan-500/20 w-12 h-12 rounded-lg flex items-center justify-center",children:e.jsx(w,{className:"w-6 h-6 text-blue-600 dark:text-neon-cyan-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-dark-100 rounded-xl shadow-md p-6 border border-gray-200 dark:border-dark-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Active Jobs"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-neon-cyan-400",children:p.active})]}),e.jsx("div",{className:"bg-green-100 dark:bg-neon-cyan-500/20 w-12 h-12 rounded-lg flex items-center justify-center",children:e.jsx(N,{className:"w-6 h-6 text-green-600 dark:text-neon-cyan-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-dark-100 rounded-xl shadow-md p-6 border border-gray-200 dark:border-dark-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Inactive Jobs"}),e.jsx("p",{className:"text-3xl font-bold text-gray-500 dark:text-gray-400",children:p.inactive})]}),e.jsx("div",{className:"bg-gray-100 dark:bg-dark-200 w-12 h-12 rounded-lg flex items-center justify-center",children:e.jsx(m,{className:"w-6 h-6 text-gray-500 dark:text-gray-400"})})]})})]}),e.jsx("div",{className:"bg-white dark:bg-dark-100 rounded-xl shadow-md border border-gray-200 dark:border-dark-300 p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by company, role, or domain...",value:n,onChange:r=>S(r.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-dark-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-dark-200 dark:text-gray-100"})]}),e.jsxs("select",{value:i,onChange:r=>J(r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-dark-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-dark-200 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"All Domains"}),q.map(r=>e.jsx("option",{value:r,children:r},r))]}),e.jsxs("select",{value:c,onChange:r=>D(r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-dark-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-dark-200 dark:text-gray-100",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]})]})}),C?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(I,{className:"w-12 h-12 text-blue-600 dark:text-neon-cyan-400 animate-spin"})}):v.length===0?e.jsxs("div",{className:"bg-white dark:bg-dark-100 rounded-xl shadow-md border border-gray-200 dark:border-dark-300 p-12 text-center",children:[e.jsx(m,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No jobs found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:n||i?"Try adjusting your filters":"Start by creating your first job listing"}),e.jsxs("button",{onClick:()=>t("/admin/jobs/new"),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-3 px-6 rounded-xl inline-flex items-center space-x-2 transition-all duration-200",children:[e.jsx(_,{className:"w-5 h-5"}),e.jsx("span",{children:"Create First Job"})]})]}):e.jsx("div",{className:"space-y-4",children:v.map(r=>e.jsx("div",{className:"bg-white dark:bg-dark-100 rounded-xl shadow-md border border-gray-200 dark:border-dark-300 p-6 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-gray-100 dark:bg-dark-200 rounded-lg overflow-hidden border border-gray-200 dark:border-dark-300 flex items-center justify-center",children:r.company_logo_url||r.company_logo?e.jsx("img",{src:r.company_logo_url||r.company_logo,alt:`${r.company_name} logo`,className:"max-w-full max-h-full object-contain"}):e.jsx(H,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-1",children:r.role_title}),e.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 font-medium",children:r.company_name})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${r.is_active?"bg-green-100 text-green-700 dark:bg-neon-cyan-500/20 dark:text-neon-cyan-300":"bg-gray-100 text-gray-700 dark:bg-dark-200 dark:text-gray-400"}`,children:r.is_active?"Active":"Inactive"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:r.domain})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsxs("span",{children:[r.location_type,r.location_city?` - ${r.location_city}`:""]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{children:r.experience_required})]}),r.package_amount&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsxs("span",{children:[(r.package_amount/1e5).toFixed(1),"L ",r.package_type]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>t(`/jobs/${r.id}`),className:"flex items-center space-x-1 px-4 py-2 bg-blue-50 hover:bg-blue-100 dark:bg-neon-cyan-500/10 dark:hover:bg-neon-cyan-500/20 text-blue-600 dark:text-neon-cyan-400 rounded-lg transition-colors",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"View"})]}),e.jsxs("button",{onClick:()=>t(`/admin/jobs/${r.id}/edit`),className:"flex items-center space-x-1 px-4 py-2 bg-purple-50 hover:bg-purple-100 dark:bg-purple-500/10 dark:hover:bg-purple-500/20 text-purple-600 dark:text-purple-400 rounded-lg transition-colors",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit"})]}),e.jsxs("button",{onClick:()=>T(r.id,r.is_active),className:`flex items-center space-x-1 px-4 py-2 rounded-lg transition-colors ${r.is_active?"bg-orange-50 hover:bg-orange-100 dark:bg-orange-500/10 dark:hover:bg-orange-500/20 text-orange-600 dark:text-orange-400":"bg-green-50 hover:bg-green-100 dark:bg-green-500/10 dark:hover:bg-green-500/20 text-green-600 dark:text-green-400"}`,children:[r.is_active?e.jsx(G,{className:"w-4 h-4"}):e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:r.is_active?"Deactivate":"Activate"})]}),e.jsxs("button",{onClick:()=>{u(r.id),h(!0)},className:"flex items-center space-x-1 px-4 py-2 bg-red-50 hover:bg-red-100 dark:bg-red-500/10 dark:hover:bg-red-500/20 text-red-600 dark:text-red-400 rounded-lg transition-colors",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:"Delete"})]})]})]})]})},r.id))})]}),L&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white dark:bg-dark-100 rounded-2xl shadow-2xl max-w-md w-full p-6 border border-gray-200 dark:border-dark-300",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/20 w-12 h-12 rounded-full flex items-center justify-center",children:e.jsx(m,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Delete Job?"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this job listing? This action cannot be undone."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{h(!1),u(null)},className:"flex-1 px-4 py-3 bg-gray-200 hover:bg-gray-300 dark:bg-dark-200 dark:hover:bg-dark-300 text-gray-700 dark:text-gray-300 rounded-xl font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:E,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-colors",children:"Delete"})]})]})})]})};export{ne as AdminJobsPage};
