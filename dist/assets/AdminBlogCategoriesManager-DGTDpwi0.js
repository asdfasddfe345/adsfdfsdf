import{j as e}from"./vendor-motion-_XdJ9pBm.js";import{u as $,r}from"./vendor-react-B4msnGgW.js";import{a as l}from"./adminBlogService-CrbxTU7H.js";import{L as z,i as I,a as G,C as H,m as E}from"./index-BbSeE-q4.js";import{F as J}from"./folder-open-CIgGjE_j.js";import{S as h}from"./square-pen-CSgRhjVa.js";import{P as D}from"./plus-C66eGFjH.js";import"./vendor-pdf-B1igRwBP.js";import"./vendor-supabase-B_87WqdG.js";import"./vendor-forms-BxTF4-4_.js";const te=()=>{const F=$(),[N,A]=r.useState([]),[j,L]=r.useState([]),[B,f]=r.useState(!0),[v,s]=r.useState(null),[x,d]=r.useState(null),[i,w]=r.useState(null),[m,b]=r.useState(""),[y,p]=r.useState(""),[c,C]=r.useState(null),[u,k]=r.useState(""),[t,o]=r.useState(null);r.useEffect(()=>{n()},[]);const n=async()=>{try{f(!0);const[a,g]=await Promise.all([l.fetchAllCategories(),l.fetchAllTags()]);A(a),L(g)}catch(a){s(a.message||"Failed to load data")}finally{f(!1)}},P=async()=>{if(!m.trim()){s("Category name is required");return}try{s(null),i?(await l.updateCategory(i,m,y),d("Category updated successfully")):(await l.createCategory(m,y),d("Category created successfully")),await n(),T()}catch(a){s(a.message||"Failed to save category")}},q=async a=>{if(!t||t.type!=="category"||t.id!==a){o({type:"category",id:a}),setTimeout(()=>o(null),3e3);return}try{await l.deleteCategory(a),d("Category deleted successfully"),await n(),o(null)}catch(g){s(g.message||"Failed to delete category")}},O=a=>{w(a.id),b(a.name),p(a.description||"")},T=()=>{w(null),b(""),p("")},M=async()=>{if(!u.trim()){s("Tag name is required");return}try{s(null),c?(await l.updateTag(c,u),d("Tag updated successfully")):(await l.createTag(u),d("Tag created successfully")),await n(),S()}catch(a){s(a.message||"Failed to save tag")}},R=async a=>{if(!t||t.type!=="tag"||t.id!==a){o({type:"tag",id:a}),setTimeout(()=>o(null),3e3);return}try{await l.deleteTag(a),d("Tag deleted successfully"),await n(),o(null)}catch(g){s(g.message||"Failed to delete tag")}},U=a=>{C(a.id),k(a.name)},S=()=>{C(null),k("")};return r.useEffect(()=>{if(x){const a=setTimeout(()=>d(null),3e3);return()=>clearTimeout(a)}},[x]),B?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-dark-50 dark:to-dark-200 py-12 px-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-dark-100 rounded-2xl shadow-lg p-8 text-center",children:[e.jsx(z,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-dark-50 dark:to-dark-200 py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>F("/admin/blog"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 transition-colors",children:[e.jsx(I,{className:"w-4 h-4"}),"Back to Blog Posts"]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3",children:[e.jsx(J,{className:"w-8 h-8 text-blue-600"}),"Manage Categories & Tags"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Organize your blog posts with categories and tags"})]}),v&&e.jsxs("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(G,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-red-800 dark:text-red-200",children:"Error"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:v})]})]}),x&&e.jsxs("div",{className:"mb-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(H,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:x})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-100 rounded-2xl shadow-lg border border-gray-200 dark:border-dark-300 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-600 p-4 text-white",children:e.jsx("h2",{className:"text-xl font-bold",children:"Categories"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Category Name"}),e.jsx("input",{type:"text",value:m,onChange:a=>b(a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-dark-200 dark:text-gray-100",placeholder:"e.g., Resume Tips"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{value:y,onChange:a=>p(a.target.value),rows:2,className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-dark-200 dark:text-gray-100",placeholder:"Brief description"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:P,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[i?e.jsx(h,{className:"w-4 h-4"}):e.jsx(D,{className:"w-4 h-4"}),i?"Update":"Add"," Category"]}),i&&e.jsx("button",{onClick:T,className:"px-4 py-2 border border-gray-300 dark:border-dark-400 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-200 transition-colors",children:"Cancel"})]})]}),e.jsxs("div",{className:"space-y-2",children:[N.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-200 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-300 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a.name}),a.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(a),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Edit",children:e.jsx(h,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>q(a.id),className:`transition-colors ${(t==null?void 0:t.type)==="category"&&(t==null?void 0:t.id)===a.id?"text-red-600 dark:text-red-400":"text-gray-400 hover:text-red-600 dark:hover:text-red-400"}`,title:(t==null?void 0:t.type)==="category"&&(t==null?void 0:t.id)===a.id?"Click again to confirm":"Delete",children:e.jsx(E,{className:"w-4 h-4"})})]})]},a.id)),N.length===0&&e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No categories yet"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-100 rounded-2xl shadow-lg border border-gray-200 dark:border-dark-300 overflow-hidden",children:[e.jsx("div",{className:"bg-green-600 p-4 text-white",children:e.jsx("h2",{className:"text-xl font-bold",children:"Tags"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Tag Name"}),e.jsx("input",{type:"text",value:u,onChange:a=>k(a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-dark-200 dark:text-gray-100",placeholder:"e.g., ATS"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:M,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[c?e.jsx(h,{className:"w-4 h-4"}):e.jsx(D,{className:"w-4 h-4"}),c?"Update":"Add"," Tag"]}),c&&e.jsx("button",{onClick:S,className:"px-4 py-2 border border-gray-300 dark:border-dark-400 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-200 transition-colors",children:"Cancel"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[j.map(a=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 dark:bg-dark-200 rounded-full hover:bg-gray-100 dark:hover:bg-dark-300 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:a.name}),e.jsx("button",{onClick:()=>U(a),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Edit",children:e.jsx(h,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>R(a.id),className:`transition-colors ${(t==null?void 0:t.type)==="tag"&&(t==null?void 0:t.id)===a.id?"text-red-600 dark:text-red-400":"text-gray-400 hover:text-red-600 dark:hover:text-red-400"}`,title:(t==null?void 0:t.type)==="tag"&&(t==null?void 0:t.id)===a.id?"Click again to confirm":"Delete",children:e.jsx(E,{className:"w-3 h-3"})})]},a.id)),j.length===0&&e.jsx("p",{className:"w-full text-center text-gray-500 dark:text-gray-400 py-8",children:"No tags yet"})]})]})]})]})]})})};export{te as AdminBlogCategoriesManager};
