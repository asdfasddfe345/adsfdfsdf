import{c as n}from"./index-BbSeE-q4.js";import{s}from"./supabase-DdGTG0kf.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=n("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);class o{async getAllUpdates(e=!1){let t=s.from("job_updates").select("*").order("published_at",{ascending:!1});e&&(t=t.eq("is_active",!0));const{data:r,error:a}=await t;if(a)throw a;return r||[]}async getLatestUpdates(e=10){const{data:t,error:r}=await s.from("job_updates").select("*").eq("is_active",!0).order("published_at",{ascending:!1}).limit(e);if(r)throw r;return t||[]}async getFeaturedUpdates(){const{data:e,error:t}=await s.from("job_updates").select("*").eq("is_active",!0).eq("is_featured",!0).order("published_at",{ascending:!1}).limit(5);if(t)throw t;return e||[]}async getUpdatesByCategory(e){const{data:t,error:r}=await s.from("job_updates").select("*").eq("is_active",!0).eq("category",e).order("published_at",{ascending:!1});if(r)throw r;return t||[]}async getUpdateById(e){const{data:t,error:r}=await s.from("job_updates").select("*").eq("id",e).maybeSingle();if(r)throw r;return t}async createUpdate(e){var i;const{data:t}=await s.auth.getUser(),{data:r,error:a}=await s.from("job_updates").insert({...e,created_by:(i=t==null?void 0:t.user)==null?void 0:i.id}).select().single();if(a)throw a;return r}async updateUpdate(e,t){const{data:r,error:a}=await s.from("job_updates").update(t).eq("id",e).select().single();if(a)throw a;return r}async deleteUpdate(e){const{error:t}=await s.from("job_updates").delete().eq("id",e);if(t)throw t}async toggleActive(e,t){return this.updateUpdate(e,{is_active:t})}async toggleFeatured(e,t){return this.updateUpdate(e,{is_featured:t})}getCategoryLabel(e){return{market_trend:"Market Trend",hiring_news:"Hiring News",industry_update:"Industry Update",platform_update:"Platform Update",salary_insights:"Salary Insights",skill_demand:"Skill Demand"}[e]}getCategoryColor(e){return{market_trend:"bg-blue-100 text-blue-800 border-blue-200",hiring_news:"bg-green-100 text-green-800 border-green-200",industry_update:"bg-purple-100 text-purple-800 border-purple-200",platform_update:"bg-orange-100 text-orange-800 border-orange-200",salary_insights:"bg-yellow-100 text-yellow-800 border-yellow-200",skill_demand:"bg-pink-100 text-pink-800 border-pink-200"}[e]}validateMetadata(e){const t=[];try{JSON.stringify(e)}catch{t.push("Invalid JSON format")}return e.tags&&!Array.isArray(e.tags)&&t.push("Tags must be an array"),e.links&&!Array.isArray(e.links)&&t.push("Links must be an array"),e.links&&e.links.forEach((r,a)=>{(!r.title||!r.url)&&t.push(`Link ${a+1} must have both title and url`)}),{valid:t.length===0,errors:t}}generateDefaultMetadata(e){return{market_trend:{tags:["trending","analysis"],stats:{}},hiring_news:{tags:["hiring","opportunities"],companies:[]},industry_update:{tags:["industry","news"]},platform_update:{tags:["update","feature"]},salary_insights:{tags:["salary","compensation"],stats:{}},skill_demand:{tags:["skills","demand"],stats:{}}}[e]}async getStats(){const{data:e,error:t}=await s.from("job_updates").select("*");if(t)throw t;const r={total:(e==null?void 0:e.length)||0,active:(e==null?void 0:e.filter(a=>a.is_active).length)||0,featured:(e==null?void 0:e.filter(a=>a.is_featured).length)||0,byCategory:{market_trend:0,hiring_news:0,industry_update:0,platform_update:0,salary_insights:0,skill_demand:0}};return e==null||e.forEach(a=>{a.category in r.byCategory&&r.byCategory[a.category]++}),r}}const c=new o;export{g as B,c as j};
