import{j as e,m as N}from"./vendor-motion-_XdJ9pBm.js";import{u as v,r}from"./vendor-react-B4msnGgW.js";import{k as w,u as C,i as _,R as S,L as A,a as g,r as L,E,F,n as h,C as M,h as R}from"./index-BbSeE-q4.js";import{j as D}from"./jobsService--I8tbRfO.js";import{C as l}from"./Card-BkG_et63.js";import{F as I}from"./filter-DR1pDKYq.js";import{D as P}from"./download-DWlYtjQA.js";import{E as z}from"./external-link-CSmvpDBS.js";import{Z as H}from"./zap-BGmE2sY4.js";import"./vendor-pdf-B1igRwBP.js";import"./vendor-supabase-B_87WqdG.js";import"./vendor-forms-BxTF4-4_.js";const ee=({isAuthenticated:n,onShowAuth:o})=>{const i=v(),{isChristmasMode:J,colors:T}=w(),{user:U}=C(),[t,p]=r.useState(null),[b,c]=r.useState(!0),[x,m]=r.useState(null),[a,u]=r.useState({});r.useEffect(()=>{if(!n){o();return}d()},[n,a]);const d=async()=>{c(!0),m(null);try{const s=await D.getApplicationHistory(a);p(s)}catch(s){m(s instanceof Error?s.message:"Failed to load application history")}finally{c(!1)}},y=s=>{switch(s){case"submitted":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300"}},j=s=>{switch(s){case"submitted":return e.jsx(M,{className:"w-4 h-4"});case"pending":return e.jsx(h,{className:"w-4 h-4"});case"failed":return e.jsx(g,{className:"w-4 h-4"});default:return e.jsx(h,{className:"w-4 h-4"})}},f=s=>s==="auto"?e.jsx(H,{className:"w-4 h-4"}):e.jsx(R,{className:"w-4 h-4"});return n?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-dark-50 dark:to-dark-200 lg:pl-16 transition-colors duration-300",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40 dark:bg-dark-50 dark:border-dark-300",children:e.jsx("div",{className:"container-responsive",children:e.jsxs("div",{className:"flex items-center justify-between h-16 py-4",children:[e.jsxs("button",{onClick:()=>i("/jobs"),className:"lg:hidden btn-secondary h-11 px-4 rounded-xl inline-flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:block text-sm font-semibold",children:"Back to Jobs"})]}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"My Applications"}),e.jsxs("button",{onClick:d,className:"btn-primary h-11 px-4 rounded-xl flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Refresh"})]})]})})}),e.jsxs("div",{className:"container-responsive py-8",children:[t&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 sm:gap-5 mb-8",children:[{label:"Total",value:t.stats.total,color:"text-gray-900 dark:text-gray-100"},{label:"Submitted",value:t.stats.submitted,color:"text-green-600 dark:text-green-400"},{label:"Pending",value:t.stats.pending,color:"text-yellow-600 dark:text-yellow-400"},{label:"Manual",value:t.stats.manual,color:"text-blue-600 dark:text-blue-400"},{label:"Auto",value:t.stats.auto,color:"text-purple-600 dark:text-purple-400"},{label:"Failed",value:t.stats.failed,color:"text-red-600 dark:text-red-400"}].map(s=>e.jsxs(l,{padding:"md",className:"text-left space-y-1",children:[e.jsx("div",{className:`text-xl font-bold ${s.color}`,children:s.value}),e.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:s.label}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Updated live as you apply"})]},s.label))}),e.jsxs(l,{padding:"md",className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-800 dark:text-gray-200 mb-4",children:[e.jsx(I,{className:"w-5 h-5 text-blue-600 dark:text-neon-cyan-400"}),e.jsx("span",{children:"Filter applications"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("select",{value:a.status||"",onChange:s=>u({...a,status:s.target.value||void 0}),className:"h-11 rounded-xl px-3 border border-gray-300 focus:ring-2 focus:ring-blue-500 dark:bg-dark-200 dark:border-dark-300 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"submitted",children:"Submitted"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("select",{value:a.method||"",onChange:s=>u({...a,method:s.target.value||void 0}),className:"h-11 rounded-xl px-3 border border-gray-300 focus:ring-2 focus:ring-blue-500 dark:bg-dark-200 dark:border-dark-300 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"All Methods"}),e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"auto",children:"Auto"})]})]})]}),b?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(A,{className:"w-8 h-8 animate-spin text-blue-600 mr-3"}),e.jsx("span",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Loading applications..."})]}):x?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(g,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Error Loading Applications"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:x})]}):t&&t.applications.length>0?e.jsx("div",{className:"space-y-4",children:t.applications.map((s,k)=>e.jsxs(l,{as:N.div,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:k*.05},padding:"lg",className:"border border-gray-200 overflow-hidden dark:border-dark-300",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 leading-snug",children:s.role_title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium",children:s.company_name})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold flex items-center ${y(s.status)}`,children:[j(s.status),e.jsx("span",{className:"ml-1 capitalize",children:s.status})]}),e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold flex items-center dark:bg-blue-900/20 dark:text-blue-300",children:[f(s.application_method),e.jsx("span",{className:"ml-1 capitalize",children:s.application_method})]})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mb-4",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:["Applied on ",new Date(s.application_date).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.resume_pdf_url&&e.jsxs("a",{href:s.resume_pdf_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-blue-100 text-blue-700 px-3 py-2 rounded-xl hover:bg-blue-200 transition-colors text-sm font-semibold dark:bg-blue-900/20 dark:text-blue-300 dark:hover:bg-blue-900/30",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{children:"Resume"})]}),s.screenshot_url&&e.jsxs("a",{href:s.screenshot_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-green-100 text-green-700 px-3 py-2 rounded-xl hover:bg-green-200 transition-colors text-sm font-semibold dark:bg-green-900/20 dark:text-green-300 dark:hover:bg-green-900/30",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:"Screenshot"})]}),s.redirect_url&&e.jsxs("a",{href:s.redirect_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-purple-100 text-purple-700 px-3 py-2 rounded-xl hover:bg-purple-200 transition-colors text-sm font-semibold dark:bg-purple-900/20 dark:text-purple-300 dark:hover:bg-purple-900/30",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{children:"Job Link"})]})]})]},s.application_id))}):e.jsx("div",{className:"text-center py-12",children:e.jsxs(l,{className:"max-w-md mx-auto text-center space-y-4",children:[e.jsx("div",{className:"bg-gray-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto dark:bg-dark-200",children:e.jsx(F,{className:"w-10 h-10 text-gray-600 dark:text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"No Applications Yet"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 leading-relaxed",children:"Start applying to jobs to see your application history here."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 pt-2",children:[e.jsx("button",{onClick:()=>i("/jobs"),className:"btn-primary h-12 px-5 rounded-xl text-sm font-semibold",children:"Latest Jobs"}),e.jsx("button",{onClick:d,className:"btn-secondary h-12 px-5 rounded-xl text-sm font-semibold",children:"Refresh"})]})]})})]})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Authentication Required"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please sign in to view your application history."}),e.jsx("button",{onClick:o,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl transition-colors",children:"Sign In"})]})})};export{ee as MyApplicationsPage};
