var X=Object.defineProperty;var V=(v,e,t)=>e in v?X(v,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):v[e]=t;var z=(v,e,t)=>V(v,typeof e!="symbol"?e+"":e,t);import{j as r}from"./vendor-motion-_XdJ9pBm.js";import{r as j}from"./vendor-react-B4msnGgW.js";import{s as d,k as K,I as q,a as B,C as Y,L as F}from"./index-BbSeE-q4.js";import{U as Q}from"./upload-CurydzNZ.js";import{E as Z}from"./external-link-CSmvpDBS.js";import"./vendor-pdf-B1igRwBP.js";import"./vendor-supabase-B_87WqdG.js";import"./vendor-forms-BxTF4-4_.js";const H=v=>`/.netlify/functions${v}`,W=5e4,w=3,J=1e3,ee=3e4,te=()=>H("/ai-enrich"),re=()=>H("/ai-health");class oe{constructor(){z(this,"primaryModel","gpt-4o");z(this,"fallbackModels",["claude-3-5-haiku-20241022","deepseek-chat"])}async safeFetch(e,t={}){const{temperature:o=.7,maxTokens:i=2e3,model:s=this.primaryModel}=t;let n=0,l=J,p=s,g=0;for(;n<w;){const _={model:p,messages:e,temperature:o,max_tokens:i},f=new AbortController,b=setTimeout(()=>f.abort(),ee);try{const c=await fetch(te(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_),signal:f.signal});if(clearTimeout(b),!c.ok){const k=await c.text().catch(()=>"");let m=`AI API error: ${c.status}`;try{const x=JSON.parse(k);x.error&&(m=`AI API error: ${x.error} (Code: ${x.code||c.status})`)}catch{k&&(m=`AI API error: ${k} (Status: ${c.status})`)}if(c.status===400)throw new Error(`Bad Request. ${m}`);if(c.status===401)throw new Error("Authentication failed. Please check server configuration.");if(c.status===402)throw new Error("Insufficient AI credits. Please upgrade your plan.");if(c.status===504)throw new Error("Request timeout. The AI service took too long to respond.");if(c.status===429||c.status>=500){if(n++,n>=w&&g<this.fallbackModels.length){console.warn(`Primary model ${p} failed. Trying fallback: ${this.fallbackModels[g]}`),p=this.fallbackModels[g++],n=0,l=J;continue}if(n>=w&&g>=this.fallbackModels.length)throw new Error(`AI service unavailable after ${w} retries on all models. ${m}`);const x=Math.random()*400;console.warn(`AI API: ${m}. Retrying in ${(l+x)/1e3}s... (Attempt ${n}/${w})`),await new Promise(N=>setTimeout(N,l+x)),l*=2;continue}throw new Error(m)}return await c.json()}catch(c){if(clearTimeout(b),(c==null?void 0:c.name)==="AbortError"){if(n++,n>=w)throw new Error(`Request timeout after ${w} attempts. The AI service is not responding.`);console.warn(`Request timeout. Retrying... (Attempt ${n}/${w})`),await new Promise(h=>setTimeout(h,l)),l*=2;continue}if((c.message||"").includes("Failed to fetch")||(c.message||"").includes("NetworkError")){if(n++,n>=w)throw new Error(`Network error: Unable to connect to AI service after ${w} retries. Please check your internet connection.`);console.warn(`Network error: ${c.message}. Retrying in ${l/1e3}s... (Attempt ${n}/${w})`),await new Promise(h=>setTimeout(h,l)),l*=2;continue}throw c}}throw new Error(`Failed after ${w} retries`)}async enrichPortfolioContent(e){const{resumeText:t,userType:o,targetRole:i="Professional Role",name:s="",email:n="",phone:l="",location:p="",linkedinUrl:g="",githubUrl:_=""}=e;let f=t;if(t.length>W){console.log(`Resume too long (${t.length} chars). Auto-condensing...`);try{f=await this.condenseResumeText({resumeText:t,userType:o,targetCharLimit:45e3}),console.log(`Resume condensed from ${t.length} to ${f.length} characters`)}catch(m){console.error("Failed to condense resume with AI:",m),f=this.smartTruncateResume(t,45e3),console.log(`Fallback truncation: ${f.length} characters`)}}const b=this.getSystemPromptForUserType(o),c=this.getUserPromptForEnrichment({resumeText:f,userType:o,targetRole:i,name:s,email:n,phone:l,location:p,linkedinUrl:g,githubUrl:_}),h=await this.safeFetch([{role:"system",content:b},{role:"user",content:c}],{temperature:.25,maxTokens:3e3});if(!h.choices||h.choices.length===0)throw new Error("No response from AI service");const k=h.choices[0].message.content.trim();return this.parseAndValidateJSON(k)}async condenseResumeText(e){const{resumeText:t,userType:o,targetCharLimit:i=45e3}=e,s=`You are an expert resume optimizer. Your task is to condense a lengthy resume while preserving ALL critical information.

Original Resume (${t.length} characters):
${t}

User Type: ${o}
Target Length: Under ${i} characters

CRITICAL REQUIREMENTS:
1. PRESERVE ALL: Contact information, names, dates, company names, job titles, education details
2. KEEP: All technical skills, certifications, and key achievements
3. CONDENSE: Remove redundant descriptions, verbose language, and repetitive points
4. OPTIMIZE: Use concise bullet points and remove filler words
5. MAINTAIN: Professional tone and readability
6. PRIORITIZE: Most recent and relevant experience

Your goal: Reduce length to under ${i} characters while keeping the resume comprehensive and impactful.

Return ONLY the condensed resume text, no explanations or markdown formatting.`,l=(await this.safeFetch([{role:"user",content:s}],{temperature:.3,maxTokens:4e3})).choices[0].message.content.trim();return l.length>=t.length?this.smartTruncateResume(t,i):l}smartTruncateResume(e,t){const o={contact:"",experience:"",education:"",skills:""};o.contact=e.substring(0,500);const i=e.match(/(?:experience|work history|employment)([\s\S]{0,10000})/i);i&&(o.experience=i[1].substring(0,8e3));const s=e.match(/(?:education|academic)([\s\S]{0,3000})/i);s&&(o.education=s[1].substring(0,2e3));const n=e.match(/(?:skills|technical skills|competencies)([\s\S]{0,2000})/i);return n&&(o.skills=n[1].substring(0,1500)),`${o.contact}

EXPERIENCE
${o.experience}

EDUCATION
${o.education}

SKILLS
${o.skills}`.substring(0,t)}async generateAboutSection(e){const{userType:t,targetRole:o,experience:i="",skills:s=[]}=e,n=`You are an expert portfolio writer specializing in creating compelling About sections.

Generate a compelling 2-3 paragraph About section for a ${t} targeting ${o} role.

${i?`Experience: ${i}`:""}
${s.length>0?`Key Skills: ${s.join(", ")}`:""}

Requirements:
1. Write in first person (use "I" and "my")
2. Start with a strong opening highlighting key strengths
3. Showcase relevant experience and achievements
4. Include specific skills and technologies
5. End with career goals and value proposition
6. Keep it professional yet personable
7. Total length: 150-250 words

Return ONLY the About section text, no additional formatting or explanations.`;return(await this.safeFetch([{role:"user",content:n}],{temperature:.8,maxTokens:500})).choices[0].message.content.trim()}async optimizeForSEO(e){const{name:t,targetRole:o,skills:i,experience:s=""}=e,n=`You are an SEO expert specializing in portfolio optimization.

Generate SEO metadata for a portfolio website:
- Name: ${t}
- Target Role: ${o}
- Skills: ${i.join(", ")}
${s?`- Experience: ${s}`:""}

Generate:
1. SEO Title (60 characters max, include name and role)
2. Meta Description (155 characters max, compelling and keyword-rich)
3. Keywords (array of 8-12 relevant keywords)

Return ONLY valid JSON:
{
  "title": "...",
  "description": "...",
  "keywords": ["...", "..."]
}`,p=(await this.safeFetch([{role:"user",content:n}],{temperature:.5,maxTokens:300})).choices[0].message.content.trim();return this.parseAndValidateJSON(p)}async generateProjectBullets(e){const{title:t,description:o,techStack:i=[]}=e,s=`You are an expert at writing compelling project descriptions.

Project: ${t}
Description: ${o}
${i.length>0?`Tech Stack: ${i.join(", ")}`:""}

Generate exactly 3 bullet points that:
1. Start with strong action verbs
2. Highlight technical achievements
3. Include specific technologies and metrics
4. Each bullet is 9-10 words maximum
5. Focus on impact and results

Return ONLY a JSON array: ["bullet1", "bullet2", "bullet3"]`,l=(await this.safeFetch([{role:"user",content:s}],{temperature:.7,maxTokens:300})).choices[0].message.content.trim();return this.parseAndValidateJSON(l)}async generateSkillCategories(e){const{resumeText:t,targetRole:o}=e,i=`You are an expert at organizing skills into relevant categories.

Resume Context:
${t.substring(0,2e3)}

Target Role: ${o}

Generate 6-8 skill categories with 5-8 skills each. Categories should be relevant to the role.

Common categories: Programming Languages, Frameworks, Databases, Cloud/DevOps, Tools, Soft Skills

Return ONLY valid JSON:
[
  {"category": "Category Name", "skills": ["skill1", "skill2", "..."]},
  {"category": "...", "skills": ["...", "..."]}
]`,n=(await this.safeFetch([{role:"user",content:i}],{temperature:.6,maxTokens:800})).choices[0].message.content.trim();return this.parseAndValidateJSON(n)}getSystemPromptForUserType(e){const t="You are an expert portfolio content creator and career coach. Your task is to analyze resume content and generate optimized, compelling portfolio content.";return e==="experienced"?`${t}
Focus on EXPERIENCED PROFESSIONALS:
1. Emphasize leadership, achievements, and career progression
2. Quantify impact with specific metrics and results
3. Highlight technical expertise and domain knowledge
4. Showcase strategic thinking and problem-solving
5. Include professional summary (not career objective)`:e==="student"?`${t}
Focus on COLLEGE STUDENTS:
1. Emphasize academic achievements and GPA
2. Highlight internships, projects, and coursework
3. Showcase learning ability and technical skills
4. Include career objective focusing on learning goals
5. Emphasize potential and enthusiasm`:`${t}
Focus on FRESH GRADUATES:
1. Balance education and practical experience
2. Highlight projects, internships, and certifications
3. Showcase technical skills and tools
4. Include career objective for entry-level roles
5. Emphasize adaptability and eagerness to learn`}getUserPromptForEnrichment(e){return`Analyze the following resume and generate optimized portfolio content.

Resume Content:
${e.resumeText}

User Details:
- Type: ${e.userType}
- Target Role: ${e.targetRole}
- Name: ${e.name||"Extract from resume"}
- Email: ${e.email||"Extract from resume"}
- Phone: ${e.phone||"Extract from resume"}
- Location: ${e.location||"Extract from resume"}
- LinkedIn: ${e.linkedinUrl||"Not provided"}
- GitHub: ${e.githubUrl||"Not provided"}

Generate a complete portfolio data structure in JSON format:

{
  "profile": {
    "name": "...",
    "email": "...",
    "phone": "...",
    "location": "...",
    "linkedinUrl": "${e.linkedinUrl||""}",
    "githubUrl": "${e.githubUrl||""}"
  },
  "about": "Compelling 2-3 paragraph About section (150-250 words)",
  "targetRole": "Specific role title",
  "experience": [
    { "role": "...", "company": "...", "duration": "...", "bullets": ["...", "...", "..."] }
  ],
  "projects": [
    { "title": "...", "description": "Brief description", "techStack": ["...", "..."], "bullets": ["...", "...", "..."], "links": {"github": "...", "demo": "..."} }
  ],
  "education": [
    { "degree": "...", "institution": "...", "year": "...", "gpa": "...", "location": "..." }
  ],
  "skills": [ { "category": "...", "items": ["...", "..."] } ],
  "certifications": [ { "title": "...", "issuer": "...", "date": "..." } ],
  "achievements": ["...", "...", "..."]
}

Critical Requirements:
1. Use ONLY provided LinkedIn and GitHub URLs - do not modify or generate new ones
2. Extract accurate information from resume
3. Write compelling, action-oriented content
4. Use strong verbs and quantify achievements
5. Ensure all content is professional and ATS-friendly
6. Return ONLY valid JSON, no markdown or explanations`}parseAndValidateJSON(e){let t=e.trim();t=t.replace(/^[\uFEFF\u200B]+/,"");const o=t.match(/```json\s*([\s\S]*?)\s*```/);o!=null&&o[1]?t=o[1].trim():t=t.replace(/```json/g,"").replace(/```/g,"").trim();try{return JSON.parse(t)}catch(i){throw console.error("JSON parsing error:",i),console.error("Raw response (first 500 chars):",t.substring(0,500)),new Error("Invalid JSON response from AI service. Please try again.")}}isConfigured(){return!0}async checkHealth(){try{const t=await(await fetch(re())).json();return(t==null?void 0:t.agentRouterConfigured)===!0}catch(e){return console.error("Health check failed:",e),!1}}}const G=new oe;class ie{async createPortfolio(e){var g,_,f,b,c,h,k,m,x,N,y,I,P,S,R,E,T,$,D,O,M;const{data:{user:t}}=await d.auth.getUser();if(!t)throw new Error("User not authenticated");let o=e.resumeText||"";if(e.resumeFile?o=await this.extractTextFromFile(e.resumeFile):e.linkedinPaste&&(o=e.linkedinPaste),!o)throw new Error("Please provide resume text, upload a file, or paste LinkedIn content");const i=await G.enrichPortfolioContent({resumeText:o,userType:e.userType,targetRole:e.targetRole,name:(g=e.profile)==null?void 0:g.name,email:(_=e.profile)==null?void 0:_.email,phone:(f=e.profile)==null?void 0:f.phone,location:(b=e.profile)==null?void 0:b.location,linkedinUrl:(c=e.profile)==null?void 0:c.linkedinUrl,githubUrl:(h=e.profile)==null?void 0:h.githubUrl}),s=await G.optimizeForSEO({name:((k=i.profile)==null?void 0:k.name)||((m=e.profile)==null?void 0:m.name)||"Professional",targetRole:e.targetRole||"Professional",skills:((x=i.skills)==null?void 0:x.flatMap(L=>L.items||[]))||[],experience:((y=(N=i.experience)==null?void 0:N[0])==null?void 0:y.role)||""}),n={user_id:t.id,full_name:((I=i.profile)==null?void 0:I.name)||((P=e.profile)==null?void 0:P.name)||"",email:((S=i.profile)==null?void 0:S.email)||((R=e.profile)==null?void 0:R.email)||"",phone:((E=i.profile)==null?void 0:E.phone)||((T=e.profile)==null?void 0:T.phone)||"",location:(($=i.profile)==null?void 0:$.location)||((D=e.profile)==null?void 0:D.location)||"",linkedin_url:((O=e.profile)==null?void 0:O.linkedinUrl)||"",github_url:((M=e.profile)==null?void 0:M.githubUrl)||"",user_type:e.userType,target_role:e.targetRole||i.targetRole||"",professional_summary:i.professionalSummary||i.about||"",career_objective:i.careerObjective||"",work_experience:i.experience||[],projects:i.projects||[],education:i.education||[],skills:i.skills||[],certifications:i.certifications||[],achievements:i.achievements||[],additional_sections:i.additionalSections||[],seo_title:s.title,seo_description:s.description,seo_keywords:s.keywords,original_resume_text:o,is_published:!1},{data:l,error:p}=await d.from("portfolio_data").insert(n).select().single();if(p)throw console.error("Error saving portfolio:",p),new Error("Failed to save portfolio data");return{portfolioId:l.id,data:this.mapToPortfolioData(l)}}async getPortfolio(e){const{data:t,error:o}=await d.from("portfolio_data").select("*").eq("id",e).single();if(o)throw console.error("Error fetching portfolio:",o),new Error("Portfolio not found");return this.mapToPortfolioData(t)}async getUserPortfolios(){const{data:{user:e}}=await d.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:t,error:o}=await d.from("portfolio_data").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(o)throw console.error("Error fetching portfolios:",o),new Error("Failed to fetch portfolios");return t.map(this.mapToPortfolioData)}async updatePortfolio(e,t){const{data:{user:o}}=await d.auth.getUser();if(!o)throw new Error("User not authenticated");const i={};t.profile&&(t.profile.name&&(i.full_name=t.profile.name),t.profile.email&&(i.email=t.profile.email),t.profile.phone&&(i.phone=t.profile.phone),t.profile.location&&(i.location=t.profile.location),t.profile.linkedinUrl!==void 0&&(i.linkedin_url=t.profile.linkedinUrl),t.profile.githubUrl!==void 0&&(i.github_url=t.profile.githubUrl)),t.targetRole!==void 0&&(i.target_role=t.targetRole),t.professionalSummary!==void 0&&(i.professional_summary=t.professionalSummary),t.careerObjective!==void 0&&(i.career_objective=t.careerObjective),t.experience!==void 0&&(i.work_experience=t.experience),t.projects!==void 0&&(i.projects=t.projects),t.education!==void 0&&(i.education=t.education),t.skills!==void 0&&(i.skills=t.skills),t.certifications!==void 0&&(i.certifications=t.certifications),t.achievements!==void 0&&(i.achievements=t.achievements),t.additionalSections!==void 0&&(i.additional_sections=t.additionalSections);const{error:s}=await d.from("portfolio_data").update(i).eq("id",e).eq("user_id",o.id);if(s)throw console.error("Error updating portfolio:",s),new Error("Failed to update portfolio")}async deletePortfolio(e){const{data:{user:t}}=await d.auth.getUser();if(!t)throw new Error("User not authenticated");const{error:o}=await d.from("portfolio_data").delete().eq("id",e).eq("user_id",t.id);if(o)throw console.error("Error deleting portfolio:",o),new Error("Failed to delete portfolio")}async createTemplate(e,t){const{data:{user:o}}=await d.auth.getUser();if(!o)throw new Error("User not authenticated");const i={user_id:o.id,portfolio_data_id:e,template_id:t,accent_color:"#3B82F6",font_family:"Inter",color_mode:"light",visible_sections:{contact:!0,about:!0,summary:!0,objective:!0,skills:!0,experience:!0,projects:!0,education:!0,certifications:!0,achievements:!0,additionalSections:!0},section_order:["contact","about","skills","experience","projects","education","certifications","achievements"]},{data:s,error:n}=await d.from("portfolio_templates").insert(i).select().single();if(n)throw console.error("Error creating template:",n),new Error("Failed to create template");return s.id}async updateTemplate(e,t){const{data:{user:o}}=await d.auth.getUser();if(!o)throw new Error("User not authenticated");const i={};t.templateId!==void 0&&(i.template_id=t.templateId),t.accentColor!==void 0&&(i.accent_color=t.accentColor),t.fontFamily!==void 0&&(i.font_family=t.fontFamily),t.colorMode!==void 0&&(i.color_mode=t.colorMode),t.visibleSections!==void 0&&(i.visible_sections=t.visibleSections),t.sectionOrder!==void 0&&(i.section_order=t.sectionOrder),t.customCss!==void 0&&(i.custom_css=t.customCss);const{error:s}=await d.from("portfolio_templates").update(i).eq("portfolio_data_id",e).eq("user_id",o.id);if(s)throw console.error("Error updating template:",s),new Error("Failed to update template")}async getTemplate(e){const{data:t,error:o}=await d.from("portfolio_templates").select("*").eq("portfolio_data_id",e).maybeSingle();return o?(console.error("Error fetching template:",o),null):t?this.mapToPortfolioTemplate(t):null}async checkDeploymentCredits(){const{data:{user:e}}=await d.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:t,error:o}=await d.rpc("check_portfolio_deployment_credits",{p_user_id:e.id});return o?(console.error("Error checking credits:",o),!1):t}async createDeployment(e,t={}){const{data:{user:o}}=await d.auth.getUser();if(!o)throw new Error("User not authenticated");if(!await this.checkDeploymentCredits())throw new Error("Insufficient deployment credits. Please upgrade your plan.");const s=t.subdomain||`${o.id.substring(0,8)}-portfolio`,n=`https://${s}.netlify.app`,l={user_id:o.id,portfolio_data_id:e,deployment_url:n,subdomain:s,custom_domain:t.customDomain,status:"pending"},{data:p,error:g}=await d.from("portfolio_deployments").insert(l).select().single();if(g)throw console.error("Error creating deployment:",g),new Error("Failed to create deployment");return p.id}async updateDeploymentStatus(e,t,o){const i={status:t};o!=null&&o.buildLog&&(i.build_log=o.buildLog),o!=null&&o.errorMessage&&(i.error_message=o.errorMessage),o!=null&&o.netlifySiteId&&(i.netlify_site_id=o.netlifySiteId),o!=null&&o.netlifyDeployId&&(i.netlify_deploy_id=o.netlifyDeployId),t==="success"&&(i.deployed_at=new Date().toISOString());const{error:s}=await d.from("portfolio_deployments").update(i).eq("id",e);if(s)throw console.error("Error updating deployment status:",s),new Error("Failed to update deployment status")}async getDeployment(e){const{data:t,error:o}=await d.from("portfolio_deployments").select("*").eq("id",e).single();if(o)throw console.error("Error fetching deployment:",o),new Error("Deployment not found");return this.mapToPortfolioDeployment(t)}async getUserDeployments(){const{data:{user:e}}=await d.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:t,error:o}=await d.from("portfolio_deployments").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(o)throw console.error("Error fetching deployments:",o),new Error("Failed to fetch deployments");return t.map(this.mapToPortfolioDeployment)}async extractTextFromFile(e){return new Promise((t,o)=>{const i=new FileReader;i.onload=async s=>{var n;try{const l=(n=s.target)==null?void 0:n.result;t(l)}catch{o(new Error("Failed to extract text from file"))}},i.onerror=()=>o(new Error("Failed to read file")),i.readAsText(e)})}mapToPortfolioData(e){return{id:e.id,userId:e.user_id,profile:{name:e.full_name,email:e.email,phone:e.phone,location:e.location,linkedinUrl:e.linkedin_url,githubUrl:e.github_url,portfolioUrl:e.portfolio_url},about:e.professional_summary||e.career_objective,userType:e.user_type,targetRole:e.target_role,professionalSummary:e.professional_summary,careerObjective:e.career_objective,experience:e.work_experience||[],projects:e.projects||[],education:e.education||[],skills:e.skills||[],certifications:e.certifications||[],achievements:e.achievements||[],additionalSections:e.additional_sections||[],seo:e.seo_title?{title:e.seo_title,description:e.seo_description,keywords:e.seo_keywords||[]}:void 0,originalResumeText:e.original_resume_text,jobDescriptionContext:e.job_description_context,isPublished:e.is_published,createdAt:e.created_at,updatedAt:e.updated_at}}mapToPortfolioTemplate(e){return{id:e.id,userId:e.user_id,portfolioDataId:e.portfolio_data_id,templateId:e.template_id,accentColor:e.accent_color,fontFamily:e.font_family,colorMode:e.color_mode,visibleSections:e.visible_sections,sectionOrder:e.section_order,customCss:e.custom_css,customFonts:e.custom_fonts,createdAt:e.created_at,updatedAt:e.updated_at}}mapToPortfolioDeployment(e){return{id:e.id,userId:e.user_id,portfolioDataId:e.portfolio_data_id,netlifySiteId:e.netlify_site_id,netlifyDeployId:e.netlify_deploy_id,deploymentUrl:e.deployment_url,customDomain:e.custom_domain,subdomain:e.subdomain,status:e.status,buildLog:e.build_log,errorMessage:e.error_message,viewCount:e.view_count,shareCount:e.share_count,analyticsData:e.analytics_data,deployedAt:e.deployed_at,createdAt:e.created_at,updatedAt:e.updated_at}}}const U=new ie,se={aurum:{id:"aurum",name:"Aurum",description:"Minimal resume-first design with clean typography",category:"Minimal",preview:"/templates/aurum-preview.png",defaultAccentColor:"#1F2937",defaultFont:"Inter",features:["Clean layout","Typography-focused","Professional"],bestFor:["Backend Developers","Data Analysts","Researchers"]},nova:{id:"nova",name:"Nova",description:"Hero card layout with KPI counters and skill badges",category:"Modern",preview:"/templates/nova-preview.png",defaultAccentColor:"#3B82F6",defaultFont:"Inter",features:["Hero section","Metrics display","Interactive badges"],bestFor:["Frontend Developers","UI/UX Designers","Product Managers"]},slate:{id:"slate",name:"Slate",description:"Masonry projects grid with case-study detail pages",category:"Creative",preview:"/templates/slate-preview.png",defaultAccentColor:"#8B5CF6",defaultFont:"Poppins",features:["Project showcase","Case studies","Visual portfolio"],bestFor:["Designers","Full-stack Developers","Creative Professionals"]},vector:{id:"vector",name:"Vector",description:"Neon dark theme with metric chips and timeline",category:"Tech",preview:"/templates/vector-preview.png",defaultAccentColor:"#10B981",defaultFont:"Roboto Mono",features:["Dark mode","Neon accents","Timeline view"],bestFor:["DevOps Engineers","Cloud Architects","System Administrators"]},scholar:{id:"scholar",name:"Scholar",description:"Academic-focused layout with publications section",category:"Academic",preview:"/templates/scholar-preview.png",defaultAccentColor:"#DC2626",defaultFont:"Merriweather",features:["Publications","Research focus","Citation-ready"],bestFor:["Researchers","Data Scientists","ML Engineers"]}},C=5e4,ne=5*1024*1024,xe=({isAuthenticated:v,onShowAuth:e})=>{const{isChristmasMode:t,colors:o}=K(),[i,s]=j.useState("type"),[n,l]=j.useState("fresher"),[p,g]=j.useState(""),[_,f]=j.useState(""),[b,c]=j.useState(null),[h,k]=j.useState("nova"),[m,x]=j.useState(!1),[N,y]=j.useState(""),[I,P]=j.useState(""),[S,R]=j.useState(""),[E,T]=j.useState(0),$=a=>{var A;const u=(A=a.target.files)==null?void 0:A[0];if(u){if(u.size>ne){y("File size must be less than 5MB");return}if(!["text/plain","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(u.type)){y("Please upload a valid file (TXT, PDF, DOC, DOCX)");return}c(u),f(""),T(0),y("")}},D=a=>{const u=a.target.value,A=u.length;f(u),T(A),A>C,y("")},O=async()=>{if(!v){e();return}if(!_&&!b){y("Please provide resume text or upload a file");return}x(!0),y(""),s("processing");try{const a=await U.createPortfolio({resumeText:_,resumeFile:b||void 0,userType:n,targetRole:p||void 0});P(a.portfolioId),await U.createTemplate(a.portfolioId,h),s("success")}catch(a){console.error("Error creating portfolio:",a);let u=a.message||"Failed to create portfolio. Please try again.";u.includes("Invalid JSON")&&(u="There was an issue processing your resume. Please try uploading a different format or paste the text directly."),y(u),s("upload")}finally{x(!1)}},M=async()=>{if(I){x(!0),y("");try{const a=await U.createDeployment(I),u=await U.getDeployment(a);R(u.deploymentUrl),await U.updateDeploymentStatus(a,"success",{netlifySiteId:"demo-site-id",netlifyDeployId:"demo-deploy-id"})}catch(a){console.error("Error deploying portfolio:",a),y(a.message||"Failed to deploy portfolio")}finally{x(!1)}}},L=()=>{const a=E/C*100;return a>=100||a>=80?"text-orange-600":a>=60?"text-yellow-600":"text-gray-600"};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 py-12 px-4",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"AI Portfolio Builder"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Create a stunning portfolio website in minutes with AI-powered content generation"})]}),i==="type"&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Select Your Profile Type"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:["fresher","student","experienced"].map(a=>r.jsx("button",{onClick:()=>l(a),className:`p-6 border-2 rounded-xl transition-all ${n===a?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold text-lg capitalize mb-2",children:a}),r.jsxs("p",{className:"text-sm text-gray-600",children:[a==="fresher"&&"Fresh graduate looking for opportunities",a==="student"&&"Current student seeking internships",a==="experienced"&&"Professional with work experience"]})]})},a))}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Role (Optional)"}),r.jsx("input",{type:"text",value:p,onChange:a=>g(a.target.value),placeholder:"e.g., Full Stack Developer, Data Analyst",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsx("button",{onClick:()=>s("upload"),className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Continue"})]}),i==="upload"&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Upload Your Resume"}),r.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(q,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-green-800",children:[r.jsx("p",{className:"font-medium mb-1",children:"Smart Resume Processing"}),r.jsxs("p",{children:["Our AI automatically optimizes long resumes! If your resume exceeds ",C.toLocaleString()," characters, we'll intelligently condense it while preserving all key information."]})]})]})}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Resume File"}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors",children:[r.jsx("input",{type:"file",accept:".txt,.pdf,.doc,.docx",onChange:$,className:"hidden",id:"resume-upload"}),r.jsxs("label",{htmlFor:"resume-upload",className:"cursor-pointer",children:[r.jsx(Q,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:b?r.jsx("span",{className:"text-green-600 font-medium",children:b.name}):"Click to upload or drag and drop"}),r.jsx("p",{className:"text-xs text-gray-500",children:"TXT, PDF, DOC, DOCX (Max 5MB)"})]})]})]}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("div",{className:"flex-grow border-t border-gray-300"}),r.jsx("span",{className:"px-4 text-sm text-gray-500",children:"OR"}),r.jsx("div",{className:"flex-grow border-t border-gray-300"})]})}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Paste Resume Text"}),r.jsxs("span",{className:`text-xs font-medium ${L()}`,children:[E.toLocaleString()," characters",E>C&&r.jsx("span",{className:"ml-1 text-green-600",children:"(will auto-optimize)"})]})]}),r.jsx("textarea",{value:_,onChange:D,placeholder:"Paste your resume content or LinkedIn profile...",rows:12,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),E>C&&r.jsxs("p",{className:"mt-2 text-sm text-green-600 flex items-center gap-1",children:[r.jsx(q,{className:"h-4 w-4"}),"Your resume will be automatically optimized to fit the character limit while preserving all important details."]})]}),N&&r.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[r.jsx(B,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-700",children:N})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:()=>s("type"),className:"flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Back"}),r.jsx("button",{onClick:()=>s("template"),disabled:!_&&!b,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Continue to Templates"})]})]}),i==="template"&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Choose Your Template"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:Object.values(se).map(a=>r.jsxs("button",{onClick:()=>k(a.id),className:`text-left p-6 border-2 rounded-xl transition-all ${h===a.id?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":"border-gray-200 hover:border-blue-300"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsx("h3",{className:"font-semibold text-lg",children:a.name}),h===a.id&&r.jsx(Y,{className:"h-6 w-6 text-blue-500"})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),r.jsx("div",{className:"flex flex-wrap gap-2",children:a.bestFor.map(u=>r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:u},u))})]},a.id))}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:()=>s("upload"),className:"flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Back"}),r.jsx("button",{onClick:O,disabled:m,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?r.jsxs(r.Fragment,{children:[r.jsx(F,{className:"h-5 w-5 animate-spin"}),"Creating Portfolio..."]}):"Create Portfolio"})]})]}),i==="processing"&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-12 text-center",children:[r.jsx(F,{className:"h-16 w-16 animate-spin text-blue-600 mx-auto mb-6"}),r.jsx("h2",{className:"text-2xl font-semibold mb-3",children:"Creating Your Portfolio"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Our AI is analyzing your resume and generating optimized content..."}),r.jsx("div",{className:"max-w-md mx-auto",children:r.jsxs("div",{className:"space-y-3 text-left",children:[r.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[r.jsx(Y,{className:"h-5 w-5 text-green-500"}),r.jsx("span",{children:"Parsing resume content"})]}),E>C&&r.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[r.jsx(F,{className:"h-5 w-5 animate-spin text-orange-500"}),r.jsx("span",{children:"Optimizing resume length with AI..."})]}),r.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[r.jsx(F,{className:"h-5 w-5 animate-spin text-blue-500"}),r.jsx("span",{children:"Generating AI-enhanced content"})]}),r.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-400",children:[r.jsx("div",{className:"h-5 w-5 border-2 border-gray-300 rounded-full"}),r.jsx("span",{children:"Optimizing for SEO"})]})]})})]}),i==="success"&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-12 text-center",children:[r.jsx(Y,{className:"h-16 w-16 text-green-500 mx-auto mb-6"}),r.jsx("h2",{className:"text-2xl font-semibold mb-3",children:"Portfolio Created Successfully!"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Your portfolio is ready. Deploy it to Netlify to make it live."}),S?r.jsxs("div",{className:"mb-8 p-6 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("p",{className:"text-sm text-green-800 mb-3",children:"Your portfolio is now live!"}),r.jsxs("a",{href:S,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium",children:[S,r.jsx(Z,{className:"h-4 w-4"})]})]}):r.jsx("button",{onClick:M,disabled:m,className:"bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 mx-auto",children:m?r.jsxs(r.Fragment,{children:[r.jsx(F,{className:"h-5 w-5 animate-spin"}),"Deploying..."]}):"Deploy to Netlify"}),N&&r.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[r.jsx(B,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-700",children:N})]}),r.jsx("button",{onClick:()=>{s("type"),f(""),c(null),P(""),R(""),y(""),T(0)},className:"mt-6 text-blue-600 hover:text-blue-700 font-medium",children:"Create Another Portfolio"})]})]})})};export{xe as PortfolioBuilderPage};
